{"version":3,"sources":["webpack:///./src/components/emails/Span.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./src/components/notes/NoteEditor.vue?8ae5","webpack:///./src/components/notes/NoteEditor.vue?9194","webpack:///./node_modules/fuse.js/dist/fuse.esm.js","webpack:///src/components/notes/NoteEditor.vue","webpack:///./src/components/notes/NoteEditor.vue?2978","webpack:///./src/components/notes/NoteEditor.vue?4338","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js"],"names":["Span","variableClass","dom","innerText","attrs","id","label","group","inline","content","selectable","atom","toDOM","node","class","options","parseDOM","tag","getAttrs","getAttribute","getLabel","getContent","schema","Fragment","fromJSON","type","text","replaceText","nodes","name","Node","classof","module","exports","value","TypeError","render","_vm","this","_h","$createElement","_c","_self","extensions","outlined","nativeExtensions","on","onInit","scopedSlots","_u","key","fn","ref","commands","isActive","staticClass","_g","_b","undo","_v","redo","heading","level","$event","bold","italic","underline","ordered_list","bullet_list","isSelected","openEditorLink","typeItem","openEditorImage","_e","isOpenEditorLink","closeEditorLink","i","arguments","length","argsArray","Array","saveLink","apply","link","concat","isOpenEditorImage","itemId","closeEditorImage","saveImage","image","model","callback","$$v","expression","_s","isMaxSize","maxSize","directives","rawName","positionX","positionY","tooltipShow","_l","itemUser","index","navigatedUserIndex","selectUser","user","lastName","staticRenderFns","isArray","getTag","INFINITY","baseToString","result","isString","isNumber","isBoolean","isObjectLike","isObject","isDefined","undefined","isBlank","trim","Object","prototype","toString","call","INCORRECT_INDEX_TYPE","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","PATTERN_LENGTH_TOO_LARGE","max","MISSING_KEY_PROPERTY","INVALID_KEY_WEIGHT_VALUE","hasOwn","hasOwnProperty","KeyStore","keys","_keys","_keyMap","totalWeight","forEach","obj","createKey","weight","push","keyId","JSON","stringify","path","src","createKeyPath","createKeyId","Error","split","join","get","list","arr","deepGet","len","MatchOptions","includeMatches","findAllMatches","minMatchCharLength","BasicOptions","isCaseSensitive","includeScore","shouldSort","sortFn","a","b","score","idx","FuzzyOptions","location","threshold","distance","AdvancedOptions","useExtendedSearch","getFn","ignoreLocation","ignoreFieldNorm","Config","SPACE","norm","mantissa","cache","Map","m","Math","pow","numTokens","match","has","sqrt","n","parseFloat","round","set","clear","FuseIndex","isCreated","setIndexRecords","docs","records","_keysMap","doc","docIndex","_addString","_addObject","size","splice","item","record","v","$","keyIndex","subRecords","stack","nestedArrIndex","pop","subRecord","k","createIndex","myIndex","setKeys","map","setSources","create","parseIndex","data","computeScore","pattern","errors","currentLocation","expectedLocation","accuracy","proximity","abs","convertMaskToIndices","matchmask","indices","start","end","MAX_BITS","search","patternAlphabet","patternLen","textLen","min","currentThreshold","bestLocation","computeMatches","matchMask","indexOf","lastBitArr","finalScore","binMax","mask","binMin","binMid","floor","finish","bitArr","j","charMatch","charAt","isMatch","createPatternAlphabet","char","BitapSearch","toLowerCase","chunks","addChunk","startIndex","alphabet","remainder","substr","allIndices","totalScore","hasMatches","BaseMatch","getMatch","multiRegex","singleRegex","exp","matches","ExactMatch","super","InverseExactMatch","PrefixExactMatch","startsWith","InversePrefixExactMatch","SuffixExactMatch","endsWith","InverseSuffixExactMatch","FuzzyMatch","_bitapSearch","searchIn","IncludeMatch","searchers","searchersLen","SPACE_RE","OR_TOKEN","parseQuery","query","filter","results","queryItem","found","searcher","token","isMultiMatch","isSingleMatch","MultiMatchSet","Set","ExtendedSearch","_","numMatches","qLen","pLen","constructor","registeredSearchers","register","args","createSearcher","searcherClass","condition","LogicalOperator","AND","OR","KeyType","PATH","PATTERN","isExpression","isPath","isLeaf","convertToExplicit","parse","auto","next","isQueryPath","children","operator","computeScore$1","Number","EPSILON","transformMatches","refIndex","transformScore","format","transformers","transformer","Fuse","_keyStore","setCollection","_docs","_myIndex","add","predicate","removeAt","limit","_searchStringList","_searchObjectList","_searchLogical","sort","slice","evaluate","_findMatches","getValueForItemAtKeyId","res","child","resultMap","expResults","version","config","components","TiptapVuetify","EmailEditorImage","EmailEditorLink","mixins","props","message","String","default","reset","Boolean","isEdit","required","ownersList","suggestionRange","filteredUsers","insertMention","emailTemplates","userEnterpriseSignature","editor","files","isOpenEditorAttach","isOpenModalSignature","isOpenModalTemplate","watch","showSuggestions","queryAndResults","$emit","newValue","handler","resetvalues","immediate","newMessage","computed","hasFiles","hasResults","hasSearch","methods","setValueContent","isEditing","truncateString","str","num","removeFile","returnFileSize","number","command","alt","href","openEditorAttach","closeEditorAttach","saveFiles","upHandler","downHandler","enterHandler","range","userItem","apollo","component","VBtn","VIcon","VList","VListItem","VListItemTitle","VMenu","VTooltip","toInteger","thisNumberValue","repeat","fails","nativeToFixed","toFixed","x","acc","log","x2","multiply","c","c2","divide","dataToString","s","t","FORCED","target","proto","forced","fractionDigits","e","z","fractDigits","sign","RangeError"],"mappings":"sPAKqBA,E,oKACnB,WACE,MAAO,S,0BAGT,WACE,MAAO,CACLC,cAAe,c,sBAInB,SAASC,GACP,OAAOA,EAAIC,Y,kBAGb,WAAa,WACX,MAAO,CACLC,MAAO,CACLC,GAAI,GACJC,MAAO,IAETC,MAAO,SACPC,QAAQ,EACRC,QAAS,UACTC,YAAY,EACZC,MAAM,EACNC,MAAO,SAACC,GAAD,MAAU,CACf,OACA,CACEC,MAAO,EAAKC,QAAQd,cACpB,mBAAoBY,EAAKT,MAAMC,IAEjCQ,EAAKT,MAAME,QAEbU,SAAU,CACR,CACEC,IAAK,yBACLC,SAAU,SAAChB,GACT,IAAMG,EAAKH,EAAIiB,aAAa,oBACtBb,EAAQ,EAAKc,SAASlB,GAC5B,MAAO,CAAEG,KAAIC,UAEfe,WAAY,SAACnB,EAAKoB,GAChB,IAAMhB,EAAQ,EAAKc,SAASlB,GAC5B,OAAOqB,OAASC,SAASF,EAAQ,CAC/B,CACEG,KAAM,OACNC,KAAMpB,W,sBASpB,YAAqB,WAAVgB,EAAU,EAAVA,OACT,OAAO,SAAClB,GAAD,OAAWuB,eAAY,KAAML,EAAOM,MAAM,EAAKC,MAAOzB,Q,GAzD/B0B,S,uBCLlC,IAAIC,EAAU,EAAQ,QAItBC,EAAOC,QAAU,SAAUC,GACzB,GAAoB,iBAATA,GAAuC,UAAlBH,EAAQG,GACtC,MAAMC,UAAU,wBAElB,OAAQD,I,oCCRV,W,2CCAA,IAAIE,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,iBAAiB,CAACrC,MAAM,CAAC,WAAaiC,EAAIM,WAAW,aAAa,CAAEC,UAAU,GAAO,YAAc,oBAAoB,oBAAoBP,EAAIQ,kBAAkBC,GAAG,CAAC,KAAOT,EAAIU,QAAQC,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GACpV,IAAIC,EAAWD,EAAIC,SACfC,EAAWF,EAAIE,SACnB,MAAO,CAACb,EAAG,MAAM,CAACc,YAAY,WAAW,CAACd,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAC5H,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAACrD,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQO,EAASK,OAAO,QAAQtD,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,eAAe,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,gBAAgBlB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAC/R,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAACrD,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQO,EAASO,OAAO,QAAQxD,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,eAAe,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,eAAelB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAC9R,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAAC3C,MAAM,CAAE,YAAawC,EAASO,QAAQ,CAAEC,MAAO,KAAO1D,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQ,SAASiB,GAAQ,OAAOV,EAASQ,QAAQ,CAAEC,MAAO,OAAQ,QAAQ1D,GAAM,GAAO0C,GAAI,CAACL,EAAG,IAAI,CAACJ,EAAIsB,GAAG,cAAc,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,iBAAiBlB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GACnX,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAAC3C,MAAM,CAAE,YAAawC,EAASO,QAAQ,CAAEC,MAAO,KAAO1D,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQ,SAASiB,GAAQ,OAAOV,EAASQ,QAAQ,CAAEC,MAAO,OAAQ,QAAQ1D,GAAM,GAAO0C,GAAI,CAACL,EAAG,IAAI,CAACJ,EAAIsB,GAAG,cAAc,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,oBAAoBlB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GACtX,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAAC3C,MAAM,CAAE,YAAawC,EAASO,QAAQ,CAAEC,MAAO,KAAO1D,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQ,SAASiB,GAAQ,OAAOV,EAASQ,QAAQ,CAAEC,MAAO,OAAQ,QAAQ1D,GAAM,GAAO0C,GAAI,CAACL,EAAG,IAAI,CAACJ,EAAIsB,GAAG,cAAc,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,oBAAoBlB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GACtX,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAAC3C,MAAM,CAAE,YAAawC,EAASU,QAAS5D,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQO,EAASW,OAAO,QAAQ5D,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,sBAAsB,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,gBAAgBlB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAC7U,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAAC3C,MAAM,CAAE,YAAawC,EAASW,UAAW7D,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQO,EAASY,SAAS,QAAQ7D,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,wBAAwB,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,eAAelB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAClV,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAAC3C,MAAM,CAAE,YAAawC,EAASY,aAAc9D,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQO,EAASa,YAAY,QAAQ9D,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,2BAA2B,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,iBAAiBlB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAC7V,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAAC3C,MAAM,CAAE,YAAawC,EAASa,gBAAiB/D,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQO,EAASc,eAAe,QAAQ/D,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,+BAA+B,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,sBAAsBlB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAC5W,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAAC3C,MAAM,CAAE,YAAawC,EAASc,eAAgBhE,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQO,EAASe,cAAc,QAAQhE,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,+BAA+B,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,yBAAyBlB,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAC7W,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAACrD,MAAM,CAAC,KAAO,GAAG,KAAO,GAAG,UAAYiC,EAAIgC,YAAYvB,GAAG,CAAC,MAAQT,EAAIiC,iBAAiB,QAAQlE,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,eAAe,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,qBAAuC,YAAjBtB,EAAIkC,SAAwB9B,EAAG,YAAY,CAACrC,MAAM,CAAC,IAAM,IAAI4C,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GACjW,IAAIN,EAAKM,EAAIN,GACT1C,EAAQgD,EAAIhD,MAChB,MAAO,CAACqC,EAAG,QAAQJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAACrD,MAAM,CAAC,KAAO,GAAG,KAAO,IAAI0C,GAAG,CAAC,MAAQT,EAAImC,kBAAkB,QAAQpE,GAAM,GAAO0C,GAAI,CAACL,EAAG,SAAS,CAACJ,EAAIsB,GAAG,gBAAgB,OAAO,MAAK,IAAO,CAAClB,EAAG,OAAO,CAACJ,EAAIsB,GAAG,qBAAqBtB,EAAIoC,KAAKhC,EAAG,kBAAkB,CAACrC,MAAM,CAAC,OAASiC,EAAIqC,kBAAkB5B,GAAG,CAAC,MAAQT,EAAIsC,gBAAgB,KAAO,SAASZ,GAC9U,IAAIa,EAAIC,UAAUC,OAAQC,EAAYC,MAAMJ,GAC5C,MAAQA,IAAMG,EAAUH,GAAKC,UAAUD,GACvC,OAAOvC,EAAI4C,SAASC,WAAM,EAAQ,CAAE7B,EAAS8B,MAAOC,OAAQL,QAAiBtC,EAAG,mBAAmB,CAACrC,MAAM,CAAC,UAAW,EAAK,OAASiC,EAAIgD,kBAAkB,OAAShD,EAAIiD,OAAO,SAAWjD,EAAIkC,UAAUzB,GAAG,CAAC,MAAQT,EAAIkD,iBAAiB,KAAO,SAASxB,GACxP,IAAIa,EAAIC,UAAUC,OAAQC,EAAYC,MAAMJ,GAC5C,MAAQA,IAAMG,EAAUH,GAAKC,UAAUD,GACvC,OAAOvC,EAAImD,UAAUN,WAAM,EAAQ,CAAE7B,EAASoC,OAAQL,OAAQL,SAAkB,QAAQW,MAAM,CAACxD,MAAOG,EAAW,QAAEsD,SAAS,SAAUC,GAAMvD,EAAI5B,QAAQmF,GAAKC,WAAW,aAAapD,EAAG,IAAI,CAACc,YAAY,mBAAmB,CAAClB,EAAIsB,GAAGtB,EAAIyD,GAAGzD,EAAI0D,WAAW,IAAI1D,EAAIyD,GAAGzD,EAAI2D,YAAYvD,EAAG,SAAS,CAACwD,WAAW,CAAC,CAACpE,KAAK,OAAOqE,QAAQ,SAAShE,MAAOG,EAAmB,gBAAEwD,WAAW,oBAAoBzF,MAAM,CAAC,aAAaiC,EAAI8D,UAAU,aAAa9D,EAAI+D,UAAU,WAAW,GAAG,eAAe,KAAK,SAAW,IAAIV,MAAM,CAACxD,MAAOG,EAAe,YAAEsD,SAAS,SAAUC,GAAMvD,EAAIgE,YAAYT,GAAKC,WAAW,gBAAgB,CAACpD,EAAG,SAAS,CAAEJ,EAAc,WAAEA,EAAIiE,GAAIjE,EAAiB,eAAE,SAASkE,EAASC,GAAO,OAAO/D,EAAG,cAAc,CAACS,IAAIqD,EAASlG,GAAGS,MAAM,CAAE,cAAeuB,EAAIoE,qBAAuBD,GAAQ1D,GAAG,CAAC,MAAQ,SAASiB,GAAQ,OAAO1B,EAAIqE,WAAWH,MAAa,CAAC9D,EAAG,oBAAoB,CAACJ,EAAIsB,GAAG,IAAItB,EAAIyD,GAAGS,EAASI,KAAK9E,MAAM,IAAIQ,EAAIyD,GAAGS,EAASI,KAAKC,UAAU,QAAQ,MAAKnE,EAAG,cAAc,CAACA,EAAG,oBAAoB,CAACJ,EAAIsB,GAAG,wBAAwB,IAAI,IAAI,IAAI,IACnhCkD,EAAkB,G,8ICrCtB,SAASC,EAAQ5E,GACf,OAAQ8C,MAAM8B,QAEV9B,MAAM8B,QAAQ5E,GADI,mBAAlB6E,EAAO7E,GAKb,MAAM8E,EAAW,IACjB,SAASC,EAAa/E,GAEpB,GAAoB,iBAATA,EACT,OAAOA,EAET,IAAIgF,EAAShF,EAAQ,GACrB,MAAiB,KAAVgF,GAAiB,EAAIhF,IAAU8E,EAAW,KAAOE,EAG1D,SAAS,EAAShF,GAChB,OAAgB,MAATA,EAAgB,GAAK+E,EAAa/E,GAG3C,SAASiF,EAASjF,GAChB,MAAwB,kBAAVA,EAGhB,SAASkF,EAASlF,GAChB,MAAwB,kBAAVA,EAIhB,SAASmF,EAAUnF,GACjB,OACY,IAAVA,IACU,IAAVA,GACCoF,EAAapF,IAA2B,oBAAjB6E,EAAO7E,GAInC,SAASqF,EAASrF,GAChB,MAAwB,kBAAVA,EAIhB,SAASoF,EAAapF,GACpB,OAAOqF,EAASrF,IAAoB,OAAVA,EAG5B,SAASsF,EAAUtF,GACjB,YAAiBuF,IAAVvF,GAAiC,OAAVA,EAGhC,SAASwF,EAAQxF,GACf,OAAQA,EAAMyF,OAAO7C,OAKvB,SAASiC,EAAO7E,GACd,OAAgB,MAATA,OACOuF,IAAVvF,EACE,qBACA,gBACF0F,OAAOC,UAAUC,SAASC,KAAK7F,GAGrC,MAEM8F,EAAuB,yBAEvBC,EAAwC/E,GAC5C,yBAAyBA,EAErBgF,EAA4BC,GAChC,iCAAiCA,KAE7BC,EAAwBvG,GAAS,WAAWA,oBAE5CwG,EAA4BnF,GAChC,6BAA6BA,gCAEzBoF,EAASV,OAAOC,UAAUU,eAEhC,MAAMC,EACJ,YAAYC,GACVnG,KAAKoG,MAAQ,GACbpG,KAAKqG,QAAU,GAEf,IAAIC,EAAc,EAElBH,EAAKI,QAAS3F,IACZ,IAAI4F,EAAMC,EAAU7F,GAEpB0F,GAAeE,EAAIE,OAEnB1G,KAAKoG,MAAMO,KAAKH,GAChBxG,KAAKqG,QAAQG,EAAIzI,IAAMyI,EAEvBF,GAAeE,EAAIE,SAIrB1G,KAAKoG,MAAMG,QAAS3F,IAClBA,EAAI8F,QAAUJ,IAGlB,IAAIM,GACF,OAAO5G,KAAKqG,QAAQO,GAEtB,OACE,OAAO5G,KAAKoG,MAEd,SACE,OAAOS,KAAKC,UAAU9G,KAAKoG,QAI/B,SAASK,EAAU7F,GACjB,IAAImG,EAAO,KACPhJ,EAAK,KACLiJ,EAAM,KACNN,EAAS,EAEb,GAAI7B,EAASjE,IAAQ4D,EAAQ5D,GAC3BoG,EAAMpG,EACNmG,EAAOE,EAAcrG,GACrB7C,EAAKmJ,EAAYtG,OACZ,CACL,IAAKoF,EAAOP,KAAK7E,EAAK,QACpB,MAAM,IAAIuG,MAAMrB,EAAqB,SAGvC,MAAMvG,EAAOqB,EAAIrB,KAGjB,GAFAyH,EAAMzH,EAEFyG,EAAOP,KAAK7E,EAAK,YACnB8F,EAAS9F,EAAI8F,OAETA,GAAU,GACZ,MAAM,IAAIS,MAAMpB,EAAyBxG,IAI7CwH,EAAOE,EAAc1H,GACrBxB,EAAKmJ,EAAY3H,GAGnB,MAAO,CAAEwH,OAAMhJ,KAAI2I,SAAQM,OAG7B,SAASC,EAAcrG,GACrB,OAAO4D,EAAQ5D,GAAOA,EAAMA,EAAIwG,MAAM,KAGxC,SAASF,EAAYtG,GACnB,OAAO4D,EAAQ5D,GAAOA,EAAIyG,KAAK,KAAOzG,EAGxC,SAAS0G,EAAId,EAAKO,GAChB,IAAIQ,EAAO,GACPC,GAAM,EAEV,MAAMC,EAAU,CAACjB,EAAKO,EAAM7C,KAC1B,GAAKgB,EAAUsB,GAGf,GAAKO,EAAK7C,GAGH,CACL,IAAItD,EAAMmG,EAAK7C,GAEf,MAAMtE,EAAQ4G,EAAI5F,GAElB,IAAKsE,EAAUtF,GACb,OAKF,GACEsE,IAAU6C,EAAKvE,OAAS,IACvBqC,EAASjF,IAAUkF,EAASlF,IAAUmF,EAAUnF,IAEjD2H,EAAKZ,KAAK,EAAS/G,SACd,GAAI4E,EAAQ5E,GAAQ,CACzB4H,GAAM,EAEN,IAAK,IAAIlF,EAAI,EAAGoF,EAAM9H,EAAM4C,OAAQF,EAAIoF,EAAKpF,GAAK,EAChDmF,EAAQ7H,EAAM0C,GAAIyE,EAAM7C,EAAQ,QAEzB6C,EAAKvE,QAEdiF,EAAQ7H,EAAOmH,EAAM7C,EAAQ,QAzB/BqD,EAAKZ,KAAKH,IAiCd,OAFAiB,EAAQjB,EAAK3B,EAASkC,GAAQA,EAAKK,MAAM,KAAOL,EAAM,GAE/CS,EAAMD,EAAOA,EAAK,GAG3B,MAAMI,EAAe,CAInBC,gBAAgB,EAGhBC,gBAAgB,EAEhBC,mBAAoB,GAGhBC,EAAe,CAGnBC,iBAAiB,EAEjBC,cAAc,EAEd9B,KAAM,GAEN+B,YAAY,EAEZC,OAAQ,CAACC,EAAGC,IACVD,EAAEE,QAAUD,EAAEC,MAASF,EAAEG,IAAMF,EAAEE,KAAO,EAAI,EAAKH,EAAEE,MAAQD,EAAEC,OAAS,EAAI,GAGxEE,EAAe,CAEnBC,SAAU,EAGVC,UAAW,GAMXC,SAAU,KAGNC,EAAkB,CAEtBC,mBAAmB,EAGnBC,MAAOxB,EAIPyB,gBAAgB,EAIhBC,iBAAiB,GAGnB,IAAIC,EAAS,IACRlB,KACAJ,KACAa,KACAI,GAGL,MAAMM,EAAQ,SAId,SAASC,EAAKC,EAAW,GACvB,MAAMC,EAAQ,IAAIC,IACZC,EAAIC,KAAKC,IAAI,GAAIL,GAEvB,MAAO,CACL,IAAIxJ,GACF,MAAM8J,EAAY9J,EAAM+J,MAAMT,GAAO1G,OAErC,GAAI6G,EAAMO,IAAIF,GACZ,OAAOL,EAAM/B,IAAIoC,GAGnB,MAAMP,EAAO,EAAIK,KAAKK,KAAKH,GAGrBI,EAAIC,WAAWP,KAAKQ,MAAMb,EAAOI,GAAKA,GAI5C,OAFAF,EAAMY,IAAIP,EAAWI,GAEdA,GAET,QACET,EAAMa,UAKZ,MAAMC,EACJ,aAAY,MAAErB,EAAQG,EAAOH,OAAU,IACrC9I,KAAKmJ,KAAOA,EAAK,GACjBnJ,KAAK8I,MAAQA,EACb9I,KAAKoK,WAAY,EAEjBpK,KAAKqK,kBAEP,WAAWC,EAAO,IAChBtK,KAAKsK,KAAOA,EAEd,gBAAgBC,EAAU,IACxBvK,KAAKuK,QAAUA,EAEjB,QAAQpE,EAAO,IACbnG,KAAKmG,KAAOA,EACZnG,KAAKwK,SAAW,GAChBrE,EAAKI,QAAQ,CAAC3F,EAAK2H,KACjBvI,KAAKwK,SAAS5J,EAAI7C,IAAMwK,IAG5B,UACMvI,KAAKoK,WAAcpK,KAAKsK,KAAK9H,SAIjCxC,KAAKoK,WAAY,EAGbvF,EAAS7E,KAAKsK,KAAK,IACrBtK,KAAKsK,KAAK/D,QAAQ,CAACkE,EAAKC,KACtB1K,KAAK2K,WAAWF,EAAKC,KAIvB1K,KAAKsK,KAAK/D,QAAQ,CAACkE,EAAKC,KACtB1K,KAAK4K,WAAWH,EAAKC,KAIzB1K,KAAKmJ,KAAKe,SAGZ,IAAIO,GACF,MAAMlC,EAAMvI,KAAK6K,OAEbhG,EAAS4F,GACXzK,KAAK2K,WAAWF,EAAKlC,GAErBvI,KAAK4K,WAAWH,EAAKlC,GAIzB,SAASA,GACPvI,KAAKuK,QAAQO,OAAOvC,EAAK,GAGzB,IAAK,IAAIjG,EAAIiG,EAAKb,EAAM1H,KAAK6K,OAAQvI,EAAIoF,EAAKpF,GAAK,EACjDtC,KAAKuK,QAAQjI,GAAGA,GAAK,EAGzB,uBAAuByI,EAAMnE,GAC3B,OAAOmE,EAAK/K,KAAKwK,SAAS5D,IAE5B,OACE,OAAO5G,KAAKuK,QAAQ/H,OAEtB,WAAWiI,EAAKC,GACd,IAAKxF,EAAUuF,IAAQrF,EAAQqF,GAC7B,OAGF,IAAIO,EAAS,CACXC,EAAGR,EACHnI,EAAGoI,EACHZ,EAAG9J,KAAKmJ,KAAK7B,IAAImD,IAGnBzK,KAAKuK,QAAQ5D,KAAKqE,GAEpB,WAAWP,EAAKC,GACd,IAAIM,EAAS,CAAE1I,EAAGoI,EAAUQ,EAAG,IAG/BlL,KAAKmG,KAAKI,QAAQ,CAAC3F,EAAKuK,KAEtB,IAAIvL,EAAQI,KAAK8I,MAAM2B,EAAK7J,EAAImG,MAEhC,GAAK7B,EAAUtF,GAIf,GAAI4E,EAAQ5E,GAAQ,CAClB,IAAIwL,EAAa,GACjB,MAAMC,EAAQ,CAAC,CAAEC,gBAAiB,EAAG1L,UAErC,MAAOyL,EAAM7I,OAAQ,CACnB,MAAM,eAAE8I,EAAc,MAAE1L,GAAUyL,EAAME,MAExC,GAAKrG,EAAUtF,GAIf,GAAIiF,EAASjF,KAAWwF,EAAQxF,GAAQ,CACtC,IAAI4L,EAAY,CACdP,EAAGrL,EACH0C,EAAGgJ,EACHxB,EAAG9J,KAAKmJ,KAAK7B,IAAI1H,IAGnBwL,EAAWzE,KAAK6E,QACPhH,EAAQ5E,IACjBA,EAAM2G,QAAQ,CAACwE,EAAMU,KACnBJ,EAAM1E,KAAK,CACT2E,eAAgBG,EAChB7L,MAAOmL,MAKfC,EAAOE,EAAEC,GAAYC,OAChB,IAAKhG,EAAQxF,GAAQ,CAC1B,IAAI4L,EAAY,CACdP,EAAGrL,EACHkK,EAAG9J,KAAKmJ,KAAK7B,IAAI1H,IAGnBoL,EAAOE,EAAEC,GAAYK,KAIzBxL,KAAKuK,QAAQ5D,KAAKqE,GAEpB,SACE,MAAO,CACL7E,KAAMnG,KAAKmG,KACXoE,QAASvK,KAAKuK,UAKpB,SAASmB,EAAYvF,EAAMmE,GAAM,MAAExB,EAAQG,EAAOH,OAAU,IAC1D,MAAM6C,EAAU,IAAIxB,EAAU,CAAErB,UAIhC,OAHA6C,EAAQC,QAAQzF,EAAK0F,IAAIpF,IACzBkF,EAAQG,WAAWxB,GACnBqB,EAAQI,SACDJ,EAGT,SAASK,EAAWC,GAAM,MAAEnD,EAAQG,EAAOH,OAAU,IACnD,MAAM,KAAE3C,EAAI,QAAEoE,GAAY0B,EACpBN,EAAU,IAAIxB,EAAU,CAAErB,UAGhC,OAFA6C,EAAQC,QAAQzF,GAChBwF,EAAQtB,gBAAgBE,GACjBoB,EAGT,SAASO,EACPC,GACA,OACEC,EAAS,EAAC,gBACVC,EAAkB,EAAC,iBACnBC,EAAmB,EAAC,SACpB3D,EAAWM,EAAON,SAAQ,eAC1BI,EAAiBE,EAAOF,gBACtB,IAEJ,MAAMwD,EAAWH,EAASD,EAAQ3J,OAElC,GAAIuG,EACF,OAAOwD,EAGT,MAAMC,EAAYhD,KAAKiD,IAAIH,EAAmBD,GAE9C,OAAK1D,EAKE4D,EAAWC,EAAY7D,EAHrB6D,EAAY,EAAMD,EAM7B,SAASG,EACPC,EAAY,GACZ7E,EAAqBmB,EAAOnB,oBAE5B,IAAI8E,EAAU,GACVC,GAAS,EACTC,GAAO,EACPxK,EAAI,EAER,IAAK,IAAIoF,EAAMiF,EAAUnK,OAAQF,EAAIoF,EAAKpF,GAAK,EAAG,CAChD,IAAIqH,EAAQgD,EAAUrK,GAClBqH,IAAoB,IAAXkD,EACXA,EAAQvK,EACEqH,IAAoB,IAAXkD,IACnBC,EAAMxK,EAAI,EACNwK,EAAMD,EAAQ,GAAK/E,GACrB8E,EAAQjG,KAAK,CAACkG,EAAOC,IAEvBD,GAAS,GASb,OAJIF,EAAUrK,EAAI,IAAMA,EAAIuK,GAAS/E,GACnC8E,EAAQjG,KAAK,CAACkG,EAAOvK,EAAI,IAGpBsK,EAIT,MAAMG,EAAW,GAEjB,SAASC,EACP5N,EACA+M,EACAc,GACA,SACExE,EAAWQ,EAAOR,SAAQ,SAC1BE,EAAWM,EAAON,SAAQ,UAC1BD,EAAYO,EAAOP,UAAS,eAC5Bb,EAAiBoB,EAAOpB,eAAc,mBACtCC,EAAqBmB,EAAOnB,mBAAkB,eAC9CF,EAAiBqB,EAAOrB,eAAc,eACtCmB,EAAiBE,EAAOF,gBACtB,IAEJ,GAAIoD,EAAQ3J,OAASuK,EACnB,MAAM,IAAI5F,MAAMvB,EAAyBmH,IAG3C,MAAMG,EAAaf,EAAQ3J,OAErB2K,EAAU/N,EAAKoD,OAEf8J,EAAmB9C,KAAK3D,IAAI,EAAG2D,KAAK4D,IAAI3E,EAAU0E,IAExD,IAAIE,EAAmB3E,EAEnB4E,EAAehB,EAInB,MAAMiB,EAAiBzF,EAAqB,GAAKF,EAE3C4F,EAAYD,EAAiB7K,MAAMyK,GAAW,GAEpD,IAAIjJ,EAGJ,OAAQA,EAAQ9E,EAAKqO,QAAQtB,EAASmB,KAAkB,EAAG,CACzD,IAAIhF,EAAQ4D,EAAaC,EAAS,CAChCE,gBAAiBnI,EACjBoI,mBACA3D,WACAI,mBAMF,GAHAsE,EAAmB7D,KAAK4D,IAAI9E,EAAO+E,GACnCC,EAAepJ,EAAQgJ,EAEnBK,EAAgB,CAClB,IAAIjL,EAAI,EACR,MAAOA,EAAI4K,EACTM,EAAUtJ,EAAQ5B,GAAK,EACvBA,GAAK,GAMXgL,GAAgB,EAEhB,IAAII,EAAa,GACbC,EAAa,EACbC,EAASV,EAAaC,EAE1B,MAAMU,EAAO,GAAMX,EAAa,EAEhC,IAAK,IAAI5K,EAAI,EAAGA,EAAI4K,EAAY5K,GAAK,EAAG,CAItC,IAAIwL,EAAS,EACTC,EAASH,EAEb,MAAOE,EAASC,EAAQ,CACtB,MAAMzF,EAAQ4D,EAAaC,EAAS,CAClCC,OAAQ9J,EACR+J,gBAAiBC,EAAmByB,EACpCzB,mBACA3D,WACAI,mBAGET,GAAS+E,EACXS,EAASC,EAETH,EAASG,EAGXA,EAASvE,KAAKwE,OAAOJ,EAASE,GAAU,EAAIA,GAI9CF,EAASG,EAET,IAAIlB,EAAQrD,KAAK3D,IAAI,EAAGyG,EAAmByB,EAAS,GAChDE,EAASpG,EACTsF,EACA3D,KAAK4D,IAAId,EAAmByB,EAAQZ,GAAWD,EAG/CgB,EAASxL,MAAMuL,EAAS,GAE5BC,EAAOD,EAAS,IAAM,GAAK3L,GAAK,EAEhC,IAAK,IAAI6L,EAAIF,EAAQE,GAAKtB,EAAOsB,GAAK,EAAG,CACvC,IAAI9B,EAAkB8B,EAAI,EACtBC,EAAYnB,EAAgB7N,EAAKiP,OAAOhC,IAgB5C,GAdIkB,IAEFC,EAAUnB,MAAsB+B,GAIlCF,EAAOC,IAAOD,EAAOC,EAAI,IAAM,EAAK,GAAKC,EAGrC9L,IACF4L,EAAOC,KACHT,EAAWS,EAAI,GAAKT,EAAWS,KAAO,EAAK,EAAIT,EAAWS,EAAI,IAGhED,EAAOC,GAAKN,IACdF,EAAazB,EAAaC,EAAS,CACjCC,OAAQ9J,EACR+J,kBACAC,mBACA3D,WACAI,mBAKE4E,GAAcN,GAAkB,CAMlC,GAJAA,EAAmBM,EACnBL,EAAejB,EAGXiB,GAAgBhB,EAClB,MAIFO,EAAQrD,KAAK3D,IAAI,EAAG,EAAIyG,EAAmBgB,IAMjD,MAAMhF,EAAQ4D,EAAaC,EAAS,CAClCC,OAAQ9J,EAAI,EACZ+J,gBAAiBC,EACjBA,mBACA3D,WACAI,mBAGF,GAAIT,EAAQ+E,EACV,MAGFK,EAAaQ,EAGf,MAAMtJ,EAAS,CACb0J,QAAShB,GAAgB,EAEzBhF,MAAOkB,KAAK3D,IAAI,KAAO8H,IAGzB,GAAIJ,EAAgB,CAClB,MAAMX,EAAUF,EAAqBc,EAAW1F,GAC3C8E,EAAQpK,OAEFoF,IACThD,EAAOgI,QAAUA,GAFjBhI,EAAO0J,SAAU,EAMrB,OAAO1J,EAGT,SAAS2J,EAAsBpC,GAC7B,IAAI0B,EAAO,GAEX,IAAK,IAAIvL,EAAI,EAAGoF,EAAMyE,EAAQ3J,OAAQF,EAAIoF,EAAKpF,GAAK,EAAG,CACrD,MAAMkM,EAAOrC,EAAQkC,OAAO/L,GAC5BuL,EAAKW,IAASX,EAAKW,IAAS,GAAM,GAAM9G,EAAMpF,EAAI,EAGpD,OAAOuL,EAGT,MAAMY,EACJ,YACEtC,GACA,SACE1D,EAAWQ,EAAOR,SAAQ,UAC1BC,EAAYO,EAAOP,UAAS,SAC5BC,EAAWM,EAAON,SAAQ,eAC1Bf,EAAiBqB,EAAOrB,eAAc,eACtCC,EAAiBoB,EAAOpB,eAAc,mBACtCC,EAAqBmB,EAAOnB,mBAAkB,gBAC9CE,EAAkBiB,EAAOjB,gBAAe,eACxCe,EAAiBE,EAAOF,gBACtB,IAiBJ,GAfA/I,KAAKvB,QAAU,CACbgK,WACAC,YACAC,WACAf,iBACAC,iBACAC,qBACAE,kBACAe,kBAGF/I,KAAKmM,QAAUnE,EAAkBmE,EAAUA,EAAQuC,cAEnD1O,KAAK2O,OAAS,IAET3O,KAAKmM,QAAQ3J,OAChB,OAGF,MAAMoM,EAAW,CAACzC,EAAS0C,KACzB7O,KAAK2O,OAAOhI,KAAK,CACfwF,UACA2C,SAAUP,EAAsBpC,GAChC0C,gBAIEnH,EAAM1H,KAAKmM,QAAQ3J,OAEzB,GAAIkF,EAAMqF,EAAU,CAClB,IAAIzK,EAAI,EACR,MAAMyM,EAAYrH,EAAMqF,EAClBD,EAAMpF,EAAMqH,EAElB,MAAOzM,EAAIwK,EACT8B,EAAS5O,KAAKmM,QAAQ6C,OAAO1M,EAAGyK,GAAWzK,GAC3CA,GAAKyK,EAGP,GAAIgC,EAAW,CACb,MAAMF,EAAanH,EAAMqF,EACzB6B,EAAS5O,KAAKmM,QAAQ6C,OAAOH,GAAaA,SAG5CD,EAAS5O,KAAKmM,QAAS,GAI3B,SAAS/M,GACP,MAAM,gBAAE4I,EAAe,eAAEJ,GAAmB5H,KAAKvB,QAOjD,GALKuJ,IACH5I,EAAOA,EAAKsP,eAIV1O,KAAKmM,UAAY/M,EAAM,CACzB,IAAIwF,EAAS,CACX0J,SAAS,EACThG,MAAO,GAOT,OAJIV,IACFhD,EAAOgI,QAAU,CAAC,CAAC,EAAGxN,EAAKoD,OAAS,KAG/BoC,EAIT,MAAM,SACJ6D,EAAQ,SACRE,EAAQ,UACRD,EAAS,eACTb,EAAc,mBACdC,EAAkB,eAClBiB,GACE/I,KAAKvB,QAET,IAAIwQ,EAAa,GACbC,EAAa,EACbC,GAAa,EAEjBnP,KAAK2O,OAAOpI,QAAQ,EAAG4F,UAAS2C,WAAUD,iBACxC,MAAM,QAAEP,EAAO,MAAEhG,EAAK,QAAEsE,GAAYI,EAAO5N,EAAM+M,EAAS2C,EAAU,CAClErG,SAAUA,EAAWoG,EACrBlG,WACAD,YACAb,iBACAC,qBACAF,iBACAmB,mBAGEuF,IACFa,GAAa,GAGfD,GAAc5G,EAEVgG,GAAW1B,IACbqC,EAAa,IAAIA,KAAerC,MAIpC,IAAIhI,EAAS,CACX0J,QAASa,EACT7G,MAAO6G,EAAaD,EAAalP,KAAK2O,OAAOnM,OAAS,GAOxD,OAJI2M,GAAcvH,IAChBhD,EAAOgI,QAAUqC,GAGZrK,GAIX,MAAMwK,EACJ,YAAYjD,GACVnM,KAAKmM,QAAUA,EAEjB,oBAAoBA,GAClB,OAAOkD,EAASlD,EAASnM,KAAKsP,YAEhC,qBAAqBnD,GACnB,OAAOkD,EAASlD,EAASnM,KAAKuP,aAEhC,WAGF,SAASF,EAASlD,EAASqD,GACzB,MAAMC,EAAUtD,EAAQxC,MAAM6F,GAC9B,OAAOC,EAAUA,EAAQ,GAAK,KAKhC,MAAMC,UAAmBN,EACvB,YAAYjD,GACVwD,MAAMxD,GAER,kBACE,MAAO,QAET,wBACE,MAAO,YAET,yBACE,MAAO,UAET,OAAO/M,GACL,MAAMkP,EAAUlP,IAASY,KAAKmM,QAE9B,MAAO,CACLmC,UACAhG,MAAOgG,EAAU,EAAI,EACrB1B,QAAS,CAAC,EAAG5M,KAAKmM,QAAQ3J,OAAS,KAOzC,MAAMoN,UAA0BR,EAC9B,YAAYjD,GACVwD,MAAMxD,GAER,kBACE,MAAO,gBAET,wBACE,MAAO,YAET,yBACE,MAAO,UAET,OAAO/M,GACL,MAAM8E,EAAQ9E,EAAKqO,QAAQzN,KAAKmM,SAC1BmC,GAAqB,IAAXpK,EAEhB,MAAO,CACLoK,UACAhG,MAAOgG,EAAU,EAAI,EACrB1B,QAAS,CAAC,EAAGxN,EAAKoD,OAAS,KAOjC,MAAMqN,UAAyBT,EAC7B,YAAYjD,GACVwD,MAAMxD,GAER,kBACE,MAAO,eAET,wBACE,MAAO,aAET,yBACE,MAAO,WAET,OAAO/M,GACL,MAAMkP,EAAUlP,EAAK0Q,WAAW9P,KAAKmM,SAErC,MAAO,CACLmC,UACAhG,MAAOgG,EAAU,EAAI,EACrB1B,QAAS,CAAC,EAAG5M,KAAKmM,QAAQ3J,OAAS,KAOzC,MAAMuN,UAAgCX,EACpC,YAAYjD,GACVwD,MAAMxD,GAER,kBACE,MAAO,uBAET,wBACE,MAAO,cAET,yBACE,MAAO,YAET,OAAO/M,GACL,MAAMkP,GAAWlP,EAAK0Q,WAAW9P,KAAKmM,SAEtC,MAAO,CACLmC,UACAhG,MAAOgG,EAAU,EAAI,EACrB1B,QAAS,CAAC,EAAGxN,EAAKoD,OAAS,KAOjC,MAAMwN,UAAyBZ,EAC7B,YAAYjD,GACVwD,MAAMxD,GAER,kBACE,MAAO,eAET,wBACE,MAAO,aAET,yBACE,MAAO,WAET,OAAO/M,GACL,MAAMkP,EAAUlP,EAAK6Q,SAASjQ,KAAKmM,SAEnC,MAAO,CACLmC,UACAhG,MAAOgG,EAAU,EAAI,EACrB1B,QAAS,CAACxN,EAAKoD,OAASxC,KAAKmM,QAAQ3J,OAAQpD,EAAKoD,OAAS,KAOjE,MAAM0N,UAAgCd,EACpC,YAAYjD,GACVwD,MAAMxD,GAER,kBACE,MAAO,uBAET,wBACE,MAAO,cAET,yBACE,MAAO,YAET,OAAO/M,GACL,MAAMkP,GAAWlP,EAAK6Q,SAASjQ,KAAKmM,SACpC,MAAO,CACLmC,UACAhG,MAAOgG,EAAU,EAAI,EACrB1B,QAAS,CAAC,EAAGxN,EAAKoD,OAAS,KAKjC,MAAM2N,UAAmBf,EACvB,YACEjD,GACA,SACE1D,EAAWQ,EAAOR,SAAQ,UAC1BC,EAAYO,EAAOP,UAAS,SAC5BC,EAAWM,EAAON,SAAQ,eAC1Bf,EAAiBqB,EAAOrB,eAAc,eACtCC,EAAiBoB,EAAOpB,eAAc,mBACtCC,EAAqBmB,EAAOnB,mBAAkB,gBAC9CE,EAAkBiB,EAAOjB,gBAAe,eACxCe,EAAiBE,EAAOF,gBACtB,IAEJ4G,MAAMxD,GACNnM,KAAKoQ,aAAe,IAAI3B,EAAYtC,EAAS,CAC3C1D,WACAC,YACAC,WACAf,iBACAC,iBACAC,qBACAE,kBACAe,mBAGJ,kBACE,MAAO,QAET,wBACE,MAAO,WAET,yBACE,MAAO,SAET,OAAO3J,GACL,OAAOY,KAAKoQ,aAAaC,SAASjR,IAMtC,MAAMkR,WAAqBlB,EACzB,YAAYjD,GACVwD,MAAMxD,GAER,kBACE,MAAO,UAET,wBACE,MAAO,YAET,yBACE,MAAO,UAET,OAAO/M,GACL,IACI8E,EADAuE,EAAW,EAGf,MAAMmE,EAAU,GACVM,EAAalN,KAAKmM,QAAQ3J,OAGhC,OAAQ0B,EAAQ9E,EAAKqO,QAAQzN,KAAKmM,QAAS1D,KAAc,EACvDA,EAAWvE,EAAQgJ,EACnBN,EAAQjG,KAAK,CAACzC,EAAOuE,EAAW,IAGlC,MAAM6F,IAAY1B,EAAQpK,OAE1B,MAAO,CACL8L,UACAhG,MAAOgG,EAAU,EAAI,EACrB1B,YAMN,MAAM2D,GAAY,CAChBb,EACAY,GACAT,EACAE,EACAG,EACAF,EACAJ,EACAO,GAGIK,GAAeD,GAAU/N,OAGzBiO,GAAW,mCACXC,GAAW,IAKjB,SAASC,GAAWxE,EAAS1N,EAAU,IACrC,OAAO0N,EAAQ/E,MAAMsJ,IAAU7E,IAAKd,IAClC,IAAI6F,EAAQ7F,EACT1F,OACA+B,MAAMqJ,IACNI,OAAQ9F,GAASA,KAAUA,EAAK1F,QAE/ByL,EAAU,GACd,IAAK,IAAIxO,EAAI,EAAGoF,EAAMkJ,EAAMpO,OAAQF,EAAIoF,EAAKpF,GAAK,EAAG,CACnD,MAAMyO,EAAYH,EAAMtO,GAGxB,IAAI0O,GAAQ,EACRzI,GAAO,EACX,OAAQyI,KAAWzI,EAAMiI,GAAc,CACrC,MAAMS,EAAWV,GAAUhI,GAC3B,IAAI2I,EAAQD,EAASE,aAAaJ,GAC9BG,IACFJ,EAAQnK,KAAK,IAAIsK,EAASC,EAAOzS,IACjCuS,GAAQ,GAIZ,IAAIA,EAAJ,CAKAzI,GAAO,EACP,QAASA,EAAMiI,GAAc,CAC3B,MAAMS,EAAWV,GAAUhI,GAC3B,IAAI2I,EAAQD,EAASG,cAAcL,GACnC,GAAIG,EAAO,CACTJ,EAAQnK,KAAK,IAAIsK,EAASC,EAAOzS,IACjC,SAKN,OAAOqS,IAMX,MAAMO,GAAgB,IAAIC,IAAI,CAACnB,EAAWhR,KAAMmR,GAAanR,OA8B7D,MAAMoS,GACJ,YACEpF,GACA,gBACEnE,EAAkBiB,EAAOjB,gBAAe,eACxCJ,EAAiBqB,EAAOrB,eAAc,mBACtCE,EAAqBmB,EAAOnB,mBAAkB,eAC9CiB,EAAiBE,EAAOF,eAAc,eACtClB,EAAiBoB,EAAOpB,eAAc,SACtCY,EAAWQ,EAAOR,SAAQ,UAC1BC,EAAYO,EAAOP,UAAS,SAC5BC,EAAWM,EAAON,UAChB,IAEJ3I,KAAK4Q,MAAQ,KACb5Q,KAAKvB,QAAU,CACbuJ,kBACAJ,iBACAE,qBACAD,iBACAkB,iBACAN,WACAC,YACAC,YAGF3I,KAAKmM,QAAUnE,EAAkBmE,EAAUA,EAAQuC,cACnD1O,KAAK4Q,MAAQD,GAAW3Q,KAAKmM,QAASnM,KAAKvB,SAG7C,iBAAiB+S,EAAG/S,GAClB,OAAOA,EAAQoK,kBAGjB,SAASzJ,GACP,MAAMwR,EAAQ5Q,KAAK4Q,MAEnB,IAAKA,EACH,MAAO,CACLtC,SAAS,EACThG,MAAO,GAIX,MAAM,eAAEV,EAAc,gBAAEI,GAAoBhI,KAAKvB,QAEjDW,EAAO4I,EAAkB5I,EAAOA,EAAKsP,cAErC,IAAI+C,EAAa,EACbxC,EAAa,GACbC,EAAa,EAGjB,IAAK,IAAI5M,EAAI,EAAGoP,EAAOd,EAAMpO,OAAQF,EAAIoP,EAAMpP,GAAK,EAAG,CACrD,MAAMiO,EAAYK,EAAMtO,GAGxB2M,EAAWzM,OAAS,EACpBiP,EAAa,EAGb,IAAK,IAAItD,EAAI,EAAGwD,EAAOpB,EAAU/N,OAAQ2L,EAAIwD,EAAMxD,GAAK,EAAG,CACzD,MAAM8C,EAAWV,EAAUpC,IACrB,QAAEG,EAAO,QAAE1B,EAAO,MAAEtE,GAAU2I,EAASjE,OAAO5N,GAEpD,IAAIkP,EAWG,CACLY,EAAa,EACbuC,EAAa,EACbxC,EAAWzM,OAAS,EACpB,MAZA,GAFAiP,GAAc,EACdvC,GAAc5G,EACVV,EAAgB,CAClB,MAAMzI,EAAO8R,EAASW,YAAYzS,KAC9BkS,GAAczH,IAAIzK,GACpB8P,EAAa,IAAIA,KAAerC,GAEhCqC,EAAWtI,KAAKiG,IAYxB,GAAI6E,EAAY,CACd,IAAI7M,EAAS,CACX0J,SAAS,EACThG,MAAO4G,EAAauC,GAOtB,OAJI7J,IACFhD,EAAOgI,QAAUqC,GAGZrK,GAKX,MAAO,CACL0J,SAAS,EACThG,MAAO,IAKb,MAAMuJ,GAAsB,GAE5B,SAASC,MAAYC,GACnBF,GAAoBlL,QAAQoL,GAG9B,SAASC,GAAe7F,EAAS1N,GAC/B,IAAK,IAAI6D,EAAI,EAAGoF,EAAMmK,GAAoBrP,OAAQF,EAAIoF,EAAKpF,GAAK,EAAG,CACjE,IAAI2P,EAAgBJ,GAAoBvP,GACxC,GAAI2P,EAAcC,UAAU/F,EAAS1N,GACnC,OAAO,IAAIwT,EAAc9F,EAAS1N,GAItC,OAAO,IAAIgQ,EAAYtC,EAAS1N,GAGlC,MAAM0T,GAAkB,CACtBC,IAAK,OACLC,GAAI,OAGAC,GAAU,CACdC,KAAM,QACNC,QAAS,QAGLC,GAAgB7B,MACjBA,EAAMuB,GAAgBC,OAAQxB,EAAMuB,GAAgBE,KAEnDK,GAAU9B,KAAYA,EAAM0B,GAAQC,MAEpCI,GAAU/B,IACbpM,EAAQoM,IAAU3L,EAAS2L,KAAW6B,GAAa7B,GAEhDgC,GAAqBhC,IAAU,CACnC,CAACuB,GAAgBC,KAAM9M,OAAOa,KAAKyK,GAAO/E,IAAKjL,IAAQ,CACrD,CAACA,GAAMgQ,EAAMhQ,QAMjB,SAASiS,GAAMjC,EAAOnS,GAAS,KAAEqU,GAAO,GAAS,IAC/C,MAAMC,EAAQnC,IACZ,IAAIzK,EAAOb,OAAOa,KAAKyK,GAEvB,MAAMoC,EAAcN,GAAO9B,GAE3B,IAAKoC,GAAe7M,EAAK3D,OAAS,IAAMiQ,GAAa7B,GACnD,OAAOmC,EAAKH,GAAkBhC,IAGhC,GAAI+B,GAAO/B,GAAQ,CACjB,MAAMhQ,EAAMoS,EAAcpC,EAAM0B,GAAQC,MAAQpM,EAAK,GAE/CgG,EAAU6G,EAAcpC,EAAM0B,GAAQE,SAAW5B,EAAMhQ,GAE7D,IAAKiE,EAASsH,GACZ,MAAM,IAAIhF,MAAMxB,EAAqC/E,IAGvD,MAAM4F,EAAM,CACVI,MAAOM,EAAYtG,GACnBuL,WAOF,OAJI2G,IACFtM,EAAIyK,SAAWe,GAAe7F,EAAS1N,IAGlC+H,EAGT,IAAIjI,EAAO,CACT0U,SAAU,GACVC,SAAU/M,EAAK,IAajB,OAVAA,EAAKI,QAAS3F,IACZ,MAAMhB,EAAQgR,EAAMhQ,GAEhB4D,EAAQ5E,IACVA,EAAM2G,QAASwE,IACbxM,EAAK0U,SAAStM,KAAKoM,EAAKhI,QAKvBxM,GAOT,OAJKkU,GAAa7B,KAChBA,EAAQgC,GAAkBhC,IAGrBmC,EAAKnC,GAId,SAASuC,GACPrC,GACA,gBAAE9H,EAAkBC,EAAOD,kBAE3B8H,EAAQvK,QAAS3B,IACf,IAAIsK,EAAa,EAEjBtK,EAAO6K,QAAQlJ,QAAQ,EAAG3F,MAAKuI,OAAMb,YACnC,MAAM5B,EAAS9F,EAAMA,EAAI8F,OAAS,KAElCwI,GAAc1F,KAAKC,IACP,IAAVnB,GAAe5B,EAAS0M,OAAOC,QAAU/K,GACxC5B,GAAU,IAAMsC,EAAkB,EAAIG,MAI3CvE,EAAO0D,MAAQ4G,IAInB,SAASoE,GAAiB1O,EAAQqH,GAChC,MAAMwD,EAAU7K,EAAO6K,QACvBxD,EAAKwD,QAAU,GAEVvK,EAAUuK,IAIfA,EAAQlJ,QAASoD,IACf,IAAKzE,EAAUyE,EAAMiD,WAAajD,EAAMiD,QAAQpK,OAC9C,OAGF,MAAM,QAAEoK,EAAO,MAAEhN,GAAU+J,EAE3B,IAAInD,EAAM,CACRoG,UACAhN,SAGE+J,EAAM/I,MACR4F,EAAI5F,IAAM+I,EAAM/I,IAAIoG,KAGlB2C,EAAMpB,KAAO,IACf/B,EAAI+M,SAAW5J,EAAMpB,KAGvB0D,EAAKwD,QAAQ9I,KAAKH,KAItB,SAASgN,GAAe5O,EAAQqH,GAC9BA,EAAK3D,MAAQ1D,EAAO0D,MAGtB,SAASmL,GACP3C,EACAxG,GACA,eACE1C,EAAiBqB,EAAOrB,eAAc,aACtCK,EAAegB,EAAOhB,cACpB,IAEJ,MAAMyL,EAAe,GAKrB,OAHI9L,GAAgB8L,EAAa/M,KAAK2M,IAClCrL,GAAcyL,EAAa/M,KAAK6M,IAE7B1C,EAAQjF,IAAKjH,IAClB,MAAM,IAAE2D,GAAQ3D,EAEVqH,EAAO,CACXlB,KAAMT,EAAK/B,GACXgL,SAAUhL,GASZ,OANImL,EAAalR,QACfkR,EAAanN,QAASoN,IACpBA,EAAY/O,EAAQqH,KAIjBA,IAIX,MAAM2H,GACJ,YAAYtJ,EAAM7L,EAAU,GAAIyF,GAC9BlE,KAAKvB,QAAU,IAAKwK,KAAWxK,GAG7BuB,KAAKvB,QAAQoK,kBAMf7I,KAAK6T,UAAY,IAAI3N,EAASlG,KAAKvB,QAAQ0H,MAE3CnG,KAAK8T,cAAcxJ,EAAMpG,GAG3B,cAAcoG,EAAMpG,GAGlB,GAFAlE,KAAK+T,MAAQzJ,EAETpG,KAAWA,aAAiBiG,GAC9B,MAAM,IAAIhD,MAAMzB,GAGlB1F,KAAKgU,SACH9P,GACAwH,EAAY1L,KAAKvB,QAAQ0H,KAAMnG,KAAK+T,MAAO,CACzCjL,MAAO9I,KAAKvB,QAAQqK,QAI1B,IAAI2B,GACGvF,EAAUuF,KAIfzK,KAAK+T,MAAMpN,KAAK8D,GAChBzK,KAAKgU,SAASC,IAAIxJ,IAGpB,OAAOyJ,EAAY,MAAoB,IACrC,MAAMpD,EAAU,GAEhB,IAAK,IAAIxO,EAAI,EAAGoF,EAAM1H,KAAK+T,MAAMvR,OAAQF,EAAIoF,EAAKpF,GAAK,EAAG,CACxD,MAAMmI,EAAMzK,KAAK+T,MAAMzR,GACnB4R,EAAUzJ,EAAKnI,KACjBtC,KAAKmU,SAAS7R,GACdA,GAAK,EACLoF,GAAO,EAEPoJ,EAAQnK,KAAK8D,IAIjB,OAAOqG,EAGT,SAASvI,GACPvI,KAAK+T,MAAMjJ,OAAOvC,EAAK,GACvBvI,KAAKgU,SAASG,SAAS5L,GAGzB,WACE,OAAOvI,KAAKgU,SAGd,OAAOpD,GAAO,MAAEwD,GAAQ,GAAO,IAC7B,MAAM,eACJxM,EAAc,aACdK,EAAY,WACZC,EAAU,OACVC,EAAM,gBACNa,GACEhJ,KAAKvB,QAET,IAAIqS,EAAUjM,EAAS+L,GACnB/L,EAAS7E,KAAK+T,MAAM,IAClB/T,KAAKqU,kBAAkBzD,GACvB5Q,KAAKsU,kBAAkB1D,GACzB5Q,KAAKuU,eAAe3D,GAYxB,OAVAuC,GAAerC,EAAS,CAAE9H,oBAEtBd,GACF4I,EAAQ0D,KAAKrM,GAGXrD,EAASsP,IAAUA,GAAS,IAC9BtD,EAAUA,EAAQ2D,MAAM,EAAGL,IAGtBX,GAAO3C,EAAS9Q,KAAK+T,MAAO,CACjCnM,iBACAK,iBAIJ,kBAAkB2I,GAChB,MAAMK,EAAWe,GAAepB,EAAO5Q,KAAKvB,UACtC,QAAE8L,GAAYvK,KAAKgU,SACnBlD,EAAU,GAmBhB,OAhBAvG,EAAQhE,QAAQ,EAAG0E,EAAG7L,EAAMkD,EAAGiG,EAAKuB,EAAGX,MACrC,IAAKjE,EAAU9F,GACb,OAGF,MAAM,QAAEkP,EAAO,MAAEhG,EAAK,QAAEsE,GAAYqE,EAASZ,SAASjR,GAElDkP,GACFwC,EAAQnK,KAAK,CACXoE,KAAM3L,EACNmJ,MACAkH,QAAS,CAAC,CAAEnH,QAAO1I,MAAOR,EAAM+J,OAAMyD,gBAKrCkE,EAGT,eAAeF,GAEb,MAAMrN,EAAasP,GAAMjC,EAAO5Q,KAAKvB,SAE/BiW,EAAW,CAACnW,EAAMwM,EAAMxC,KAC5B,IAAKhK,EAAK0U,SAAU,CAClB,MAAM,MAAErM,EAAK,SAAEqK,GAAa1S,EAEtBkR,EAAUzP,KAAK2U,aAAa,CAChC/T,IAAKZ,KAAK6T,UAAUvM,IAAIV,GACxBhH,MAAOI,KAAKgU,SAASY,uBAAuB7J,EAAMnE,GAClDqK,aAGF,OAAIxB,GAAWA,EAAQjN,OACd,CACL,CACE+F,MACAwC,OACA0E,YAKC,GAIT,OAAQlR,EAAK2U,UACX,KAAKf,GAAgBC,IAAK,CACxB,MAAMyC,EAAM,GACZ,IAAK,IAAIvS,EAAI,EAAGoF,EAAMnJ,EAAK0U,SAASzQ,OAAQF,EAAIoF,EAAKpF,GAAK,EAAG,CAC3D,MAAMwS,EAAQvW,EAAK0U,SAAS3Q,GACtBsC,EAAS8P,EAASI,EAAO/J,EAAMxC,GACrC,IAAI3D,EAAOpC,OAGT,MAAO,GAFPqS,EAAIlO,QAAQ/B,GAKhB,OAAOiQ,EAET,KAAK1C,GAAgBE,GAAI,CACvB,MAAMwC,EAAM,GACZ,IAAK,IAAIvS,EAAI,EAAGoF,EAAMnJ,EAAK0U,SAASzQ,OAAQF,EAAIoF,EAAKpF,GAAK,EAAG,CAC3D,MAAMwS,EAAQvW,EAAK0U,SAAS3Q,GACtBsC,EAAS8P,EAASI,EAAO/J,EAAMxC,GACrC,GAAI3D,EAAOpC,OAAQ,CACjBqS,EAAIlO,QAAQ/B,GACZ,OAGJ,OAAOiQ,KAKPtK,EAAUvK,KAAKgU,SAASzJ,QACxBwK,EAAY,GACZjE,EAAU,GAmBhB,OAjBAvG,EAAQhE,QAAQ,EAAG2E,EAAGH,EAAMzI,EAAGiG,MAC7B,GAAIrD,EAAU6F,GAAO,CACnB,IAAIiK,EAAaN,EAASnR,EAAYwH,EAAMxC,GAExCyM,EAAWxS,SAERuS,EAAUxM,KACbwM,EAAUxM,GAAO,CAAEA,MAAKwC,OAAM0E,QAAS,IACvCqB,EAAQnK,KAAKoO,EAAUxM,KAEzByM,EAAWzO,QAAQ,EAAGkJ,cACpBsF,EAAUxM,GAAKkH,QAAQ9I,QAAQ8I,SAMhCqB,EAGT,kBAAkBF,GAChB,MAAMK,EAAWe,GAAepB,EAAO5Q,KAAKvB,UACtC,KAAE0H,EAAI,QAAEoE,GAAYvK,KAAKgU,SACzBlD,EAAU,GA8BhB,OA3BAvG,EAAQhE,QAAQ,EAAG2E,EAAGH,EAAMzI,EAAGiG,MAC7B,IAAKrD,EAAU6F,GACb,OAGF,IAAI0E,EAAU,GAGdtJ,EAAKI,QAAQ,CAAC3F,EAAKuK,KACjBsE,EAAQ9I,QACH3G,KAAK2U,aAAa,CACnB/T,MACAhB,MAAOmL,EAAKI,GACZ8F,gBAKFxB,EAAQjN,QACVsO,EAAQnK,KAAK,CACX4B,MACAwC,OACA0E,cAKCqB,EAET,cAAa,IAAElQ,EAAG,MAAEhB,EAAK,SAAEqR,IACzB,IAAK/L,EAAUtF,GACb,MAAO,GAGT,IAAI6P,EAAU,GAEd,GAAIjL,EAAQ5E,GACVA,EAAM2G,QAAQ,EAAG0E,EAAG7L,EAAMkD,EAAGiG,EAAKuB,EAAGX,MACnC,IAAKjE,EAAU9F,GACb,OAGF,MAAM,QAAEkP,EAAO,MAAEhG,EAAK,QAAEsE,GAAYqE,EAASZ,SAASjR,GAElDkP,GACFmB,EAAQ9I,KAAK,CACX2B,QACA1H,MACAhB,MAAOR,EACPmJ,MACAY,OACAyD,kBAID,CACL,MAAQ3B,EAAG7L,EAAM0K,EAAGX,GAASvJ,GAEvB,QAAE0O,EAAO,MAAEhG,EAAK,QAAEsE,GAAYqE,EAASZ,SAASjR,GAElDkP,GACFmB,EAAQ9I,KAAK,CAAE2B,QAAO1H,MAAKhB,MAAOR,EAAM+J,OAAMyD,YAIlD,OAAO6C,GAIXmE,GAAKqB,QAAU,QACfrB,GAAKlI,YAAcA,EACnBkI,GAAK5H,WAAaA,EAClB4H,GAAKsB,OAASjM,EAGZ2K,GAAKjD,WAAakC,GAIlBf,GAASP,IAGI,U,qHC1/Cf,IACEhS,KAAM,aACN4V,WAAY,CACVC,cAAJ,QACIC,iBAAkB,WAAtB,6FACIC,gBAAiB,WAArB,yDAEEC,OAAQ,CAAC,GAAX,MACEC,MAAO,CACLC,QAAS,CACPtW,KAAMuW,OACNC,QAAS,IAEXC,MAAO,CACLzW,KAAM0W,SAERC,OAAQ,CACN3W,KAAM0W,QACNF,SAAS,GAEX3S,OAAQ,CACN7D,KAAMuW,OACNC,QAAS,GACTI,UAAU,GAEZ9T,SAAU,CACR9C,KAAMuW,OACNK,UAAU,EACVJ,QAAS,IAEXjS,QAAS,CACPvE,KAAMiU,OACN2C,UAAU,EACVJ,QAAS,MAGb1J,KApCF,WAoCA,WACI,MAAO,CACL+J,WAAY,GACZnS,UAAW,EACXC,UAAW,EAEX8M,MAAO,GAEPqF,gBAAiB,EAEjBC,cAAe,GAEf/R,mBAAoB,EAEpBgS,cAAe,aAEfpS,aAAa,EACbqS,eAAgB,GAChBC,wBAAyB,CAA/B,cACMtU,YAAY,EACZuU,OAAQ,GACRC,MAAO,GACPxT,mBAAmB,EACnBX,kBAAkB,EAClBoU,oBAAoB,EACpBC,sBAAsB,EACtBC,qBAAqB,EAErBrW,WAAY,CAClB,QACA,QACA,QACA,QACA,QACA,QACA,QACA,CACA,QACA,CACQ,QAAR,CACU,OAAV,WAIA,UAAQ,QAAR,oBACA,SAEME,iBAAkB,CACxB,aAAQ,QAAR,eACA,YACA,YACA,YACA,aAEQ,MAAR,WAAU,IAAV,iKACA,cADA,2CAAU,SAAV,mCAAU,OAAV,KAIQ,QAAR,YAAU,IAAV,0DACU,EAAV,QACU,EAAV,gBACU,EAAV,kBACU,IAAV,4BACU,EAAV,cACU,EAAV,cAIU,EAAV,iBAGQ,SAAR,YAAU,IAAV,8CAEU,GADA,EAAV,QACA,GACY,IAAZ,qBAAc,OAAd,UACY,EAAZ,qBAEY,EAAZ,gBAEU,EAAV,kBACU,EAAV,qBACU,IAAV,4BACU,EAAV,cACU,EAAV,eAGQ,OAAR,WAEU,EAAV,SACU,EAAV,iBACU,EAAV,kBACU,EAAV,qBACU,EAAV,gBAGQ,UAAR,YAAU,IAAV,UACU,MAAV,mBACY,EAAZ,aACA,GAEA,qBACY,EAAZ,eACA,GAEA,kBACY,EAAZ,gBACA,IAKQ,SAAR,cACU,IAAV,EACY,OAAZ,EAEU,IAAV,YACY,UAAZ,GACY,KAAZ,gCAEU,OAAV,gBAKMpC,QAAS,KAGbwY,MAAO,CAELC,gBAFJ,SAEA,GAEM5W,KAAK+D,YAAc8S,GAErB1Y,QANJ,SAMA,GACM6B,KAAK8W,MAAM,gBAAiBC,IAE9BnB,MAAO,CACLoB,QADN,SACA,GACapX,GACHI,KAAKiX,eAGTC,WAAW,GAEb,mBAAoB,CAClBF,QADN,WAEQ,IAAR,sCACA,gBACA,6BACY5X,EAAKoD,OAAS,EAChBxC,KAAK+B,YAAa,EAElB/B,KAAK+B,YAAa,IAIxB0T,QAAS,CACPuB,QADN,SACA,GACQhX,KAAK7B,QAAUgZ,GAEjBD,WAAW,IAGfE,SAAU,CACR3T,UADJ,WACA,QACA,oBACM,OAAN,8GAEI4T,SALJ,WAMM,OAAOrX,KAAKuW,MAAM/T,OAAS,GAG7B8U,WATJ,WAUM,OAAOtX,KAAKkW,cAAc1T,QAG5BoU,gBAbJ,WAcM,OAAO5W,KAAK4Q,OAAS5Q,KAAKsX,YAE5BC,UAhBJ,WAiBM,OACN,yBACA,iBACA,kBAEevX,KAAKgN,OAAOxK,OAAS,IAKlCgV,QAAS,CACPC,gBADJ,SACA,GACUC,IACF1X,KAAK7B,QAAU6B,KAAKyV,UAGxBhV,OANJ,YAMA,eACMT,KAAKsW,OAASA,GAEhBqB,eATJ,SASA,KACM,OAAIC,EAAIpV,QAAUqV,EACTD,EAEF,GAAb,6BAEIE,WAfJ,SAeA,GACM9X,KAAKuW,MAAMzL,OAAO5G,EAAO,GACzBlE,KAAK8W,MAAM,YAAa9W,KAAKuW,QAE/BwB,eAnBJ,SAmBA,GACM,IAAKC,EAAQ,MAAO,GACpB,GAAIA,EAAS,KACX,MAAO,GAAf,mBAEM,GAAIA,GAAU,MAAQA,EAAS,QAAS,CACtC,IAAR,sBACQ,MAAO,GAAf,gBAEM,GAAIA,GAAU,QAAS,CACrB,IAAR,yBACQ,MAAO,GAAf,gBAEM,MAAO,IAET9V,gBAlCJ,WAmCMlC,KAAK+C,mBAAoB,GAE3BE,iBArCJ,WAsCMjD,KAAK+C,mBAAoB,GAE3BG,UAxCJ,SAwCA,KACwB,OAAdC,EAAM6D,MACRiR,EAAQ,CACNjR,IAAK7D,EAAM6D,IACXkR,IAAK/U,EAAM+U,MAEblY,KAAK8W,MAAM,cAAe3T,EAAM+U,OAGpClW,eAjDJ,WAkDMhC,KAAKoC,kBAAmB,GAE1BC,gBApDJ,WAqDMrC,KAAKoC,kBAAmB,GAE1BO,SAvDJ,SAuDA,KACwB,OAAdE,EAAKsV,MACPF,EAAQ,CAAhB,eAGIG,iBA5DJ,WA6DMpY,KAAKwW,oBAAqB,GAE5B6B,kBA/DJ,WAgEMrY,KAAKwW,oBAAqB,GAE5B8B,UAlEJ,SAkEA,GACU/B,EAAM/T,OAAS,IACjBxC,KAAKuW,MAAQA,EACbvW,KAAK8W,MAAM,YAAaP,GACxBvW,KAAKqY,sBAKTE,UA3EJ,WA4EMvY,KAAKmE,oBACX,qDACA,2BAIIqU,YAlFJ,WAmFMxY,KAAKmE,oBACX,sDAGIsU,aAvFJ,WAwFM,IAAN,8CACUpU,GACFrE,KAAKoE,WAAWC,IAKpBD,WA/FJ,SA+FA,GACMpE,KAAKmW,cAAc,CACjBuC,MAAO1Y,KAAKiW,gBACZnY,MAAO,CACLC,GAAI4a,EAAS5a,GACbC,MAAO,GAAjB,oDAIIiZ,YAxGJ,WAyGMjX,KAAK7B,QAAU,GACf6B,KAAKuW,MAAQ,KAGjBqC,OAAQ,CACN5C,WAAY,CACVpF,MAAO,GAAb,QC5kBwgB,M,4ICQpgBiI,GAAY,gBACd,GACA/Y,EACAyE,GACA,EACA,KACA,WACA,MAIa,aAAAsU,GAAiB,QAWhC,KAAkBA,GAAW,CAACC,QAAA,KAAKC,SAAA,KAAMC,SAAA,KAAMC,aAAA,KAAUC,eAAA,QAAeC,SAAA,KAAMC,YAAA,Q,kCC7B9E,IAAIlO,EAAI,EAAQ,QACZmO,EAAY,EAAQ,QACpBC,EAAkB,EAAQ,QAC1BC,EAAS,EAAQ,QACjBC,EAAQ,EAAQ,QAEhBC,EAAgB,GAAIC,QACpB1L,EAAQxE,KAAKwE,MAEbvE,EAAM,SAAUkQ,EAAG7P,EAAG8P,GACxB,OAAa,IAAN9P,EAAU8P,EAAM9P,EAAI,IAAM,EAAIL,EAAIkQ,EAAG7P,EAAI,EAAG8P,EAAMD,GAAKlQ,EAAIkQ,EAAIA,EAAG7P,EAAI,EAAG8P,IAG9EC,EAAM,SAAUF,GAClB,IAAI7P,EAAI,EACJgQ,EAAKH,EACT,MAAOG,GAAM,KACXhQ,GAAK,GACLgQ,GAAM,KAER,MAAOA,GAAM,EACXhQ,GAAK,EACLgQ,GAAM,EACN,OAAOhQ,GAGPiQ,EAAW,SAAU9N,EAAMnC,EAAGkQ,GAChC,IAAI9V,GAAS,EACT+V,EAAKD,EACT,QAAS9V,EAAQ,EACf+V,GAAMnQ,EAAImC,EAAK/H,GACf+H,EAAK/H,GAAS+V,EAAK,IACnBA,EAAKjM,EAAMiM,EAAK,MAIhBC,EAAS,SAAUjO,EAAMnC,GAC3B,IAAI5F,EAAQ,EACR8V,EAAI,EACR,QAAS9V,GAAS,EAChB8V,GAAK/N,EAAK/H,GACV+H,EAAK/H,GAAS8J,EAAMgM,EAAIlQ,GACxBkQ,EAAKA,EAAIlQ,EAAK,KAIdqQ,EAAe,SAAUlO,GAC3B,IAAI/H,EAAQ,EACRkW,EAAI,GACR,QAASlW,GAAS,EAChB,GAAU,KAANkW,GAAsB,IAAVlW,GAA+B,IAAhB+H,EAAK/H,GAAc,CAChD,IAAImW,EAAI3E,OAAOzJ,EAAK/H,IACpBkW,EAAU,KAANA,EAAWC,EAAID,EAAIb,EAAO9T,KAAK,IAAK,EAAI4U,EAAE7X,QAAU6X,EAE1D,OAAOD,GAGPE,EAASb,IACY,UAAvB,KAAQC,QAAQ,IACG,MAAnB,GAAIA,QAAQ,IACS,SAArB,MAAMA,QAAQ,IACuB,yBAArC,mBAAsBA,QAAQ,MAC1BF,GAAM,WAEVC,EAAchU,KAAK,OAKrByF,EAAE,CAAEqP,OAAQ,SAAUC,OAAO,EAAMC,OAAQH,GAAU,CACnDZ,QAAS,SAAiBgB,GACxB,IAKIC,EAAGC,EAAGzM,EAAG1C,EALTuM,EAASsB,EAAgBtZ,MACzB6a,EAAcxB,EAAUqB,GACxBzO,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GACvB6O,EAAO,GACPlW,EAAS,IAGb,GAAIiW,EAAc,GAAKA,EAAc,GAAI,MAAME,WAAW,6BAE1D,GAAI/C,GAAUA,EAAQ,MAAO,MAC7B,GAAIA,IAAW,MAAQA,GAAU,KAAM,OAAOtC,OAAOsC,GAKrD,GAJIA,EAAS,IACX8C,EAAO,IACP9C,GAAUA,GAERA,EAAS,MAKX,GAJA2C,EAAId,EAAI7B,EAASvO,EAAI,EAAG,GAAI,IAAM,GAClCmR,EAAID,EAAI,EAAI3C,EAASvO,EAAI,GAAIkR,EAAG,GAAK3C,EAASvO,EAAI,EAAGkR,EAAG,GACxDC,GAAK,iBACLD,EAAI,GAAKA,EACLA,EAAI,EAAG,CACTZ,EAAS9N,EAAM,EAAG2O,GAClBzM,EAAI0M,EACJ,MAAO1M,GAAK,EACV4L,EAAS9N,EAAM,IAAK,GACpBkC,GAAK,EAEP4L,EAAS9N,EAAMxC,EAAI,GAAI0E,EAAG,GAAI,GAC9BA,EAAIwM,EAAI,EACR,MAAOxM,GAAK,GACV+L,EAAOjO,EAAM,GAAK,IAClBkC,GAAK,GAEP+L,EAAOjO,EAAM,GAAKkC,GAClB4L,EAAS9N,EAAM,EAAG,GAClBiO,EAAOjO,EAAM,GACbrH,EAASuV,EAAalO,QAEtB8N,EAAS9N,EAAM,EAAG2O,GAClBb,EAAS9N,EAAM,IAAM0O,EAAG,GACxB/V,EAASuV,EAAalO,GAAQsN,EAAO9T,KAAK,IAAKoV,GAUjD,OAPEA,EAAc,GAChBpP,EAAI7G,EAAOpC,OACXoC,EAASkW,GAAQrP,GAAKoP,EAClB,KAAOtB,EAAO9T,KAAK,IAAKoV,EAAcpP,GAAK7G,EAC3CA,EAAO6P,MAAM,EAAGhJ,EAAIoP,GAAe,IAAMjW,EAAO6P,MAAMhJ,EAAIoP,KAE9DjW,EAASkW,EAAOlW,EACTA,M","file":"js/chunk-4c461642.c0c8ef4b.js","sourcesContent":["/* eslint-disable */\nimport { Node } from 'tiptap';\nimport { Fragment } from 'prosemirror-model';\nimport { replaceText } from 'tiptap-commands';\n\nexport default class Span extends Node {\n  get name() {\n    return 'span';\n  }\n\n  get defaultOptions() {\n    return {\n      variableClass: 'variable',\n    };\n  }\n\n  getLabel(dom) {\n    return dom.innerText;\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        id: {},\n        label: {},\n      },\n      group: 'inline',\n      inline: true,\n      content: 'inline*',\n      selectable: false,\n      atom: true,\n      toDOM: (node) => [\n        'span',\n        {\n          class: this.options.variableClass,\n          'data-variable-id': node.attrs.id,\n        },\n        node.attrs.label,\n      ],\n      parseDOM: [\n        {\n          tag: 'span[data-variable-id]',\n          getAttrs: (dom) => {\n            const id = dom.getAttribute('data-variable-id');\n            const label = this.getLabel(dom);\n            return { id, label };\n          },\n          getContent: (dom, schema) => {\n            const label = this.getLabel(dom);\n            return Fragment.fromJSON(schema, [\n              {\n                type: 'text',\n                text: label,\n              },\n            ]);\n          },\n        },\n      ],\n    };\n  }\n\n  commands({ schema }) {\n    return (attrs) => replaceText(null, schema.nodes[this.name], attrs);\n  }\n}\n","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NoteEditor.vue?vue&type=style&index=0&id=13d0b2b8&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('tiptap-vuetify',{attrs:{\"extensions\":_vm.extensions,\"card-props\":{ outlined: true },\"placeholder\":\"Write something …\",\"native-extensions\":_vm.nativeExtensions},on:{\"init\":_vm.onInit},scopedSlots:_vm._u([{key:\"toolbar\",fn:function(ref){\nvar commands = ref.commands;\nvar isActive = ref.isActive;\nreturn [_c('div',{staticClass:\"menubar\"},[_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":commands.undo}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-undo\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Deshacer\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":commands.redo}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-redo\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Rehacer\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({class:{ 'is-active': isActive.heading({ level: 1 }) },attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return commands.heading({ level: 1 })}}},'v-btn',attrs,false),on),[_c('b',[_vm._v(\"H1\")])])]}}],null,true)},[_c('span',[_vm._v(\"Título H1\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({class:{ 'is-active': isActive.heading({ level: 2 }) },attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return commands.heading({ level: 2 })}}},'v-btn',attrs,false),on),[_c('b',[_vm._v(\"H2\")])])]}}],null,true)},[_c('span',[_vm._v(\"Subtítulo H2\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({class:{ 'is-active': isActive.heading({ level: 3 }) },attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return commands.heading({ level: 3 })}}},'v-btn',attrs,false),on),[_c('b',[_vm._v(\"H3\")])])]}}],null,true)},[_c('span',[_vm._v(\"Subtítulo H3\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({class:{ 'is-active': isActive.bold() },attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":commands.bold}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-format-bold\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Negritas\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({class:{ 'is-active': isActive.italic() },attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":commands.italic}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-format-italic\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Itálica\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({class:{ 'is-active': isActive.underline() },attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":commands.underline}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-format-underline\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Subrayado\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({class:{ 'is-active': isActive.ordered_list() },attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":commands.ordered_list}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-format-list-numbered\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Lista ordenada\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({class:{ 'is-active': isActive.bullet_list() },attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":commands.bullet_list}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-format-list-bulleted\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Lista desordenada\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"text\":\"\",\"icon\":\"\",\"disabled\":!_vm.isSelected},on:{\"click\":_vm.openEditorLink}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-link\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Añadir enlace\")])]),(_vm.typeItem !== 'COMMENT')?_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":_vm.openEditorImage}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-image\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Añadir imagen\")])]):_vm._e(),_c('EmailEditorLink',{attrs:{\"isOpen\":_vm.isOpenEditorLink},on:{\"close\":_vm.closeEditorLink,\"save\":function($event){\nvar i = arguments.length, argsArray = Array(i);\nwhile ( i-- ) argsArray[i] = arguments[i];\nreturn _vm.saveLink.apply(void 0, [ commands.link ].concat( argsArray ))}}}),_c('EmailEditorImage',{attrs:{\"isBase64\":true,\"isOpen\":_vm.isOpenEditorImage,\"itemId\":_vm.itemId,\"typeItem\":_vm.typeItem},on:{\"close\":_vm.closeEditorImage,\"save\":function($event){\nvar i = arguments.length, argsArray = Array(i);\nwhile ( i-- ) argsArray[i] = arguments[i];\nreturn _vm.saveImage.apply(void 0, [ commands.image ].concat( argsArray ))}}})],1)]}}]),model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}}),_c('p',{staticClass:\"mb-0 text-right\"},[_vm._v(_vm._s(_vm.isMaxSize)+\"/\"+_vm._s(_vm.maxSize))]),_c('v-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSuggestions),expression:\"showSuggestions\"}],attrs:{\"position-x\":_vm.positionX,\"position-y\":_vm.positionY,\"offset-y\":\"\",\"nudge-bottom\":\"30\",\"absolute\":\"\"},model:{value:(_vm.tooltipShow),callback:function ($$v) {_vm.tooltipShow=$$v},expression:\"tooltipShow\"}},[_c('v-list',[(_vm.hasResults)?_vm._l((_vm.filteredUsers),function(itemUser,index){return _c('v-list-item',{key:itemUser.id,class:{ 'is-selected': _vm.navigatedUserIndex === index },on:{\"click\":function($event){return _vm.selectUser(itemUser)}}},[_c('v-list-item-title',[_vm._v(\" \"+_vm._s(itemUser.user.name)+\" \"+_vm._s(itemUser.user.lastName)+\" \")])],1)}):_c('v-list-item',[_c('v-list-item-title',[_vm._v(\" No hay usuarios \")])],1)],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * Fuse.js v6.4.6 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2021 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      totalWeight += obj.weight;\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n  }\n\n  return { path, id, weight, src }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      const norm = 1 / Math.sqrt(numTokens);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({ getFn = Config.getFn } = {}) {\n    this.norm = norm(3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      // console.log(key)\n      let value = this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          }\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (!isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(keys, docs, { getFn = Config.getFn } = {}) {\n  const myIndex = new FuseIndex({ getFn });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(data, { getFn = Config.getFn } = {}) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, includeMatches } = this.options;\n\n    if (!isCaseSensitive) {\n      text = text.toLowerCase();\n    }\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// ❗Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=([^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore$1(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore$1(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      /*eslint indent: [2, 2, {\"SwitchCase\": 1}]*/\n      switch (node.operator) {\n        case LogicalOperator.AND: {\n          const res = [];\n          for (let i = 0, len = node.children.length; i < len; i += 1) {\n            const child = node.children[i];\n            const result = evaluate(child, item, idx);\n            if (result.length) {\n              res.push(...result);\n            } else {\n              return []\n            }\n          }\n          return res\n        }\n        case LogicalOperator.OR: {\n          const res = [];\n          for (let i = 0, len = node.children.length; i < len; i += 1) {\n            const child = node.children[i];\n            const result = evaluate(child, item, idx);\n            if (result.length) {\n              res.push(...result);\n              break\n            }\n          }\n          return res\n        }\n      }\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '6.4.6';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport default Fuse;\n","<template>\n  <div>\n    <tiptap-vuetify\n      v-model=\"content\"\n      :extensions=\"extensions\"\n      :card-props=\"{ outlined: true }\"\n      placeholder=\"Write something …\"\n      :native-extensions=\"nativeExtensions\"\n      @init=\"onInit\"\n    >\n      <template #toolbar=\"{ commands, isActive }\">\n        <div class=\"menubar\">\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn text icon @click=\"commands.undo\" v-bind=\"attrs\" v-on=\"on\">\n                <v-icon>mdi-undo</v-icon>\n              </v-btn>\n            </template>\n            <span>Deshacer</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn text icon @click=\"commands.redo\" v-bind=\"attrs\" v-on=\"on\">\n                <v-icon>mdi-redo</v-icon>\n              </v-btn>\n            </template>\n            <span>Rehacer</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                :class=\"{ 'is-active': isActive.heading({ level: 1 }) }\"\n                @click=\"commands.heading({ level: 1 })\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <b>H1</b>\n              </v-btn>\n            </template>\n            <span>Título H1</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                :class=\"{ 'is-active': isActive.heading({ level: 2 }) }\"\n                @click=\"commands.heading({ level: 2 })\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <b>H2</b>\n              </v-btn>\n            </template>\n            <span>Subtítulo H2</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                :class=\"{ 'is-active': isActive.heading({ level: 3 }) }\"\n                @click=\"commands.heading({ level: 3 })\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <b>H3</b>\n              </v-btn>\n            </template>\n            <span>Subtítulo H3</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                :class=\"{ 'is-active': isActive.bold() }\"\n                @click=\"commands.bold\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-format-bold</v-icon>\n              </v-btn>\n            </template>\n            <span>Negritas</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                :class=\"{ 'is-active': isActive.italic() }\"\n                @click=\"commands.italic\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-format-italic</v-icon>\n              </v-btn>\n            </template>\n            <span>Itálica</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                :class=\"{ 'is-active': isActive.underline() }\"\n                @click=\"commands.underline\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-format-underline</v-icon>\n              </v-btn>\n            </template>\n            <span>Subrayado</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                :class=\"{ 'is-active': isActive.ordered_list() }\"\n                @click=\"commands.ordered_list\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-format-list-numbered</v-icon>\n              </v-btn>\n            </template>\n            <span>Lista ordenada</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                :class=\"{ 'is-active': isActive.bullet_list() }\"\n                @click=\"commands.bullet_list\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-format-list-bulleted</v-icon>\n              </v-btn>\n            </template>\n            <span>Lista desordenada</span>\n          </v-tooltip>\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                @click=\"openEditorLink\"\n                :disabled=\"!isSelected\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-link</v-icon>\n              </v-btn>\n            </template>\n            <span>Añadir enlace</span>\n          </v-tooltip>\n          <v-tooltip top v-if=\"typeItem !== 'COMMENT'\">\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                text\n                icon\n                @click=\"openEditorImage\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-image</v-icon>\n              </v-btn>\n            </template>\n            <span>Añadir imagen</span>\n          </v-tooltip>\n          <EmailEditorLink\n            :isOpen=\"isOpenEditorLink\"\n            @close=\"closeEditorLink\"\n            @save=\"saveLink(commands.link, ...arguments)\"\n          ></EmailEditorLink>\n          <EmailEditorImage\n            :isBase64=\"true\"\n            :isOpen=\"isOpenEditorImage\"\n            :itemId=\"itemId\"\n            :typeItem=\"typeItem\"\n            @close=\"closeEditorImage\"\n            @save=\"saveImage(commands.image, ...arguments)\"\n          ></EmailEditorImage>\n        </div>\n      </template>\n    </tiptap-vuetify>\n    <p class=\"mb-0 text-right\">{{ isMaxSize }}/{{ maxSize }}</p>\n    <v-menu\n      v-model=\"tooltipShow\"\n      :position-x=\"positionX\"\n      :position-y=\"positionY\"\n      offset-y\n      nudge-bottom=\"30\"\n      absolute\n      v-show=\"showSuggestions\"\n    >\n      <v-list>\n        <template v-if=\"hasResults\">\n          <v-list-item\n            v-for=\"(itemUser, index) in filteredUsers\"\n            :key=\"itemUser.id\"\n            @click=\"selectUser(itemUser)\"\n            :class=\"{ 'is-selected': navigatedUserIndex === index }\"\n          >\n            <v-list-item-title>\n              {{ itemUser.user.name }} {{ itemUser.user.lastName }}\n            </v-list-item-title>\n          </v-list-item>\n        </template>\n        <v-list-item v-else>\n          <v-list-item-title>\n            No hay usuarios\n          </v-list-item-title>\n        </v-list-item>\n      </v-list>\n    </v-menu>\n  </div>\n</template>\n\n<script>\nimport Fuse from 'fuse.js';\nimport {\n  TiptapVuetify,\n  History,\n  Heading,\n  Bold,\n  Italic,\n  Underline,\n  BulletList,\n  OrderedList,\n  ListItem,\n  HardBreak,\n} from 'tiptap-vuetify';\nimport { Mention } from 'tiptap-extensions';\nimport TipTapCustomImage from '@/components/tiptap/TipTapImage';\nimport MaxSize from '@/components/tiptap/MaxSize';\nimport Span from '@/components/emails/Span';\nimport Paragraph from '@/components/emails/Paragraph';\nimport { CustomLink } from '@/components/notes/CustomLink';\n// graphql\nimport { USERS_LIST } from '@/graphql/querys/usersQuery';\n// mixins\nimport { modalMethodsMixin } from '@/mixins/modalsMixin';\n\nexport default {\n  name: 'NoteEditor',\n  components: {\n    TiptapVuetify,\n    EmailEditorImage: () => import('@/components/emails/EmailEditorImage.vue'),\n    EmailEditorLink: () => import('@/components/emails/EmailEditorLink.vue'),\n  },\n  mixins: [modalMethodsMixin],\n  props: {\n    message: {\n      type: String,\n      default: '',\n    },\n    reset: {\n      type: Boolean,\n    },\n    isEdit: {\n      type: Boolean,\n      default: false,\n    },\n    itemId: {\n      type: String,\n      default: '',\n      required: false,\n    },\n    typeItem: {\n      type: String,\n      required: false,\n      default: '',\n    },\n    maxSize: {\n      type: Number,\n      required: false,\n      default: 2000,\n    },\n  },\n  data() {\n    return {\n      ownersList: [],\n      positionX: 0,\n      positionY: 0,\n      // Query mentions\n      query: '',\n      // Position the range where is the mention\n      suggestionRange: 0,\n      // Users filter\n      filteredUsers: [],\n      // Move into menu users filter\n      navigatedUserIndex: 0,\n      // Inser mention into the note\n      insertMention: () => {},\n      // Show menu mention\n      tooltipShow: false,\n      emailTemplates: [],\n      userEnterpriseSignature: { signature: '' },\n      isSelected: false,\n      editor: {},\n      files: [],\n      isOpenEditorImage: false,\n      isOpenEditorLink: false,\n      isOpenEditorAttach: false,\n      isOpenModalSignature: false,\n      isOpenModalTemplate: false,\n      // declare extensions you want to use\n      extensions: [\n        Bold,\n        History,\n        Underline,\n        Italic,\n        ListItem,\n        BulletList,\n        OrderedList,\n        [\n          Heading,\n          {\n            options: {\n              levels: [1, 2, 3],\n            },\n          },\n        ],\n        [CustomLink, { options: { target: '_blank' } }],\n        HardBreak,\n      ],\n      nativeExtensions: [\n        new MaxSize({ maxSize: this.maxSize }),\n        new Span(),\n        new Paragraph(),\n        new TipTapCustomImage(),\n        new Mention({\n          // a list of all suggested items\n          items: async () => {\n            return this.ownersList;\n          },\n          // is called when a suggestion starts\n          onEnter: ({ items, query, range, command, virtualNode }) => {\n            this.query = query;\n            this.filteredUsers = items;\n            this.suggestionRange = range;\n            const virtual = virtualNode.getBoundingClientRect();\n            this.positionX = virtual.x;\n            this.positionY = virtual.y;\n            // we save the command for inserting a selected mention\n            // this allows us to call it inside of our custom popup\n            // via keyboard navigation and on click\n            this.insertMention = command;\n          },\n          // is called when a suggestion has changed\n          onChange: ({ items, query, range, virtualNode }) => {\n            this.query = query;\n            if (query) {\n              const formatUsers = items.map((user) => user.item);\n              this.filteredUsers = formatUsers;\n            } else {\n              this.filteredUsers = items;\n            }\n            this.suggestionRange = range;\n            this.navigatedUserIndex = 0;\n            const virtual = virtualNode.getBoundingClientRect();\n            this.positionX = virtual.x;\n            this.positionY = virtual.y;\n          },\n          // is called when a suggestion is cancelled\n          onExit: () => {\n            // reset all saved values\n            this.query = '';\n            this.filteredUsers = [];\n            this.suggestionRange = 0;\n            this.navigatedUserIndex = 0;\n            this.tooltipShow = false;\n          },\n          // is called on every keyDown event while a suggestion is active\n          onKeyDown: ({ event }) => {\n            if (event.key === 'ArrowUp') {\n              this.upHandler();\n              return true;\n            }\n            if (event.key === 'ArrowDown') {\n              this.downHandler();\n              return true;\n            }\n            if (event.key === 'Enter') {\n              this.enterHandler();\n              return true;\n            }\n            return false;\n          },\n          // is called when a suggestion has changed and search\n          onFilter: (items, query) => {\n            if (!query) {\n              return items;\n            }\n            const fuse = new Fuse(items, {\n              threshold: 0.2,\n              keys: ['user.name', 'user.lastName'],\n            });\n            return fuse.search(query);\n          },\n        }),\n      ],\n      // starting editor's content\n      content: '',\n    };\n  },\n  watch: {\n    // Show menu suggestions\n    showSuggestions(queryAndResults) {\n      // If has result and query show the menu\n      this.tooltipShow = queryAndResults;\n    },\n    content(newValue) {\n      this.$emit('updateMessage', newValue);\n    },\n    reset: {\n      handler(value) {\n        if (!value) {\n          this.resetvalues();\n        }\n      },\n      immediate: true,\n    },\n    'editor.selection': {\n      handler() {\n        const { selection, state } = this.editor;\n        const { from, to } = selection;\n        const text = state.doc.textBetween(from, to, ' ');\n        if (text.length > 0) {\n          this.isSelected = true;\n        } else {\n          this.isSelected = false;\n        }\n      },\n    },\n    message: {\n      handler(newMessage) {\n        this.content = newMessage;\n      },\n      immediate: true,\n    },\n  },\n  computed: {\n    isMaxSize() {\n      const { state } = this.editor;\n      return state?.doc?.textContent?.length || 0;\n    },\n    hasFiles() {\n      return this.files.length > 0;\n    },\n    // Check if has results to show\n    hasResults() {\n      return this.filteredUsers.length;\n    },\n    // Return true if has query and results\n    showSuggestions() {\n      return this.query || this.hasResults;\n    },\n    hasSearch() {\n      if (\n        this.search !== null &&\n        this.search !== undefined &&\n        this.search !== ''\n      ) {\n        return this.search.length > 0;\n      }\n      return false;\n    },\n  },\n  methods: {\n    setValueContent(isEditing) {\n      if (isEditing) {\n        this.content = this.message;\n      }\n    },\n    onInit({ editor }) {\n      this.editor = editor;\n    },\n    truncateString(str, num) {\n      if (str.length <= num) {\n        return str;\n      }\n      return `${str.slice(0, num)} ...`;\n    },\n    removeFile(index) {\n      this.files.splice(index, 1);\n      this.$emit('saveFiles', this.files);\n    },\n    returnFileSize(number) {\n      if (!number) return '';\n      if (number < 1024) {\n        return `${number} bytes`;\n      }\n      if (number >= 1024 && number < 1048576) {\n        const num = (number / 1024).toFixed(1);\n        return `${num} KB`;\n      }\n      if (number >= 1048576) {\n        const num = (number / 1048576).toFixed(1);\n        return `${num} MB`;\n      }\n      return '';\n    },\n    openEditorImage() {\n      this.isOpenEditorImage = true;\n    },\n    closeEditorImage() {\n      this.isOpenEditorImage = false;\n    },\n    saveImage(command, image) {\n      if (image.src !== null) {\n        command({\n          src: image.src,\n          alt: image.alt,\n        });\n        this.$emit('updateImage', image.alt);\n      }\n    },\n    openEditorLink() {\n      this.isOpenEditorLink = true;\n    },\n    closeEditorLink() {\n      this.isOpenEditorLink = false;\n    },\n    saveLink(command, link) {\n      if (link.href !== null) {\n        command({ href: link.href });\n      }\n    },\n    openEditorAttach() {\n      this.isOpenEditorAttach = true;\n    },\n    closeEditorAttach() {\n      this.isOpenEditorAttach = false;\n    },\n    saveFiles(files) {\n      if (files.length > 0) {\n        this.files = files;\n        this.$emit('saveFiles', files);\n        this.closeEditorAttach();\n      }\n    },\n    // Navigate to the previous item\n    // If it's the first item, navigate to the last one\n    upHandler() {\n      this.navigatedUserIndex =\n        (this.navigatedUserIndex + this.filteredUsers.length - 1) %\n        this.filteredUsers.length;\n    },\n    // Navigate to the next item\n    // If it's the last item, navigate to the first one\n    downHandler() {\n      this.navigatedUserIndex =\n        (this.navigatedUserIndex + 1) % this.filteredUsers.length;\n    },\n    // Select user when do enter\n    enterHandler() {\n      const user = this.filteredUsers[this.navigatedUserIndex];\n      if (user) {\n        this.selectUser(user);\n      }\n    },\n    // We have to replace our suggestion text with a mention\n    // So it's important to pass also the position of your suggestion text\n    selectUser(userItem) {\n      this.insertMention({\n        range: this.suggestionRange,\n        attrs: {\n          id: userItem.id,\n          label: `${userItem.user.name} ${userItem.user.lastName}`,\n        },\n      });\n    },\n    resetvalues() {\n      this.content = '';\n      this.files = [];\n    },\n  },\n  apollo: {\n    ownersList: {\n      query: USERS_LIST,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '{ .tiptap-vuetify-editor__content  img .tiptap-vuetify-editor .is-active .variable .mention .is-selected .menubar} from ../../../../scss/components/note.editor';\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NoteEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NoteEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NoteEditor.vue?vue&type=template&id=13d0b2b8&scoped=true&\"\nimport script from \"./NoteEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./NoteEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NoteEditor.vue?vue&type=style&index=0&id=13d0b2b8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13d0b2b8\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VIcon,VList,VListItem,VListItemTitle,VMenu,VTooltip})\n","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n"],"sourceRoot":""}