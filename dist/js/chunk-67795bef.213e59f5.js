(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67795bef","chunk-2d228fe6","chunk-253b7a6f"],{"0538":function(t,e,n){"use strict";var i=n("1c0b"),a=n("861d"),o=[].slice,r={},s=function(t,e,n){if(!(e in r)){for(var i=[],a=0;a<e;a++)i[a]="a["+a+"]";r[e]=Function("C,a","return new C("+i.join(",")+")")}return r[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=o.call(arguments,1),r=function(){var i=n.concat(o.call(arguments));return this instanceof r?s(e,i.length,i):e.apply(t,i)};return a(e.prototype)&&(r.prototype=e.prototype),r}},"0908":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{scrollable:"","max-width":"430px",persistent:""},model:{value:t.modal.status,callback:function(e){t.$set(t.modal,"status",e)},expression:"modal.status"}},[n("v-card",[n("v-card-title",{staticClass:"primary white--text"},[t._v(" "+t._s(t.config.title)+" "),n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-divider"),n("v-card-text",{staticClass:"py-2"},[n("div",{staticClass:"text-center"},[n("v-icon",{staticClass:"icon",attrs:{size:"50",color:"white"}},[t._v(" mdi-trash-can-outline ")]),n("h3",{staticClass:"subtitle"},[t._v(t._s(t.config.subtitle))]),n("h3",{staticClass:"description mb-0 font-weight-bold"},[t._v('"'+t._s(t.item.name)+'"')]),n("p",{staticClass:"description"},[t._v(" "+t._s(t.config.description)+" ")])],1)]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",outlined:""},on:{click:t.close}},[t._v(" Cancelar ")]),n("v-spacer"),n("v-btn",{attrs:{color:"error",loading:t.isLoading},on:{click:t.remove}},[t._v(" Eliminar ")])],1)],1)],1)},a=[],o=n("1891"),r={name:"BaseModalDeleteItem",mixins:[o["b"],o["a"]],props:{isLoading:{type:Boolean,default:!1,required:!0},config:{type:Object,default:function(){return{title:"",subtitle:"",description:""}},required:!0},item:{type:Object,default:function(){},required:!0}},data:function(){return{modalId:"deleteTemplateEmail",modal:{}}},methods:{close:function(){this.changeModal({id:"deleteTemplateEmail",status:!1})},remove:function(){this.$emit("remove",this.item.id)}}},s=r,c=(n("35b5"),n("0c7c")),l=n("6544"),u=n.n(l),d=n("8336"),f=n("b0af"),m=n("99d9"),p=n("169a"),v=n("ce7e"),g=n("132d"),h=n("2fa4"),b=Object(c["a"])(s,i,a,!1,null,"5c16b76f",null);e["a"]=b.exports;u()(b,{VBtn:d["a"],VCard:f["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VDialog:p["a"],VDivider:v["a"],VIcon:g["a"],VSpacer:h["a"]})},"11a8":function(t,e,n){},"131a":function(t,e,n){var i=n("23e7"),a=n("d2bb");i({target:"Object",stat:!0},{setPrototypeOf:a})},"1c2a":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tiptap-vuetify",{attrs:{extensions:t.extensions,"card-props":{height:"300px",class:"px-4 card-overflow"},placeholder:"Write something …","native-extensions":t.nativeExtensions},on:{init:t.onInit},scopedSlots:t._u([{key:"toolbar",fn:function(e){var i=e.commands,a=e.isActive;return[n("div",{staticClass:"menubar"},[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{small:"",text:"",icon:""},on:{click:i.undo}},"v-btn",o,!1),a),[n("v-icon",[t._v("mdi-undo")])],1)]}}],null,!0)},[n("span",[t._v("Deshacer")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{small:"",text:"",icon:""},on:{click:i.redo}},"v-btn",o,!1),a),[n("v-icon",[t._v("mdi-redo")])],1)]}}],null,!0)},[n("span",[t._v("Rehacer")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({class:{"is-active":a.heading({level:1})},attrs:{small:"",text:"",icon:""},on:{click:function(t){return i.heading({level:1})}}},"v-btn",r,!1),o),[n("b",[t._v("H1")])])]}}],null,!0)},[n("span",[t._v("Título H1")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({class:{"is-active":a.heading({level:2})},attrs:{small:"",text:"",icon:""},on:{click:function(t){return i.heading({level:2})}}},"v-btn",r,!1),o),[n("b",[t._v("H2")])])]}}],null,!0)},[n("span",[t._v("Subtítulo H2")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({class:{"is-active":a.heading({level:3})},attrs:{small:"",text:"",icon:""},on:{click:function(t){return i.heading({level:3})}}},"v-btn",r,!1),o),[n("b",[t._v("H3")])])]}}],null,!0)},[n("span",[t._v("Subtítulo H3")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({class:{"is-active":a.bold()},attrs:{small:"",text:"",icon:""},on:{click:i.bold}},"v-btn",r,!1),o),[n("v-icon",[t._v("mdi-format-bold")])],1)]}}],null,!0)},[n("span",[t._v("Negritas")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({class:{"is-active":a.italic()},attrs:{small:"",text:"",icon:""},on:{click:i.italic}},"v-btn",r,!1),o),[n("v-icon",[t._v("mdi-format-italic")])],1)]}}],null,!0)},[n("span",[t._v("Itálica")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({class:{"is-active":a.underline()},attrs:{small:"",text:"",icon:""},on:{click:i.underline}},"v-btn",r,!1),o),[n("v-icon",[t._v("mdi-format-underline")])],1)]}}],null,!0)},[n("span",[t._v("Subrayado")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({class:{"is-active":a.ordered_list()},attrs:{small:"",text:"",icon:""},on:{click:i.ordered_list}},"v-btn",r,!1),o),[n("v-icon",[t._v("mdi-format-list-numbered")])],1)]}}],null,!0)},[n("span",[t._v("Lista ordenada")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({class:{"is-active":a.bullet_list()},attrs:{small:"",text:"",icon:""},on:{click:i.bullet_list}},"v-btn",r,!1),o),[n("v-icon",[t._v("mdi-format-list-bulleted")])],1)]}}],null,!0)},[n("span",[t._v("Lista desordenada")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{small:"",text:"",icon:"",disabled:!t.isSelected},on:{click:t.openEditorLink}},"v-btn",a,!1),i),[n("v-icon",[t._v("mdi-link")])],1)]}}],null,!0)},[n("span",[t._v("Añadir enlace")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{small:"",text:"",icon:""},on:{click:t.openEditorImage}},"v-btn",a,!1),i),[n("v-icon",[t._v("mdi-image")])],1)]}}],null,!0)},[n("span",[t._v("Añadir imagen")])]),n("EmailEditorLink",{attrs:{isOpen:t.isOpenEditorLink},on:{close:t.closeEditorLink,save:function(e){var n=arguments.length,a=Array(n);while(n--)a[n]=arguments[n];return t.saveLink.apply(void 0,[i.link].concat(a))}}}),n("EmailEditorImage",{attrs:{isOpen:t.isOpenEditorImage},on:{close:t.closeEditorImage,save:function(e){var n=arguments.length,a=Array(n);while(n--)a[n]=arguments[n];return t.saveImage.apply(void 0,[i.image].concat(a))}}})],1)]}}]),model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})},a=[],o=n("3f38"),r=n("a497"),s=n("580e"),c=n("dc0a"),l=n("afcc"),u={name:"EmailEditorSignature",components:{TiptapVuetify:o["k"],EmailEditorImage:s["default"],EmailEditorLink:c["default"]},props:{signature:{type:String,default:""},signatureBefore:{type:String,default:""},reset:{type:Boolean,default:!1}},data:function(){return{isSelected:!1,editor:{},files:[],isOpenEditorImage:!1,isOpenEditorLink:!1,isOpenEditorAttach:!1,extensions:[o["a"],o["e"],o["m"],o["g"],o["i"],o["b"],o["j"],[o["d"],{options:{levels:[1,2,3]}}],o["h"],o["c"]],content:"",nativeExtensions:[new l["a"],new r["a"]]}},watch:{reset:function(t){t||this.resetData()},signatureBefore:function(t){this.content=t},content:function(t){this.$emit("update:signature",t)},"editor.selection":function(){var t=this.editor,e=t.selection,n=t.state,i=e.from,a=e.to,o=n.doc.textBetween(i,a," ");o.length>0?this.isSelected=!0:this.isSelected=!1}},created:function(){this.content=this.signatureBefore},methods:{onInit:function(t){var e=t.editor;this.editor=e},openEditorImage:function(){this.isOpenEditorImage=!0},closeEditorImage:function(){this.isOpenEditorImage=!1},saveImage:function(t,e){null!==e.src&&t({src:e.src,alt:e.alt,height:e.height,width:e.width})},openEditorLink:function(){this.isOpenEditorLink=!0},closeEditorLink:function(){this.isOpenEditorLink=!1},saveLink:function(t,e){null!==e.href&&t({href:e.href})},resetData:function(){this.content=this.signatureBefore}}},d=u,f=(n("6937"),n("0c7c")),m=n("6544"),p=n.n(m),v=n("8336"),g=n("132d"),h=n("3a2f"),b=Object(f["a"])(d,i,a,!1,null,"04bda921",null);e["a"]=b.exports;p()(b,{VBtn:v["a"],VIcon:g["a"],VTooltip:h["a"]})},"1e3f":function(t,e,n){},"262e":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("131a");function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},"2caf":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n("4ae1"),n("131a"),n("3410");function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var o=n("7037"),r=n.n(o);function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!==r()(e)&&"function"!==typeof e?s(t):e}function l(t){var e=a();return function(){var n,a=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return c(this,n)}}},3410:function(t,e,n){var i=n("23e7"),a=n("d039"),o=n("7b0b"),r=n("e163"),s=n("e177"),c=a((function(){r(1)}));i({target:"Object",stat:!0,forced:c,sham:!s},{getPrototypeOf:function(t){return r(o(t))}})},"35b5":function(t,e,n){"use strict";n("e4ce")},"3abe":function(t,e,n){},"4ae1":function(t,e,n){var i=n("23e7"),a=n("d066"),o=n("1c0b"),r=n("825a"),s=n("861d"),c=n("7c73"),l=n("0538"),u=n("d039"),d=a("Reflect","construct"),f=u((function(){function t(){}return!(d((function(){}),[],t)instanceof t)})),m=!u((function(){d((function(){}))})),p=f||m;i({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){o(t),r(e);var n=arguments.length<3?t:o(arguments[2]);if(m&&!f)return d(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(l.apply(t,i))}var a=n.prototype,u=c(s(a)?a:Object.prototype),p=Function.apply.call(t,u,e);return s(p)?p:u}})},"580e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{scrollable:"","max-width":"430px",persistent:""},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("v-card",[n("v-card-title",{staticClass:"primary white--text"},[t._v(" Selecciona una imagen "),n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-divider"),n("v-card-text",{staticClass:"py-2"},[n("v-form",{ref:"form"},[n("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone","include-styling":!0,options:t.dropzoneOptions},on:{"vdropzone-files-added":t.startProcessingFiles,"vdropzone-success-multiple":t.updateFiles,"vdropzone-error":t.getError}},[n("v-card",[n("v-card-text",{staticClass:"d-flex justify-center"},[n("div",[n("v-icon",{attrs:{large:""}},[t._v("mdi-image-plus")]),t._v(" Arrastra o sube una imagen ")],1)])],1)],1)],1),n("BaseModalError",{attrs:{modalHandler:t.modalError},on:{close:t.modalHandlerError}})],1),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",outlined:""},on:{click:t.close}},[t._v(" Cancelar ")]),n("v-spacer"),n("v-btn",{attrs:{loading:t.isLoading,disabled:t.isDisabled||0===t.files.length,color:"secondary"},on:{click:t.saveImages}},[t._v(" Insertar imagen ")])],1)],1)],1)},a=[],o=(n("159b"),n("9911"),n("d3b7"),n("25f0"),n("b0c0"),n("92c3")),r=n.n(o),s=n("62f2"),c=n("1e6d"),l=(n("1e3f"),{name:"EmailEditorImage",components:{vueDropzone:r.a},props:{isOpen:{type:Boolean,default:!1},isBase64:{type:Boolean,default:!1},itemId:{type:String,default:""},typeItem:{type:String,default:""}},mixins:[c["a"]],data:function(){return{dropzoneOptions:{url:"https://httpbin.org/post",maxFilesize:5,uploadMultiple:!0,acceptedFiles:"image/*",maxFiles:5,addRemoveLinks:!0,dictDefaultMessage:"Haz clic aquí o arrastra una imagen para añadirla",dictCancelUpload:"Cancelar",dictFileTooBig:"El archivo es demasiado grande ({{filesize}}MB). Máx:{{maxFilesize}}MB.",dictRemoveFile:"Eliminar"},isLoading:!1,isDisabled:!1,files:[]}},methods:{startProcessingFiles:function(){this.isDisabled=!0},updateFiles:function(t){this.isDisabled=!1,this.files=t,this.$emit("files",t)},saveImages:function(){var t=this;this.files.length>0&&(this.isLoading=!0,this.isBase64?this.files.forEach((function(e){var n=e.size,i={file:e,size:n,location:t.typeItem,idSource:t.itemId};t.$apollo.mutate({client:"files",mutation:s["g"],variables:{input:i}}).then((function(e){var n=e.data.uploadNoteFile,i=n.key,a=n.link;t.$emit("save",{src:a,alt:i}),t.isLoading=!1,t.close()})).catch((function(){var e="No se pudo subir la imagen, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e})}))})):(this.files.forEach((function(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(i){var a,o,r=new Image;r.src=i.target.result,r.onload=function(){a=r.height,o=r.width,t.$emit("save",{src:n.result.toString(),alt:e.name,height:a,width:o})}}})),this.isLoading=!1,this.close()))},getError:function(t){var e=t.accepted,n="";n=e?"Ocurrio un error al subir el archivo intentelo de nuevo o contacte a soporte":"El archivo que seleccionaste no es valido",console.log("ERROR",n)},close:function(){this.$emit("close"),this.files=[],this.$refs.myVueDropzone.removeAllFiles()}}}),u=l,d=(n("f910"),n("0c7c")),f=n("6544"),m=n.n(f),p=n("8336"),v=n("b0af"),g=n("99d9"),h=n("169a"),b=n("ce7e"),y=n("4bd4"),_=n("132d"),E=n("2fa4"),x=Object(d["a"])(u,i,a,!1,null,"b72393d6",null);e["default"]=x.exports;m()(x,{VBtn:p["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VDialog:h["a"],VDivider:b["a"],VForm:y["a"],VIcon:_["a"],VSpacer:E["a"]})},"62f2":function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return m})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return v})),n.d(e,"e",(function(){return g})),n.d(e,"c",(function(){return h})),n.d(e,"g",(function(){return b}));var i,a,o,r,s,c,l,u=n("8785"),d=n("5184"),f=Object(d["a"])(i||(i=Object(u["a"])(["\n  mutation createNote($noteInput: noteCreateInput!) {\n    createNote(noteInput: $noteInput) {\n      id\n      content\n      type\n      comments {\n        id\n        comment\n      }\n      userTags {\n        id\n      }\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n"]))),m=Object(d["a"])(a||(a=Object(u["a"])(["\n  mutation updateNote($noteInput: noteUpdateInput!) {\n    updateNote(noteInput: $noteInput) {\n      id\n      content\n      type\n      userTags {\n        id\n      }\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n"]))),p=Object(d["a"])(o||(o=Object(u["a"])(["\n  mutation deleteNote($noteInput: noteId!) {\n    deleteNote(noteInput: $noteInput) {\n      id\n    }\n  }\n"]))),v=Object(d["a"])(r||(r=Object(u["a"])(["\n  mutation createNoteComment($noteCommentInput: noteCommentCreateInput) {\n    createNoteComment(noteCommentInput: $noteCommentInput) {\n      id\n      comment\n      userTags {\n        id\n      }\n      note {\n        id\n      }\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n"]))),g=Object(d["a"])(s||(s=Object(u["a"])(["\n  mutation updateNoteComment($noteCommentInput: noteCommentUpdateInput) {\n    updateNoteComment(noteCommentInput: $noteCommentInput) {\n      id\n      comment\n      userTags {\n        id\n      }\n      note {\n        id\n      }\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n"]))),h=Object(d["a"])(c||(c=Object(u["a"])(["\n  mutation deleteNoteComment($noteCommentId: ID!) {\n    deleteNoteComment(noteCommentId: $noteCommentId) {\n      id\n    }\n  }\n"]))),b=Object(d["a"])(l||(l=Object(u["a"])(["\n  mutation UploadNoteFile($input: TypeFileNoteInput!) {\n    uploadNoteFile(upFile: $input) {\n      link\n      key\n    }\n  }\n"])))},6937:function(t,e,n){"use strict";n("11a8")},7037:function(t,e,n){function i(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(t.exports=i=function(t){return typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0),i(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},"70ef":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-center"},[n("v-card",{staticClass:"settings-email-box",attrs:{tile:"",flat:"",width:"30em",height:"30em"}},[t.hasEmailIntegration?t._e():n("div",{staticClass:"d-flex flex-column align-center justify-center full-heigth px-12"},[n("p",{staticClass:"text-center"},[t._v(" Sincroniza tu correo principal para hacer un seguimiento de tus tratos y contactos. ")]),t.hasEmailIntegration?t._e():n("v-btn",{attrs:{color:"success",loading:t.isLoadingAddEmail},on:{click:t.addEmail}},[t._v(" Añadir correo ")])],1),t.hasEmailIntegration?n("div",{staticClass:"d-flex align-center full-heigth"},[n("div",{staticClass:"d-flex flex-column mx-12",staticStyle:{width:"100%"}},[n("p",{staticClass:"title-email-settings"},[t._v(" Sincronización de correo ")]),n("v-text-field",{attrs:{readonly:"",dense:"",outlined:"",value:t.getEmailIntegration()},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-icon",{attrs:{color:"success"}},[t._v("mdi-check-circle")])]},proxy:!0}],null,!1,1576228658)}),n("div",{staticClass:"d-flex justify-end"},[n("v-btn",{staticClass:"mx-3",attrs:{outlined:"",color:"primary",loading:t.isLoadingRemoveEmail},on:{click:t.remove}},[t._v(" Quitar ")]),n("v-btn",{attrs:{color:"secondary",loading:t.isLoadingAddEmail},on:{click:t.addEmail}},[t._v(" Cambiar ")])],1)],1)]):t._e()]),n("v-card",{attrs:{tile:"",flat:"",width:"30em",height:"30em"}},[n("div",{staticClass:"d-flex justify-start primary pa-4"},[n("p",{staticClass:"title-email-settings white--text mb-0"},[t._v(" Configurar firma de correo ")])]),n("div",{staticClass:"d-flex justify-center pt-6",staticStyle:{height:"70%"}},[n("EmailEditorSignature",{attrs:{signature:t.signature,signatureBefore:t.userEnterpriseSignature.signature},on:{"update:signature":function(e){t.signature=e}}}),t.isValidSignature?t._e():n("p",{staticClass:"red--text"},[t._v(" La firma es requerida ")])],1),n("div",{staticClass:"d-flex justify-end pt-6 pr-11"},[n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"primary",loading:t.isLoadingRemove,disabled:t.hasSignatured},on:{click:t.removeSignature}},[t._v(" Remover firma ")]),n("v-btn",{staticClass:"mr-3",attrs:{color:"secondary",loading:t.isLoadingSignature,disabled:!t.hasChanges},on:{click:t.saveSignature}},[t._v(" Guardar ")])],1)]),n("BaseModalDeleteItem",{attrs:{dialog:t.isOpenDelete,config:t.configModalDelete,isLoading:t.isLoadingDelete,item:t.itemSelected},on:{"update:dialog":function(e){t.isOpenDelete=e},remove:t.removeEmail}})],1)},a=[],o=(n("b0c0"),n("7db0"),n("4de4"),n("bbc9")),r=n("395a"),s=n("e815"),c=n("1c2a"),l=n("1891"),u=n("0908"),d={name:"SettingsEmail",components:{EmailEditorSignature:c["a"],BaseModalDeleteItem:u["a"]},mixins:[l["b"],l["a"]],data:function(){return{isLoadingDelete:!1,configModalDelete:{title:"Desvincular correo",subtitle:"Estas por quitar tu correo",description:"Se perderán tus datos de seguimiento del correo, ¿estás seguro?"},itemSelected:{},isOpenDelete:!1,getGmailUri:"",userEnterpriseSignature:{signature:""},signature:"",isValidSignature:!0,isLoadingSignature:!1,isLoadingRemove:!1,isLoadingAddEmail:!1,isLoadingRemoveEmail:!1}},created:function(){this.$route.query.code&&this.sendTokenGmail()},computed:{hasChanges:function(){return this.userEnterpriseSignature.signature!==this.signature&&"<div></div>"!==this.signature},hasSignatured:function(){return!this.userEnterpriseSignature.signature.length>0},hasEmailIntegration:function(){return this.userCurrent.integrations.some((function(t){return"googleGmail"===t.name}))}},methods:{getEmailIntegration:function(){if(this.userCurrent.integrations.length>0){var t=this.userCurrent.integrations.find((function(t){return"googleGmail"===t.name})),e=t.email,n=void 0===e?"":e;return n}return""},addEmail:function(){var t=this.getGmailUri;window.location.href=t},remove:function(){this.itemSelected={name:this.getEmailIntegration()},this.changeModal({id:"deleteTemplateEmail",status:!0})},removeEmail:function(){var t=this;this.isLoadingRemoveEmail=!0,this.isLoadingDelete=!0,this.$apollo.mutate({mutation:o["c"],update:function(e,n){var i=n.data.desynchronizeGoogleGmail;if(i){var a=e.readQuery({query:s["k"]});a.userCurrent.integrations=t.userCurrent.integrations.filter((function(t){return"googleGmail"!==t.name})),e.writeQuery({query:s["k"],data:a})}}}).then((function(){t.isLoadingRemoveEmail=!1,t.isLoadingDelete=!1,t.changeModal({id:"deleteTemplateEmail",status:!1})})).catch((function(){t.isLoadingRemoveEmail=!1,t.isLoadingDelete=!1,t.changeModal({id:"deleteTemplateEmail",status:!1})}))},sendTokenGmail:function(){var t=this;this.isLoadingAddEmail=!0,this.$apollo.mutate({mutation:o["d"],variables:{codeToken:this.$route.query.code},update:function(t,e){var n=e.data.syncronizeGoogleGmail;if(n.success){var i=t.readQuery({query:s["k"]});i.userCurrent.integrations.push({__typename:"Integration",id:"",name:"googleGmail",email:n.email,keyItem:""}),t.writeQuery({query:s["k"],data:i})}}}).then((function(e){var n=e.data.syncronizeGoogleGmail;t.isLoadingAddEmail=!1,n.success||t.$router.push({name:"settings-email"})})).catch((function(){t.isLoadingAddEmail=!1}))},saveSignature:function(){var t=this;console.log("signature: this.signature,",this.signature),this.isLoadingSignature=!0,this.$apollo.mutate({mutation:o["a"],variables:{userEnterpriseInput:{signature:this.signature}}}).then((function(){t.userEnterpriseSignature.signature=t.signature,t.isLoadingSignature=!1})).catch((function(){t.isLoadingSignature=!1}))},removeSignature:function(){var t=this;this.isLoadingRemove=!0,this.$apollo.mutate({mutation:o["a"],variables:{userEnterpriseInput:{signature:""}}}).then((function(){t.userEnterpriseSignature.signature="",t.isLoadingRemove=!1})).catch((function(){t.isLoadingRemove=!1}))}},apollo:{getGmailUri:{query:r["d"]},userCurrent:{query:s["k"]},userEnterpriseSignature:{query:r["e"]}}},f=d,m=(n("8a1b"),n("0c7c")),p=n("6544"),v=n.n(p),g=n("8336"),h=n("b0af"),b=n("132d"),y=n("8654"),_=Object(m["a"])(f,i,a,!1,null,"7f84e1b0",null);e["default"]=_.exports;v()(_,{VBtn:g["a"],VCard:h["a"],VIcon:b["a"],VTextField:y["a"]})},7286:function(t,e,n){},"857a":function(t,e,n){var i=n("1d80"),a=/"/g;t.exports=function(t,e,n,o){var r=String(i(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(a,"&quot;")+'"'),s+">"+r+"</"+e+">"}},"8a1b":function(t,e,n){"use strict";n("3abe")},9911:function(t,e,n){"use strict";var i=n("23e7"),a=n("857a"),o=n("af03");i({target:"String",proto:!0,forced:o("link")},{link:function(t){return a(this,"a","href",t)}})},af03:function(t,e,n){var i=n("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},bbc9:function(t,e,n){"use strict";n.d(e,"d",(function(){return f})),n.d(e,"g",(function(){return m})),n.d(e,"e",(function(){return p})),n.d(e,"b",(function(){return v})),n.d(e,"f",(function(){return g})),n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return b}));var i,a,o,r,s,c,l,u=n("8785"),d=n("5184"),f=Object(d["a"])(i||(i=Object(u["a"])(["\n  mutation getTokensG($codeToken: String!) {\n    syncronizeGoogleGmail(codeToken: $codeToken) {\n      success\n      email\n    }\n  }\n"]))),m=Object(d["a"])(a||(a=Object(u["a"])(["\n  mutation sentToTrash($id: String!, $isTrash: Boolean!) {\n    trashEmailGoogleGmail(id: $id, isTrash: $isTrash)\n  }\n"]))),p=Object(d["a"])(o||(o=Object(u["a"])(["\n  mutation markReadEmail($id: String!, $isRead: Boolean!) {\n    markEmailGoogleGmail(id: $id, isRead: $isRead)\n  }\n"]))),v=Object(d["a"])(r||(r=Object(u["a"])(["\n  mutation deleteEmail($id: String!) {\n    deleteEmailGoogleGmail(id: $id)\n  }\n"]))),g=Object(d["a"])(s||(s=Object(u["a"])(["\n  mutation sendEmail($gmailInput: GmailEmailInput!) {\n    sendMailGoogleMail(gmailInput: $gmailInput)\n  }\n"]))),h=Object(d["a"])(c||(c=Object(u["a"])(["\n  mutation createSignature(\n    $userEnterpriseInput: UserEnterpriseCreateSignatureInput!\n  ) {\n    createOrUpdateSignature(userEnterpriseInput: $userEnterpriseInput) {\n      id\n      signature\n    }\n  }\n"]))),b=Object(d["a"])(l||(l=Object(u["a"])(["\n  mutation desynchronizeGoogleGmail {\n    desynchronizeGoogleGmail\n  }\n"])))},bee2:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,"a",(function(){return a}))},d4ec:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return i}))},dc0a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{scrollable:"","max-width":"430px",persistent:""},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("v-card",[n("v-card-title",{staticClass:"primary white--text"},[t._v(" Agrega una URL "),n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-divider"),n("v-card-text",{staticClass:"py-2"},[n("v-form",{ref:"formLink",on:{submit:function(t){t.preventDefault()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{outlined:"",dense:"","hide-details":"auto",hint:"Por ejemplo: https://www.pagina.com",placeholder:"URL","persistent-hint":"",rules:t.rules.isRequired.concat(t.rules.website)},model:{value:t.href,callback:function(e){t.href=e},expression:"href"}})],1)],1),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{color:"secondary",outlined:""},on:{click:t.close}},[t._v(" Cancelar ")]),n("v-spacer"),n("v-btn",{attrs:{color:"secondary"},on:{click:t.save}},[t._v(" Guardar ")])],1)],1)],1)},a=[],o=n("f82a"),r={name:"EmailEditorLink",mixins:[o["a"]],props:{isOpen:{type:Boolean,default:!1}},data:function(){return{href:"",valid:!0}},methods:{save:function(){this.$refs.formLink.validate(),this.valid&&(this.$emit("save",{href:this.href}),this.close())},close:function(){this.$emit("close"),this.$refs.formLink.reset()}}},s=r,c=n("0c7c"),l=n("6544"),u=n.n(l),d=n("8336"),f=n("b0af"),m=n("99d9"),p=n("169a"),v=n("ce7e"),g=n("4bd4"),h=n("132d"),b=n("2fa4"),y=n("8654"),_=Object(c["a"])(s,i,a,!1,null,"9edb60b0",null);e["default"]=_.exports;u()(_,{VBtn:d["a"],VCard:f["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VDialog:p["a"],VDivider:v["a"],VForm:g["a"],VIcon:h["a"],VSpacer:b["a"],VTextField:y["a"]})},e4ce:function(t,e,n){},f910:function(t,e,n){"use strict";n("7286")}}]);
//# sourceMappingURL=chunk-67795bef.213e59f5.js.map