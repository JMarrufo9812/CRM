(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a31cb0f"],{"1a06":function(e,t,i){},"80d3":function(e,t,i){"use strict";i("1a06")},"855c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-menu",{attrs:{bottom:"","offset-y":"","max-width":"300","nudge-bottom":"10","close-on-content-click":!1,disabled:!((e.canEdit||e.canEditOthers)&&!e.deal.isDelete)},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[i("span",e._g(e._b({},"span",n,!1),a),[i("v-btn",{class:{normalCursor:!((e.canEdit||e.canEditOthers)&&!e.deal.isDelete)},attrs:{outlined:""}},[e._v(" "+e._s(e.deal.pipeline?e.deal.pipeline.name:"")+" "),!e.canEdit&&!e.canEditOthers||e.deal.isDelete?e._e():i("v-icon",[e._v(" mdi-chevron-down ")])],1)],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[i("v-card",[i("v-card-title",{staticClass:"py-1 font-weight-bold"}),i("v-card-text",[i("p",[e._v("Cambiar Embudo")]),i("div",[i("v-select",{staticClass:"mb-6",attrs:{items:e.pipelines,"item-text":"name","item-value":"id","return-object":!0,"prepend-icon":"mdi-view-column",label:"Embudo",outlined:"",dense:"","hide-details":"auto"},model:{value:e.pipelineSelected,callback:function(t){e.pipelineSelected=t},expression:"pipelineSelected"}}),e.viewStages?i("div",[i("span",[i("v-icon",{staticClass:"mr-4"},[e._v("mdi-view-carousel-outline")]),e._v(" Etapa ")],1),i("div",{staticClass:"Pipeline py-3 pl-8"},[i("div",{staticClass:"Pipeline__stages open"},[i("ul",e._l(e.pipelineSelected.stages,(function(t,a){return i("li",{key:a,class:t.done?"active Stage":"Stage",on:{click:function(i){return e.selectStage(a,t)}}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[i("div",e._g(e._b({staticClass:"Stage__content"},"div",n,!1),a),[i("div",{staticClass:"Stage__name"}),i("span",{staticClass:"Stage__separator "})])]}}],null,!0)},[i("span",{staticClass:"d-block font-weight-bold"},[e._v(" "+e._s(t.name)+" ")])])],1)})),0)])])]):e._e()],1)]),i("v-divider"),i("v-card-actions",{staticClass:"justify-end"},[i("v-btn",{staticClass:"mr-3",attrs:{color:"primary",outlined:"",small:""},on:{click:e.cancel}},[e._v(" Cancelar ")]),i("v-btn",{attrs:{disabled:!e.viewStages,loading:e.isLoading,color:"secondary",small:""},on:{click:e.outData}},[e._v(" Guardar ")])],1)],1)],1)},n=[],s=(i("d81d"),i("4b58")),c=i("9685"),l=i("9500"),d=i("891c"),o=i("ee2e"),r={name:"MenuChangePipeline",props:{deal:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},ownerId:{type:String,required:!0}},data:function(){return{menu:!1,pipelineSelected:{id:"",name:"",stages:[]},stageSelected:{id:""},PERMISSIONS_DEALS:o["f"],UPDATE:d["r"],UPDATE_OTHERS:d["s"]}},watch:{isLoading:function(e){e||(this.menu=!1)},menu:function(e){e&&(this.pipelineSelected=JSON.parse(JSON.stringify(this.deal.pipeline)))},pipelineSelected:function(e){e&&this.viewStages&&this.selectStage(0,e.stages[0])}},computed:{viewStages:function(){var e,t;return(null===(e=this.pipelineSelected)||void 0===e?void 0:e.id)!==(null===(t=this.deal.pipeline)||void 0===t?void 0:t.id)},canEdit:function(){return c["a"].can(d["r"],Object(s["b"])(o["f"],{authorId:this.ownerId||""}))},canEditOthers:function(){return this.canEdit?c["a"].can(d["s"],o["f"]):c["a"].can(d["s"],o["f"])&&!c["a"].can(d["s"],Object(s["b"])(o["f"],{authorId:this.ownerId||""}))}},methods:{outData:function(){var e={pipelineId:this.pipelineSelected.id,stageId:this.stageSelected.id};this.$emit("outData",e)},cancel:function(){this.menu=!1},selectStage:function(e,t){this.pipelineSelected.stages=this.pipelineSelected.stages.map((function(t,i){return t.done=i<=e,t})),this.stageSelected=t}},apollo:{pipelines:{query:l["c"],fetchPolicy:"no-cache"}}},u=r,p=(i("80d3"),i("0c7c")),v=i("6544"),m=i.n(v),f=i("8336"),S=i("b0af"),h=i("99d9"),g=i("ce7e"),b=i("132d"),_=i("e449"),w=i("b974"),C=i("3a2f"),E=Object(p["a"])(u,a,n,!1,null,"6e5c3426",null);t["default"]=E.exports;m()(E,{VBtn:f["a"],VCard:S["a"],VCardActions:h["a"],VCardText:h["c"],VCardTitle:h["d"],VDivider:g["a"],VIcon:b["a"],VMenu:_["a"],VSelect:w["a"],VTooltip:C["a"]})}}]);
//# sourceMappingURL=chunk-1a31cb0f.05fe22a8.js.map