(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15206510","chunk-7859f8ee","chunk-7859f8ee"],{"0491":function(n,t,e){"use strict";e.d(t,"a",(function(){return o}));e("b64b"),e("ac1f"),e("841c"),e("b0c0"),e("d81d"),e("159b"),e("d3b7");var a=e("59c9"),i=e("6675"),s=e("ee2e"),o={data:function(){return{PERMISSIONS_DEALS:s["f"],inputsForm:[],isLoadingDeals:!1,loadingSearch:!1,isLoadingUpdateDeal:!1,modalDeal:{isOpen:!1,isLoading:!1},infoError:{icon:"mdi-account-search-outline",title:"",message:"No se encontraron tratos"},filters:{search:"",orderBy:"desc",skip:0,take:0,sortBy:[],sortDesc:[],isDelete:!1},listDeals:[],informationBarDeals:{},resultSearchDeals:[],totalDeals:0,searchDeal:"",searchFilters:{search:"",take:5},dealsSelected:[]}},watch:{searchDeal:function(n){n&&(Object.keys(n).length>=2&&(this.searchFilters.search=n,this.searchFilters.take=5,this.getSearchDeals()),0===Object.keys(n).length&&(this.searchFilters.search="",this.searchFilters.take=0,this.getSearchDeals()))},isLoadingDeals:function(n){this.$emit("isLoadingDeals",n)}},computed:{menuProps:function(){return this.searchDeal?{}:{value:!1}}},methods:{modalHandlerDeal:function(n){var t=n.isOpen,e=n.isLoading;this.modalDeal={isOpen:t,isLoading:e}},createDeal:function(n){var t=this,e=n.title,i=n.contact,s=n.company,o=n.value,r=n.tags,u=n.customForms,l=n.expectedCloseDate,d=n.pipeline,c=d.pipelineId,m=d.stageId,p=n.owner;this.modalHandlerDeal({isOpen:!0,isLoading:!0}),this.$apollo.mutate({mutation:a["c"],variables:{input:{title:e,tags:r,customForms:u,expectedCloseDate:l,contact:null!==i&&void 0!==i&&i.id?{id:i.id}:i,company:null!==s&&void 0!==s&&s.id?{id:s.id}:s,value:o,pipelineId:c,stageId:m,ownerId:p.id}}}).then((function(n){var e=n.data.createDeal;t.updateData=!0,t.modalHandlerDeal({isOpen:!1,isLoading:!1}),"pipeline-id"===t.$route.name&&t.updateViewPipeline(t.$route.params.id),t.updateData=!0,setTimeout((function(){t.updateData=!1}),10),t.$emit("updateHistory"),"CONTACT"!==t.typeItem&&"COMPANY"!==t.typeItem||(t.updateHistory(),t.addDeal(e))})).catch((function(){var n="No se pudo crear el trato intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:n})}))},updateDeal:function(n){var t=this,e=n.id,i=n.value,s=n.expectedCloseDate,o=n.company,r=n.contact,u=n.tags,l=n.status,d=n.comments,c=n.lostReason,m=n.owner,p=n.title,f=n.customForm;this.isLoadingUpdateDeal=!0;var h={};h.id=e,(i||0===i)&&(h.value=i),(s||void 0!==s)&&(h.expectedCloseDate=s),o&&(h.company=o),r&&(h.contact=r),u&&(h.tags=u),m&&(h.ownerId=m.id),p&&(h.title=p),f&&(h.customForm=f),l&&(h.status=l,"LOST"===l&&(h.comments=d,h.lostReason=c)),this.$apollo.mutate({mutation:a["i"],variables:{input:h}}).then((function(n){var e=n.data.updateDeal;"LOST"===h.status&&t.modalHandlerLostDeal({isOpen:!1,isLoading:!1}),t.$emit("updateItem",e),t.$emit("updateHistory"),t.isLoadingUpdateDeal=!1,"CONTACT"!==t.typeItem&&"COMPANY"!==t.typeItem||(t.updateHistory(),t.addDeal(e))})).catch((function(){t.isLoadingUpdateDeal=!1;var n="No se pudo actualizar el trato, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:n})}))},getSearchDeals:function(){var n=this;this.loadingSearch=!0,this.$apollo.query({query:i["f"],fetchPolicy:"no-cache",variables:{filters:this.searchFilters}}).then((function(t){var e=t.data.deals;n.resultSearchDeals=e.list,n.loadingSearch=!1})).catch((function(){n.loadingSearch=!1}))},getDeals:function(){var n=this;this.isLoadingDeals=!0,this.$apollo.query({query:i["b"],fetchPolicy:"no-cache",variables:{filters:this.filters,importId:this.$route.query.filterId}}).then((function(t){var e=t.data.deals;n.isLoadingDeals=!1,n.$emit("deals",e.list),n.$emit("informationBar",e.informationBar),n.listDeals=e.list.map((function(n){return n.customForms&&n.customForms.forEach((function(t){var e=t.id,a=t.value;n[e]=a})),n})),n.totalDeals=e.count,n.isErrorDeals=!1,n.$emit("endUpdateData")})).catch((function(){n.isErrorDeals=!0,n.isLoadingDeals=!1,n.listDeals=[],n.totalDeals=0,n.$emit("endUpdateData"),n.infoError={icon:"mdi-alert-outline",title:"Error",message:"No se ha podido cargar ningún trato, intente de nuevo o contacte a soporte"}}))},restoreDealsConfirmation:function(){this.modalHandlerRestore({isOpen:!0,isLoading:!1,message:{title:"¿Seguro que deseas restaurar?",nameItem:"Los tratos seleccionados",text:"serán restaurados"},infoRestore:{}})},restoreDeals:function(n){var t=this,e=n.isOpen,i=n.isLoading,s=n.message,o=n.infoRestore;this.modalHandlerRestore({isOpen:e,isLoading:i,message:s,infoRestore:o}),this.$apollo.mutate({mutation:a["g"],variables:{input:this.dealsSelected},update:function(){t.updateData=!0,t.snackbarHandler({isOpen:!0,color:"success",text:"Los tratos fueron restaurados correctamente"})}}).finally((function(){t.modalHandlerRestore({isOpen:!1,isLoading:i,message:s,infoRestore:o}),t.updateData=!1})).catch((function(){var n="No se pudo restaurar el trato intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:n})}))},deleteDealConfirmation:function(n,t){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{title:"¿Seguro que deseas mover a la papelera?",nameItem:"Los tratos seleccionados",text:"serán movidos a la papelera"},infoDelete:{type:n,deals:t}})},deleteDeal:function(n){var t=this,e=n.isOpen,i=n.isLoading,s=n.message,o=n.infoDelete;this.modalHandlerDelete({isOpen:e,isLoading:i,message:s,infoDelete:o}),this.$apollo.mutate({mutation:a["e"],variables:{input:o.deals},update:function(){t.updateData=!0,t.snackbarHandler({isOpen:!0,color:"success",text:"Los tratos fueron eliminados correctamente"})}}).finally((function(){t.updateData=!1,t.modalHandlerDelete({isOpen:!1,isLoading:i,message:s,infoDelete:o})})).catch((function(){var n="No se pudo eliminar el trato intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:n})}))},trashDealsConfirmation:function(n,t){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{nameItem:"Los tratos seleccionados",text:"serán eliminados permanentemente"},infoDelete:{type:n,deals:t}})},trashDeals:function(n){var t=this,e=n.isOpen,i=n.isLoading,s=n.message,o=n.infoDelete;this.modalHandlerDelete({isOpen:e,isLoading:i,message:s,infoDelete:o}),this.$apollo.mutate({mutation:a["h"],variables:{input:o.deals},update:function(){t.updateData=!0,t.snackbarHandler({isOpen:!0,color:"success",text:"Los tratos fueron eliminados correctamente"})}}).finally((function(){t.updateData=!1,t.modalHandlerDelete({isOpen:!1,isLoading:i,message:s,infoDelete:o})})).catch((function(){var n="No se pudo eliminar el trato intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:n})}))},goToProfile:function(n){this.$router.push("/deal/".concat(n))}}}},"129f":function(n,t){n.exports=Object.is||function(n,t){return n===t?0!==n||1/n===1/t:n!=n&&t!=t}},"231e":function(n,t,e){"use strict";e.d(t,"a",(function(){return m})),e.d(t,"b",(function(){return p})),e.d(t,"e",(function(){return f})),e.d(t,"d",(function(){return h})),e.d(t,"f",(function(){return v})),e.d(t,"c",(function(){return g})),e.d(t,"g",(function(){return D}));var a,i,s,o,r,u,l,d=e("8785"),c=e("5184"),m=Object(c["a"])(a||(a=Object(d["a"])(["\n  mutation createCompany($input: companyCreateInput!) {\n    createCompany(companyInput: $input) {\n      id\n      name\n      address\n      website\n      phones\n      socialMedias\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      contacts {\n        id\n        name\n      }\n    }\n  }\n"]))),p=Object(c["a"])(i||(i=Object(d["a"])(["\n  mutation deletedCompanies($input: [DeleteCompanyInput!]!) {\n    deletedCompanies(companies: $input) {\n      id\n      name\n    }\n  }\n"]))),f=Object(c["a"])(s||(s=Object(d["a"])(["\n  mutation trashCompanies($input: [DeleteCompanyInput!]!) {\n    trashCompanies(companies: $input) {\n      id\n    }\n  }\n"]))),h=Object(c["a"])(o||(o=Object(d["a"])(["\n  mutation restoreCompanies($input: [DeleteCompanyInput!]!) {\n    restoreCompanies(companies: $input) {\n      id\n    }\n  }\n"]))),v=Object(c["a"])(r||(r=Object(d["a"])(["\n  mutation updateCompany($companyInput: companyUpdateInput!) {\n    updateCompany(companyInput: $companyInput) {\n      id\n      name\n      address\n      website\n      phones\n      customForms\n      socialMedias\n      tags {\n        id\n        name\n        color\n        order\n      }\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      contacts {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n"]))),g=Object(c["a"])(u||(u=Object(d["a"])(["\n  mutation FuseCompanies($input: CompaniesToFuse!) {\n    fuseCompanies(fuse: $input) {\n      id\n      name\n    }\n  }\n"]))),D=Object(c["a"])(l||(l=Object(d["a"])(["\n  mutation assignCompanies($companyListAssign: CompanyListAssign!) {\n    assignCompanies(companyListAssign: $companyListAssign)\n  }\n"])))},"243a":function(n,t,e){"use strict";e("8592")},"2cff":function(n,t,e){"use strict";e.d(t,"a",(function(){return m})),e.d(t,"f",(function(){return p})),e.d(t,"b",(function(){return f})),e.d(t,"e",(function(){return h})),e.d(t,"d",(function(){return v})),e.d(t,"c",(function(){return g})),e.d(t,"g",(function(){return D}));var a,i,s,o,r,u,l,d=e("8785"),c=e("5184"),m=Object(c["a"])(a||(a=Object(d["a"])(["\n  mutation CreateContact($input: contactCreateInput!) {\n    createContact(contactInput: $input) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n      }\n      isClient\n    }\n  }\n"]))),p=Object(c["a"])(i||(i=Object(d["a"])(["\n  mutation updateContact($contactInput: contactUpdateInput) {\n    updateContact(contactInput: $contactInput) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      customForms\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      enterprise {\n        id\n        name\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n      createdAt\n    }\n  }\n"]))),f=Object(c["a"])(s||(s=Object(d["a"])(["\n  mutation deletedContacts($input: [DeleteContactInput!]!) {\n    deletedContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n"]))),h=Object(c["a"])(o||(o=Object(d["a"])(["\n  mutation trashContacts($input: [DeleteContactInput!]!) {\n    trashContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n"]))),v=Object(c["a"])(r||(r=Object(d["a"])(["\n  mutation restoreContacts($input: [DeleteContactInput!]!) {\n    restoreContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n"]))),g=Object(c["a"])(u||(u=Object(d["a"])(["\n  mutation FuseContacts($input: ContactsToFuse!) {\n    fuseContacts(fuse: $input) {\n      id\n      name\n    }\n  }\n"]))),D=Object(c["a"])(l||(l=Object(d["a"])(["\n  mutation assignContacts($contactListAssign: ContactListAssign!) {\n    assignContacts(contactListAssign: $contactListAssign)\n  }\n"])))},"2faa":function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));e("b0c0");var a=e("2cff"),i={data:function(){return{isLoadingUpdateContact:!1}},methods:{updateContact:function(n){var t=this,e=n.id,i=n.name,s=n.email,o=n.birthday,r=n.phones,u=n.isClient,l=n.socialMedias,d=n.customForm,c=n.company,m=n.owner,p=n.tags,f=n.deal;this.isLoadingUpdateContact=!0;var h={};h.id=e,i&&(h.name=i),s&&(h.email=s),o&&(h.birthday=o),r&&(h.phones=r),!0!==u&&!1!==u||(h.isClient=u),l&&(h.socialMedias=l),d&&(h.customForm=d),c&&(h.company=c),m&&(h.owner=m),p&&(h.tags=p),f&&(h.deal=f),this.$apollo.mutate({mutation:a["f"],variables:{contactInput:h}}).then((function(n){var e=n.data.updateContact;t.$emit("updateItem",e),t.$emit("updateHistory"),t.isLoadingUpdateContact=!1})).catch((function(){t.isLoadingUpdateContact=!1;var n="No se pudo actualizar el contacto, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:n})}))}}}},"3c68":function(n,t,e){"use strict";e.r(t);var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-container",[n._l(n.listFieldsMix,(function(t){return e("v-row",{key:t.id,staticClass:"profile__input"},[e("v-col",{staticClass:"d-flex align-center",attrs:{cols:"4"}},[n._v(n._s(t.name))]),e("v-col",{staticClass:"d-flex align-center",attrs:{cols:"8"}},[n.isEmptyInput(t.value)?n._e():e("FieldValue",{attrs:{field:t}}),e("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":"",left:"","nudge-right":"50",absolute:""},on:{input:function(e){return n.menuStatus(t)}},scopedSlots:n._u([{key:"activator",fn:function(a){var i=a.on,s=a.attrs;return[e("v-btn",n._g(n._b({directives:[{name:"show",rawName:"v-show",value:!n.isEmptyInput(t.value)&&(n.canEdit||n.canEditOthers)&&!n.item.isDelete,expression:"\n              !isEmptyInput(input.value) &&\n                (canEdit || canEditOthers) &&\n                !item.isDelete\n            "}],staticClass:"profile__input__edit mr-4",attrs:{absolute:"","x-small":"",color:"secondary"}},"v-btn",s,!1),i),[e("v-icon",{attrs:{small:"",color:"white"}},[n._v("mdi-pencil")])],1),e("v-btn",n._g(n._b({directives:[{name:"show",rawName:"v-show",value:n.isEmptyInput(t.value)&&(n.canEdit||n.canEditOthers)&&!n.item.isDelete,expression:"\n              isEmptyInput(input.value) &&\n                (canEdit || canEditOthers) &&\n                !item.isDelete\n            "}],staticClass:"profile__input__add",attrs:{text:"",color:"success",small:""}},"v-btn",s,!1),i),[e("v-icon",{attrs:{"x-small":""}},[n._v("mdi-plus")]),n._v(" Añadir valor ")],1)]}}],null,!0),model:{value:t.edit,callback:function(e){n.$set(t,"edit",e)},expression:"input.edit"}},[t.edit?e("v-card",{staticClass:"pa-4",attrs:{tile:"",width:"15em"}},[e("v-form",{ref:"form",refInFor:!0,on:{submit:function(e){return e.preventDefault(),n.save(t)}},model:{value:n.formValidate,callback:function(t){n.formValidate=t},expression:"formValidate"}},[e("Fields",{attrs:{inputProps:{isDense:!0,class:"no-icon"},field:t},on:{outValue:n.getValueInput}})],1),e("div",{staticClass:"d-flex justify-center mt-2"},[e("v-btn",{staticClass:"mr-2",staticStyle:{width:"45%"},attrs:{"x-small":"",color:"primary",outlined:""},on:{click:function(e){return n.cancel(t)}}},[n._v(" Cancelar ")]),e("v-btn",{staticStyle:{width:"45%"},attrs:{disabled:n.validateInputsValue(t),"x-small":"",color:"secondary",loading:n.isLoading},on:{click:function(e){return n.save(t)}}},[n._v(" Guardar ")])],1)],1):n._e()],1)],1)],1)})),e("BaseModalError",{attrs:{modalHandler:n.modalError},on:{close:n.modalHandlerError}})],2)},i=[],s=e("53ca"),o=e("5530"),r=e("ade3"),u=e("2909"),l=(e("d3b7"),e("3ca3"),e("ddb0"),e("99af"),e("d81d"),e("4de4"),e("c740"),e("7db0"),e("159b"),e("b64b"),e("4b58")),d=e("9685"),c=e("ee2e"),m=e("891c"),p=e("e815"),f=e("1e6d"),h=e("0491"),v=e("2faa"),g=e("78f1"),D={name:"FieldsEdit",mixins:[f["a"],h["a"],v["a"],g["a"]],props:{item:{type:Object,required:!0,default:function(){return{}}},typeItem:{type:String,required:!0,default:function(){return{}}},inputsDefault:{type:Array,required:!0,default:function(){return[]}},inputsCustom:{type:Array,required:!0,default:function(){return[]}}},components:{Fields:function(){return e.e("chunk-2d21400a").then(e.bind(null,"aea1"))},FieldValue:function(){return e.e("chunk-18049999").then(e.bind(null,"033b"))}},data:function(){return{subject:l["b"],UPDATE:m["r"],UPDATE_OTHERS:m["s"],PERMISSIONS_CONTACTS:c["e"],PERMISSIONS_COMPANIES:c["d"],PERMISSIONS_DEALS:c["f"],isLoading:!1,listValuesDefault:[],listFieldsDefault:[],listValuesCustom:[],listFieldsCustom:[],skipContactQuery:!0,skipCompanyQuery:!0,skipDealQuery:!0,formValidate:!0}},watch:{item:{handler:function(){this.listValuesDefault=this.formatValuesDefault(),this.listFieldsDefault=this.formatListDefaultFields(),this.listValuesCustom=this.formatValuesCustom(),this.listFieldsCustom=this.formatListCustomFields()},immediate:!0},isLoadingUpdateDeal:function(n){n||(this.isLoading=!1)},isLoadingUpdateContact:function(n){n||(this.isLoading=!1)},isLoadingUpdateCompany:function(n){n||(this.isLoading=!1)}},computed:{canEdit:function(){var n,t,e,a,i,s;return"CONTACT"===this.typeItem?d["a"].can(m["r"],Object(l["b"])(c["e"],{authorId:(null===this||void 0===this||null===(n=this.item)||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.id)||""})):"COMPANY"===this.typeItem?d["a"].can(m["r"],Object(l["b"])(c["d"],{authorId:(null===this||void 0===this||null===(e=this.item)||void 0===e||null===(a=e.owner)||void 0===a?void 0:a.id)||""})):"DEAL"===this.typeItem&&d["a"].can(m["r"],Object(l["b"])(c["f"],{authorId:(null===this||void 0===this||null===(i=this.item)||void 0===i||null===(s=i.owner)||void 0===s?void 0:s.id)||""}))},canEditOthers:function(){var n,t,e,a,i,s;return"CONTACT"===this.typeItem?this.canEdit?d["a"].can(m["s"],c["e"]):d["a"].can(m["s"],c["e"])&&!d["a"].can(m["s"],Object(l["b"])(c["e"],{authorId:(null===this||void 0===this||null===(n=this.item)||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.id)||""})):"COMPANY"===this.typeItem?this.canEdit?d["a"].can(m["s"],c["d"]):d["a"].can(m["s"],c["d"])&&!d["a"].can(m["s"],Object(l["b"])(c["d"],{authorId:(null===this||void 0===this||null===(e=this.item)||void 0===e||null===(a=e.owner)||void 0===a?void 0:a.id)||""})):"DEAL"===this.typeItem&&(this.canEdit?d["a"].can(m["s"],c["f"]):d["a"].can(m["s"],c["f"])&&!d["a"].can(m["s"],Object(l["b"])(c["f"],{authorId:(null===this||void 0===this||null===(i=this.item)||void 0===i||null===(s=i.owner)||void 0===s?void 0:s.id)||""})))},listFieldsMix:function(){return[].concat(Object(u["a"])(this.listFieldsDefault),Object(u["a"])(this.listFieldsCustom))}},methods:{save:function(n){var t;this.formValidate&&(this.isLoading=!0,n.keyInput?(t=this.formatUpdateJSON(n.keyInput,n.value),this.saveDefaultHandler(n,t)):(t=this.formatCustomUpdate(n),this.saveCustomHandler(t)))},cancel:function(n){this.isCustom(n)?(this.resetValueCustom(n),this.closeEditFieldCustom(this.getIndexFieldCustom(n))):(this.resetValueDefault(n),this.closeEditField(this.getIndexField(n)))},menuStatus:function(n){n.edit||this.cancel(n)},getValueInput:function(n){var t=n.keyInput,e=n.input,a=n.index;"socialMedias"===t&&(this.listFieldsDefault=this.listFieldsDefault.map((function(n){return n.keyInput===t&&(n.value[a]=e),n})))},validateInputsValue:function(n){var t,e=n.id,a=n.type,i=n.keyInput,s=n.value;if(i){var o=this.getIndexField({id:e,type:a,keyInput:i,value:s});t=this.getValueDefault(o)}else{var r=this.getIndexFieldCustom({id:e,type:a,value:s});t=this.getValueCustom(r)}if("CHECKBOX"===a&&JSON.stringify(t)===JSON.stringify(s))return!0;if("phones"===i)return 0===t.length&&1===s.length&&s[0].number.length<10||(JSON.stringify(t)===JSON.stringify(s)||s.some((function(n){var t=n.number;return t.length<10})));if("socialMedias"===i){var u=s.filter((function(n){var t=n.url;return t})).map((function(n){var t=n.type,e=n.url;return{url:e,type:t}})),l=t.filter((function(n){var t=n.url;return t})).map((function(n){var t=n.type,e=n.url;return{url:e,type:t}})),d=u.every((function(n){return l.some((function(t){return n.url===t.url&&n.type===t.type}))}));if(d)return!0}return t===s||"boolean"!==typeof t&&"boolean"!==typeof s&&!t&&!s},formatListDefaultFields:function(){var n=this;return this.inputsDefault.map((function(t){var e=t.id,a=t.label,i=t.items,s=t.keyInput,o=t.type,r=t.order;return{id:e,name:a,label:a,items:i,keyInput:s,value:n.item[s],type:o,order:r,edit:!1,icon:"no-icon"}}))},formatDefaultUpdate:function(n){return Object(r["a"])({},n.keyInput,n.value)},getIndexField:function(n){return this.listFieldsDefault.findIndex((function(t){return t.keyInput===n.keyInput}))},formatValuesDefault:function(){var n=this;return JSON.parse(JSON.stringify(this.inputsDefault.map((function(t){return{id:t.id,value:n.item[t.keyInput]}}))))},resetValueDefault:function(n){var t=this,e=this.getIndexField(n);this.listFieldsDefault=this.listFieldsDefault.map((function(a){return a.id===n.id&&(a.value=JSON.parse(JSON.stringify(t.getValueDefault(e)))),a}))},getValueDefault:function(n){var t=this;return this.listValuesDefault.find((function(e){return e.id===t.listFieldsDefault[n].id})).value},closeEditField:function(n){this.listFieldsDefault[n].edit=!1},saveDefaultHandler:function(n,t){if("socialMedias"===n.keyInput){var e=t.socialMedias.map((function(n){var t=n.type,e=n.url;return{type:t,url:e}})),a=[];e.forEach((function(n){n.url&&n.url.length>0&&a.push(n)})),t.socialMedias=a}switch("phones"===n.keyInput&&(1===t.phones.length?0===t.phones[0].number.length&&(t.phones=[]):t.phones=t.phones.filter((function(n){var t=n.number;return t.length>=10}))),this.typeItem){case"CONTACT":this.saveDefaultContact(t);break;case"COMPANY":this.saveDefaultCompany(t);break;case"DEAL":this.saveDefaultDeal(t);break;default:this.modalHandlerError({isOpen:!0,error:"No se pudo actualizar no se ha encontrado referencia para actualizar"});break}},saveDefaultContact:function(n){(this.canEdit||this.canEditOthers)&&this.updateContact(Object(o["a"])({id:this.item.id},n))},saveDefaultCompany:function(n){(this.canEdit||this.canEditOthers)&&this.updateCompany(Object(o["a"])({id:this.item.id},n))},saveDefaultDeal:function(n){(this.canEdit||this.canEditOthers)&&this.updateDeal(Object(o["a"])({id:this.item.id},n))},formatValuesCustom:function(){var n,t=this;return(null===(n=this.inputsCustom)||void 0===n?void 0:n.length)>0?JSON.parse(JSON.stringify(this.inputsCustom.map((function(n){var e,a;if(null!==(e=t.item)&&void 0!==e&&null!==(a=e.customForms)&&void 0!==a&&a.length){var i=t.item.customForms.find((function(t){return t.id===n.id}))||{},s=i.value;return{id:n.id,value:s}}return{id:n.id,value:""}})))):[]},formatListCustomFields:function(){var n,t=this;return Array.isArray(this.listValuesCustom)&&(null===(n=this.listValuesCustom)||void 0===n?void 0:n.length)>0?this.inputsCustom.map((function(n){var e=n.id,a=n.label,i=n.items,s=n.type,o=n.order,r=t.listValuesCustom.find((function(n){return n.id===e})),u=r.value;return{id:e,name:a,label:a,items:i,value:u||"",type:s,order:o,edit:!1,icon:"no-icon"}})):[]},getIndexFieldCustom:function(n){return this.listFieldsCustom.findIndex((function(t){return t.id===n.id}))},formatCustomUpdate:function(n){return{id:n.id,value:n.value}},saveCustomHandler:function(n){switch(this.typeItem){case"CONTACT":this.saveCustomContact(n);break;case"COMPANY":this.saveCustomCompany(n);break;case"DEAL":this.saveCustomDeal(n);break;default:this.modalHandlerError({isOpen:!0,error:"No se pudo actualizar no se ha encontrado referencia para actualizar"});break}},saveCustomContact:function(n){this.canEdit&&this.updateContact({id:this.item.id,customForm:n})},saveCustomCompany:function(n){this.canEdit&&this.updateCompany({id:this.item.id,customForm:n})},saveCustomDeal:function(n){this.canEdit&&this.updateDeal({id:this.item.id,customForm:n})},resetValueCustom:function(n){var t=this.getIndexFieldCustom(n);this.listFieldsCustom[t].value=this.getValueCustom(t)},getValueCustom:function(n){var t=this;return this.listValuesCustom.find((function(e){return e.id===t.listFieldsCustom[n].id})).value},closeEditFieldCustom:function(n){this.listFieldsCustom[n].edit=!1},formatUpdateJSON:function(n,t){return Object(r["a"])({},n,t)},isEmptyInput:function(n){if(null===n||""===n)return!0;var t=Object(s["a"])(n);switch(t){case"boolean":return!1;case"object":return Array.isArray(n)?0===n.length:0===Object.keys(n).length&&n.constructor===Object;default:return null===n||void 0===n}},isCustom:function(n){return"undefined"===typeof n.keyInput||null===n.keyInput}},apollo:{formContact:{query:p["g"]}}},y=D,C=(e("243a"),e("0c7c")),b=e("6544"),O=e.n(b),I=e("8336"),L=e("b0af"),$=e("62ad"),j=e("a523"),F=e("4bd4"),E=e("132d"),S=e("e449"),w=e("0fd9"),k=Object(C["a"])(y,a,i,!1,null,"71c96102",null);t["default"]=k.exports;O()(k,{VBtn:I["a"],VCard:L["a"],VCol:$["a"],VContainer:j["a"],VForm:F["a"],VIcon:E["a"],VMenu:S["a"],VRow:w["a"]})},"53ca":function(n,t,e){"use strict";e.d(t,"a",(function(){return a}));e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0");function a(n){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},a(n)}},"59c9":function(n,t,e){"use strict";e.d(t,"c",(function(){return v})),e.d(t,"i",(function(){return g})),e.d(t,"e",(function(){return D})),e.d(t,"h",(function(){return y})),e.d(t,"g",(function(){return C})),e.d(t,"b",(function(){return b})),e.d(t,"a",(function(){return O})),e.d(t,"d",(function(){return I})),e.d(t,"f",(function(){return L})),e.d(t,"j",(function(){return $})),e.d(t,"k",(function(){return j}));var a,i,s,o,r,u,l,d,c,m,p,f=e("8785"),h=e("5184"),v=Object(h["a"])(a||(a=Object(f["a"])(["\n  mutation CreateDeal($input: CreateDeal!) {\n    createDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      rottenTime\n      owner {\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      company {\n        id\n        name\n      }\n      contact {\n        id\n        name\n      }\n      stage {\n        id\n        name\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n"]))),g=Object(h["a"])(i||(i=Object(f["a"])(["\n  mutation UpdateDeal($input: UpdateDeal!) {\n    updateDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      contact {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n"]))),D=Object(h["a"])(s||(s=Object(f["a"])(["\n  mutation deletedDeals($input: [DeleteDealInput!]!) {\n    deletedDeals(deals: $input) {\n      id\n    }\n  }\n"]))),y=Object(h["a"])(o||(o=Object(f["a"])(["\n  mutation trashDeals($input: [DeleteDealInput!]!) {\n    trashDeals(deals: $input) {\n      id\n    }\n  }\n"]))),C=Object(h["a"])(r||(r=Object(f["a"])(["\n  mutation restoreDeals($input: [DeleteDealInput!]!) {\n    restoreDeals(deals: $input) {\n      id\n    }\n  }\n"]))),b=Object(h["a"])(u||(u=Object(f["a"])(["\n  mutation ChangeDealStage($input: ChangeStage!) {\n    changeDealStage(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      dateEntryIntoStage\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n        maxDays\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n"]))),O=Object(h["a"])(l||(l=Object(f["a"])(["\n  mutation changeDealPipeline($input: changePipelineInput!) {\n    changeDealPipeline(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n"]))),I=Object(h["a"])(d||(d=Object(f["a"])(["\n  mutation CreateLostReason($input: lostReasonCreateInput!) {\n    createLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n"]))),L=Object(h["a"])(c||(c=Object(f["a"])(["\n  mutation DeleteLostReason($lostReasonId: ID!) {\n    deleteLostReason(lostReasonId: $lostReasonId) {\n      id\n      reason\n    }\n  }\n"]))),$=Object(h["a"])(m||(m=Object(f["a"])(["\n  mutation UpdateLostReason($input: lostReasonUpdateInput!) {\n    updateLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n"]))),j=Object(h["a"])(p||(p=Object(f["a"])(["\n  mutation assignDeals($dealListAssign: DealListAssign!) {\n    assignDeals(dealListAssign: $dealListAssign)\n  }\n"])))},"78f1":function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));e("b0c0");var a=e("231e"),i={data:function(){return{isLoadingUpdateCompany:!1}},methods:{updateCompany:function(n){var t=this,e=n.id,i=n.name,s=n.address,o=n.website,r=n.socialMedias,u=n.phones,l=n.customForm,d=n.contact,c=n.tags,m=n.owner,p=n.deal;this.isLoadingUpdateCompany=!0;var f={};f.id=e,i&&(f.name=i),s&&(f.address=s),o&&(f.website=o),r&&(f.socialMedias=r),u&&(f.phones=u),l&&(f.customForm=l),d&&(f.contact=d),c&&(f.tags=c),m&&(f.owner=m),p&&(f.deal=p),this.$apollo.mutate({mutation:a["f"],variables:{companyInput:f}}).then((function(n){var e=n.data.updateCompany;t.$emit("updateItem",e),t.$emit("updateHistory"),t.isLoadingUpdateCompany=!1})).catch((function(){t.isLoadingUpdateCompany=!1;var n="No se pudo actualizar la empresa, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:n})}))}}}},"841c":function(n,t,e){"use strict";var a=e("d784"),i=e("825a"),s=e("1d80"),o=e("129f"),r=e("14c3");a("search",(function(n,t,e){return[function(t){var e=s(this),a=void 0==t?void 0:t[n];return void 0!==a?a.call(t,e):new RegExp(t)[n](String(e))},function(n){var a=e(t,this,n);if(a.done)return a.value;var s=i(this),u=String(n),l=s.lastIndex;o(l,0)||(s.lastIndex=0);var d=r(s,u);return o(s.lastIndex,l)||(s.lastIndex=l),null===d?-1:d.index}]}))},8592:function(n,t,e){}}]);
//# sourceMappingURL=chunk-15206510.b36fdef0.js.map