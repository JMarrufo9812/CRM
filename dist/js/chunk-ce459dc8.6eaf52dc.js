(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce459dc8"],{"269a":function(e,t){e.exports=function(e,t){var n="function"===typeof e.exports?e.exports.extendOptions:e.options;for(var i in"function"===typeof e.exports&&(n.directives=e.exports.options.directives),n.directives=n.directives||{},t)n.directives[i]=n.directives[i]||t[i]}},"60eb":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-dialog",{attrs:{width:"400",scrollable:"",persistent:""},model:{value:e.modalHandler.isOpen,callback:function(t){e.$set(e.modalHandler,"isOpen",t)},expression:"modalHandler.isOpen"}},[n("v-card",[n("v-card-title",{staticClass:"primary d-flex justify-space-between py-6"},[n("span",{staticClass:"white--text ml-9"},[e._v(" Agregar trato ")]),n("div",[e.$can(e.CUSTOM_FIELDS_MANAGEMENT,e.PERMISSIONS_SETTINGS)?n("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-icon",e._g({staticClass:"white--text mr-4",attrs:{small:""}},i),[e._v(" mdi-cog ")])]}}],null,!1,1915171085)},[n("v-list",[n("v-list-item",{on:{click:function(t){return e.modalHandlerCustomFields({isOpen:!0,isLoading:!1,isEdit:!1})}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-text-box-plus-outline")]),e._v(" Agregar campo ")],1),n("v-list-item",{attrs:{to:"/settings/enterprise/custom-fields/deals"}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-clipboard-edit-outline")]),e._v(" Editar campos ")],1)],1)],1):e._e(),n("v-icon",{staticClass:"white--text",on:{click:e.close}},[e._v(" mdi-close ")])],1)]),n("v-card-text",{directives:[{name:"scroll",rawName:"v-scroll.self",value:e.onScroll,expression:"onScroll",modifiers:{self:!0}}],staticClass:"pt-6"},[n("v-form",{ref:"formDeal",model:{value:e.isValidate,callback:function(t){e.isValidate=t},expression:"isValidate"}},[n("v-row",e._l(e.inputs,(function(t,i){return n("v-col",{key:i,attrs:{cols:"12"}},[n("Fields",{attrs:{field:t,resetHandler:e.modalHandler.isOpen,isScrolled:e.isScrolled},on:{scrolled:e.scrolled}})],1)})),1)],1)],1),n("v-card-actions",{staticClass:"d-flex justify-space-between mx-2 my-2"},[n("v-btn",{attrs:{width:"45%",large:"",outlined:"",color:"primary"},on:{click:e.close}},[e._v(" Cancelar ")]),n("v-btn",{attrs:{width:"45%",large:"",normal:"",color:"secondary",loading:e.modalHandler.isLoading},on:{click:e.outData}},[e._v(" Agregar ")])],1)],1)],1),n("ModalCustomField",{attrs:{forForm:"DEAL",modalHandler:e.modalCustomField},on:{outData:e.createCustomField,close:e.modalHandlerCustomFields}}),n("BaseModalAlert",{attrs:{modalHandler:e.modalAlert,cancel:!1},on:{confirm:e.modalHandlerAlert,close:e.modalHandlerAlert}})],1)},a=[],o=n("2909"),s=(n("7db0"),n("b64b"),n("d81d"),n("4de4"),n("159b"),n("6f34")),r=n("1e6d"),l=n("891c"),d=n("ee2e"),u={name:"ModalDeals",props:{modalHandler:{required:!0,type:Object,default:function(){return{isOpen:!1,isLoading:!1}}},inputs:{required:!0,type:Array,default:function(){return{}}}},mixins:[s["a"],r["a"]],data:function(){return{deal:{},isValidate:"",isScrolled:!1,PERMISSIONS_SETTINGS:d["l"],CUSTOM_FIELDS_MANAGEMENT:l["e"]}},watch:{modalHandler:function(e){var t=e.isOpen;t?this.isScrolled=!1:this.resetValues()}},methods:{scrolled:function(e){this.isScrolled=e},onScroll:function(){this.isScrolled=!0},outData:function(){var e=this,t=Object(o["a"])(this.inputs),n=t.find((function(e){return"pipeline"===e.keyInput}));if(n.value){var i,a=0===(null===(i=Object.keys(n.value))||void 0===i?void 0:i.length)&&n.value.constructor===Object;if(a)this.modalHandlerAlert({isOpen:!0,isLoading:!1,message:{title:"Selecciona un embudo",text:"Es necesario que agregues el embudo al que agregaras el trato"},info:{}});else{var s=this.inputs.some((function(e){return!e.keyInput}));if(s){var r=t.filter((function(e){return!e.keyInput})).map((function(e){var t=e.id,n=e.value;return{id:t,value:n}})),l=t.filter((function(e){return e.keyInput}));t=l,t.push({keyInput:"customForms",value:r})}t.filter((function(e){var t=e.value;return void 0!==t&&""!==t})).forEach((function(t){var n=t.keyInput,i=t.value;e.deal[n]=i})),this.$refs.formDeal.validate(),this.isValidate&&this.$emit("outData",this.deal)}}else this.modalHandlerAlert({isOpen:!0,isLoading:!1,message:{title:"Selecciona un embudo",text:"Es necesario que agregues el embudo al que agregaras el trato"},info:{}})},close:function(){this.$emit("close",{isOpen:!1,isLoading:!1})},resetValues:function(){this.deal={},this.$refs.formDeal.resetValidation(),this.$refs.formDeal.reset()}}},c=u,p=n("0c7c"),m=n("6544"),f=n.n(m),v=n("8336"),b=n("b0af"),h=n("99d9"),F=n("62ad"),O=n("169a"),g=n("4bd4"),C=n("132d"),y=n("8860"),S=n("da13"),I=n("e449"),x=n("0fd9"),E=n("269a"),k=n.n(E),V=n("f977"),$=Object(p["a"])(c,i,a,!1,null,null,null);t["default"]=$.exports;f()($,{VBtn:v["a"],VCard:b["a"],VCardActions:h["a"],VCardText:h["c"],VCardTitle:h["d"],VCol:F["a"],VDialog:O["a"],VForm:g["a"],VIcon:C["a"],VList:y["a"],VListItem:S["a"],VMenu:I["a"],VRow:x["a"]}),k()($,{Scroll:V["b"]})},"6f34":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("d3b7"),n("3ca3"),n("ddb0");var i=n("cd1c"),a={data:function(){return{isUpdateInputs:!1,modalCustomField:{isOpen:!1,isLoading:!1,isEdit:!1}}},components:{Fields:function(){return n.e("chunk-2d21400a").then(n.bind(null,"aea1"))},ModalCustomField:function(){return n.e("chunk-2fe60b47").then(n.bind(null,"2aaf"))}},methods:{modalHandlerCustomFields:function(e){var t=e.isOpen,n=e.isLoading,i=e.isEdit;this.modalCustomField={isOpen:t,isLoading:n,isEdit:i}},createCustomField:function(e,t){var n=this,a=t.type,o=t.label,s=t.items,r=t.isRequired;this.modalHandlerCustomFields({isOpen:!0,isLoading:!0,isEdit:!1}),this.$apollo.mutate({mutation:i["a"],variables:{forForm:e,input:{type:a,label:o,items:s,isRequired:r,isMultiple:!1}},update:function(e,t){var i=t.data.createCustomField;if(n.inputs&&!n.isImportModal&&n.inputs.push(i),n.inputs&&n.isImportModal){var a=i.id,o=i.type,s=i.label,r={label:s,key:a,isSelect:!1,isDefault:!1,type:o};n.inputs.push(r)}}}).then((function(){n.modalHandlerCustomFields({isOpen:!1,isLoading:!1,isEdit:!1}),n.isUpdateInputs=!0})).catch((function(){var e="No se pudo actualizar los campos, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e})}))}}}},cd1c:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return p}));var i,a,o,s,r=n("8785"),l=n("5184"),d=Object(l["a"])(i||(i=Object(r["a"])(["\n  mutation CreateCustomFields($forForm: typeForm!, $input: CreateCustomInput!) {\n    createCustomField(forForm: $forForm, input: $input) {\n      id\n      order\n      label\n      icon\n      type\n      items\n      isRequired\n      isMultiple\n    }\n  }\n"]))),u=Object(l["a"])(a||(a=Object(r["a"])(["\n  mutation UpdateOrderInputs($forForm: typeForm!, $inputs: [UpdateOrder!]!) {\n    updateOrderInputs(forForm: $forForm, inputs: $inputs) {\n      forForm\n      defaultForm {\n        id\n        inputs {\n          id\n          label\n          order\n        }\n      }\n      customForm {\n        id\n        inputs {\n          id\n          label\n          order\n        }\n      }\n    }\n  }\n"]))),c=Object(l["a"])(o||(o=Object(r["a"])(["\n  mutation UpdateCustomField($input: UpdateCustomInput!) {\n    updateCustomField(input: $input) {\n      id\n      type\n      icon\n      label\n      items\n      order\n      isRequired\n      isMultiple\n    }\n  }\n"]))),p=Object(l["a"])(s||(s=Object(r["a"])(["\n  mutation DeleteInput($input: ID!) {\n    deleteCustomField(input: $input) {\n      forForm\n      defaultForm {\n        id\n        inputs {\n          id\n          order\n        }\n      }\n      customForm {\n        id\n        inputs {\n          id\n          order\n          label\n          icon\n          type\n          items\n          isRequired\n          isMultiple\n        }\n      }\n    }\n  }\n"])))}}]);
//# sourceMappingURL=chunk-ce459dc8.6eaf52dc.js.map