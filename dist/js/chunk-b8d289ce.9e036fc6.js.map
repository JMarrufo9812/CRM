{"version":3,"sources":["webpack:///./src/graphql/mutations/companiesMutations.js","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./src/graphql/mutations/contactsMutations.js","webpack:///./src/mixins/contactsMixin.js","webpack:///./src/components/profile/ListDeals.vue?a638","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./src/mixins/permissionGroupMixin.js","webpack:///./src/mixins/companiesMixin.js","webpack:///./src/components/profile/ListDeals.vue?8831","webpack:///src/components/profile/ListDeals.vue","webpack:///./src/components/profile/ListDeals.vue?4f08","webpack:///./src/components/profile/ListDeals.vue?8ffe","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/modules/es.array.includes.js"],"names":["CREATE_COMPANY","gql","DELETE_COMPANIES","TRASH_COMPANIES","RESTORE_COMPANIES","UPDATE_COMPANY","FUSE_COMPANIES","UPDATE_OWNER_COMPANIES","$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","this","indexOf","arguments","length","undefined","CREATE_CONTACT","UPDATE_CONTACT","DELETE_CONTACTS","TRASH_CONTACTS","RESTORE_CONTACTS","FUSE_CONTACTS","UPDATE_OWNER_CONTACTS","contactsMixin","data","isLoadingUpdateContact","methods","updateContact","id","name","email","birthday","phones","isClient","socialMedias","customForm","company","owner","tags","deal","contactInput","$apollo","mutate","mutation","variables","then","$emit","catch","error","modalHandlerError","isOpen","isRegExp","module","exports","it","TypeError","permissionGroupMixin","membersGroup","canGroup","method","permission","permissionGroup","ownerCopyId","authorId","ability","can","subject","ALL","GROUP","apollo","query","GET_USER_LOGGED","update","userCurrent","companiesMixin","isLoadingUpdateCompany","updateCompany","address","website","contact","companyInput","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","scopedSlots","_u","key","fn","ref","on","_g","directives","rawName","value","canEdit","canEditOthers","item","isDelete","expression","model","callback","$$v","isOpenMenuAddDeal","_e","$event","isShowAddDeal","warningDealExistInfo","staticStyle","_s","text","class","isDense","verificationDeal","deleteDealSelected","disabledAddButton","isLoadingAddDeal","addExistingDeal","deals","listDealsOpen","isLoading","_l","index","goDeal","title","_b","isLoadingRemove","stopPropagation","disconnectDeal","typeItem","_f","getPercentage","stage","pipeline","stages","listDealsClosed","status","staticRenderFns","components","FieldSelectDealSimple","mixins","props","type","Object","required","itemId","default","ownerId","Array","Boolean","UPDATE","PERMISSIONS_CONTACTS","PERMISSIONS_COMPANIES","existingDealSelected","show","watch","computed","filter","$router","push","goContact","getIndexStage","findIndex","getCountStage","component","VAlert","VBtn","VCard","VCardText","VCardTitle","VDivider","VForm","VIcon","VList","VListItem","VListItemTitle","VMenu","VProgressLinear","VSpacer","VSubheader","VTooltip","wellKnownSymbol","MATCH","METHOD_NAME","regexp","error1","error2","$includes","addToUnscopables","el"],"mappings":"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","file":"js/chunk-b8d289ce.9e036fc6.js","sourcesContent":["import gql from 'graphql-tag';\n\nexport const CREATE_COMPANY = gql`\n  mutation createCompany($input: companyCreateInput!) {\n    createCompany(companyInput: $input) {\n      id\n      name\n      address\n      website\n      phones\n      socialMedias\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      contacts {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const DELETE_COMPANIES = gql`\n  mutation deletedCompanies($input: [DeleteCompanyInput!]!) {\n    deletedCompanies(companies: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const TRASH_COMPANIES = gql`\n  mutation trashCompanies($input: [DeleteCompanyInput!]!) {\n    trashCompanies(companies: $input) {\n      id\n    }\n  }\n`;\n\nexport const RESTORE_COMPANIES = gql`\n  mutation restoreCompanies($input: [DeleteCompanyInput!]!) {\n    restoreCompanies(companies: $input) {\n      id\n    }\n  }\n`;\n\nexport const UPDATE_COMPANY = gql`\n  mutation updateCompany($companyInput: companyUpdateInput!) {\n    updateCompany(companyInput: $companyInput) {\n      id\n      name\n      address\n      website\n      phones\n      customForms\n      socialMedias\n      tags {\n        id\n        name\n        color\n        order\n      }\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      contacts {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const FUSE_COMPANIES = gql`\n  mutation FuseCompanies($input: CompaniesToFuse!) {\n    fuseCompanies(fuse: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const UPDATE_OWNER_COMPANIES = gql`\n  mutation assignCompanies($companyListAssign: CompanyListAssign!) {\n    assignCompanies(companyListAssign: $companyListAssign)\n  }\n`;\n","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import gql from 'graphql-tag';\n\nexport const CREATE_CONTACT = gql`\n  mutation CreateContact($input: contactCreateInput!) {\n    createContact(contactInput: $input) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n      }\n      isClient\n    }\n  }\n`;\n\nexport const UPDATE_CONTACT = gql`\n  mutation updateContact($contactInput: contactUpdateInput) {\n    updateContact(contactInput: $contactInput) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      customForms\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      enterprise {\n        id\n        name\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n      createdAt\n    }\n  }\n`;\n\nexport const DELETE_CONTACTS = gql`\n  mutation deletedContacts($input: [DeleteContactInput!]!) {\n    deletedContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const TRASH_CONTACTS = gql`\n  mutation trashContacts($input: [DeleteContactInput!]!) {\n    trashContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const RESTORE_CONTACTS = gql`\n  mutation restoreContacts($input: [DeleteContactInput!]!) {\n    restoreContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const FUSE_CONTACTS = gql`\n  mutation FuseContacts($input: ContactsToFuse!) {\n    fuseContacts(fuse: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const UPDATE_OWNER_CONTACTS = gql`\n  mutation assignContacts($contactListAssign: ContactListAssign!) {\n    assignContacts(contactListAssign: $contactListAssign)\n  }\n`;\n","import { UPDATE_CONTACT } from '@/graphql/mutations/contactsMutations';\n// import { GET_CONTACT } from '@/graphql/querys/contactsQuery';\n\nexport const contactsMixin = {\n  data() {\n    return {\n      isLoadingUpdateContact: false,\n    };\n  },\n  methods: {\n    updateContact({\n      id,\n      name,\n      email,\n      birthday,\n      phones,\n      isClient,\n      socialMedias,\n      customForm,\n      company,\n      owner,\n      tags,\n      deal,\n    }) {\n      this.isLoadingUpdateContact = true;\n      const contactInput = {};\n      contactInput.id = id;\n      if (name) {\n        contactInput.name = name;\n      }\n      if (email) {\n        contactInput.email = email;\n      }\n      if (birthday) {\n        contactInput.birthday = birthday;\n      }\n      if (phones) {\n        contactInput.phones = phones;\n      }\n      if (isClient === true || isClient === false) {\n        contactInput.isClient = isClient;\n      }\n      if (socialMedias) {\n        contactInput.socialMedias = socialMedias;\n      }\n      if (customForm) {\n        contactInput.customForm = customForm;\n      }\n      if (company) {\n        contactInput.company = company;\n      }\n      if (owner) {\n        contactInput.owner = owner;\n      }\n      if (tags) {\n        contactInput.tags = tags;\n      }\n      if (deal) {\n        contactInput.deal = deal;\n      }\n      this.$apollo\n        .mutate({\n          // Query\n          mutation: UPDATE_CONTACT,\n          // Parameters\n          variables: {\n            contactInput,\n          },\n        })\n        .then(({ data: { updateContact } }) => {\n          this.$emit('updateItem', updateContact);\n          this.$emit('updateHistory');\n          // Close edit field\n          this.isLoadingUpdateContact = false;\n        })\n        .catch(() => {\n          this.isLoadingUpdateContact = false;\n          // this.isLoading = false;\n          // Error\n          const error =\n            'No se pudo actualizar el contacto, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n  },\n};\n","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ListDeals.vue?vue&type=style&index=0&id=0972615b&lang=scss&scoped=true&\"","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","import { subject } from '@casl/ability';\nimport ability from '@/services/ability';\nimport { ALL, GROUP } from '@/constants/methods';\nimport { GET_USER_LOGGED } from '@/graphql/local-state/queries';\n\nexport const permissionGroupMixin = {\n  data() {\n    return {\n      membersGroup: [],\n    };\n  },\n  methods: {\n    canGroup(method, permission, permissionGroup, owner) {\n      const ownerCopyId = owner.authorId;\n      if (ownerCopyId) {\n        return (\n          ability.can(method, subject(permission, { authorId: ownerCopyId })) ||\n          (ability.can(ALL, permissionGroup) &&\n            ability.can(method, permission)) ||\n          (ability.can(GROUP, permissionGroup) &&\n            this.membersGroup.includes(ownerCopyId) &&\n            ability.can(method, permission))\n        );\n      }\n      return false;\n    },\n  },\n  apollo: {\n    membersGroup: {\n      query: GET_USER_LOGGED,\n      update({ userCurrent }) {\n        return userCurrent.membersGroup;\n      },\n    },\n  },\n};\n","import { UPDATE_COMPANY } from '@/graphql/mutations/companiesMutations';\n// import { GET_COMPANY } from '@/graphql/querys/companiesQuery';\n\nexport const companiesMixin = {\n  data() {\n    return {\n      isLoadingUpdateCompany: false,\n    };\n  },\n  methods: {\n    updateCompany({\n      id,\n      name,\n      address,\n      website,\n      socialMedias,\n      phones,\n      customForm,\n      contact,\n      tags,\n      owner,\n      deal,\n    }) {\n      this.isLoadingUpdateCompany = true;\n      const companyInput = {};\n      companyInput.id = id;\n      if (name) {\n        companyInput.name = name;\n      }\n      if (address) {\n        companyInput.address = address;\n      }\n      if (website) {\n        companyInput.website = website;\n      }\n      if (socialMedias) {\n        companyInput.socialMedias = socialMedias;\n      }\n      if (phones) {\n        companyInput.phones = phones;\n      }\n      if (customForm) {\n        companyInput.customForm = customForm;\n      }\n      if (contact) {\n        companyInput.contact = contact;\n      }\n      if (tags) {\n        companyInput.tags = tags;\n      }\n      if (owner) {\n        companyInput.owner = owner;\n      }\n      if (deal) {\n        companyInput.deal = deal;\n      }\n      this.$apollo\n        .mutate({\n          // Query\n          mutation: UPDATE_COMPANY,\n          // Parameters\n          variables: {\n            companyInput,\n          },\n        })\n        .then(({ data: { updateCompany } }) => {\n          this.$emit('updateItem', updateCompany);\n          this.$emit('updateHistory');\n          // Close edit field\n          this.isLoadingUpdateCompany = false;\n        })\n        .catch(() => {\n          this.isLoadingUpdateCompany = false;\n          // Error\n          const error =\n            'No se pudo actualizar la empresa, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"tile\":\"\",\"flat\":\"\"}},[_c('v-divider'),_c('v-card-title',{staticClass:\"deals-title py-1\"},[_c('v-icon',{staticClass:\"mr-4\"},[_vm._v(\"mdi-handshake\")]),_vm._v(\" Tratos \"),_c('v-spacer'),_c('v-menu',{attrs:{\"left\":\"\",\"bottom\":\"\",\"offset-y\":\"\",\"close-on-content-click\":false,\"close-on-click\":true},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({directives:[{name:\"show\",rawName:\"v-show\",value:((_vm.canEdit || _vm.canEditOthers) && !_vm.item.isDelete),expression:\"(canEdit || canEditOthers) && !item.isDelete\"}],attrs:{\"icon\":\"\"}},on),[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)]}}]),model:{value:(_vm.isOpenMenuAddDeal),callback:function ($$v) {_vm.isOpenMenuAddDeal=$$v},expression:\"isOpenMenuAddDeal\"}},[((_vm.canEdit || _vm.canEditOthers) && !_vm.item.isDelete)?_c('v-list',{attrs:{\"dense\":\"\"}},[_c('v-list-item',{on:{\"click\":function($event){return _vm.$emit('openModalDeal')}}},[_c('v-list-item-title',[_vm._v(\" Nuevo \")])],1),_c('v-menu',{attrs:{\"close-on-content-click\":false,\"close-on-click\":true},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-list-item',_vm._g({},on),[_c('v-list-item-title',[_vm._v(\" Existente \")])],1)]}}],null,false,4142919280),model:{value:(_vm.isShowAddDeal),callback:function ($$v) {_vm.isShowAddDeal=$$v},expression:\"isShowAddDeal\"}},[_c('v-card',{staticClass:\"pa-4\",attrs:{\"width\":\"18em\"}},[(_vm.warningDealExistInfo.show)?_c('v-alert',{attrs:{\"dense\":\"\",\"border\":\"left\",\"type\":\"warning\"}},[_c('p',{staticClass:\"mb-0\",staticStyle:{\"font-size\":\".75em\"}},[_vm._v(\" \"+_vm._s(_vm.warningDealExistInfo.text)+\" \")])]):_vm._e(),_c('v-form',{ref:\"formDeal\"},[_c('FieldSelectDealSimple',{attrs:{\"inputProps\":{ class: 'no-icon', isDense: true },\"resetHandler\":_vm.isShowAddDeal},on:{\"outData\":_vm.verificationDeal,\"deleteDeal\":_vm.deleteDealSelected}})],1),_c('div',{staticClass:\"d-flex justify-center pt-2 ml-2\"},[_c('v-btn',{staticClass:\"mr-2\",staticStyle:{\"width\":\"45%\"},attrs:{\"outlined\":\"\",\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){_vm.isShowAddDeal = false}}},[_vm._v(\" Cancelar \")]),_c('v-btn',{staticStyle:{\"width\":\"45%\"},attrs:{\"disabled\":_vm.disabledAddButton,\"loading\":_vm.isLoadingAddDeal,\"color\":\"secondary\",\"small\":\"\"},on:{\"click\":_vm.addExistingDeal}},[_vm._v(\" Guardar \")])],1)],1)],1)],1):_vm._e()],1)],1),_c('v-divider'),_c('v-card-text',{staticClass:\"pa-0\"},[_c('v-card',{staticClass:\"deals-container\",attrs:{\"flat\":\"\",\"max-height\":\"20em\"}},[(_vm.deals === null || !_vm.deals.length)?_c('div',{staticClass:\"d-flex align-center justify-center\",staticStyle:{\"height\":\"100%\"}},[_c('span',{staticClass:\"d-block text-center pa-10\"},[_vm._v(\"No hay tratos\")])]):(_vm.listDealsOpen.length && !_vm.isLoading)?[_c('v-subheader',[_vm._v(\"Abiertos\")]),_vm._l((_vm.listDealsOpen),function(deal,index){return _c('v-card',{key:(index + \"-\" + (deal.id)),staticClass:\"ma-4 deal__card\",on:{\"click\":function($event){return _vm.goDeal(deal.id)}}},[_c('v-card-title',{staticClass:\"d-flex justify-space-between deals-title pt-1 pb-0\"},[_c('div',{staticClass:\"text-truncate\",staticStyle:{\"width\":\"85%\"}},[_vm._v(\" \"+_vm._s(deal.title)+\" \")]),((_vm.canEdit || _vm.canEditOthers) && !_vm.item.isDelete)?_c('div',{staticStyle:{\"width\":\"15%\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"mr-2\",attrs:{\"x-small\":\"\",\"loading\":_vm.isLoadingRemove,\"color\":\"grey\",\"outlined\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.disconnectDeal(deal.id)}}},'v-btn',attrs,false),on),[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-connection\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Desvincular\")])])],1):_vm._e()]),_c('v-card-text',{staticClass:\"d-flex justify-space-between\"},[_c('div',{staticClass:\"text-truncate\",staticStyle:{\"width\":\"70%\"}},[_c('v-icon',[_vm._v(\" \"+_vm._s(_vm.typeItem === 'CONTACT' ? 'mdi-office-building' : 'mdi-account')+\" \")]),(_vm.typeItem === 'COMPANY')?_c('span',{staticClass:\"black--text\"},[_vm._v(\" \"+_vm._s(deal.contact ? deal.contact.name : 'Sin contacto')+\" \")]):_c('span',{staticClass:\"black--text \"},[_vm._v(\" \"+_vm._s(deal.company ? deal.company.name : 'Sin empresa')+\" \")])],1),_c('div',{staticClass:\"text-truncate\",staticStyle:{\"width\":\"30%\"}},[_c('span',{staticClass:\"black--text  d-block\"},[_vm._v(\" \"+_vm._s(_vm._f(\"formatPrice\")(deal.value))+\" \")])])]),_c('v-progress-linear',{attrs:{\"background-color\":\"secondary\",\"color\":\"success\",\"value\":_vm.getPercentage(deal.stage.id, deal.pipeline.stages),\"height\":\"5\"}})],1)})]:_vm._e(),(_vm.listDealsClosed.length && !_vm.isLoading)?[_c('v-subheader',[_vm._v(\"Cerrados\")]),_vm._l((_vm.listDealsClosed),function(deal,index){return _c('v-card',{key:(index + \"-\" + (deal.id) + \"-closed\"),staticClass:\"ma-4 deal__card\",on:{\"click\":function($event){return _vm.goDeal(deal.id)}}},[_c('v-card-title',{staticClass:\"d-flex justify-space-between deals-title pt-1 pb-0\"},[_c('div',{staticClass:\"text-truncate\",staticStyle:{\"width\":\"85%\"}},[_vm._v(\" \"+_vm._s(deal.title)+\" \")]),((_vm.canEdit || _vm.canEditOthers) && !_vm.item.isDelete)?_c('div',{staticStyle:{\"width\":\"15%\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"mr-2\",attrs:{\"x-small\":\"\",\"loading\":_vm.isLoadingRemove,\"color\":\"grey\",\"outlined\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.disconnectDeal(deal.id)}}},'v-btn',attrs,false),on),[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-connection\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Desvincular\")])])],1):_vm._e()]),_c('v-card-text',{staticClass:\"d-flex justify-space-between\"},[_c('div',{staticClass:\"text-truncate\",staticStyle:{\"width\":\"70%\"}},[_c('v-icon',[_vm._v(\" \"+_vm._s(_vm.typeItem === 'CONTACT' ? 'mdi-office-building' : 'mdi-account')+\" \")]),(_vm.typeItem === 'COMPANY')?_c('span',{staticClass:\"black--text\"},[_vm._v(\" \"+_vm._s(deal.contact ? deal.contact.name : 'Sin contacto')+\" \")]):_c('span',{staticClass:\"black--text \"},[_vm._v(\" \"+_vm._s(deal.company ? deal.company.name : 'Sin empresa')+\" \")])],1),_c('div',{staticClass:\"text-truncate\",staticStyle:{\"width\":\"30%\"}},[_c('span',{staticClass:\"black--text  d-block\"},[_vm._v(\" \"+_vm._s(_vm._f(\"formatPrice\")(deal.value))+\" \")])])]),_c('v-progress-linear',{attrs:{\"background-color\":\"secondary\",\"color\":deal.status === 'WON' ? 'success' : 'error',\"value\":\"100\",\"height\":\"5\"}})],1)})]:_vm._e()],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card tile flat>\n    <v-divider />\n    <v-card-title class=\"deals-title py-1\">\n      <v-icon class=\"mr-4\">mdi-handshake</v-icon>\n      Tratos\n      <v-spacer></v-spacer>\n      <v-menu\n        v-model=\"isOpenMenuAddDeal\"\n        left\n        bottom\n        offset-y\n        :close-on-content-click=\"false\"\n        :close-on-click=\"true\"\n      >\n        <template v-slot:activator=\"{ on }\">\n          <v-btn\n            v-on=\"on\"\n            v-show=\"(canEdit || canEditOthers) && !item.isDelete\"\n            icon\n          >\n            <v-icon>mdi-plus</v-icon>\n          </v-btn>\n        </template>\n        <v-list dense v-if=\"(canEdit || canEditOthers) && !item.isDelete\">\n          <v-list-item @click=\"$emit('openModalDeal')\">\n            <v-list-item-title>\n              Nuevo\n            </v-list-item-title>\n          </v-list-item>\n          <v-menu\n            v-model=\"isShowAddDeal\"\n            :close-on-content-click=\"false\"\n            :close-on-click=\"true\"\n          >\n            <template v-slot:activator=\"{ on }\">\n              <v-list-item v-on=\"on\">\n                <v-list-item-title>\n                  Existente\n                </v-list-item-title>\n              </v-list-item>\n            </template>\n            <v-card class=\"pa-4\" width=\"18em\">\n              <v-alert\n                v-if=\"warningDealExistInfo.show\"\n                dense\n                border=\"left\"\n                type=\"warning\"\n              >\n                <p style=\"font-size:.75em\" class=\"mb-0\">\n                  {{ warningDealExistInfo.text }}\n                </p>\n              </v-alert>\n              <v-form ref=\"formDeal\">\n                <FieldSelectDealSimple\n                  :inputProps=\"{ class: 'no-icon', isDense: true }\"\n                  :resetHandler=\"isShowAddDeal\"\n                  @outData=\"verificationDeal\"\n                  @deleteDeal=\"deleteDealSelected\"\n                />\n              </v-form>\n              <div class=\"d-flex justify-center pt-2 ml-2\">\n                <v-btn\n                  @click=\"isShowAddDeal = false\"\n                  style=\"width:45%\"\n                  class=\"mr-2\"\n                  outlined\n                  color=\"primary\"\n                  small\n                >\n                  Cancelar\n                </v-btn>\n                <v-btn\n                  :disabled=\"disabledAddButton\"\n                  @click=\"addExistingDeal\"\n                  :loading=\"isLoadingAddDeal\"\n                  style=\"width:45%\"\n                  color=\"secondary\"\n                  small\n                >\n                  Guardar\n                </v-btn>\n              </div>\n            </v-card>\n          </v-menu>\n        </v-list>\n      </v-menu>\n    </v-card-title>\n    <v-divider></v-divider>\n    <v-card-text class=\"pa-0\">\n      <v-card flat max-height=\"20em\" class=\"deals-container\">\n        <div\n          class=\"d-flex align-center justify-center\"\n          style=\"height:100%;\"\n          v-if=\"deals === null || !deals.length\"\n        >\n          <span class=\"d-block text-center pa-10\">No hay tratos</span>\n        </div>\n        <template v-else-if=\"listDealsOpen.length && !isLoading\">\n          <v-subheader>Abiertos</v-subheader>\n          <v-card\n            v-for=\"(deal, index) in listDealsOpen\"\n            :key=\"`${index}-${deal.id}`\"\n            class=\"ma-4 deal__card\"\n            @click=\"goDeal(deal.id)\"\n          >\n            <v-card-title\n              class=\"d-flex justify-space-between deals-title pt-1 pb-0\"\n            >\n              <div class=\"text-truncate\" style=\"width: 85%\">\n                {{ deal.title }}\n              </div>\n              <div\n                style=\"width: 15%\"\n                v-if=\"(canEdit || canEditOthers) && !item.isDelete\"\n              >\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      x-small\n                      class=\"mr-2\"\n                      @click.stop=\"disconnectDeal(deal.id)\"\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      :loading=\"isLoadingRemove\"\n                      color=\"grey\"\n                      outlined\n                    >\n                      <v-icon small>mdi-connection</v-icon>\n                    </v-btn>\n                  </template>\n                  <span>Desvincular</span>\n                </v-tooltip>\n              </div>\n            </v-card-title>\n            <v-card-text class=\"d-flex justify-space-between\">\n              <div class=\"text-truncate\" style=\"width:70%\">\n                <v-icon>\n                  {{\n                    typeItem === 'CONTACT'\n                      ? 'mdi-office-building'\n                      : 'mdi-account'\n                  }}\n                </v-icon>\n                <span v-if=\"typeItem === 'COMPANY'\" class=\"black--text\">\n                  {{ deal.contact ? deal.contact.name : 'Sin contacto' }}\n                </span>\n                <span v-else class=\"black--text \">\n                  {{ deal.company ? deal.company.name : 'Sin empresa' }}\n                </span>\n              </div>\n              <div class=\"text-truncate\" style=\"width:30%\">\n                <span class=\"black--text  d-block\">\n                  {{ deal.value | formatPrice }}\n                </span>\n              </div>\n            </v-card-text>\n            <v-progress-linear\n              background-color=\"secondary\"\n              color=\"success\"\n              :value=\"getPercentage(deal.stage.id, deal.pipeline.stages)\"\n              height=\"5\"\n            ></v-progress-linear>\n          </v-card>\n        </template>\n        <template v-if=\"listDealsClosed.length && !isLoading\">\n          <v-subheader>Cerrados</v-subheader>\n          <v-card\n            v-for=\"(deal, index) in listDealsClosed\"\n            :key=\"`${index}-${deal.id}-closed`\"\n            @click=\"goDeal(deal.id)\"\n            class=\"ma-4 deal__card\"\n          >\n            <v-card-title\n              class=\"d-flex justify-space-between deals-title pt-1 pb-0\"\n            >\n              <div class=\"text-truncate\" style=\"width: 85%\">\n                {{ deal.title }}\n              </div>\n              <div\n                style=\"width: 15%\"\n                v-if=\"(canEdit || canEditOthers) && !item.isDelete\"\n              >\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      x-small\n                      class=\"mr-2\"\n                      @click.stop=\"disconnectDeal(deal.id)\"\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      :loading=\"isLoadingRemove\"\n                      color=\"grey\"\n                      outlined\n                    >\n                      <v-icon small>mdi-connection</v-icon>\n                    </v-btn>\n                  </template>\n                  <span>Desvincular</span>\n                </v-tooltip>\n              </div>\n            </v-card-title>\n            <v-card-text class=\"d-flex justify-space-between\">\n              <div class=\"text-truncate\" style=\"width:70%\">\n                <v-icon>\n                  {{\n                    typeItem === 'CONTACT'\n                      ? 'mdi-office-building'\n                      : 'mdi-account'\n                  }}\n                </v-icon>\n                <span v-if=\"typeItem === 'COMPANY'\" class=\"black--text\">\n                  {{ deal.contact ? deal.contact.name : 'Sin contacto' }}\n                </span>\n                <span v-else class=\"black--text \">\n                  {{ deal.company ? deal.company.name : 'Sin empresa' }}\n                </span>\n              </div>\n              <div class=\"text-truncate\" style=\"width:30%\">\n                <span class=\"black--text  d-block\">\n                  {{ deal.value | formatPrice }}\n                </span>\n              </div>\n            </v-card-text>\n            <v-progress-linear\n              background-color=\"secondary\"\n              :color=\"deal.status === 'WON' ? 'success' : 'error'\"\n              value=\"100\"\n              height=\"5\"\n            ></v-progress-linear>\n          </v-card>\n        </template>\n      </v-card>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { subject } from '@casl/ability';\nimport ability from '@/services/ability';\nimport { permissionGroupMixin } from '@/mixins/permissionGroupMixin';\nimport { contactsMixin } from '@/mixins/contactsMixin';\nimport { companiesMixin } from '@/mixins/companiesMixin';\nimport { UPDATE, UPDATE_OTHERS } from '@/constants/methods';\nimport {\n  PERMISSIONS_CONTACTS,\n  PERMISSIONS_COMPANIES,\n} from '@/constants/permissions';\n\nexport default {\n  name: 'ListDeals',\n  components: {\n    FieldSelectDealSimple: () =>\n      import('@/components/fields/FieldSelectDealSimple.vue'),\n  },\n  mixins: [permissionGroupMixin, contactsMixin, companiesMixin],\n  props: {\n    item: {\n      type: Object,\n      required: true,\n    },\n    itemId: {\n      type: String,\n      default: '',\n      required: true,\n    },\n    typeItem: {\n      type: String,\n      required: true,\n      default: undefined,\n    },\n    ownerId: {\n      type: String,\n      default: '',\n    },\n    deals: {\n      type: Array,\n      default: () => {\n        return [];\n      },\n    },\n    isLoading: {\n      type: Boolean,\n    },\n  },\n  data() {\n    return {\n      UPDATE,\n      PERMISSIONS_CONTACTS,\n      PERMISSIONS_COMPANIES,\n      isShowAddDeal: false,\n      isOpenMenuAddDeal: false,\n      isLoadingAddDeal: false,\n      isLoadingRemove: false,\n      existingDealSelected: {},\n      warningDealExistInfo: {\n        show: false,\n        text: '',\n      },\n    };\n  },\n  watch: {\n    isShowAddDeal() {\n      this.warningDealExistInfo = {\n        show: false,\n        text: '',\n      };\n    },\n    isLoadingAddDeal(value) {\n      if (!value) {\n        this.isShowAddDeal = false;\n        this.isOpenMenuAddDeal = false;\n      }\n    },\n    isLoadingUpdateContact(value) {\n      if (!value) {\n        this.isLoadingAddDeal = false;\n        this.isLoadingRemove = false;\n      }\n    },\n    isLoadingUpdateCompany(value) {\n      if (!value) {\n        this.isLoadingAddDeal = false;\n        this.isLoadingRemove = false;\n      }\n    },\n  },\n  computed: {\n    canEdit() {\n      if (this.typeItem === 'CONTACT') {\n        return ability.can(\n          UPDATE,\n          subject(PERMISSIONS_CONTACTS, { authorId: this.ownerId || '' }),\n        );\n      }\n      if (this.typeItem === 'COMPANY') {\n        return ability.can(\n          UPDATE,\n          subject(PERMISSIONS_COMPANIES, { authorId: this.ownerId || '' }),\n        );\n      }\n      return false;\n    },\n    canEditOthers() {\n      if (this.typeItem === 'CONTACT') {\n        if (!this.canEdit) {\n          return (\n            ability.can(UPDATE_OTHERS, PERMISSIONS_CONTACTS) &&\n            !ability.can(\n              UPDATE_OTHERS,\n              subject(PERMISSIONS_CONTACTS, {\n                authorId: this.ownerId || '',\n              }),\n            )\n          );\n        }\n        return ability.can(\n          UPDATE_OTHERS,\n          subject(PERMISSIONS_CONTACTS, { authorId: this.ownerId || '' }),\n        );\n      }\n      if (this.typeItem === 'COMPANY') {\n        if (!this.canEdit) {\n          return (\n            ability.can(UPDATE_OTHERS, PERMISSIONS_COMPANIES) &&\n            !ability.can(\n              UPDATE_OTHERS,\n              subject(PERMISSIONS_COMPANIES, {\n                authorId: this.ownerId || '',\n              }),\n            )\n          );\n        }\n        return ability.can(\n          UPDATE_OTHERS,\n          subject(PERMISSIONS_COMPANIES, { authorId: this.ownerId || '' }),\n        );\n      }\n      return false;\n    },\n    listDealsOpen() {\n      return this.deals.filter((deal) => deal.status === 'OPEN');\n    },\n    listDealsClosed() {\n      return this.deals.filter((deal) => deal.status !== 'OPEN');\n    },\n    disabledAddButton() {\n      if (this.existingDealSelected.id) return false;\n      return true;\n    },\n  },\n  methods: {\n    deleteDealSelected() {\n      this.existingDealSelected = {};\n      this.warningDealExistInfo = {\n        show: false,\n        text: '',\n      };\n    },\n    disconnectDeal(dealId) {\n      this.isLoadingRemove = true;\n      if (this.typeItem === 'CONTACT') {\n        this.updateContact({\n          id: this.itemId,\n          deal: { id: dealId, disconnect: true },\n        });\n      }\n      if (this.typeItem === 'COMPANY') {\n        this.updateCompany({\n          id: this.itemId,\n          deal: { id: dealId, disconnect: true },\n        });\n      }\n    },\n    addExistingDeal() {\n      this.isLoadingAddDeal = true;\n      if (this.typeItem === 'CONTACT') {\n        this.updateContact({\n          id: this.itemId,\n          deal: { id: this.existingDealSelected.id, disconnect: false },\n        });\n      }\n      if (this.typeItem === 'COMPANY') {\n        this.updateCompany({\n          id: this.itemId,\n          deal: { id: this.existingDealSelected.id, disconnect: false },\n        });\n      }\n    },\n    verificationDeal(deal) {\n      if (deal.contact?.id || deal.company?.id) {\n        if (this.typeItem === 'CONTACT' && deal.contact?.id) {\n          this.warningDealExistInfo = {\n            show: true,\n            text:\n              'El trato seleccionado ya cuenta con un contacto asignado, si continua el contacto será reemplazado',\n          };\n        }\n        if (this.typeItem === 'COMPANY' && deal.company?.id) {\n          this.warningDealExistInfo = {\n            show: true,\n            text:\n              'El trato seleccionado ya cuenta con una empresa asignada, si continua la empresa será reemplazada',\n          };\n        }\n      }\n      this.existingDealSelected = deal;\n    },\n    goDeal(id) {\n      this.$router.push({ name: 'deal', params: { id } }, () => {});\n    },\n    goContact(id) {\n      this.$router.push({ name: 'contact', params: { id } }, () => {});\n    },\n    getPercentage(id, stages) {\n      const index = this.getIndexStage(id, stages) + 1;\n      const total = this.getCountStage(stages);\n      return (index * 100) / total;\n    },\n    getIndexStage(id, stages) {\n      return stages.findIndex((stage) => stage.id === id);\n    },\n    getCountStage(stages) {\n      return stages.length;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '{ .profile__input .deals-title } from ../../../../scss/components/list.deals';\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ListDeals.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ListDeals.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListDeals.vue?vue&type=template&id=0972615b&scoped=true&\"\nimport script from \"./ListDeals.vue?vue&type=script&lang=js&\"\nexport * from \"./ListDeals.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListDeals.vue?vue&type=style&index=0&id=0972615b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0972615b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VAlert,VBtn,VCard,VCardText,VCardTitle,VDivider,VForm,VIcon,VList,VListItem,VListItemTitle,VMenu,VProgressLinear,VSpacer,VSubheader,VTooltip})\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n"],"sourceRoot":""}