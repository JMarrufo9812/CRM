(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75d93884","chunk-7859f8ee","chunk-7859f8ee"],{"0491":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("b64b"),n("ac1f"),n("841c"),n("b0c0"),n("d81d"),n("159b"),n("d3b7");var a=n("59c9"),i=n("6675"),s=n("ee2e"),o={data:function(){return{PERMISSIONS_DEALS:s["f"],inputsForm:[],isLoadingDeals:!1,loadingSearch:!1,isLoadingUpdateDeal:!1,modalDeal:{isOpen:!1,isLoading:!1},infoError:{icon:"mdi-account-search-outline",title:"",message:"No se encontraron tratos"},filters:{search:"",orderBy:"desc",skip:0,take:0,sortBy:[],sortDesc:[],isDelete:!1},listDeals:[],informationBarDeals:{},resultSearchDeals:[],totalDeals:0,searchDeal:"",searchFilters:{search:"",take:5},dealsSelected:[]}},watch:{searchDeal:function(e){e&&(Object.keys(e).length>=2&&(this.searchFilters.search=e,this.searchFilters.take=5,this.getSearchDeals()),0===Object.keys(e).length&&(this.searchFilters.search="",this.searchFilters.take=0,this.getSearchDeals()))},isLoadingDeals:function(e){this.$emit("isLoadingDeals",e)}},computed:{menuProps:function(){return this.searchDeal?{}:{value:!1}}},methods:{modalHandlerDeal:function(e){var t=e.isOpen,n=e.isLoading;this.modalDeal={isOpen:t,isLoading:n}},createDeal:function(e){var t=this,n=e.title,i=e.contact,s=e.company,o=e.value,r=e.tags,l=e.customForms,c=e.expectedCloseDate,d=e.pipeline,u=d.pipelineId,m=d.stageId,h=e.owner;this.modalHandlerDeal({isOpen:!0,isLoading:!0}),this.$apollo.mutate({mutation:a["c"],variables:{input:{title:n,tags:r,customForms:l,expectedCloseDate:c,contact:null!==i&&void 0!==i&&i.id?{id:i.id}:i,company:null!==s&&void 0!==s&&s.id?{id:s.id}:s,value:o,pipelineId:u,stageId:m,ownerId:h.id}}}).then((function(e){var n=e.data.createDeal;t.updateData=!0,t.modalHandlerDeal({isOpen:!1,isLoading:!1}),"pipeline-id"===t.$route.name&&t.updateViewPipeline(t.$route.params.id),t.updateData=!0,setTimeout((function(){t.updateData=!1}),10),t.$emit("updateHistory"),"CONTACT"!==t.typeItem&&"COMPANY"!==t.typeItem||(t.updateHistory(),t.addDeal(n))})).catch((function(){var e="No se pudo crear el trato intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:e})}))},updateDeal:function(e){var t=this,n=e.id,i=e.value,s=e.expectedCloseDate,o=e.company,r=e.contact,l=e.tags,c=e.status,d=e.comments,u=e.lostReason,m=e.owner,h=e.title,p=e.customForm;this.isLoadingUpdateDeal=!0;var f={};f.id=n,(i||0===i)&&(f.value=i),(s||void 0!==s)&&(f.expectedCloseDate=s),o&&(f.company=o),r&&(f.contact=r),l&&(f.tags=l),m&&(f.ownerId=m.id),h&&(f.title=h),p&&(f.customForm=p),c&&(f.status=c,"LOST"===c&&(f.comments=d,f.lostReason=u)),this.$apollo.mutate({mutation:a["i"],variables:{input:f}}).then((function(e){var n=e.data.updateDeal;"LOST"===f.status&&t.modalHandlerLostDeal({isOpen:!1,isLoading:!1}),t.$emit("updateItem",n),t.$emit("updateHistory"),t.isLoadingUpdateDeal=!1,"CONTACT"!==t.typeItem&&"COMPANY"!==t.typeItem||(t.updateHistory(),t.addDeal(n))})).catch((function(){t.isLoadingUpdateDeal=!1;var e="No se pudo actualizar el trato, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e})}))},getSearchDeals:function(){var e=this;this.loadingSearch=!0,this.$apollo.query({query:i["f"],fetchPolicy:"no-cache",variables:{filters:this.searchFilters}}).then((function(t){var n=t.data.deals;e.resultSearchDeals=n.list,e.loadingSearch=!1})).catch((function(){e.loadingSearch=!1}))},getDeals:function(){var e=this;this.isLoadingDeals=!0,this.$apollo.query({query:i["b"],fetchPolicy:"no-cache",variables:{filters:this.filters,importId:this.$route.query.filterId}}).then((function(t){var n=t.data.deals;e.isLoadingDeals=!1,e.$emit("deals",n.list),e.$emit("informationBar",n.informationBar),e.listDeals=n.list.map((function(e){return e.customForms&&e.customForms.forEach((function(t){var n=t.id,a=t.value;e[n]=a})),e})),e.totalDeals=n.count,e.isErrorDeals=!1,e.$emit("endUpdateData")})).catch((function(){e.isErrorDeals=!0,e.isLoadingDeals=!1,e.listDeals=[],e.totalDeals=0,e.$emit("endUpdateData"),e.infoError={icon:"mdi-alert-outline",title:"Error",message:"No se ha podido cargar ningún trato, intente de nuevo o contacte a soporte"}}))},restoreDealsConfirmation:function(){this.modalHandlerRestore({isOpen:!0,isLoading:!1,message:{title:"¿Seguro que deseas restaurar?",nameItem:"Los tratos seleccionados",text:"serán restaurados"},infoRestore:{}})},restoreDeals:function(e){var t=this,n=e.isOpen,i=e.isLoading,s=e.message,o=e.infoRestore;this.modalHandlerRestore({isOpen:n,isLoading:i,message:s,infoRestore:o}),this.$apollo.mutate({mutation:a["g"],variables:{input:this.dealsSelected},update:function(){t.updateData=!0,t.snackbarHandler({isOpen:!0,color:"success",text:"Los tratos fueron restaurados correctamente"})}}).finally((function(){t.modalHandlerRestore({isOpen:!1,isLoading:i,message:s,infoRestore:o}),t.updateData=!1})).catch((function(){var e="No se pudo restaurar el trato intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:e})}))},deleteDealConfirmation:function(e,t){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{title:"¿Seguro que deseas mover a la papelera?",nameItem:"Los tratos seleccionados",text:"serán movidos a la papelera"},infoDelete:{type:e,deals:t}})},deleteDeal:function(e){var t=this,n=e.isOpen,i=e.isLoading,s=e.message,o=e.infoDelete;this.modalHandlerDelete({isOpen:n,isLoading:i,message:s,infoDelete:o}),this.$apollo.mutate({mutation:a["e"],variables:{input:o.deals},update:function(){t.updateData=!0,t.snackbarHandler({isOpen:!0,color:"success",text:"Los tratos fueron eliminados correctamente"})}}).finally((function(){t.updateData=!1,t.modalHandlerDelete({isOpen:!1,isLoading:i,message:s,infoDelete:o})})).catch((function(){var e="No se pudo eliminar el trato intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:e})}))},trashDealsConfirmation:function(e,t){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{nameItem:"Los tratos seleccionados",text:"serán eliminados permanentemente"},infoDelete:{type:e,deals:t}})},trashDeals:function(e){var t=this,n=e.isOpen,i=e.isLoading,s=e.message,o=e.infoDelete;this.modalHandlerDelete({isOpen:n,isLoading:i,message:s,infoDelete:o}),this.$apollo.mutate({mutation:a["h"],variables:{input:o.deals},update:function(){t.updateData=!0,t.snackbarHandler({isOpen:!0,color:"success",text:"Los tratos fueron eliminados correctamente"})}}).finally((function(){t.updateData=!1,t.modalHandlerDelete({isOpen:!1,isLoading:i,message:s,infoDelete:o})})).catch((function(){var e="No se pudo eliminar el trato intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:e})}))},goToProfile:function(e){this.$router.push("/deal/".concat(e))}}}},"0a97":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return d}));var a,i,s,o=n("8785"),r=n("5184"),l=Object(r["a"])(a||(a=Object(o["a"])(["\n  mutation createTag($customTagInput: customTagCreateInput!) {\n    createCustomTag(customTagInput: $customTagInput) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),c=Object(r["a"])(i||(i=Object(o["a"])(["\n  mutation updateTag($customTagInput: customTagUpdateInput!) {\n    updateCustomTag(customTagInput: $customTagInput) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),d=Object(r["a"])(s||(s=Object(o["a"])(["\n  mutation deleteTag($customTagId: ID!) {\n    deleteCustomTag(customTagId: $customTagId) {\n      id\n    }\n  }\n"])))},"0cb2":function(e,t,n){var a=n("7b0b"),i=Math.floor,s="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,r=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,l,c,d){var u=n+e.length,m=l.length,h=r;return void 0!==c&&(c=a(c),h=o),s.call(d,h,(function(a,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(u);case"<":o=c[s.slice(1,-1)];break;default:var r=+s;if(0===r)return a;if(r>m){var d=i(r/10);return 0===d?a:d<=m?void 0===l[d-1]?s.charAt(1):l[d-1]+s.charAt(1):a}o=l[r-1]}return void 0===o?"":o}))}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"1f09":function(e,t,n){},"231e":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return b}));var a,i,s,o,r,l,c,d=n("8785"),u=n("5184"),m=Object(u["a"])(a||(a=Object(d["a"])(["\n  mutation createCompany($input: companyCreateInput!) {\n    createCompany(companyInput: $input) {\n      id\n      name\n      address\n      website\n      phones\n      socialMedias\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      contacts {\n        id\n        name\n      }\n    }\n  }\n"]))),h=Object(u["a"])(i||(i=Object(d["a"])(["\n  mutation deletedCompanies($input: [DeleteCompanyInput!]!) {\n    deletedCompanies(companies: $input) {\n      id\n      name\n    }\n  }\n"]))),p=Object(u["a"])(s||(s=Object(d["a"])(["\n  mutation trashCompanies($input: [DeleteCompanyInput!]!) {\n    trashCompanies(companies: $input) {\n      id\n    }\n  }\n"]))),f=Object(u["a"])(o||(o=Object(d["a"])(["\n  mutation restoreCompanies($input: [DeleteCompanyInput!]!) {\n    restoreCompanies(companies: $input) {\n      id\n    }\n  }\n"]))),g=Object(u["a"])(r||(r=Object(d["a"])(["\n  mutation updateCompany($companyInput: companyUpdateInput!) {\n    updateCompany(companyInput: $companyInput) {\n      id\n      name\n      address\n      website\n      phones\n      customForms\n      socialMedias\n      tags {\n        id\n        name\n        color\n        order\n      }\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      contacts {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n"]))),v=Object(u["a"])(l||(l=Object(d["a"])(["\n  mutation FuseCompanies($input: CompaniesToFuse!) {\n    fuseCompanies(fuse: $input) {\n      id\n      name\n    }\n  }\n"]))),b=Object(u["a"])(c||(c=Object(d["a"])(["\n  mutation assignCompanies($companyListAssign: CompanyListAssign!) {\n    assignCompanies(companyListAssign: $companyListAssign)\n  }\n"])))},"244d":function(e,t,n){"use strict";n("a6c3")},2532:function(e,t,n){"use strict";var a=n("23e7"),i=n("5a34"),s=n("1d80"),o=n("ab13");a({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(s(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},"29b5":function(e,t,n){},"2bfd":function(e,t,n){},"2cff":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return b}));var a,i,s,o,r,l,c,d=n("8785"),u=n("5184"),m=Object(u["a"])(a||(a=Object(d["a"])(["\n  mutation CreateContact($input: contactCreateInput!) {\n    createContact(contactInput: $input) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n      }\n      isClient\n    }\n  }\n"]))),h=Object(u["a"])(i||(i=Object(d["a"])(["\n  mutation updateContact($contactInput: contactUpdateInput) {\n    updateContact(contactInput: $contactInput) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      customForms\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      enterprise {\n        id\n        name\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n      createdAt\n    }\n  }\n"]))),p=Object(u["a"])(s||(s=Object(d["a"])(["\n  mutation deletedContacts($input: [DeleteContactInput!]!) {\n    deletedContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n"]))),f=Object(u["a"])(o||(o=Object(d["a"])(["\n  mutation trashContacts($input: [DeleteContactInput!]!) {\n    trashContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n"]))),g=Object(u["a"])(r||(r=Object(d["a"])(["\n  mutation restoreContacts($input: [DeleteContactInput!]!) {\n    restoreContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n"]))),v=Object(u["a"])(l||(l=Object(d["a"])(["\n  mutation FuseContacts($input: ContactsToFuse!) {\n    fuseContacts(fuse: $input) {\n      id\n      name\n    }\n  }\n"]))),b=Object(u["a"])(c||(c=Object(d["a"])(["\n  mutation assignContacts($contactListAssign: ContactListAssign!) {\n    assignContacts(contactListAssign: $contactListAssign)\n  }\n"])))},"2faa":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("b0c0");var a=n("2cff"),i={data:function(){return{isLoadingUpdateContact:!1}},methods:{updateContact:function(e){var t=this,n=e.id,i=e.name,s=e.email,o=e.birthday,r=e.phones,l=e.isClient,c=e.socialMedias,d=e.customForm,u=e.company,m=e.owner,h=e.tags,p=e.deal;this.isLoadingUpdateContact=!0;var f={};f.id=n,i&&(f.name=i),s&&(f.email=s),o&&(f.birthday=o),r&&(f.phones=r),!0!==l&&!1!==l||(f.isClient=l),c&&(f.socialMedias=c),d&&(f.customForm=d),u&&(f.company=u),m&&(f.owner=m),h&&(f.tags=h),p&&(f.deal=p),this.$apollo.mutate({mutation:a["f"],variables:{contactInput:f}}).then((function(e){var n=e.data.updateContact;t.$emit("updateItem",n),t.$emit("updateHistory"),t.isLoadingUpdateContact=!1})).catch((function(){t.isLoadingUpdateContact=!1;var e="No se pudo actualizar el contacto, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e})}))}}}},3129:function(e,t,n){"use strict";n("1f09");var a=n("c995"),i=n("24b2"),s=n("7560"),o=n("58df"),r=n("80d2");t["a"]=Object(o["a"])(a["a"],i["a"],s["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:()=>({})}},computed:{attrs(){return this.isLoading?this.boilerplate?{}:{"aria-busy":!0,"aria-live":"polite",role:"alert",...this.$attrs}:this.$attrs},classes(){return{"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile,...this.themeClasses,...this.elevationClasses}},isLoading(){return!("default"in this.$scopedSlots)||this.loading},rootTypes(){return{actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text",...this.types}}},methods:{genBone(e,t){return this.$createElement("div",{staticClass:`v-skeleton-loader__${e} v-skeleton-loader__bone`},t)},genBones(e){const[t,n]=e.split("@"),a=()=>this.genStructure(t);return Array.from({length:n}).map(a)},genStructure(e){let t=[];e=e||this.type||"";const n=this.rootTypes[e]||"";if(e===n);else{if(e.indexOf(",")>-1)return this.mapBones(e);if(e.indexOf("@")>-1)return this.genBones(e);n.indexOf(",")>-1?t=this.mapBones(n):n.indexOf("@")>-1?t=this.genBones(n):n&&t.push(this.genStructure(n))}return[this.genBone(e,t)]},genSkeleton(){const e=[];return this.isLoading?e.push(this.genStructure()):e.push(Object(r["t"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},e):e},mapBones(e){return e.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter(e){this.resetStyles(e),this.isLoading&&(e._initialStyle={display:e.style.display,transition:e.style.transition},e.style.setProperty("transition","none","important"))},onBeforeLeave(e){e.style.setProperty("display","none","important")},resetStyles(e){e._initialStyle&&(e.style.display=e._initialStyle.display||"",e.style.transition=e._initialStyle.transition,delete e._initialStyle)}},render(e){return e("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},"3ed5":function(e,t,n){"use strict";n("29b5")},"466d":function(e,t,n){"use strict";var a=n("d784"),i=n("825a"),s=n("50c4"),o=n("1d80"),r=n("8aa5"),l=n("14c3");a("match",(function(e,t,n){return[function(t){var n=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n):new RegExp(t)[e](String(n))},function(e){var a=n(t,this,e);if(a.done)return a.value;var o=i(this),c=String(e);if(!o.global)return l(o,c);var d=o.unicode;o.lastIndex=0;var u,m=[],h=0;while(null!==(u=l(o,c))){var p=String(u[0]);m[h]=p,""===p&&(o.lastIndex=r(c,s(o.lastIndex),d)),h++}return 0===h?null:m}]}))},"4e62":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a,i=n("8785"),s=n("5184"),o=Object(s["a"])(a||(a=Object(i["a"])(["\n  query getTags($filters: FilterCustomTags) {\n    customTags(filters: $filters) {\n      id\n      name\n      color\n      order\n    }\n  }\n"])))},5319:function(e,t,n){"use strict";var a=n("d784"),i=n("d039"),s=n("825a"),o=n("50c4"),r=n("a691"),l=n("1d80"),c=n("8aa5"),d=n("0cb2"),u=n("14c3"),m=n("b622"),h=m("replace"),p=Math.max,f=Math.min,g=function(e){return void 0===e?e:String(e)},v=function(){return"$0"==="a".replace(/./,"$0")}(),b=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),y=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var a=b?"$":"$0";return[function(e,n){var a=l(this),i=void 0==e?void 0:e[h];return void 0!==i?i.call(e,a,n):t.call(String(a),e,n)},function(e,i){if("string"===typeof i&&-1===i.indexOf(a)&&-1===i.indexOf("$<")){var l=n(t,this,e,i);if(l.done)return l.value}var m=s(this),h=String(e),v="function"===typeof i;v||(i=String(i));var b=m.global;if(b){var y=m.unicode;m.lastIndex=0}var C=[];while(1){var O=u(m,h);if(null===O)break;if(C.push(O),!b)break;var D=String(O[0]);""===D&&(m.lastIndex=c(h,o(m.lastIndex),y))}for(var I="",T=0,L=0;L<C.length;L++){O=C[L];for(var S=String(O[0]),x=p(f(r(O.index),h.length),0),$=[],w=1;w<O.length;w++)$.push(g(O[w]));var _=O.groups;if(v){var E=[S].concat($,x,h);void 0!==_&&E.push(_);var k=String(i.apply(void 0,E))}else k=d(S,h,x,$,_,i);x>=T&&(I+=h.slice(T,x)+k,T=x+S.length)}return I+h.slice(T)}]}),!y||!v||b)},"59c9":function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"i",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"h",(function(){return y})),n.d(t,"g",(function(){return C})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return D})),n.d(t,"d",(function(){return I})),n.d(t,"f",(function(){return T})),n.d(t,"j",(function(){return L})),n.d(t,"k",(function(){return S}));var a,i,s,o,r,l,c,d,u,m,h,p=n("8785"),f=n("5184"),g=Object(f["a"])(a||(a=Object(p["a"])(["\n  mutation CreateDeal($input: CreateDeal!) {\n    createDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      rottenTime\n      owner {\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      company {\n        id\n        name\n      }\n      contact {\n        id\n        name\n      }\n      stage {\n        id\n        name\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n"]))),v=Object(f["a"])(i||(i=Object(p["a"])(["\n  mutation UpdateDeal($input: UpdateDeal!) {\n    updateDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      contact {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n"]))),b=Object(f["a"])(s||(s=Object(p["a"])(["\n  mutation deletedDeals($input: [DeleteDealInput!]!) {\n    deletedDeals(deals: $input) {\n      id\n    }\n  }\n"]))),y=Object(f["a"])(o||(o=Object(p["a"])(["\n  mutation trashDeals($input: [DeleteDealInput!]!) {\n    trashDeals(deals: $input) {\n      id\n    }\n  }\n"]))),C=Object(f["a"])(r||(r=Object(p["a"])(["\n  mutation restoreDeals($input: [DeleteDealInput!]!) {\n    restoreDeals(deals: $input) {\n      id\n    }\n  }\n"]))),O=Object(f["a"])(l||(l=Object(p["a"])(["\n  mutation ChangeDealStage($input: ChangeStage!) {\n    changeDealStage(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      dateEntryIntoStage\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n        maxDays\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n"]))),D=Object(f["a"])(c||(c=Object(p["a"])(["\n  mutation changeDealPipeline($input: changePipelineInput!) {\n    changeDealPipeline(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n"]))),I=Object(f["a"])(d||(d=Object(p["a"])(["\n  mutation CreateLostReason($input: lostReasonCreateInput!) {\n    createLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n"]))),T=Object(f["a"])(u||(u=Object(p["a"])(["\n  mutation DeleteLostReason($lostReasonId: ID!) {\n    deleteLostReason(lostReasonId: $lostReasonId) {\n      id\n      reason\n    }\n  }\n"]))),L=Object(f["a"])(m||(m=Object(p["a"])(["\n  mutation UpdateLostReason($input: lostReasonUpdateInput!) {\n    updateLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n"]))),S=Object(f["a"])(h||(h=Object(p["a"])(["\n  mutation assignDeals($dealListAssign: DealListAssign!) {\n    assignDeals(dealListAssign: $dealListAssign)\n  }\n"])))},"5a34":function(e,t,n){var a=n("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},"78f1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("b0c0");var a=n("231e"),i={data:function(){return{isLoadingUpdateCompany:!1}},methods:{updateCompany:function(e){var t=this,n=e.id,i=e.name,s=e.address,o=e.website,r=e.socialMedias,l=e.phones,c=e.customForm,d=e.contact,u=e.tags,m=e.owner,h=e.deal;this.isLoadingUpdateCompany=!0;var p={};p.id=n,i&&(p.name=i),s&&(p.address=s),o&&(p.website=o),r&&(p.socialMedias=r),l&&(p.phones=l),c&&(p.customForm=c),d&&(p.contact=d),u&&(p.tags=u),m&&(p.owner=m),h&&(p.deal=h),this.$apollo.mutate({mutation:a["f"],variables:{companyInput:p}}).then((function(e){var n=e.data.updateCompany;t.$emit("updateItem",n),t.$emit("updateHistory"),t.isLoadingUpdateCompany=!1})).catch((function(){t.isLoadingUpdateCompany=!1;var e="No se pudo actualizar la empresa, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e})}))}}}},"841c":function(e,t,n){"use strict";var a=n("d784"),i=n("825a"),s=n("1d80"),o=n("129f"),r=n("14c3");a("search",(function(e,t,n){return[function(t){var n=s(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n):new RegExp(t)[e](String(n))},function(e){var a=n(t,this,e);if(a.done)return a.value;var s=i(this),l=String(e),c=s.lastIndex;o(c,0)||(s.lastIndex=0);var d=r(s,l);return o(s.lastIndex,c)||(s.lastIndex=c),null===d?-1:d.index}]}))},"9a2d":function(e,t,n){},"9dd9":function(e,t,n){"use strict";n("9a2d")},a6c3:function(e,t,n){},ab13:function(e,t,n){var a=n("b622"),i=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(a){}}return!1}},c6a6:function(e,t,n){"use strict";n("2bfd");var a=n("b974"),i=n("8654"),s=n("d9f7"),o=n("80d2");const r={...a["b"],offsetY:!0,offsetOverflow:!0,transition:!1};t["a"]=a["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,n)=>n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:a["a"].options.props.menuProps.type,default:()=>r},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...a["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(e=>this.getValue(e))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(e=>!this.hasItem(e)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(e=>{const t=Object(o["s"])(e,this.itemText),n=null!=t?String(t):"";return this.filter(e,String(this.internalSearch),n)})},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch!==e&&(this.lazySearch=e,this.$emit("update:search-input",e))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=a["a"].options.computed.$_menuProps.call(this);return e.contentClass=("v-autocomplete__content "+(e.contentClass||"")).trim(),{...r,...e}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue)))},listData(){const e=a["a"].options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=null)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(e,t){e!==t&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===o["z"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===o["z"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==o["z"].backspace&&e!==o["z"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const e=this.selectedIndex,t=this.selectedItems[e];if(!this.isInteractive||this.getDisabled(t))return;const n=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==n)return void(this.selectedIndex=n);const a=this.selectedItems.length,i=e!==a-1?e:e-1,s=this.selectedItems[i];s?this.selectItem(t):this.setValue(this.multiple?[]:null),this.selectedIndex=i},clearableCallback(){this.internalSearch=null,a["a"].options.methods.clearableCallback.call(this)},genInput(){const e=i["a"].options.methods.genInput.call(this);return e.data=Object(s["a"])(e.data,{attrs:{"aria-activedescendant":Object(o["q"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(o["q"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=a["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?a["a"].options.methods.genSelections.call(this):[]},onClick(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,n=t.value;t.value&&this.activateMenu(),this.internalSearch=n,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;!e.ctrlKey&&[o["z"].home,o["z"].end].includes(t)||a["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){a["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){a["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){a["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){var t,n;if(-1===this.selectedIndex)return;const a=this.selectedItems[this.selectedIndex],i=this.getText(a);null==(t=e.clipboardData)||t.setData("text/plain",i),null==(n=e.clipboardData)||n.setData("text/vnd.vuetify.autocomplete.item+plain",i),e.preventDefault()}}})},caad:function(e,t,n){"use strict";var a=n("23e7"),i=n("4d64").includes,s=n("44d2");a({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},e7de:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pt-2",class:e.headerColor,attrs:{tile:"",flat:"",height:"5em"}},[n("v-row",[n("v-col",{staticClass:"d-flex align-center pl-10 ",attrs:{cols:"2"}},[n("v-icon",{attrs:{color:"white",large:""}},[e._v(" "+e._s(e.getIcon())+" ")]),e.isLoading?n("v-skeleton-loader",{staticClass:"mx-auto",attrs:{"min-width":"150px",type:"list-item",tile:""}}):[n("span",{staticClass:"white--text text-truncate"},[e._v(" "+e._s(e.item.title)+" ")]),n("span",{staticClass:"white--text text-truncate"},[e._v(" "+e._s(e.item.name)+" ")]),e.item.isDelete?n("b",{staticClass:"font-weight-bold",staticStyle:{color:"red"}},[e._v(" (Eliminado) ")]):e._e()]],2),n("v-col",{staticClass:"d-flex align-center",attrs:{cols:"5"}},[e.isLoading?n("v-skeleton-loader",{attrs:{type:"chip",tile:""}}):e.listTags.length>0?e._l(e.listTags,(function(e){return[n("FieldTag",{key:e.id,staticClass:"mr-2",attrs:{item:e}})]})):[n("FieldTag",{staticClass:"mr-2",attrs:{item:e.defaultTag}})],!e.canEdit&&!e.canEditOthers||e.item.isDelete?e._e():n("TagMenu",{attrs:{item:e.item,isLoading:e.isLoading,type:e.typeItem},on:{updateItem:e.updateItem,updateHistory:e.updateHistory}})],2),n("v-col",{staticClass:"pr-10 pl-0",attrs:{cols:"5"}},[n("div",{staticClass:"d-flex align-center justify-end"},[n("div",{staticClass:"mr-10"},[n("v-list",{staticClass:"py-0",attrs:{dark:e.isDealOpen,color:e.isDealOpen?"primary":"white",dense:""}},[n("v-list-item",{staticClass:"owner-item",attrs:{"two-line":""}},[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-account")]),n("v-list-item-content",[n("v-list-item-title",[e.isLoading?n("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"chip",tile:""}}):[e._v(" "+e._s(e.item.owner?e.item.owner.user.name:"Sin propietario")+" ")]],2),n("v-list-item-subtitle",[e._v("Propietario")])],1),n("v-list-item-action",{staticClass:"ml-0"},[e.isLoading?e._e():n("Owner",{attrs:{isOpen:e.isOpenMenuOwner,item:e.item,isLoading:e.isLoading,typeItem:e.typeItem},on:{"update:isOpen":function(t){e.isOpenMenuOwner=t},"update:is-open":function(t){e.isOpenMenuOwner=t},updateItem:e.updateItem,updateHistory:e.updateHistory},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.canEditOwner&&!e.item.isDelete,expression:"canEditOwner && !item.isDelete"}],attrs:{color:"white",icon:"",small:""},on:{click:function(t){e.isOpenMenuOwner=!0}}},[n("v-icon",{attrs:{color:e.isDealOpen?"white":"primary"}},[e._v(" mdi-chevron-down ")])],1)]},proxy:!0}],null,!1,1791827762)})],1)],1)],1)],1),n("div",{staticClass:"d-flex align-center"},["CONTACT"!==e.typeItem&&"COMPANY"!==e.typeItem||!e.canEdit&&!e.canEditOthers||e.item.isDelete?n("div",["WON"===e.item.status?n("v-chip",{attrs:{label:"",color:"success"}},[e._v(" Trato Ganado ")]):e._e(),"LOST"===e.item.status?n("v-chip",{attrs:{label:"",color:"error"}},[e._v(" Trato Perdido ")]):e._e(),"OPEN"!==e.item.status||!e.canEdit&&!e.canEditOthers||e.item.isDelete?e._e():n("v-btn",{staticClass:"mr-1",attrs:{color:"success",disabled:e.item.isDelete,loading:e.isWonLoading},on:{click:function(t){return e.changeStatus("WON")}}},[e._v(" Ganado ")]),"OPEN"!==e.item.status||!e.canEdit&&!e.canEditOthers||e.item.isDelete?e._e():n("v-btn",{attrs:{color:"error",disabled:e.item.isDelete,loading:e.isLostLoading},on:{click:e.lostDeal}},[e._v(" Perdido ")]),"WON"!==e.item.status&&"LOST"!==e.item.status||!e.canEdit&&!e.canEditOthers||e.item.isDelete?e._e():n("v-btn",{staticClass:"ml-2",attrs:{color:"secondary",disabled:e.item.isDelete,loading:e.isLoadingUpdateDeal},on:{click:function(t){return e.changeStatus("OPEN")}}},[e._v(" Abrir ")])],1):n("v-btn",{attrs:{color:"success"},on:{click:function(t){return e.$emit("openModalDeal")}}},[e._v(" Añadir trato ")])],1),e.canDelete||e.canDeleteOthers?n("div",{staticClass:"d-inline-block ml-3"},[n("v-menu",{attrs:{left:"",bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:"",color:"white"}},"v-btn",i,!1),a),[n("v-icon",[e._v("mdi-dots-horizontal")])],1)]}}],null,!1,2350145974)},[n("v-list",[e.item.isDelete?e._e():n("v-list-item",{on:{click:function(t){return e.removeConfirm()}}},[n("v-list-item-title",[e._v(" Mover a pepelera ")])],1),e.item.isDelete?n("v-list-item",{on:{click:function(t){return e.trashConfirm()}}},[n("v-list-item-title",[e._v(" Eliminar permanentemente ")])],1):e._e(),e.item.isDelete?n("v-list-item",{on:{click:function(t){return e.restoreConfirm()}}},[n("v-list-item-title",[e._v(" Restaurar ")])],1):e._e()],1)],1)],1):e._e()])]),n("ModalLostDeal",{attrs:{modalHandler:e.modalLostDeal},on:{close:e.modalHandlerLostDeal,outData:e.changeStatus}}),n("BaseModalError",{attrs:{modalHandler:e.modalError},on:{close:e.modalHandlerError}}),n("BaseModalDelete",{attrs:{modalHandler:e.modalDelete},on:{cancel:e.modalHandlerDelete,confirm:function(t){e.item.isDelete?e.trash(e.modalDelete):e.remove(e.modalDelete)}}}),n("BaseModalRestore",{attrs:{modalHandler:e.modalRestore},on:{confirm:e.restore,cancel:e.modalHandlerRestore}})],1)],1)},i=[],s=n("2909"),o=(n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("4b58")),r=n("ee2e"),l=n("891c"),c=n("9685"),d=n("a2b6"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":"200","offset-y":"",bottom:""},on:{input:e.close},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{color:"secondary",fab:"","x-small":""},on:{click:function(t){e.isOpenMenuTag=!e.isOpenMenuTag}}},a),[n("v-icon",{attrs:{small:""}},[e._v("mdi-plus")])],1)]}}]),model:{value:e.isOpenMenuTag,callback:function(t){e.isOpenMenuTag=t},expression:"isOpenMenuTag"}},[e.isLoading?e._e():[e.isCreateTag?n("TagCreate",{attrs:{type:e.type},on:{close:e.closeTag}}):e.isEditTag?n("TagEdit",{attrs:{type:e.type,tag:e.tagSelected},on:{close:e.closeTag}}):n("TagChoose",{attrs:{item:e.item,type:e.type},on:{addTag:e.createTag,editTag:e.editTag,close:e.close,updateItem:e.updateItem,updateHistory:e.updateHistory}})]],2)],1)},m=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"py-1 font-weight-bold"},[e._v(" Elegir etiquetas "),n("v-spacer"),n("v-btn",{attrs:{small:"",icon:""},on:{click:e.closeMenu}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-close-thick")])],1)],1),n("v-divider"),e.$apollo.queries.customTags.loading?e._l([1,2],(function(e){return n("div",{key:e,staticClass:"d-flex justify-center"},[n("v-skeleton-loader",{ref:"skeleton",refInFor:!0,staticClass:"my-2",attrs:{type:"chip",tile:""}})],1)})):[e.isLoadingUpdateContact||e.isLoadingUpdateCompany||e.isLoadingUpdateDeal?n("v-progress-linear",{attrs:{indeterminate:"",color:"secondary"}}):e._e(),n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{mandatory:"",multiple:""},model:{value:e.tagsID,callback:function(t){e.tagsID=t},expression:"tagsID"}},e._l(e.listTags,(function(t){return n("v-list-item",{key:t.id,staticClass:"my-1",attrs:{value:t.id,disabled:e.isLoadingUpdateContact||e.isLoadingUpdateCompany||e.isLoadingUpdateDeal},on:{click:function(n){return e.selectTag(t)}}},[n("v-list-item-content",{staticClass:"tag__item"},[n("FieldTag",{attrs:{item:t}}),n("div",{staticClass:"tag__item__edit"},["0"!==t.id&&e.$can("update",e.PERMISSIONS_TAGS)?n("v-btn",{attrs:{fab:"","x-small":"",color:"white"},on:{click:function(n){return n.stopPropagation(),e.editTag(t)}}},[n("v-icon",{attrs:{small:""}},[e._v(" mdi-pencil ")])],1):e._e()],1)],1)],1)})),1)],1)],n("v-divider"),n("v-card-actions",[n("v-btn",{staticClass:"mx-auto",attrs:{color:"primary",text:"",small:"",disabled:!e.$can("create",e.PERMISSIONS_TAGS)},on:{click:e.addTag}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-plus")]),e._v(" Crear etiqueta ")],1)],1),n("BaseModalError",{attrs:{modalHandler:e.modalError},on:{close:e.modalHandlerError}})],2)},p=[],f=n("3835"),g=(n("d81d"),n("4de4"),n("4e62")),v=n("1e6d"),b=n("0491"),y=n("2faa"),C=n("78f1"),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-chip",{staticClass:"text-uppercase font-weight-bold",attrs:{color:e.item.color,"text-color":e.getBestColor(e.item.color),small:""}},[n("v-avatar",[n("v-icon",{attrs:{small:""}},[e._v("mdi-tag-outline")])],1),n("span",{staticClass:"text-truncate"},[e._v(" "+e._s(e.item.name)+" ")])],1)},D=[],I=(n("caad"),n("2532"),n("ac1f"),n("466d"),n("5319"),{name:"FieldTag",props:{item:{type:Object,required:!0}},methods:{getBestColor:function(e){if(e&&e.includes("#")){var t=e.replace("#","").match(/.{1,2}/g).map((function(e){return parseInt(e,16)})),n=Object(f["a"])(t,3),a=n[0],i=n[1],s=n[2],o=Math.sqrt(a*a*.299+i*i*.587+s*s*.114);return o>135?"dark":"white"}return""}}}),T=I,L=n("0c7c"),S=n("6544"),x=n.n(S),$=n("8212"),w=n("cc20"),_=n("132d"),E=Object(L["a"])(T,O,D,!1,null,null,null),k=E.exports;x()(E,{VAvatar:$["a"],VChip:w["a"],VIcon:_["a"]});var j={name:"TagChoose",mixins:[v["a"],b["a"],y["a"],C["a"]],components:{FieldTag:k},props:{item:{type:Object,required:!0,default:function(){return{}}},type:{type:String,required:!0,default:"CONTACT"}},data:function(){return{PERMISSIONS_TAGS:r["m"],defaultTag:{id:"0",name:"Ninguna etiqueta",color:"gray",order:0},customTags:[],tagsID:this.getIDS(this.item.tags)||[],itemListTags:JSON.parse(JSON.stringify(this.item.tags))}},watch:{item:function(e){var t=e.tags;this.tagsID=this.getIDS(t)}},computed:{listTags:function(){var e=Object(s["a"])(this.customTags);return e.unshift(this.defaultTag),e}},methods:{getIDS:function(e){return e?e.map((function(e){return e.id})):[]},addTagToList:function(e){this.itemListTags.push(e)},removeTagToList:function(e){var t=e.id;this.itemListTags=this.itemListTags.filter((function(e){return e.id!==t}))},isTagIntoList:function(e){var t=e.id;return this.itemListTags.some((function(e){return e.id===t}))},selectTagAction:function(e){this.isTagIntoList(e)?this.removeTagToList(e):this.addTagToList(e)},formatTagsID:function(e){this.selectTagAction(e);var t=this.itemListTags.map((function(e){return{id:e.id}}));return[t,this.itemListTags]},selectTag:function(e){var t=[];if(1===this.itemListTags.length&&this.isTagIntoList(e)||"0"===e.id)t=[],this.itemListTags=[];else{var n=this.formatTagsID(e),a=Object(f["a"])(n,1),i=a[0];t=i}switch(this.type){case"CONTACT":this.updateContact({id:this.item.id,tags:t});break;case"COMPANY":this.updateCompany({id:this.item.id,tags:t});break;case"DEAL":this.updateDeal({id:this.item.id,tags:t});break;default:this.updateTagContact(t);break}},addTag:function(){this.$emit("addTag",!0)},editTag:function(e){this.$emit("editTag",e)},closeMenu:function(){this.$emit("close")}},apollo:{customTags:{query:g["a"],variables:function(){return{filters:{type:this.type}}}}}},V=j,A=(n("244d"),n("8336")),N=n("b0af"),H=n("99d9"),M=n("ce7e"),F=n("8860"),R=n("da13"),P=n("5d23"),q=n("1baa"),B=n("8e36"),U=n("3129"),z=n("2fa4"),G=Object(L["a"])(V,h,p,!1,null,"b99129fc",null),Y=G.exports;x()(G,{VBtn:A["a"],VCard:N["a"],VCardActions:H["a"],VCardTitle:H["d"],VDivider:M["a"],VIcon:_["a"],VList:F["a"],VListItem:R["a"],VListItemContent:P["a"],VListItemGroup:q["a"],VProgressLinear:B["a"],VSkeletonLoader:U["a"],VSpacer:z["a"]});var W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TagForm",{attrs:{tag:e.tag,isLoading:e.isLoading},on:{save:e.saveTag,close:e.close},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Crear una etiqueta ")]},proxy:!0}])}),n("BaseModalError",{attrs:{modalHandler:e.modalError},on:{close:e.modalHandlerError}})],1)},Q=[],J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"py-1 font-weight-bold"},[e._t("title")],2),n("v-divider"),n("v-card-text",[n("v-form",{ref:"formTag",model:{value:e.isValidFormTag,callback:function(t){e.isValidFormTag=t},expression:"isValidFormTag"}},[n("v-text-field",{attrs:{label:"Nombre de etiqueta",outlined:"",dense:"",maxlength:"25",counter:"",rules:e.rules.general,"hide-details":"auto"},model:{value:e.tag.name,callback:function(t){e.$set(e.tag,"name",t)},expression:"tag.name"}})],1),n("v-divider"),n("v-tabs",{attrs:{grow:""},model:{value:e.tabs,callback:function(t){e.tabs=t},expression:"tabs"}},[n("v-tab",{attrs:{href:"#choose"}},[e._v("Elige un color")]),n("v-tab",{attrs:{href:"#custom"}},[e._v("Personalizar color")]),n("v-tab-item",{attrs:{value:"choose"}},[n("div",{staticClass:"mt-3 d-flex justify-center"},[n("v-chip-group",{attrs:{column:""},model:{value:e.tag.color,callback:function(t){e.$set(e.tag,"color",t)},expression:"tag.color"}},e._l(e.colors,(function(t,a){return n("v-chip",{key:a,attrs:{color:t.hex,value:t.hex,dark:""}},[n("v-icon",{attrs:{color:"white"}},[e._v(" "+e._s(t.hex===e.tag.color?"mdi-check-bold":"mdi-invert-colors")+" ")])],1)})),1)],1),e.isValidColorChoose?e._e():n("div",{staticClass:"d-flex justify-center mt-2"},[n("span",{staticClass:"error--text"},[e._v("Debes seleccionar un color")])])]),n("v-tab-item",{attrs:{value:"custom"}},[n("div",{staticClass:"mt-3 d-flex justify-center"},[n("v-color-picker",{attrs:{flat:"","dot-size":"30","hide-mode-switch":"",mode:"hexa"},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1),e.isValidColorCustom?e._e():n("div",{staticClass:"d-flex justify-center mt-2"},[n("span",{staticClass:"error--text"},[e._v("Debes seleccionar un color")])])])],1)],1),n("v-divider"),n("v-card-actions",{staticClass:"justify-end"},[e._t("actions",null,{tagSelect:e.tag}),n("v-btn",{staticClass:"mr-3",attrs:{color:"primary",outlined:"",small:""},on:{click:e.close}},[e._v(" Cancelar ")]),n("v-btn",{attrs:{color:"secondary",small:"",loading:e.isLoading},on:{click:e.saveTag}},[e._v(" Guardar ")])],2)],1)},K=[],X=n("5530"),Z=n("f82a"),ee={name:"TagForm",mixins:[Z["a"]],props:{tag:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},data:function(){return{tabs:"",isValidFormTag:!0,isValidColorChoose:!0,isValidColorCustom:!0,hex:"#FFFFFF",type:"hex",colors:[{name:"Verde",hex:"#08a742"},{name:"Rojo",hex:"#f94839"},{name:"Azul",hex:"#317ae2"},{name:"Amarillo",hex:"#fccf00"},{name:"Morado",hex:"#721ea9"},{name:"Gris",hex:"#dcdddd"}]}},created:function(){this.tag.color&&(this.isColorDefault(this.tag.color)?this.tabs="choose":(this.tabs="custom",this.hex=this.tag.color))},watch:{tabs:function(){this.resetValidColor()},"tag.color":{handler:function(){this.isValidColorChoose=!0}}},computed:{listTags:function(){var e=Object(s["a"])(this.customTags);return e.unshift(this.defaultTag),e},color:{get:function(){return this[this.type]},set:function(e){this[this.type]=e}}},methods:{isColorDefault:function(e){return this.colors.some((function(t){return t.hex===e}))},resetValidColor:function(){this.isValidColorChoose=!0,this.isValidColorCustom=!0},checkValidColor:function(){"choose"===this.tabs?this.isValidColorChoose=void 0!==this.tag.color&&""!==this.tag.color:this.isValidColorCustom=void 0!==this.color&&""!==this.color},saveTag:function(){if(this.$refs.formTag.validate(),this.checkValidColor(),"choose"===this.tabs)this.isValidFormTag&&this.isValidColorChoose&&this.$emit("save",this.tag);else if(this.isValidFormTag&&this.isValidColorCustom){var e=Object(X["a"])({},this.tag);e.color=this.hex,this.$emit("save",e)}},close:function(){this.$emit("close",!0)}}},te=ee,ne=n("ef9a"),ae=n("03a42"),ie=n("4bd4"),se=n("71a3"),oe=n("c671"),re=n("fe57"),le=n("8654"),ce=Object(L["a"])(te,J,K,!1,null,null,null),de=ce.exports;x()(ce,{VBtn:A["a"],VCard:N["a"],VCardActions:H["a"],VCardText:H["c"],VCardTitle:H["d"],VChip:w["a"],VChipGroup:ne["a"],VColorPicker:ae["a"],VDivider:M["a"],VForm:ie["a"],VIcon:_["a"],VTab:se["a"],VTabItem:oe["a"],VTabs:re["a"],VTextField:le["a"]});var ue=n("0a97"),me={name:"TagCreate",mixins:[v["a"]],components:{TagForm:de},props:{type:{type:String,required:!0,default:"CONTACT"}},data:function(){return{PERMISSIONS_TAGS:r["m"],tag:{name:"",color:""},customTags:[],isLoading:!1}},methods:{close:function(){this.$emit("close",!0)},getCountTags:function(){return this.customTags.length},saveTag:function(e){var t=this,n=e.name,a=e.color;c["a"].can(l["d"],r["m"])&&(this.isLoading=!0,this.$apollo.mutate({mutation:ue["a"],variables:{customTagInput:{name:n,color:a,order:this.getCountTags()+1,type:this.type}},update:function(e,n){var a=n.data.createCustomTag,i=e.readQuery({query:g["a"],variables:{filters:{type:t.type}}});i.customTags.push(a),e.writeQuery({query:g["a"],variables:{filters:{type:t.type}},data:i})},optimisticResponse:{__typename:"Mutation",createCustomTag:{__typename:"CustomTag",id:0,name:n,color:a,order:this.getCountTags()+1}}}).then((function(){t.close(),t.isLoading=!1})).catch((function(){t.isLoading=!1;var e="No se pudo crear la etiqueta, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e})})))}},apollo:{customTags:{query:g["a"],variables:function(){return{filters:{type:this.type}}}}}},he=me,pe=Object(L["a"])(he,W,Q,!1,null,"f7dd7650",null),fe=pe.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TagForm",{attrs:{tag:e.tag,isLoading:e.isLoading},on:{save:e.editTag,close:e.close},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Editar etiqueta ")]},proxy:!0},{key:"actions",fn:function(t){var a=t.tagSelect;return[e.$can("delete",e.PERMISSIONS_TAGS)?n("v-btn",{staticClass:"mr-auto",attrs:{icon:"",color:"error",loading:e.isLoadingDelete},on:{click:function(t){return e.deleteTag(a)}}},[n("v-icon",[e._v("mdi-trash-can")])],1):e._e()]}}])}),n("BaseModalError",{attrs:{modalHandler:e.modalError},on:{close:e.modalHandlerError}})],1)},ve=[],be=(n("c740"),n("a434"),{name:"TagEdit",mixins:[v["a"]],components:{TagForm:de},props:{tag:{type:Object,required:!0},type:{type:String,required:!0,default:"CONTACT"}},data:function(){return{PERMISSIONS_TAGS:r["m"],isLoading:!1,isLodingDelete:!1}},methods:{close:function(){this.$emit("close",!0)},editTag:function(e){var t=this,n=e.id,a=e.name,i=e.color;c["a"].can(l["r"],r["m"])&&(this.isLoading=!0,this.$apollo.mutate({mutation:ue["c"],variables:{customTagInput:{id:n,name:a,color:i,type:this.type}},update:function(e,n){var a=n.data.updateCustomTag,i=e.readQuery({query:g["a"],variables:{filters:{type:t.type}}}),s=i.customTags.findIndex((function(e){return e.id===a.id}));i.customTags[s]=a,e.writeQuery({query:g["a"],variables:{filters:{type:t.type}},data:i})},optimisticResponse:{__typename:"Mutation",updateCustomTag:{__typename:"CustomTag",id:0,name:a,color:i,order:0}}}).then((function(){t.close(),t.isLoading=!1})).catch((function(){t.isLoading=!1;var e="No se pudo actializar la etiqueta, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e})})))},deleteTag:function(e){var t=this,n=e.id;c["a"].can(l["r"],r["m"])&&(this.isLodingDelete=!0,this.$apollo.mutate({mutation:ue["b"],variables:{customTagId:n},update:function(e,n){var a=n.data.deleteCustomTag,i=e.readQuery({query:g["a"],variables:{filters:{type:t.type}}}),s=i.customTags.findIndex((function(e){return e.id===a.id}));i.customTags.splice(s,1),e.writeQuery({query:g["a"],variables:{filters:{type:t.type}},data:i})},optimisticResponse:{__typename:"Mutation",deleteCustomTag:{__typename:"CustomTag",id:n}}}).then((function(){t.isLodingDelete=!1,t.close()})).catch((function(){t.isLodingDelete=!1;var e="No se pudo eliminar la etiqueta, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e})})))}},apollo:{customTags:{query:g["a"],variables:function(){return{filters:{type:this.type}}}}}}),ye=be,Ce=Object(L["a"])(ye,ge,ve,!1,null,"62e56d30",null),Oe=Ce.exports;x()(Ce,{VBtn:A["a"],VIcon:_["a"]});var De={name:"TagMenu",components:{TagChoose:Y,TagCreate:fe,TagEdit:Oe},props:{isLoading:{type:Boolean},item:{type:Object,required:!0},type:{type:String,required:!0,default:"CONTACT"}},data:function(){return{isOpenMenuTag:!1,isCreateTag:!1,isEditTag:!1,tagSelected:{id:"",name:"",color:""}}},watch:{isOpen:function(){this.isOpen&&(this.isCreateTag=!1,this.isEditTag=!1),this.isOpenMenuTag=this.isOpen}},methods:{close:function(){this.isOpenMenuTag=!1},closeTag:function(){this.isCreateTag=!1,this.isEditTag=!1},createTag:function(){this.isCreateTag=!0},editTag:function(e){var t=e.id,n=e.name,a=e.color;this.tagSelected={id:t,name:n,color:a},this.isEditTag=!0},updateItem:function(e){this.$emit("updateItem",e)},updateHistory:function(){this.$emit("updateHistory")}}},Ie=De,Te=n("e449"),Le=Object(L["a"])(Ie,u,m,!1,null,null,null),Se=Le.exports;x()(Le,{VBtn:A["a"],VIcon:_["a"],VMenu:Te["a"]});var xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":70,"offset-y":"",bottom:"",left:""},on:{input:e.close},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;var n=t.attrs;return[e._t("activator",null,null,n)]}}],null,!0),model:{value:e.isOpenMenuOwner,callback:function(t){e.isOpenMenuOwner=t},expression:"isOpenMenuOwner"}},[n("v-card",{attrs:{tile:""}},[n("v-card-title",{staticClass:"py-1 title-menu"},[e._v(" Transferir propiedad ")]),n("v-divider"),n("v-card-text",[n("v-autocomplete",{attrs:{items:e.ownersList,loading:e.isLoading,"item-text":function(e){var t=e.user;return t.name+" "+t.lastName},"item-value":"id",label:"Propietario",outlined:"",dense:"","hide-details":"auto","no-data-text":"No se encuentran usuarios"},model:{value:e.ownerId,callback:function(t){e.ownerId=t},expression:"ownerId"}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"mr-3",attrs:{color:"primary",outlined:"",small:""},on:{click:e.close}},[e._v(" Cancelar ")]),n("v-btn",{attrs:{disabled:e.validateSameValue,loading:e.isLoading,color:"secondary",small:""},on:{click:e.updateOwner}},[e._v(" Guardar ")])],1)],1),n("BaseModalError",{attrs:{modalHandler:e.modalError},on:{close:e.modalHandlerError}})],1)},$e=[],we=(n("7db0"),n("7592")),_e={name:"Owner",mixins:[v["a"],b["a"],y["a"],C["a"]],props:{isOpen:{type:Boolean,required:!0},item:{type:Object,required:!0,default:function(){return{}}},typeItem:{type:String,required:!0,default:"CONTACT"}},watch:{isOpen:function(e){e&&(this.ownerId=this.item.owner?this.item.owner.id:""),this.isOpenMenuOwner=this.isOpen},isLoadingUpdateDeal:function(e){e||(this.isLoading=!1,this.close())},isLoadingUpdateContact:function(e){e||(this.isLoading=!1,this.close())},isLoadingUpdateCompany:function(e){e||(this.isLoading=!1,this.close())}},computed:{validateSameValue:function(){var e;return(null===(e=this.item.owner)||void 0===e?void 0:e.id)===this.ownerId}},data:function(){return{ownerId:"",ownersList:[],isOpenMenuOwner:!1,isLoading:!1}},methods:{close:function(){this.$emit("update:isOpen",!1)},findOwner:function(e){var t=this.ownersList.find((function(t){return t.id===e}));return{__typename:"UserEnterprise",id:t.id,user:{__typename:"User",id:t.user.id,name:t.user.name}}},updateOwner:function(){this.isLoading=!0;var e=this.item.id,t=this.ownerId,n=this.findOwner(t);switch(this.typeItem){case"CONTACT":this.updateOwnerContact(e,t,n);break;case"COMPANY":this.updateOwnerCompany(e,t,n);break;case"DEAL":this.updateOwnerDeal(e,t,n);break;default:this.updateOwnerContact(e,t,n);break}},updateOwnerCompany:function(e,t){this.updateCompany({id:e,owner:{id:t}})},updateOwnerContact:function(e,t){this.updateContact({id:e,owner:{id:t}})},updateOwnerDeal:function(e,t,n){this.updateDeal({id:e,owner:n})}},apollo:{ownersList:{query:we["e"]}}},Ee=_e,ke=(n("9dd9"),n("c6a6")),je=Object(L["a"])(Ee,xe,$e,!1,null,"b3fa384a",null),Ve=je.exports;x()(je,{VAutocomplete:ke["a"],VBtn:A["a"],VCard:N["a"],VCardActions:H["a"],VCardText:H["c"],VCardTitle:H["d"],VDivider:M["a"],VMenu:Te["a"],VSpacer:z["a"]});var Ae=n("59c9"),Ne=n("2cff"),He=n("231e"),Me={name:"Header",components:{TagMenu:Se,FieldTag:k,Owner:Ve,ModalLostDeal:function(){return n.e("chunk-8ff89478").then(n.bind(null,"6df5"))}},mixins:[v["a"],b["a"]],props:{item:{type:Object,required:!0,default:function(){return{}}},typeItem:{type:String,required:!0,default:"CONTACT"},isLoading:{type:Boolean}},data:function(){return{subject:o["b"],DELETE:l["g"],DELETE_OTHERS:l["h"],UPDATE:l["r"],UPDATE_OTHERS:l["s"],TO_ASSIGN:l["q"],PERMISSIONS_CONTACTS:r["e"],PERMISSIONS_COMPANIES:r["d"],PERMISSIONS_DEALS:r["f"],PERMISSIONS_ADMIN:r["b"],modalLostDeal:{isOpen:!1,isLoading:!1},isOpenMenuOwner:!1,isWonLoading:!1,isLostLoading:!1,defaultTag:{id:"0",name:"Ninguna etiqueta",color:"gray",order:0}}},watch:{isLoadingUpdateDeal:function(e){e||(this.isWonLoading=!1,this.isLostLoading=!1)}},computed:{isDealOpen:function(){return"DEAL"!==this.typeItem||"OPEN"===this.item.status},canEditOwner:function(){return c["a"].can(l["q"],r["b"])},canEdit:function(){var e,t,n,a,i,s;return"CONTACT"===this.typeItem?c["a"].can(l["r"],Object(o["b"])(r["e"],{authorId:(null===this||void 0===this||null===(e=this.item)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id)||""})):"COMPANY"===this.typeItem?c["a"].can(l["r"],Object(o["b"])(r["d"],{authorId:(null===this||void 0===this||null===(n=this.item)||void 0===n||null===(a=n.owner)||void 0===a?void 0:a.id)||""})):"DEAL"===this.typeItem&&c["a"].can(l["r"],Object(o["b"])(r["f"],{authorId:(null===this||void 0===this||null===(i=this.item)||void 0===i||null===(s=i.owner)||void 0===s?void 0:s.id)||""}))},canEditOthers:function(){var e,t,n,a,i,s;return"CONTACT"===this.typeItem?this.canEdit?c["a"].can(l["s"],r["e"]):c["a"].can(l["s"],r["e"])&&!c["a"].can(l["s"],Object(o["b"])(r["e"],{authorId:(null===this||void 0===this||null===(e=this.item)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id)||""})):"COMPANY"===this.typeItem?this.canEdit?c["a"].can(l["s"],r["d"]):c["a"].can(l["s"],r["d"])&&!c["a"].can(l["s"],Object(o["b"])(r["d"],{authorId:(null===this||void 0===this||null===(n=this.item)||void 0===n||null===(a=n.owner)||void 0===a?void 0:a.id)||""})):"DEAL"===this.typeItem&&(this.canEdit?c["a"].can(l["s"],r["f"]):c["a"].can(l["s"],r["f"])&&!c["a"].can(l["s"],Object(o["b"])(r["f"],{authorId:(null===this||void 0===this||null===(i=this.item)||void 0===i||null===(s=i.owner)||void 0===s?void 0:s.id)||""})))},canDelete:function(){var e,t,n,a,i,s;return"CONTACT"===this.typeItem?c["a"].can(l["g"],Object(o["b"])(r["e"],{authorId:(null===this||void 0===this||null===(e=this.item)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id)||""})):"COMPANY"===this.typeItem?c["a"].can(l["g"],Object(o["b"])(r["d"],{authorId:(null===this||void 0===this||null===(n=this.item)||void 0===n||null===(a=n.owner)||void 0===a?void 0:a.id)||""})):"DEAL"===this.typeItem&&c["a"].can(l["g"],Object(o["b"])(r["f"],{authorId:(null===this||void 0===this||null===(i=this.item)||void 0===i||null===(s=i.owner)||void 0===s?void 0:s.id)||""}))},canDeleteOthers:function(){var e,t,n,a,i,s;return"CONTACT"===this.typeItem?this.canDelete?c["a"].can(l["h"],r["e"]):c["a"].can(l["h"],r["e"])&&!c["a"].can(l["h"],Object(o["b"])(r["e"],{authorId:(null===this||void 0===this||null===(e=this.item)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id)||""})):"COMPANY"===this.typeItem?this.canDelete?c["a"].can(l["h"],r["d"]):c["a"].can(l["h"],r["d"])&&!c["a"].can(l["h"],Object(o["b"])(r["d"],{authorId:(null===this||void 0===this||null===(n=this.item)||void 0===n||null===(a=n.owner)||void 0===a?void 0:a.id)||""})):"DEAL"===this.typeItem&&(this.canDelete?c["a"].can(l["h"],r["f"]):c["a"].can(l["h"],r["f"])&&!c["a"].can(l["h"],Object(o["b"])(r["f"],{authorId:(null===this||void 0===this||null===(i=this.item)||void 0===i||null===(s=i.owner)||void 0===s?void 0:s.id)||""})))},listTags:function(){return this.item.tags?Object(d["a"])({listItems:Object(s["a"])(this.item.tags),orderBy:"asc",nextElement:"order"}):[]},headerColor:function(){return"LOST"===this.item.status?"header-lost":"WON"===this.item.status?"header-won":"header-normal"}},methods:{getIcon:function(){switch(this.typeItem){case"CONTACT":return"mdi-account";case"COMPANY":return"mdi-office-building";case"DEAL":return"mdi-handshake";default:return""}},restoreConfirm:function(){this.modalHandlerRestore({isOpen:!0,isLoading:!1,message:{title:"¿Seguro que deseas restaurar?",nameItem:"".concat("DEAL"===this.typeItem?this.item.title:this.item.name," "),text:"será restaurado"},infoRestore:{}})},restore:function(e){var t=e.isOpen,n=e.message,a=e.infoRestore;switch(this.modalHandlerRestore({isOpen:t,isLoading:!0,message:n,infoRestore:a}),this.typeItem){case"CONTACT":this.restoreContact();break;case"COMPANY":this.restoreCompany();break;case"DEAL":this.restoreDeal();break;default:var i="No se ha podido encontrar la accion a realizar";this.modalHandlerError({isOpen:!0,error:i});break}},restoreContact:function(){var e=this;c["a"].can(l["g"],r["e"])&&this.$apollo.mutate({mutation:Ne["d"],variables:{input:[{id:this.item.id}]}}).finally((function(){e.modalHandlerRestore({isOpen:!1,isLoading:!1,message:{},infoRestore:{}}),e.$router.push({name:"contacts"},(function(){}))})).catch((function(){var t="No se pudieron restaurar los contactos, intente de nuevo o contacte a soporte";e.modalHandlerError({isOpen:!0,error:t})}))},restoreCompany:function(){var e=this;c["a"].can(l["g"],r["e"])&&this.$apollo.mutate({mutation:He["d"],variables:{input:[{id:this.item.id}]}}).finally((function(){e.modalHandlerRestore({isOpen:!1,isLoading:!1,message:{},infoRestore:{}}),e.$router.push({name:"companies"},(function(){}))})).catch((function(){var t="No se pudieron restaurar los contactos, intente de nuevo o contacte a soporte";e.modalHandlerError({isOpen:!0,error:t})}))},restoreDeal:function(){var e=this;c["a"].can(l["g"],r["e"])&&this.$apollo.mutate({mutation:Ae["g"],variables:{input:[{id:this.item.id}]}}).finally((function(){e.modalHandlerRestore({isOpen:!1,isLoading:!1,message:{},infoRestore:{}}),e.$router.push({name:"deals"},(function(){}))})).catch((function(){var t="No se pudieron restaurar los contactos, intente de nuevo o contacte a soporte";e.modalHandlerError({isOpen:!0,error:t})}))},removeConfirm:function(){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{title:"¿Seguro que deseas mover a la papelera?",nameItem:"".concat("DEAL"===this.typeItem?this.item.title:this.item.name," "),text:"será movido a la papelera"},infoDelete:{}})},remove:function(e){var t=e.isOpen,n=e.message,a=e.infoDelete;switch(this.modalHandlerDelete({isOpen:t,isLoading:!0,message:n,infoDelete:a}),this.typeItem){case"CONTACT":this.removeContact();break;case"COMPANY":this.removeCompany();break;case"DEAL":this.removeDeal();break;default:var i="No se ha podido encontrar la accion a realizar";this.modalHandlerError({isOpen:!0,error:i});break}},removeContact:function(){var e=this;(this.canDelete||this.canDeleteOthers)&&this.$apollo.mutate({mutation:Ne["b"],variables:{input:[{id:this.item.id}]}}).then((function(){e.modalHandlerDelete({isOpen:!1,isLoading:!1,message:{},infoDelete:{}}),e.$router.push({name:"contacts"},(function(){}))})).catch((function(){var t="No se ha podido eliminar el contacto intente de nuevo o contacte al soporte";e.modalHandlerError({isOpen:!0,error:t})}))},removeCompany:function(){var e=this;(this.canDelete||this.canDeleteOthers)&&this.$apollo.mutate({mutation:He["b"],variables:{input:[{id:this.item.id}]}}).then((function(){e.modalHandlerDelete({isOpen:!1,isLoading:!1,message:{},infoDelete:{}}),e.$router.push({name:"companies"},(function(){}))})).catch((function(){var t="No se ha podido eliminar la empresa intente de nuevo o contacte al soporte";e.modalHandlerError({isOpen:!0,error:t})}))},removeDeal:function(){var e=this;(this.canDelete||this.canDeleteOthers)&&this.$apollo.mutate({mutation:Ae["e"],variables:{input:[{id:this.item.id}]}}).then((function(){e.$router.push({name:"pipeline"},(function(){})),e.modalHandlerDelete({isOpen:!1,isLoading:!1,message:{},infoDelete:{}})})).catch((function(){var t="No se ha podido eliminar el trato intente de nuevo o contacte al soporte";e.modalHandlerError({isOpen:!0,error:t})}))},trashConfirm:function(){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{title:"¿Seguro que deseas eliminar?",nameItem:"".concat("DEAL"===this.typeItem?this.item.title:this.item.name," "),text:"será eliminado permanentemente y no se podrá recuperar"},infoDelete:{}})},trash:function(e){var t=e.isOpen,n=e.message,a=e.infoDelete;switch(this.modalHandlerDelete({isOpen:t,isLoading:!0,message:n,infoDelete:a}),this.typeItem){case"CONTACT":this.trashContact();break;case"COMPANY":this.trashCompany();break;case"DEAL":this.trasheDeal();break;default:var i="No se ha podido encontrar la accion a realizar";this.modalHandlerError({isOpen:!0,error:i});break}},trashContact:function(){var e=this;(this.canDelete||this.canDeleteOthers)&&this.$apollo.mutate({mutation:Ne["e"],variables:{input:[{id:this.item.id}]}}).then((function(){e.modalHandlerDelete({isOpen:!1,isLoading:!1,message:{},infoDelete:{}}),e.$router.push({name:"contacts"},(function(){}))})).catch((function(){var t="No se ha podido eliminar el contacto intente de nuevo o contacte al soporte";e.modalHandlerError({isOpen:!0,error:t})}))},trashCompany:function(){var e=this;(this.canDelete||this.canDeleteOthers)&&this.$apollo.mutate({mutation:He["e"],variables:{input:[{id:this.item.id}]}}).then((function(){e.modalHandlerDelete({isOpen:!1,isLoading:!1,message:{},infoDelete:{}}),e.$router.push({name:"companies"},(function(){}))})).catch((function(){var t="No se ha podido eliminar la empresa intente de nuevo o contacte al soporte";e.modalHandlerError({isOpen:!0,error:t})}))},trashDeal:function(){var e=this;(this.canDelete||this.canDeleteOthers)&&this.$apollo.mutate({mutation:Ae["h"],variables:{input:[{id:this.item.id}]}}).then((function(){e.$router.push({name:"pipeline"},(function(){})),e.modalHandlerDelete({isOpen:!1,isLoading:!1,message:{},infoDelete:{}})})).catch((function(){var t="No se ha podido eliminar el trato intente de nuevo o contacte al soporte";e.modalHandlerError({isOpen:!0,error:t})}))},modalHandlerLostDeal:function(e){var t=e.isOpen,n=e.isLoading;this.modalLostDeal={isOpen:t,isLoading:n}},lostDeal:function(){this.modalHandlerLostDeal({isOpen:!0,isLoading:!1})},updateItem:function(e){this.$emit("updateItem",e)},updateHistory:function(){this.$emit("updateHistory")},changeStatus:function(e,t){if(this.canEdit||this.canEditOthers)if("LOST"===e){this.isLostLoading=!0;var n=t.lostReason,a=t.comments;this.modalHandlerLostDeal({isOpen:!0,isLoading:!0}),this.updateDeal({id:this.item.id,status:e,comments:a,lostReason:n})}else this.isWonLoading=!0,this.updateDeal({id:this.item.id,status:e})}}},Fe=Me,Re=(n("3ed5"),n("62ad")),Pe=n("1800"),qe=n("0fd9"),Be=Object(L["a"])(Fe,a,i,!1,null,"9bca2742",null);t["default"]=Be.exports;x()(Be,{VBtn:A["a"],VCard:N["a"],VChip:w["a"],VCol:Re["a"],VIcon:_["a"],VList:F["a"],VListItem:R["a"],VListItemAction:Pe["a"],VListItemContent:P["a"],VListItemSubtitle:P["b"],VListItemTitle:P["c"],VMenu:Te["a"],VRow:qe["a"],VSkeletonLoader:U["a"]})}}]);
//# sourceMappingURL=chunk-75d93884.839a0c27.js.map