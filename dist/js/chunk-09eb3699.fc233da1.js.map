{"version":3,"sources":["webpack:///./src/components/profile/ActivitiesProfile.vue?5313","webpack:///./src/components/profile/MenuPlus.vue?0ed6","webpack:///src/components/profile/MenuPlus.vue","webpack:///./src/components/profile/MenuPlus.vue?35d4","webpack:///./src/components/profile/MenuPlus.vue","webpack:///./src/components/profile/ModalNote.vue?2471","webpack:///src/components/profile/ModalNote.vue","webpack:///./src/components/profile/ModalNote.vue?33dd","webpack:///./src/components/profile/ModalNote.vue?4d8a","webpack:///./src/components/profile/ModalFile.vue?b384","webpack:///src/components/profile/ModalFile.vue","webpack:///./src/components/profile/ModalFile.vue?4b1a","webpack:///./src/components/profile/ModalFile.vue?b9e7","webpack:///src/components/profile/ActivitiesProfile.vue","webpack:///./src/components/profile/ActivitiesProfile.vue?2a1a","webpack:///./src/components/profile/ActivitiesProfile.vue","webpack:///./src/graphql/mutations/notesMutations.js","webpack:///./src/mixins/filesMixin.js","webpack:///./src/graphql/mutations/filesMutations.js","webpack:///./src/components/profile/ModalFile.vue?379b","webpack:///./src/components/profile/ModalNote.vue?5b7f"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","canEdit","canEditOthers","itemComplete","isDelete","on","openCreateNote","_v","openCreateActivity","$event","dialogFile","item","id","typeItem","updateHistory","staticRenderFns","scopedSlots","_u","key","fn","ref","_g","_b","staticClass","disabled","model","value","callback","$$v","fab","expression","_t","name","props","type","Boolean","default","data","component","VBtn","VIcon","VList","VMenu","modal","$set","_s","formatTitle","isEdit","close","closeAndDeleteImages","messageDefault","itemId","status","updateMessage","savekeysImages","isValidMessage","_e","isLoading","updateNote","content","saveNote","modalError","modalHandlerError","components","NoteEditor","mixins","String","required","modalId","images","userCurrent","watch","getNote","reset","validMessage","computed","filters","filterObject","contactId","companyId","dealId","methods","getKeyImage","html","replace","imgTag","push","isEmptyEditor","message","setTimeout","changeModal","getToday","getData","contact","notes","unshift","createNote","company","deal","getQuery","query","variables","getType","note","userTags","imagesToDelete","length","forEach","$apollo","getUserTags","usersTags","some","keyImage","apollo","VCard","VCardActions","VCardText","VCardTitle","VDialog","VDivider","VRow","VSpacer","dialog","dropOptions","stopPropagation","startDragging","apply","arguments","endDragging","dragUploadFile","getError","uploadProgress","class","dragging","isUploadProgress","progress","isSuccessUpload","file","removeDocumentUpload","description","uploadFile","vueDropzone","isRequired","modalsAlertsMixin","url","maxFilesize","maxFiles","acceptedFiles","addRemoveLinks","previewTemplate","getTemplate","$refs","dropzone","disable","enable","error","accepted","removeFile","totaluploadprogress","$emit","resetValues","formFile","VCardSubtitle","VCol","VForm","VProgressLinear","VTextarea","MenuPlus","ModalNote","ModalActivity","ModalFile","Object","ownerId","dialogNote","dialogAction","subject","UPDATE","UPDATE_OTHERS","PERMISSIONS_CONTACTS","PERMISSIONS_COMPANIES","PERMISSIONS_DEALS","ability","VListItem","VListItemTitle","CREATE_NOTE","gql","UPDATE_NOTE","DELETE_NOTE","CREATE_COMMENT_NOTE","UPDATE_COMMENT_NOTE","DELETE_COMMENT_NOTE","UPLOAD_IMAGE_NOTE","filesMixin","modalFileEdit","isOpen","info","modalFileEditHandler","location","idSource","fileInfo","size","mutate","mutation","UPLOAD_FILE","client","input","then","updateFile","catch","fileId","UPDATE_DESCRIPTION_FILE","deleteFile","infoDelete","modalHandlerDelete","DELETE_FILE","deleteFileWhitOutModal","UPLOAD_PROFILE_PHOTO"],"mappings":"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","file":"js/chunk-09eb3699.fc233da1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('MenuPlus',{attrs:{\"disabled\":!((_vm.canEdit || _vm.canEditOthers) && !_vm.itemComplete.isDelete)}},[_c('v-list-item',{on:{\"click\":_vm.openCreateNote}},[_c('v-list-item-title',[_vm._v(\"Crear nota\")])],1),_c('v-list-item',{on:{\"click\":_vm.openCreateActivity}},[_c('v-list-item-title',[_vm._v(\"Crear actividad\")])],1),_c('v-list-item',{on:{\"click\":function($event){_vm.dialogFile = true}}},[_c('v-list-item-title',[_vm._v(\"Subir archivo\")])],1)],1),_c('ModalNote',{attrs:{\"itemId\":_vm.item.id,\"typeItem\":_vm.typeItem},on:{\"updateHistory\":_vm.updateHistory}}),_c('ModalActivity',{attrs:{\"item\":_vm.item,\"typeItem\":_vm.typeItem},on:{\"updateHistory\":_vm.updateHistory}}),_c('ModalFile',{attrs:{\"dialog\":_vm.dialogFile,\"itemId\":_vm.item.id,\"typeItem\":_vm.typeItem},on:{\"update:dialog\":function($event){_vm.dialogFile=$event},\"updateHistory\":_vm.updateHistory}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-menu',{attrs:{\"offset-y\":\"\",\"nudge-bottom\":\"10\",\"transition\":\"scroll-y-transition\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"mt-2 mr-4\",attrs:{\"color\":\"secondary\",\"fab\":\"\",\"absolute\":\"\",\"small\":\"\",\"right\":\"\",\"disabled\":_vm.disabled}},'v-btn',attrs,false),on),[(_vm.fab)?_c('v-icon',[_vm._v(\" mdi-close \")]):_c('v-icon',[_vm._v(\" mdi-plus \")])],1)]}}]),model:{value:(_vm.fab),callback:function ($$v) {_vm.fab=$$v},expression:\"fab\"}},[_c('v-list',[_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-menu\n    v-model=\"fab\"\n    offset-y\n    nudge-bottom=\"10\"\n    transition=\"scroll-y-transition\"\n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-btn\n        class=\"mt-2 mr-4\"\n        color=\"secondary\"\n        fab\n        absolute\n        small\n        right\n        v-bind=\"attrs\"\n        v-on=\"on\"\n        :disabled=\"disabled\"\n      >\n        <v-icon v-if=\"fab\">\n          mdi-close\n        </v-icon>\n        <v-icon v-else>\n          mdi-plus\n        </v-icon>\n      </v-btn>\n    </template>\n    <v-list>\n      <slot></slot>\n    </v-list>\n  </v-menu>\n</template>\n\n<script>\nexport default {\n  name: 'MenuPlus',\n  props: {\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      fab: false,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuPlus.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuPlus.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MenuPlus.vue?vue&type=template&id=83ca1de6&scoped=true&\"\nimport script from \"./MenuPlus.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuPlus.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"83ca1de6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\ninstallComponents(component, {VBtn,VIcon,VList,VMenu})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-dialog',{attrs:{\"scrollable\":\"\",\"max-width\":\"500px\",\"persistent\":\"\"},model:{value:(_vm.modal.status),callback:function ($$v) {_vm.$set(_vm.modal, \"status\", $$v)},expression:\"modal.status\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"primary white--text\"},[_vm._v(\" \"+_vm._s(_vm.formatTitle)+\" \"),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"white\"},on:{\"click\":function($event){_vm.modal.isEdit ? _vm.close() : _vm.closeAndDeleteImages()}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-divider'),_c('v-card-text',{staticClass:\"py-2\"},[_c('NoteEditor',{attrs:{\"isEdit\":_vm.modal.isEdit,\"message\":_vm.messageDefault,\"itemId\":_vm.itemId,\"typeItem\":_vm.typeItem,\"reset\":_vm.modal.status},on:{\"updateMessage\":_vm.updateMessage,\"updateImage\":_vm.savekeysImages}}),(!_vm.isValidMessage)?_c('p',{staticClass:\"red--text\"},[_vm._v(\" El mensaje es requerido \")]):_vm._e()],1),_c('v-divider'),_c('v-card-actions',[_c('v-btn',{attrs:{\"color\":\"primary\",\"outlined\":\"\"},on:{\"click\":function($event){_vm.modal.isEdit ? _vm.close() : _vm.closeAndDeleteImages()}}},[_vm._v(\" Cancelar \")]),_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"secondary\",\"loading\":_vm.isLoading},on:{\"click\":function($event){_vm.modal.isEdit ? _vm.updateNote(_vm.content) : _vm.saveNote()}}},[_vm._v(\" \"+_vm._s(_vm.modal.isEdit ? 'Actualizar' : 'Crear')+\" \")])],1)],1)],1),_c('BaseModalError',{attrs:{\"modalHandler\":_vm.modalError},on:{\"close\":_vm.modalHandlerError}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-dialog v-model=\"modal.status\" scrollable max-width=\"500px\" persistent>\n      <v-card>\n        <v-card-title class=\"primary white--text\">\n          {{ formatTitle }}\n          <v-spacer />\n          <v-btn\n            icon\n            color=\"white\"\n            @click=\"modal.isEdit ? close() : closeAndDeleteImages()\"\n          >\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-card-title>\n        <v-divider></v-divider>\n        <v-card-text class=\"py-2\">\n          <NoteEditor\n            :isEdit=\"modal.isEdit\"\n            :message=\"messageDefault\"\n            :itemId=\"itemId\"\n            :typeItem=\"typeItem\"\n            :reset=\"modal.status\"\n            @updateMessage=\"updateMessage\"\n            @updateImage=\"savekeysImages\"\n          ></NoteEditor>\n          <p v-if=\"!isValidMessage\" class=\"red--text\">\n            El mensaje es requerido\n          </p>\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-btn\n            color=\"primary\"\n            outlined\n            @click=\"modal.isEdit ? close() : closeAndDeleteImages()\"\n          >\n            Cancelar\n          </v-btn>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"secondary\"\n            @click=\"modal.isEdit ? updateNote(content) : saveNote()\"\n            :loading=\"isLoading\"\n          >\n            {{ modal.isEdit ? 'Actualizar' : 'Crear' }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <BaseModalError :modalHandler=\"modalError\" @close=\"modalHandlerError\" />\n  </v-row>\n</template>\n\n<script>\nimport { GET_DEAL } from '@/graphql/querys/dealsQuery';\nimport { CREATE_NOTE, UPDATE_NOTE } from '@/graphql/mutations/notesMutations';\nimport { GET_COMPANY } from '@/graphql/querys/companiesQuery';\nimport { GET_CONTACT } from '@/graphql/querys/contactsQuery';\nimport { GET_USER_LOGGED } from '@/graphql/local-state/queries';\n// mixins\nimport { modalMethodsMixin, modalApolloMixin } from '@/mixins/modalsMixin';\nimport { modalsAlertsMixin } from '@/mixins/alerts/modalsAlertsMixin';\nimport { filesMixin } from '@/mixins/filesMixin';\n\nexport default {\n  name: 'ModalNote',\n  components: {\n    NoteEditor: () => import('@/components/notes/NoteEditor.vue'),\n  },\n  mixins: [modalMethodsMixin, modalApolloMixin, modalsAlertsMixin, filesMixin],\n  props: {\n    itemId: {\n      type: String,\n      default: '',\n      required: true,\n    },\n    typeItem: {\n      type: String,\n      required: true,\n      default: 'CONTACT',\n    },\n  },\n  data() {\n    return {\n      modalId: 'createNote',\n      modal: {},\n      messageDefault: '',\n      isValidMessage: true,\n      content: '',\n      images: [],\n      userCurrent: {},\n      isLoading: false,\n    };\n  },\n  watch: {\n    modal({ isEdit, status }) {\n      if (isEdit) this.getNote();\n      if (!status) this.reset();\n    },\n    content(value) {\n      this.validMessage(value);\n    },\n  },\n  computed: {\n    formatTitle() {\n      return this.modal.isEdit ? 'Editar nota' : 'Crear una nota';\n    },\n    filters() {\n      const filterObject = { orderBy: 'desc' };\n      if (this.typeItem === 'CONTACT') {\n        filterObject.contactId = this.itemId;\n      } else if (this.typeItem === 'COMPANY') {\n        filterObject.companyId = this.itemId;\n      } else if (this.typeItem === 'DEAL') {\n        filterObject.dealId = this.itemId;\n      }\n\n      return filterObject;\n    },\n  },\n  methods: {\n    getKeyImage(html) {\n      return html.replace(/<img[^>]*>/gi, (imgTag) => {\n        return imgTag.replace(\n          /\\b(alt\\s*=\\s*(?:['\"]?))([^'\"> ]+)/i,\n          (alt, prefix, url) => {\n            this.savekeysImages(url);\n          },\n        );\n      });\n    },\n    savekeysImages(key) {\n      this.images.push({ key });\n    },\n    validMessage(message) {\n      if (!this.modal.status) {\n        this.isValidMessage = true;\n      } else {\n        this.isValidMessage = !this.isEmptyEditor(message);\n      }\n    },\n    isEmptyEditor(content) {\n      return content === '' || content === '<div></div>';\n    },\n    reset() {\n      setTimeout(() => {\n        this.messageDefault = '';\n        this.isValidMessage = true;\n      }, 1);\n    },\n    getNote() {\n      this.messageDefault = this.modal.item.content;\n      this.getKeyImage(this.modal.item.content);\n    },\n    updateMessage(message) {\n      this.content = message;\n    },\n    closeAndDeleteImages() {\n      this.changeModal({\n        id: 'createNote',\n        status: false,\n        isEdit: false,\n        item: null,\n      });\n      setTimeout(() => {\n        this.content = '';\n        if (this.images.length > 0) {\n          this.images.forEach(({ key }) => {\n            this.deleteFileWhitOutModal(key);\n          });\n        }\n        this.images = [];\n      }, 1);\n    },\n    close() {\n      this.changeModal({\n        id: 'createNote',\n        status: false,\n        isEdit: false,\n        item: null,\n      });\n      setTimeout(() => {\n        this.content = '';\n        this.images = [];\n      }, 1);\n    },\n    // Get today with format 00/00/00 00:00\n    getToday() {\n      const today = new Date();\n      const date = `${today.getFullYear()}/${today.getMonth()}/${today.getDate()}`;\n      const time = `${today.getHours()}:${today.getMinutes()}`;\n      return `${date} ${time}`;\n    },\n    getData(data, createNote) {\n      switch (this.typeItem) {\n        case 'CONTACT':\n          data.contact.notes.unshift(createNote);\n          return data;\n        case 'COMPANY':\n          data.company.notes.unshift(createNote);\n          return data;\n        case 'DEAL':\n          data.deal.notes.unshift(createNote);\n          return data;\n        default:\n          data.contact.notes.unshift(createNote);\n          return data;\n      }\n    },\n    getQuery() {\n      switch (this.typeItem) {\n        case 'CONTACT':\n          return {\n            query: GET_CONTACT,\n            variables: {\n              contactId: this.itemId,\n            },\n          };\n        case 'COMPANY':\n          return {\n            query: GET_COMPANY,\n            variables: {\n              companyId: this.itemId,\n            },\n          };\n        case 'DEAL':\n          return {\n            query: GET_DEAL,\n            variables: {\n              dealId: this.itemId,\n            },\n          };\n        default:\n          return {\n            query: GET_CONTACT,\n            variables: {\n              contactId: this.itemId,\n            },\n          };\n      }\n    },\n    getType() {\n      switch (this.typeItem) {\n        case 'CONTACT':\n          return { contact: { id: this.itemId } };\n        case 'COMPANY':\n          return { company: { id: this.itemId } };\n        case 'DEAL':\n          return { deal: { id: this.itemId } };\n        default:\n          return { contact: { id: this.itemId } };\n      }\n    },\n    saveNote() {\n      this.validMessage(this.content);\n      if (this.isValidMessage) {\n        const beforeImages = JSON.parse(JSON.stringify(this.images));\n        const note = this.content;\n        this.isLoading = true;\n        const getTypeId = this.getType();\n        const userTags = this.getUserTags(note);\n        const noteInput = {\n          content: note,\n          type: [{ important: false }],\n          ...getTypeId,\n          userTags,\n        };\n\n        this.images = [];\n\n        this.getKeyImage(this.content);\n\n        const imagesToDelete = beforeImages.filter(\n          ({ key }) => !this.images.some((image) => image.key === key),\n        );\n\n        if (imagesToDelete.length > 0) {\n          imagesToDelete.forEach(({ key }) => {\n            this.deleteFileWhitOutModal(key);\n          });\n        }\n\n        this.$apollo\n          .mutate({\n            mutation: CREATE_NOTE,\n            variables: {\n              noteInput,\n            },\n          })\n          .then(() => {\n            this.$emit('updateHistory');\n            this.isLoading = false;\n            this.close();\n          })\n          .catch(() => {\n            const error =\n              'No se pudo guardar la nota, intente de nuevo o contacte a soporte';\n            this.modalHandlerError({ isOpen: true, error });\n          });\n      }\n    },\n    getUserTags(html) {\n      const usersTags = [];\n      html.replace(\n        /<span\\s(?:class=\"mention\")\\s(?:data-mention-id=\"(.*?)\")>(.*?)<\\/span>/gi,\n        (element, id) => {\n          usersTags.push({ id });\n          return `${id}`;\n        },\n      );\n\n      return usersTags.length ? usersTags : null;\n    },\n    updateNote(content) {\n      this.isLoading = true;\n      const { id } = this.modal.item;\n      const userTags = this.getUserTags(content);\n      const noteInput = {\n        id,\n        content,\n        userTags,\n      };\n\n      const images = [];\n\n      content.replace(/<img[^>]*>/gi, (imgTag) => {\n        imgTag.replace(\n          /\\b(alt\\s*=\\s*(?:['\"]?))([^'\"> ]+)/i,\n          (alt, prefix, url) => {\n            images.push({ key: url });\n          },\n        );\n      });\n\n      const imagesToDelete = this.images.filter(({ key }) => {\n        return !images.some(({ key: keyImage }) => {\n          return key === keyImage;\n        });\n      });\n      if (imagesToDelete.length > 0) {\n        imagesToDelete.forEach(({ key }) => {\n          this.deleteFileWhitOutModal(key);\n        });\n      }\n      this.$apollo\n        .mutate({\n          mutation: UPDATE_NOTE,\n          variables: {\n            noteInput,\n          },\n        })\n        .then(() => {\n          this.$emit('updateHistory');\n          this.isLoading = false;\n          this.close();\n        })\n        .catch(() => {\n          const error =\n            'No se pudo actualizar la nota, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n  },\n  apollo: {\n    userCurrent: {\n      query: GET_USER_LOGGED,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '{ .tiptap-vuetify-editor__content  } from ../../../../scss/components/modal.note';\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalNote.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalNote.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalNote.vue?vue&type=template&id=0889c011&scoped=true&\"\nimport script from \"./ModalNote.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalNote.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModalNote.vue?vue&type=style&index=0&id=0889c011&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0889c011\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VDivider,VIcon,VRow,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"650\",\"scrollable\":\"\",\"persistent\":\"\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"primary white--text py-2\"},[_vm._v(\" Subir archivo \"),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.close}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-close\")])],1)],1),_c('v-card-text',{staticClass:\"mt-4\"},[_c('vue-dropzone',{ref:\"dropzone\",attrs:{\"id\":\"dropZone\",\"options\":_vm.dropOptions,\"useCustomSlot\":true,\"include-styling\":false},on:{\"vdropzone-drag-over\":function($event){$event.stopPropagation();return _vm.startDragging.apply(null, arguments)},\"vdropzone-drag-leave\":_vm.endDragging,\"vdropzone-drop\":_vm.endDragging,\"vdropzone-success\":_vm.dragUploadFile,\"vdropzone-error\":_vm.getError,\"vdropzone-total-upload-progress\":_vm.uploadProgress}},[_c('v-card',{staticClass:\"dropzone-custom-content pa-12\",class:[{ 'blur-drop-zone': _vm.dragging }],attrs:{\"disabled\":_vm.isUploadProgress,\"color\":\"#F0F0F0\",\"outlined\":\"\"}},[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\",\"align\":\"center\"}},[(_vm.isUploadProgress)?_c('v-progress-linear',{staticClass:\"mb-4\",attrs:{\"color\":\"green\",\"height\":\"2\",\"value\":_vm.progress}}):_vm._e(),(!_vm.isSuccessUpload)?_c('v-icon',{attrs:{\"x-large\":\"\"}},[_vm._v(\" mdi-file-download-outline \")]):_c('v-icon',{attrs:{\"x-large\":\"\"}},[_vm._v(\"mdi-file-outline\")])],1),_c('v-card-title',{staticClass:\"dropzone-custom-title justify-center\"},[(!_vm.isSuccessUpload)?_c('span',{staticClass:\"text-center\"},[_vm._v(\" Arrastra y suelta o elige un archivo para cargar \")]):_c('span',[_vm._v(\" \"+_vm._s(_vm.file.name)+\" \")])]),_c('v-card-subtitle',{staticClass:\"subtitle text-center\"},[(_vm.isSuccessUpload)?_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\",\"color\":\"error\"},on:{\"click\":_vm.removeDocumentUpload}},[_vm._v(\" Eliminar \")]):_vm._e()],1)],1)],1),_c('v-form',{ref:\"formFile\"},[_c('v-textarea',{staticClass:\"pt-4\",attrs:{\"outlined\":\"\",\"label\":\"Descripción\",\"counter\":\"140\",\"maxlength\":\"140\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}})],1),_c('BaseModalError',{attrs:{\"modalHandler\":_vm.modalError},on:{\"close\":_vm.modalHandlerError}})],1),_c('v-card-actions',{staticClass:\"justify-end\"},[_c('v-btn',{staticClass:\"mr-8\",attrs:{\"large\":\"\",\"tile\":\"\",\"outlined\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.close}},[_vm._v(\" Cancelar \")]),_c('v-btn',{attrs:{\"large\":\"\",\"tile\":\"\",\"normal\":\"\",\"color\":\"secondary\",\"loading\":_vm.isLoading,\"disabled\":!_vm.isSuccessUpload},on:{\"click\":function($event){return _vm.uploadFile(_vm.typeItem, _vm.itemId, _vm.file, _vm.description)}}},[_vm._v(\" Agregar \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"dialog\" width=\"650\" scrollable persistent>\n    <v-card>\n      <v-card-title class=\"primary white--text py-2\">\n        Subir archivo\n        <v-spacer />\n        <v-btn icon @click=\"close\">\n          <v-icon color=\"white\">mdi-close</v-icon>\n        </v-btn>\n      </v-card-title>\n      <v-card-text class=\"mt-4\">\n        <vue-dropzone\n          id=\"dropZone\"\n          ref=\"dropzone\"\n          :options=\"dropOptions\"\n          :useCustomSlot=\"true\"\n          :include-styling=\"false\"\n          @vdropzone-drag-over.stop=\"startDragging\"\n          @vdropzone-drag-leave=\"endDragging\"\n          @vdropzone-drop=\"endDragging\"\n          @vdropzone-success=\"dragUploadFile\"\n          @vdropzone-error=\"getError\"\n          @vdropzone-total-upload-progress=\"uploadProgress\"\n        >\n          <v-card\n            :disabled=\"isUploadProgress\"\n            color=\"#F0F0F0\"\n            outlined\n            class=\"dropzone-custom-content pa-12\"\n            :class=\"[{ 'blur-drop-zone': dragging }]\"\n          >\n            <v-col cols=\"12\" align=\"center\" class=\"pb-0\">\n              <v-progress-linear\n                v-if=\"isUploadProgress\"\n                class=\"mb-4\"\n                color=\"green\"\n                height=\"2\"\n                :value=\"progress\"\n              ></v-progress-linear>\n              <v-icon v-if=\"!isSuccessUpload\" x-large>\n                mdi-file-download-outline\n              </v-icon>\n              <v-icon v-else x-large>mdi-file-outline</v-icon>\n            </v-col>\n            <v-card-title class=\"dropzone-custom-title justify-center\">\n              <span v-if=\"!isSuccessUpload\" class=\"text-center\">\n                Arrastra y suelta o elige un archivo para cargar\n              </span>\n              <span v-else>\n                {{ file.name }}\n              </span>\n            </v-card-title>\n            <v-card-subtitle class=\"subtitle text-center\">\n              <v-btn\n                v-if=\"isSuccessUpload\"\n                @click=\"removeDocumentUpload\"\n                text\n                small\n                color=\"error\"\n              >\n                Eliminar\n              </v-btn>\n            </v-card-subtitle>\n          </v-card>\n        </vue-dropzone>\n\n        <v-form ref=\"formFile\">\n          <v-textarea\n            v-model=\"description\"\n            class=\"pt-4\"\n            outlined\n            label=\"Descripción\"\n            counter=\"140\"\n            maxlength=\"140\"\n          ></v-textarea>\n        </v-form>\n\n        <BaseModalError :modalHandler=\"modalError\" @close=\"modalHandlerError\" />\n      </v-card-text>\n      <v-card-actions class=\"justify-end\">\n        <v-btn class=\"mr-8\" large tile outlined color=\"primary\" @click=\"close\">\n          Cancelar\n        </v-btn>\n        <v-btn\n          large\n          tile\n          normal\n          color=\"secondary\"\n          :loading=\"isLoading\"\n          :disabled=\"!isSuccessUpload\"\n          @click=\"uploadFile(typeItem, itemId, file, description)\"\n        >\n          Agregar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport vueDropzone from 'vue2-dropzone';\nimport { modalsAlertsMixin } from '@/mixins/alerts/modalsAlertsMixin';\nimport { filesMixin } from '@/mixins/filesMixin';\n\nconst getTemplate = () => `\n     <span></span>\n`;\n\nexport default {\n  name: 'ModalFile',\n  components: {\n    vueDropzone,\n  },\n  props: {\n    dialog: {\n      type: Boolean,\n      default: false,\n    },\n    itemId: {\n      isRequired: true,\n    },\n    typeItem: {\n      isRequired: true,\n    },\n  },\n  mixins: [modalsAlertsMixin, filesMixin],\n  data() {\n    return {\n      file: null,\n      description: '',\n      isSuccessUpload: false,\n      dragging: false,\n      isUploadProgress: false,\n      progress: 0,\n      dropOptions: {\n        url: 'https://httpbin.org/post',\n        maxFilesize: 5, // MB\n        maxFiles: 1,\n        acceptedFiles:\n          '.png, .jpeg, .jpg, .JPG, .svg, .webp, .pdf, .zip, .rar, .xml, .txt, .pdf, .xls, .xslx, .xlsx, .doc, .docx, .ods, .ppsx',\n        addRemoveLinks: false,\n        previewTemplate: getTemplate(),\n      },\n      // .....................\n      isLoading: false,\n    };\n  },\n  watch: {\n    isSuccessUpload(value) {\n      if (value) {\n        this.$refs.dropzone.disable();\n        this.isUploadProgress = false;\n      } else {\n        this.$refs.dropzone.enable();\n      }\n    },\n  },\n  methods: {\n    startDragging() {\n      this.dragging = true;\n    },\n    endDragging() {\n      this.dragging = false;\n    },\n    dragUploadFile(file) {\n      this.file = file;\n      this.isSuccessUpload = true;\n    },\n    getError({ accepted }) {\n      let error = '';\n      if (!accepted) {\n        error = 'El archivo que seleccionaste no es valido';\n      } else {\n        error =\n          'Ocurrio un error al subir el archivo intentelo de nuevo o contacte a soporte';\n      }\n      this.modalHandlerError({ isOpen: true, error });\n    },\n    removeDocumentUpload() {\n      if (this.isSuccessUpload) {\n        this.$refs.dropzone.removeFile(this.file);\n      }\n      this.file = null;\n      this.isSuccessUpload = false;\n      this.isUploadProgress = false;\n    },\n    uploadProgress(totaluploadprogress) {\n      this.isUploadProgress = true;\n      this.progress = totaluploadprogress;\n    },\n    close() {\n      this.$emit('update:dialog', false);\n      this.resetValues();\n    },\n    resetValues() {\n      this.$refs.formFile.reset();\n      this.description = '';\n      this.removeDocumentUpload();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '{ .dropzone-custom-content  .blur-drop-zone .center-info } from ../../../../scss/components/modal.file';\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalFile.vue?vue&type=template&id=4b959b06&scoped=true&\"\nimport script from \"./ModalFile.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalFile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModalFile.vue?vue&type=style&index=0&id=4b959b06&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b959b06\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardSubtitle,VCardText,VCardTitle,VCol,VDialog,VForm,VIcon,VProgressLinear,VSpacer,VTextarea})\n","<template>\n  <div>\n    <MenuPlus\n      :disabled=\"!((canEdit || canEditOthers) && !itemComplete.isDelete)\"\n    >\n      <v-list-item @click=\"openCreateNote\">\n        <v-list-item-title>Crear nota</v-list-item-title>\n      </v-list-item>\n      <v-list-item @click=\"openCreateActivity\">\n        <v-list-item-title>Crear actividad</v-list-item-title>\n      </v-list-item>\n      <v-list-item @click=\"dialogFile = true\">\n        <v-list-item-title>Subir archivo</v-list-item-title>\n      </v-list-item>\n    </MenuPlus>\n    <ModalNote\n      :itemId=\"item.id\"\n      :typeItem=\"typeItem\"\n      @updateHistory=\"updateHistory\"\n    ></ModalNote>\n    <ModalActivity\n      :item=\"item\"\n      :typeItem=\"typeItem\"\n      @updateHistory=\"updateHistory\"\n    ></ModalActivity>\n    <ModalFile\n      :dialog.sync=\"dialogFile\"\n      :itemId=\"item.id\"\n      :typeItem=\"typeItem\"\n      @updateHistory=\"updateHistory\"\n    ></ModalFile>\n  </div>\n</template>\n\n<script>\nimport { subject } from '@casl/ability';\nimport ability from '@/services/ability';\nimport MenuPlus from '@/components/profile/MenuPlus.vue';\nimport ModalNote from '@/components/profile/ModalNote.vue';\nimport ModalActivity from '@/components/activities/ModalActivity.vue';\nimport ModalFile from '@/components/profile/ModalFile.vue';\nimport { modalMethodsMixin } from '@/mixins/modalsMixin';\n// Permissions\nimport {\n  PERMISSIONS_CONTACTS,\n  PERMISSIONS_COMPANIES,\n  PERMISSIONS_DEALS,\n} from '@/constants/permissions';\nimport { UPDATE, UPDATE_OTHERS } from '@/constants/methods';\n\nexport default {\n  name: 'ActivitiesProfile',\n  components: {\n    MenuPlus,\n    ModalNote,\n    ModalActivity,\n    ModalFile,\n  },\n  mixins: [modalMethodsMixin],\n  props: {\n    itemComplete: {\n      type: Object,\n      default: () => {},\n      required: true,\n    },\n    item: {\n      type: Object,\n      default: () => {},\n    },\n    ownerId: {\n      type: String,\n      default: '',\n    },\n    typeItem: {\n      type: String,\n      default: 'CONTACT',\n    },\n  },\n  data() {\n    return {\n      dialogNote: false,\n      dialogAction: false,\n      dialogFile: false,\n      subject,\n      UPDATE,\n      UPDATE_OTHERS,\n      PERMISSIONS_CONTACTS,\n      PERMISSIONS_COMPANIES,\n      PERMISSIONS_DEALS,\n    };\n  },\n  computed: {\n    canEdit() {\n      if (this.typeItem === 'CONTACT') {\n        return ability.can(\n          UPDATE,\n          subject(PERMISSIONS_CONTACTS, { authorId: this.ownerId || '' }),\n        );\n      }\n      if (this.typeItem === 'COMPANY') {\n        return ability.can(\n          UPDATE,\n          subject(PERMISSIONS_COMPANIES, { authorId: this.ownerId || '' }),\n        );\n      }\n      if (this.typeItem === 'DEAL') {\n        return ability.can(\n          UPDATE,\n          subject(PERMISSIONS_DEALS, { authorId: this.ownerId || '' }),\n        );\n      }\n      return false;\n    },\n    canEditOthers() {\n      if (this.typeItem === 'CONTACT') {\n        if (!this.canEdit) {\n          return (\n            ability.can(UPDATE_OTHERS, PERMISSIONS_CONTACTS) &&\n            !ability.can(\n              UPDATE_OTHERS,\n              subject(PERMISSIONS_CONTACTS, {\n                authorId: this.ownerId || '',\n              }),\n            )\n          );\n        }\n        return ability.can(UPDATE_OTHERS, PERMISSIONS_CONTACTS);\n      }\n      if (this.typeItem === 'COMPANY') {\n        if (!this.canEdit) {\n          return (\n            ability.can(UPDATE_OTHERS, PERMISSIONS_COMPANIES) &&\n            !ability.can(\n              UPDATE_OTHERS,\n              subject(PERMISSIONS_COMPANIES, {\n                authorId: this.ownerId || '',\n              }),\n            )\n          );\n        }\n        return ability.can(UPDATE_OTHERS, PERMISSIONS_COMPANIES);\n      }\n      if (this.typeItem === 'DEAL') {\n        if (!this.canEdit) {\n          return (\n            ability.can(UPDATE_OTHERS, PERMISSIONS_DEALS) &&\n            !ability.can(\n              UPDATE_OTHERS,\n              subject(PERMISSIONS_DEALS, {\n                authorId: this.ownerId || '',\n              }),\n            )\n          );\n        }\n        return ability.can(UPDATE_OTHERS, PERMISSIONS_DEALS);\n      }\n      return false;\n    },\n  },\n  methods: {\n    updateHistory() {\n      this.$emit('updateHistory');\n    },\n    openCreateNote() {\n      this.changeModal({\n        id: 'createNote',\n        status: true,\n        isEdit: false,\n        item: null,\n      });\n    },\n    openCreateActivity() {\n      this.changeModal({\n        id: 'createActivity',\n        status: true,\n        isEdit: false,\n        item: null,\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitiesProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitiesProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActivitiesProfile.vue?vue&type=template&id=1305ddbb&\"\nimport script from \"./ActivitiesProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./ActivitiesProfile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VListItem,VListItemTitle})\n","import gql from 'graphql-tag';\n\nexport const CREATE_NOTE = gql`\n  mutation createNote($noteInput: noteCreateInput!) {\n    createNote(noteInput: $noteInput) {\n      id\n      content\n      type\n      comments {\n        id\n        comment\n      }\n      userTags {\n        id\n      }\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n`;\n\nexport const UPDATE_NOTE = gql`\n  mutation updateNote($noteInput: noteUpdateInput!) {\n    updateNote(noteInput: $noteInput) {\n      id\n      content\n      type\n      userTags {\n        id\n      }\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n`;\n\nexport const DELETE_NOTE = gql`\n  mutation deleteNote($noteInput: noteId!) {\n    deleteNote(noteInput: $noteInput) {\n      id\n    }\n  }\n`;\n\nexport const CREATE_COMMENT_NOTE = gql`\n  mutation createNoteComment($noteCommentInput: noteCommentCreateInput) {\n    createNoteComment(noteCommentInput: $noteCommentInput) {\n      id\n      comment\n      userTags {\n        id\n      }\n      note {\n        id\n      }\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n`;\n\nexport const UPDATE_COMMENT_NOTE = gql`\n  mutation updateNoteComment($noteCommentInput: noteCommentUpdateInput) {\n    updateNoteComment(noteCommentInput: $noteCommentInput) {\n      id\n      comment\n      userTags {\n        id\n      }\n      note {\n        id\n      }\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n`;\n\nexport const DELETE_COMMENT_NOTE = gql`\n  mutation deleteNoteComment($noteCommentId: ID!) {\n    deleteNoteComment(noteCommentId: $noteCommentId) {\n      id\n    }\n  }\n`;\n\nexport const UPLOAD_IMAGE_NOTE = gql`\n  mutation UploadNoteFile($input: TypeFileNoteInput!) {\n    uploadNoteFile(upFile: $input) {\n      link\n      key\n    }\n  }\n`;\n","import {\n  UPLOAD_FILE,\n  UPDATE_DESCRIPTION_FILE,\n  DELETE_FILE,\n} from '@/graphql/mutations/filesMutations';\n\nexport const filesMixin = {\n  data() {\n    return {\n      modalFileEdit: {\n        isOpen: false,\n        isLoading: false,\n        info: {},\n      },\n    };\n  },\n  methods: {\n    modalFileEditHandler({ isOpen, isLoading, info }) {\n      this.modalFileEdit = { isOpen, isLoading, info };\n    },\n    uploadFile(location, idSource, fileInfo, description) {\n      this.isLoading = true;\n      const { name, size } = fileInfo;\n      this.$apollo\n        .mutate({\n          mutation: UPLOAD_FILE,\n          client: 'files',\n          variables: {\n            input: {\n              location,\n              idSource,\n              name,\n              size,\n              file: fileInfo,\n            },\n          },\n        })\n        .then(({ data: { uploadFile } }) => {\n          if (description.length > 0) {\n            const info = {\n              item: { id: uploadFile.id, description },\n              itemId: idSource,\n              typeItem: location,\n            };\n            this.updateFile({ isOpen: false, isLoading: false, info });\n          } else {\n            this.$emit('updateHistory');\n          }\n          this.isLoading = false;\n          this.close();\n        })\n        .catch(() => {\n          this.isLoading = false;\n          const error =\n            'No se ha podido subir el archivo, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    updateFile({ isOpen, isLoading, info }) {\n      this.modalFileEditHandler({ isOpen, isLoading, info });\n      const input = {\n        idSource: info.itemId,\n        fileId: info.item.id,\n        location: info.typeItem,\n        description: info.item.description,\n      };\n      this.$apollo\n        .mutate({\n          mutation: UPDATE_DESCRIPTION_FILE,\n          variables: {\n            input,\n          },\n        })\n        .then(() => {\n          this.$emit('updateHistory');\n          this.modalFileEditHandler({\n            isOpen: false,\n            isLoading: false,\n            info: {},\n          });\n        })\n        .catch(() => {\n          this.modalFileEditHandler({\n            isOpen: true,\n            isLoading: false,\n            info: {},\n          });\n          const error =\n            'No se pudo agregar la descripcion al archivo, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    deleteFile({ isOpen, isLoading, message, infoDelete }) {\n      this.modalHandlerDelete({\n        isOpen,\n        isLoading,\n        message,\n        infoDelete,\n      });\n      this.$apollo\n        .mutate({\n          mutation: DELETE_FILE,\n          client: 'files',\n          variables: {\n            input: {\n              key: infoDelete.data.item.url.key,\n              idSource: infoDelete.data.itemId,\n              fileId: infoDelete.data.item.id,\n              location: infoDelete.data.typeItem,\n            },\n          },\n        })\n        .then(() => {\n          this.$emit('updateHistory');\n          this.modalHandlerDelete({\n            isOpen: false,\n            isLoading,\n            message,\n            infoDelete,\n          });\n        })\n        .catch(() => {\n          const error =\n            'No se pudo eliminar el archivo, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    deleteFileWhitOutModal(key) {\n      const input = { key };\n      this.$apollo\n        .mutate({\n          client: 'files',\n          mutation: DELETE_FILE,\n          variables: {\n            input,\n          },\n        })\n        .catch(() => {\n          const error =\n            'No se pudo eliminar el archivo, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n  },\n};\n","import gql from 'graphql-tag';\n\nexport const UPLOAD_FILE = gql`\n  mutation UploadFile($input: TypeFileInput!) {\n    uploadFile(upFile: $input) {\n      id\n      name\n      fileExtension\n      url {\n        link\n        key\n      }\n      description\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n      size\n    }\n  }\n`;\n\nexport const UPLOAD_PROFILE_PHOTO = gql`\n  mutation uploadProfilePhoto($input: FileInput!) {\n    uploadProfilePhoto(upFile: $input) {\n      link\n    }\n  }\n`;\n\nexport const DELETE_FILE = gql`\n  mutation DeleteFile($input: DeleteFile!) {\n    deleteFile(deleteFile: $input)\n  }\n`;\n\nexport const UPDATE_DESCRIPTION_FILE = gql`\n  mutation UpdateDescriptionFile($input: descriptionInput!) {\n    updateDescriptionFile(descriptionInput: $input) {\n      id\n      name\n      url {\n        key\n        link\n      }\n      description\n      size\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n`;\n","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalFile.vue?vue&type=style&index=0&id=4b959b06&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalNote.vue?vue&type=style&index=0&id=0889c011&lang=scss&scoped=true&\""],"sourceRoot":""}