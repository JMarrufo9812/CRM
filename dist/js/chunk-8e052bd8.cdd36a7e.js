(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e052bd8"],{"20e3":function(n,t,e){},7029:function(n,t,e){"use strict";e.d(t,"b",(function(){return u})),e.d(t,"g",(function(){return p})),e.d(t,"a",(function(){return v})),e.d(t,"e",(function(){return y})),e.d(t,"c",(function(){return f})),e.d(t,"d",(function(){return b})),e.d(t,"f",(function(){return h}));var a,i,s,c,o,r,d,l=e("8785"),m=e("5184"),u=Object(m["a"])(a||(a=Object(l["a"])(["\n  query getContacts($filters: FilterContacts, $importId: ID) {\n    contacts(filters: $filters, importId: $importId) {\n      count\n      informationBar {\n        totalCount\n        contactsWithOpenDeals\n        contactsWithWonDeals\n      }\n      list {\n        id\n        name\n        email\n        phones\n        isClient\n        socialMedias\n        birthday\n        createdAt\n        updatedAt\n        customForms\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        contactCounts {\n          openDeals\n          closedDeals\n          lostDeals\n          wonDeals\n          emailMessages\n          totalActivities\n          doneActivities\n          undoneActivities\n          files\n          notes\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        tags {\n          id\n          name\n          color\n          order\n        }\n        companies {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),p=Object(m["a"])(i||(i=Object(l["a"])(["\n  query getContacts($filters: FilterContacts, $importId: ID) {\n    searchContacts: contacts(filters: $filters, importId: $importId) {\n      list {\n        id\n        name\n        companies {\n          id\n          name\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n"]))),v=Object(m["a"])(s||(s=Object(l["a"])(["\n  query GetContact($contactId: ID!) {\n    contact(contactId: $contactId) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      customForms\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      enterprise {\n        id\n        name\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n      createdAt\n      isDelete\n    }\n  }\n"]))),y=Object(m["a"])(c||(c=Object(l["a"])(["\n  query GetContactHistory($contactId: ID!) {\n    contactHistory: contact(contactId: $contactId) {\n      id\n      name\n      email\n      files\n      import {\n        id\n      }\n      activityEmailStream {\n        id\n        flow\n        users {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n      }\n      activityStream {\n        id\n        flow\n        users {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        companies {\n          id\n          name\n        }\n        deals {\n          id\n          title\n        }\n        customs {\n          id\n          label\n        }\n      }\n      notes {\n        id\n        content\n        type\n        createdAt\n        userTags {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        comments {\n          id\n          comment\n          createdAt\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          userTags {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n        }\n      }\n      activities {\n        id\n        title\n        status\n        start\n        end\n        location\n        description\n        deal {\n          id\n          title\n        }\n        contacts {\n          id\n          name\n        }\n        companies {\n          id\n          name\n        }\n        type {\n          id\n          name\n          color\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        notes {\n          id\n          content\n          type\n          userTags {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdAt\n          comments {\n            id\n            comment\n            userTags {\n              id\n            }\n            createdBy {\n              id\n              user {\n                id\n                name\n                lastName\n              }\n            }\n            createdAt\n          }\n        }\n        completedDate\n        createdAt\n        isAllDay\n        guests\n      }\n    }\n  }\n"]))),f=Object(m["a"])(o||(o=Object(l["a"])(["\n  query getContactsToEmail($filters: FilterContacts) {\n    contacts(filters: $filters) {\n      list {\n        id\n        name\n        email\n        birthday\n        companies {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),b=Object(m["a"])(r||(r=Object(l["a"])(["\n  query getContactsToInvites($filters: FilterContacts) {\n    contacts(filters: $filters) {\n      list {\n        id\n        name\n        email\n      }\n    }\n  }\n"]))),h=Object(m["a"])(d||(d=Object(l["a"])(["\n  query DuplicateContacts {\n    duplicateContacts {\n      list {\n        id\n        name\n        email\n        phones\n        companies {\n          id\n          name\n        }\n        contactCounts {\n          openDeals\n          totalActivities\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdAt\n      }\n    }\n  }\n"])))},"8b3e":function(n,t,e){"use strict";e.d(t,"a",(function(){return m})),e.d(t,"f",(function(){return u})),e.d(t,"c",(function(){return p})),e.d(t,"d",(function(){return v})),e.d(t,"b",(function(){return y})),e.d(t,"e",(function(){return f}));var a,i,s,c,o,r,d=e("8785"),l=e("5184"),m=Object(l["a"])(a||(a=Object(d["a"])(["\n  query getCompanies($filters: FilterCompanies, $importId: ID) {\n    companies(filters: $filters, importId: $importId) {\n      count\n      informationBar {\n        totalCount\n        companiesWithOpenDeals\n        companiesWithWonDeals\n      }\n      list {\n        id\n        name\n        address\n        website\n        phones\n        socialMedias\n        createdAt\n        updatedAt\n        customForms\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        companyCounts {\n          openDeals\n          closedDeals\n          lostDeals\n          wonDeals\n          emailMessages\n          totalActivities\n          doneActivities\n          undoneActivities\n          files\n          notes\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        tags {\n          id\n          name\n          color\n          order\n        }\n        contacts {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),u=Object(l["a"])(i||(i=Object(d["a"])(["\n  query getCompanies($filters: FilterCompanies) {\n    searchCompanies: companies(filters: $filters) {\n      count\n      list {\n        id\n        name\n        owner {\n          id\n        }\n      }\n    }\n  }\n"]))),p=Object(l["a"])(s||(s=Object(d["a"])(["\n  query getCompany($companyId: ID!) {\n    company(companyId: $companyId) {\n      id\n      name\n      address\n      website\n      phones\n      customForms\n      socialMedias\n      files\n      isDelete\n      tags {\n        id\n        name\n        color\n        order\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      contacts {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n"]))),v=Object(l["a"])(c||(c=Object(d["a"])(["\n  query getCompanyHistory($companyId: ID!) {\n    companyHistory: company(companyId: $companyId) {\n      id\n      name\n      files\n      import {\n        id\n      }\n      activityStream {\n        id\n        flow\n        users {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        contacts {\n          id\n          name\n        }\n        deals {\n          id\n          title\n        }\n        customs {\n          id\n          label\n        }\n      }\n      notes {\n        id\n        content\n        type\n        userTags {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        comments {\n          id\n          comment\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdAt\n          userTags {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n        }\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdAt\n      }\n      activities {\n        id\n        title\n        status\n        start\n        end\n        location\n        description\n        deal {\n          id\n          title\n        }\n        contacts {\n          id\n          name\n        }\n        companies {\n          id\n          name\n        }\n        type {\n          id\n          name\n          color\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        notes {\n          id\n          content\n          type\n          userTags {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdAt\n          comments {\n            id\n            comment\n            userTags {\n              id\n            }\n            createdBy {\n              id\n              user {\n                id\n                name\n                lastName\n              }\n            }\n            createdAt\n          }\n        }\n        completedDate\n        createdAt\n        isAllDay\n        guests\n      }\n    }\n  }\n"]))),y=Object(l["a"])(o||(o=Object(d["a"])(["\n  query getCompaniesToActivity($filters: FilterCompanies) {\n    companies(filters: $filters) {\n      count\n      list {\n        id\n        name\n      }\n    }\n  }\n"]))),f=Object(l["a"])(r||(r=Object(d["a"])(["\n  query DuplicateCompanies {\n    duplicateCompanies {\n      list {\n        id\n        name\n        address\n        contacts {\n          id\n          name\n        }\n        companyCounts {\n          openDeals\n          totalActivities\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdAt\n      }\n    }\n  }\n"])))},"949a":function(n,t,e){"use strict";e.d(t,"g",(function(){return v})),e.d(t,"f",(function(){return y})),e.d(t,"e",(function(){return f})),e.d(t,"b",(function(){return b})),e.d(t,"i",(function(){return h})),e.d(t,"d",(function(){return C})),e.d(t,"a",(function(){return I})),e.d(t,"h",(function(){return g})),e.d(t,"c",(function(){return O}));var a,i,s,c,o,r,d,l,m,u=e("8785"),p=e("5184"),v=Object(p["a"])(a||(a=Object(u["a"])(["\n  mutation syncronizeGoogleCalendar($codeToken: String!) {\n    syncronizeGoogleCalendar(codeToken: $codeToken) {\n      success\n      email\n    }\n  }\n"]))),y=Object(p["a"])(i||(i=Object(u["a"])(["\n  mutation setCalendar($calendarId: String!) {\n    setPrimaryCalendar(calendarId: $calendarId) {\n      success\n      calendarSummary\n    }\n  }\n"]))),f=Object(p["a"])(s||(s=Object(u["a"])(["\n  mutation desynchronizeGoogleCalendar {\n    desynchronizeGoogleCalendar\n  }\n"]))),b=Object(p["a"])(c||(c=Object(u["a"])(["\n  mutation createActivityType($activityTypeInput: activityTypeCreateInput!) {\n    createActivityType(activityTypeInput: $activityTypeInput) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),h=Object(p["a"])(o||(o=Object(u["a"])(["\n  mutation updateActivityType($activityTypeInput: activityTypeUpdateInput!) {\n    updateActivityType(activityTypeInput: $activityTypeInput) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),C=Object(p["a"])(r||(r=Object(u["a"])(["\n  mutation deleteActivityType($activityTypeId: ID!) {\n    deleteActivityType(activityTypeId: $activityTypeId) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),I=Object(p["a"])(d||(d=Object(u["a"])(["\n  mutation createActivity($activityInput: activityCreateInput!) {\n    createActivity(activityInput: $activityInput) {\n      id\n      title\n      status\n      start\n      end\n      location\n      description\n      createdAt\n      isAllDay\n      deal {\n        id\n        title\n      }\n      contacts {\n        id\n        name\n      }\n      companies {\n        id\n        name\n      }\n      type {\n        id\n        name\n        color\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      guests\n    }\n  }\n"]))),g=Object(p["a"])(l||(l=Object(u["a"])(["\n  mutation updateActivity($activityInput: activityUpdateInput!) {\n    updateActivity(activityInput: $activityInput) {\n      id\n      title\n      status\n      start\n      end\n      location\n      description\n      createdAt\n      isAllDay\n      deal {\n        id\n        title\n      }\n      contacts {\n        id\n        name\n      }\n      companies {\n        id\n        name\n      }\n      type {\n        id\n        name\n        color\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      guests\n    }\n  }\n"]))),O=Object(p["a"])(m||(m=Object(u["a"])(["\n  mutation deleteActivities($activities: [deleteActivityInput!]!) {\n    deleteActivities(activities: $activities) {\n      id\n    }\n  }\n"])))},a74f:function(n,t,e){"use strict";e("20e3")},d93c:function(n,t,e){"use strict";e.r(t);var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("v-card",{staticClass:"my-4",attrs:{width:"95%"}},[e("ActionTemplate",{attrs:{action:n.item,typeItem:n.typeItem,ownerId:n.ownerId,isLoading:n.isLoadingComplete},on:{remove:n.removeConfirm,edit:n.editEvent,done:n.changeStatus,updateHistory:n.updateHistory}}),e("BaseModalDelete",{attrs:{modalHandler:n.modalDelete},on:{cancel:n.modalHandlerDelete,confirm:n.remove}}),e("ModalEffectiveHistory",{attrs:{isOpen:n.isOpenModal,isLoading:n.isLoadingComplete,reset:!n.isLoadingComplete},on:{save:n.saveComplete,cancel:n.cancelComplete}})],1)],1)},i=[],s=e("5530"),c=(e("d3b7"),e("3ca3"),e("ddb0"),e("ac1f"),e("1276"),function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-card",{attrs:{flat:""}},[e("v-card-title",{staticClass:"pt-1 pb-2 action-title"},[n.isLoading?e("v-progress-circular",{staticClass:"mr-2",attrs:{indeterminate:"",color:"primary",size:20}}):[(n.canEdit||n.canEditOthers)&&!n.action.isDelete&&n.isMe?e("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:n._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[e("v-simple-checkbox",n._g(n._b({attrs:{color:n.isComplete(n.action.status)?"success":"primary","on-icon":"mdi-checkbox-marked-circle","off-icon":"mdi-checkbox-blank-circle-outline",value:n.isComplete(n.action.status)},on:{click:function(t){return n.changeStatus(n.action.id,n.action.status)}}},"v-simple-checkbox",i,!1),a))]}}],null,!1,1829682088)},[e("span",[n._v(" "+n._s(n.isComplete(n.action.status)?"Desmarcar":"Completar")+" ")])]):e("span",{staticClass:"mr-1"},[e("v-icon",{attrs:{disabled:!((n.canEdit||n.canEditOthers)&&!n.action.isDelete)||!n.isMe}},[n._v(" "+n._s(n.isComplete(n.action.status)?"mdi-checkbox-marked-circle":"mdi-checkbox-blank-circle-outline")+" ")])],1)],e("span",{style:n.isComplete(n.action.status)?"text-decoration-line: line-through;":""},[n._v(" "+n._s(n.action.title)+" ")]),e("v-spacer"),(n.canEdit||n.canEditOthers)&&!n.action.isDelete&&n.isMe?e("v-menu",{attrs:{bottom:"","offset-y":"",left:""},scopedSlots:n._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[e("v-btn",n._g(n._b({attrs:{icon:"",disabled:!((n.canEdit||n.canEditOthers)&&!n.action.isDelete)||!n.isMe}},"v-btn",i,!1),a),[e("v-icon",{attrs:{color:"primary"}},[n._v("mdi-dots-vertical")])],1)]}}],null,!1,3796040122)},[e("v-list",[e("v-list-item",{on:{click:n.edit}},[e("v-list-item-title",[n._v("Editar")])],1),e("v-list-item",{on:{click:function(t){return n.changeStatus(n.action.id,n.action.status)}}},[e("v-list-item-title",[n._v(" "+n._s(n.isComplete(n.action.status)?"Marcar como incompleta":"Marcar como completada")+" ")])],1),e("v-list-item",{on:{click:function(t){return n.remove()}}},[e("v-list-item-title",[n._v("Eliminar")])],1)],1)],1):n._e()],2),n.action.description&&n.action.description.length>0&&"<p></p>"!==n.action.description?e("v-card-text",{staticClass:"pb-0 mb-0",domProps:{innerHTML:n._s(n.action.description)}}):n._e(),e("v-card-subtitle",{staticClass:"d-flex py-0"},["PENDING"!==n.action.status?[e("span",{staticClass:"mr-1"},[n._v(" completada como ")]),e("span",{staticClass:"font-weight-bold mr-1",class:"EFFECTIVE"===n.action.status?"success--text":"error--text"},[n._v(" "+n._s(n.getStatus(n.action.status))+" ")]),e("span",{staticClass:"font-weight-bold"},[n._v(" "+n._s(n._f("timeZoneFromNow")(n.action.completedDate))+" ")])]:[e("div",{staticClass:"mt-3",class:{"mr-1":n.canEdit||n.canEditOthers}},[e("span",[n._v(" Programada para ")]),n.action.isAllDay?e("span",{staticClass:"font-weight-bold"},[n._v(" "+n._s("el "+n.formatDate(n.action.start.split(" ")[0]))+" ")]):e("span",{staticClass:"font-weight-bold"},[n._v(" "+n._s(n._f("timeZoneFromNow")(n.action.start))+" ")])])]],2),e("v-card-subtitle",{staticClass:"py-0"},[1===n.action.contacts.length?e("span",{class:{"mr-4":(n.canEdit||n.canEditOthers)&&!n.action.isDelete}},[e("v-icon",{staticClass:"mb-1",attrs:{small:""}},[n._v("mdi-account")]),n._v(" "+n._s(n.action.contacts[0].name)+" ")],1):n._e(),n.action.contacts.length>1?e("v-menu",{attrs:{"allow-overflow":""},scopedSlots:n._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[e("v-tooltip",{attrs:{top:"",color:"white"},scopedSlots:n._u([{key:"activator",fn:function(t){var s=t.on;return[e("v-chip",n._g(n._b({staticClass:"ml-1 pa-1",attrs:{outlined:"",small:""}},"v-chip",i,!1),Object.assign({},s,a)),[e("v-icon",{attrs:{"x-small":""}},[n._v("mdi-account")]),n._v(" + "+n._s(n.action.contacts.length)+" ")],1)]}}],null,!0)},[e("span",{staticClass:"black--text"},[n._v(" Esta actividad cuenta con más de un contacto has click para ver ")])])]}}],null,!1,2457371953)},[e("v-list",n._l(n.action.contacts,(function(t,a){return e("v-list-item",{key:a,attrs:{dense:""}},[e("v-icon",{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-account")]),e("v-list-item-title",[n._v(n._s(t.name))])],1)})),1)],1):n._e(),1===n.action.companies.length?e("span",{staticClass:"ml-4"},[e("v-icon",{staticClass:"mb-1",attrs:{small:""}},[n._v("mdi-domain")]),n._v(" "+n._s(n.action.companies[0].name)+" ")],1):n._e(),n.action.companies.length>1?e("v-menu",{attrs:{"allow-overflow":""},scopedSlots:n._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[e("v-tooltip",{attrs:{top:"",color:"white"},scopedSlots:n._u([{key:"activator",fn:function(t){var s=t.on;return[e("v-chip",n._g(n._b({staticClass:"ml-1 pa-1",attrs:{outlined:"",small:""}},"v-chip",i,!1),Object.assign({},s,a)),[e("v-icon",{attrs:{"x-small":""}},[n._v("mdi-domain")]),n._v(" + "+n._s(n.action.companies.length)+" ")],1)]}}],null,!0)},[e("span",{staticClass:"black--text"},[n._v(" Esta actividad cuenta con más de un contacto has click para ver ")])])]}}],null,!1,492396578)},[e("v-list",n._l(n.action.companies,(function(t,a){return e("v-list-item",{key:a,attrs:{dense:""}},[e("v-icon",{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-domain")]),e("v-list-item-title",[n._v(n._s(t.name))])],1)})),1)],1):n._e(),n.action.deal?e("span",{staticClass:"ml-4"},[e("v-icon",{staticClass:"mb-1",attrs:{small:""}},[n._v("mdi-handshake")]),n._v(" "+n._s(n.action.deal.title)+" ")],1):n._e()],1),e("v-card-subtitle",{staticClass:"pt-0 pb-2 pl-4"},[n._v(" Creado por "+n._s(n.action.owner.user.name)+" "+n._s(n.action.owner.user.lastName)+" "+n._s(n._f("timeZoneFromNow")(n.action.createdAt))+" ")]),n.action.notes.length>0?e("v-card-text",[e("Note",{attrs:{item:n.action.notes[0],typeItem:"ACTION",itemId:n.action.id,comments:!1},on:{updateHistory:n.updateHistory}})],1):n._e()],1)}),o=[],r=e("c1df"),d=e.n(r),l=e("4b58"),m=e("9685"),u=e("891c"),p=e("ee2e"),v={name:"ActionTemplate",props:{action:{type:Object,required:!0,default:function(){return{notes:[]}}},typeItem:{type:String,required:!0,default:"CONTACT"},ownerId:{type:String,default:""},isLoading:{type:Boolean}},components:{Note:function(){return e.e("chunk-69415771").then(e.bind(null,"1648"))}},data:function(){return{PERMISSIONS_CONTACTS:p["e"],PERMISSIONS_COMPANIES:p["d"],PERMISSIONS_DEALS:p["f"],PERMISSIONS_ACTIVITIES:p["a"],UPDATE:u["r"],subject:l["b"]}},computed:{isMe:function(){return m["a"].can(u["r"],Object(l["b"])(p["a"],{authorId:this.action.owner.id||""}))},canEdit:function(){return"CONTACT"===this.typeItem?m["a"].can(u["r"],Object(l["b"])(p["e"],{authorId:this.ownerId||""})):"COMPANY"===this.typeItem?m["a"].can(u["r"],Object(l["b"])(p["d"],{authorId:this.ownerId||""})):"DEAL"===this.typeItem&&m["a"].can(u["r"],Object(l["b"])(p["f"],{authorId:this.ownerId||""}))},canEditOthers:function(){return"CONTACT"===this.typeItem?this.canEdit?m["a"].can(u["s"],p["e"]):m["a"].can(u["s"],p["e"])&&!m["a"].can(u["s"],Object(l["b"])(p["e"],{authorId:this.ownerId||""})):"COMPANY"===this.typeItem?this.canEdit?m["a"].can(u["s"],p["d"]):m["a"].can(u["s"],p["d"])&&!m["a"].can(u["s"],Object(l["b"])(p["d"],{authorId:this.ownerId||""})):"DEAL"===this.typeItem&&(this.canEdit?m["a"].can(u["s"],p["f"]):m["a"].can(u["s"],p["f"])&&!m["a"].can(u["s"],Object(l["b"])(p["f"],{authorId:this.ownerId||""})))}},methods:{formatDate:function(n){return d()(n).format("LL")},updateHistory:function(){this.$emit("updateHistory")},isComplete:function(n){return"PENDING"!==n},getStatus:function(n){if("PENDING"!==n){if("EFFECTIVE"===n)return"efectiva";if("INEFFECTIVE"===n)return"inefectiva"}return""},edit:function(){this.$emit("edit")},remove:function(){this.$emit("remove")},changeStatus:function(n,t){this.$emit("done",n,this.isComplete(t))}}},y=v,f=(e("a74f"),e("0c7c")),b=e("6544"),h=e.n(b),C=e("8336"),I=e("b0af"),g=e("99d9"),O=e("cc20"),_=e("132d"),A=e("8860"),D=e("da13"),E=e("5d23"),N=e("e449"),j=e("490a"),T=e("9e88"),w=e("2fa4"),$=e("3a2f"),S=Object(f["a"])(y,c,o,!1,null,"d685ff8c",null),M=S.exports;h()(S,{VBtn:C["a"],VCard:I["a"],VCardSubtitle:g["b"],VCardText:g["c"],VCardTitle:g["d"],VChip:O["a"],VIcon:_["a"],VList:A["a"],VListItem:D["a"],VListItemTitle:E["c"],VMenu:N["a"],VProgressCircular:j["a"],VSimpleCheckbox:T["a"],VSpacer:w["a"],VTooltip:$["a"]});var k=e("1e6d"),L=e("7029"),F=e("949a"),H=e("8b3e"),x=e("6675"),V=e("1891"),q={name:"Action",components:{ActionTemplate:M,ModalEffectiveHistory:function(){return e.e("chunk-2dc90223").then(e.bind(null,"6dab"))}},mixins:[V["b"],V["a"],k["a"]],props:{item:{type:Object,required:!0},itemId:{type:String,default:"",required:!0},typeItem:{type:String,required:!0,default:"CONTACT"},ownerId:{type:String,default:""}},data:function(){return{isOpenModal:!1,isLoadingComplete:!1}},methods:{removeConfirm:function(){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{nameItem:"La actividad ".concat(this.item.title),text:"será eliminada"},infoDelete:{}})},remove:function(n){var t=this,e=n.isOpen,a=n.isLoading,i=n.message,s=n.infoDelete;this.modalHandlerDelete({isOpen:e,isLoading:a,message:i,infoDelete:s});var c=this.item.id;this.$apollo.mutate({mutation:F["c"],variables:{activities:[{id:c}]}}).then((function(){t.modalHandlerDelete({isOpen:!1,isLoading:a,message:i,infoDelete:s}),t.$emit("updateHistory")})).catch((function(){}))},editEvent:function(){var n=this.item,t=Object(s["a"])(Object(s["a"])({},n),{},{start:n.isAllDay?n.start.split(" ",1)[0]:n.start,end:n.isAllDay?null:n.end});this.changeModal({id:"createActivity",status:!0,isEdit:!0,item:t})},changeStatus:function(n,t){t?this.saveEventIncomplete(n):this.isOpenModal=!0},typeHistory:function(n){return"COMPANY"===n?{query:H["d"],variables:{companyId:this.itemId}}:"DEAL"===n?{query:x["d"],variables:{dealId:this.itemId}}:{query:L["e"],variables:{contactId:this.itemId}}},saveCompleteMutation:function(n){var t=this,e=n.id,a=n.status,i=n.comments;this.isLoadingComplete=!0,this.$apollo.mutate({mutation:F["h"],variables:{activityInput:{id:e,status:a,comments:i}}}).then((function(){t.$emit("updateHistory"),t.isLoadingComplete=!1,t.isOpenModal=!1})).catch((function(){t.isLoadingComplete=!1,t.isOpenModal=!1;var n="No se pudo actualizar el estado de la actividad, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:n})}))},saveEventIncomplete:function(n){this.saveCompleteMutation({id:n,status:"PENDING"})},cancelComplete:function(){this.isOpenModal=!1},saveComplete:function(n){var t=n.status,e=n.comments;this.isLoadingComplete=!0;var a=this.item.id;t?this.saveCompleteMutation({id:a,status:"EFFECTIVE"}):this.saveCompleteMutation({id:a,status:"INEFFECTIVE",comments:e})},updateHistory:function(){this.$emit("updateHistory")}}},B=q,P=Object(f["a"])(B,a,i,!1,null,null,null);t["default"]=P.exports;h()(P,{VCard:I["a"]})}}]);
//# sourceMappingURL=chunk-8e052bd8.cdd36a7e.js.map