(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cdf19d1"],{2569:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var a=t("6675"),s={data:function(){return{isLoadingGet:!0,isErrorGetReasons:!1,infoError:{icon:"",title:"",message:""}}},watch:{lostReasons:function(n){n&&(this.isLoadingGet=!1)}},apollo:{lostReasons:{query:a["e"],fetchPolicy:"no-cache",variables:{filters:{orderBy:"desc"}},error:function(){this.isErrorGetReasons=!0,this.infoError={icon:"mdi-alert-outline",title:"Error",message:"No se ha podido cargar las razones de pérdida, contacte con soporte"}}}}}},"283c":function(n,e,t){"use strict";t("4155")},4155:function(n,e,t){},"59c9":function(n,e,t){"use strict";t.d(e,"c",(function(){return h})),t.d(e,"i",(function(){return v})),t.d(e,"e",(function(){return R})),t.d(e,"h",(function(){return D})),t.d(e,"g",(function(){return b})),t.d(e,"b",(function(){return y})),t.d(e,"a",(function(){return C})),t.d(e,"d",(function(){return $})),t.d(e,"f",(function(){return O})),t.d(e,"j",(function(){return x})),t.d(e,"k",(function(){return j}));var a,s,i,o,r,l,d,c,u,m,p,g=t("8785"),f=t("5184"),h=Object(f["a"])(a||(a=Object(g["a"])(["\n  mutation CreateDeal($input: CreateDeal!) {\n    createDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      rottenTime\n      owner {\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      company {\n        id\n        name\n      }\n      contact {\n        id\n        name\n      }\n      stage {\n        id\n        name\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n"]))),v=Object(f["a"])(s||(s=Object(g["a"])(["\n  mutation UpdateDeal($input: UpdateDeal!) {\n    updateDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      contact {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n"]))),R=Object(f["a"])(i||(i=Object(g["a"])(["\n  mutation deletedDeals($input: [DeleteDealInput!]!) {\n    deletedDeals(deals: $input) {\n      id\n    }\n  }\n"]))),D=Object(f["a"])(o||(o=Object(g["a"])(["\n  mutation trashDeals($input: [DeleteDealInput!]!) {\n    trashDeals(deals: $input) {\n      id\n    }\n  }\n"]))),b=Object(f["a"])(r||(r=Object(g["a"])(["\n  mutation restoreDeals($input: [DeleteDealInput!]!) {\n    restoreDeals(deals: $input) {\n      id\n    }\n  }\n"]))),y=Object(f["a"])(l||(l=Object(g["a"])(["\n  mutation ChangeDealStage($input: ChangeStage!) {\n    changeDealStage(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      dateEntryIntoStage\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n        maxDays\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n"]))),C=Object(f["a"])(d||(d=Object(g["a"])(["\n  mutation changeDealPipeline($input: changePipelineInput!) {\n    changeDealPipeline(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n"]))),$=Object(f["a"])(c||(c=Object(g["a"])(["\n  mutation CreateLostReason($input: lostReasonCreateInput!) {\n    createLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n"]))),O=Object(f["a"])(u||(u=Object(g["a"])(["\n  mutation DeleteLostReason($lostReasonId: ID!) {\n    deleteLostReason(lostReasonId: $lostReasonId) {\n      id\n      reason\n    }\n  }\n"]))),x=Object(f["a"])(m||(m=Object(g["a"])(["\n  mutation UpdateLostReason($input: lostReasonUpdateInput!) {\n    updateLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n"]))),j=Object(f["a"])(p||(p=Object(g["a"])(["\n  mutation assignDeals($dealListAssign: DealListAssign!) {\n    assignDeals(dealListAssign: $dealListAssign)\n  }\n"])))},6675:function(n,e,t){"use strict";t.d(e,"b",(function(){return u})),t.d(e,"f",(function(){return m})),t.d(e,"a",(function(){return p})),t.d(e,"d",(function(){return g})),t.d(e,"e",(function(){return f})),t.d(e,"c",(function(){return h}));var a,s,i,o,r,l,d=t("8785"),c=t("5184"),u=Object(c["a"])(a||(a=Object(d["a"])(["\n  query GetDeals($filters: FilterDeals, $importId: ID) {\n    deals(filters: $filters, importId: $importId) {\n      count\n      informationBar {\n        openDeals\n        wonDealsSum\n        predictionSales\n        predictionIncome\n      }\n      list {\n        id\n        title\n        value\n        status\n        expectedCloseDate\n        dateStatus\n        activity\n        files\n        customForms\n        rottenTime\n        changeTime\n        createdAt\n        updatedAt\n        wonTime\n        lostTime\n        customForms\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        dealCounts {\n          files\n          notes\n          emailMessages\n          activities {\n            total\n            done\n            undone\n          }\n        }\n        lostDeal {\n          id\n          lostReason {\n            id\n            reason\n          }\n        }\n        exchangeCurrency {\n          id\n          name\n          code\n          icon\n        }\n        company {\n          id\n          name\n        }\n        contact {\n          id\n          name\n        }\n        owner {\n          id\n          user {\n            name\n            lastName\n          }\n        }\n        stage {\n          id\n          name\n          order\n        }\n        pipeline {\n          id\n          name\n          stages {\n            id\n            name\n            order\n          }\n        }\n        tags {\n          id\n          name\n          color\n          order\n        }\n      }\n    }\n  }\n"]))),m=Object(c["a"])(s||(s=Object(d["a"])(["\n  query GetDeals($filters: FilterDeals) {\n    deals(filters: $filters) {\n      count\n      list {\n        id\n        title\n        stage {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        contact {\n          id\n          name\n        }\n        pipeline {\n          id\n          name\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n"]))),p=Object(c["a"])(i||(i=Object(d["a"])(["\n  query getDeal($dealId: ID!) {\n    deal(dealId: $dealId) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n        owner {\n          id\n        }\n      }\n      contact {\n        id\n        name\n        email\n        isDelete\n        owner {\n          id\n        }\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n"]))),g=Object(c["a"])(o||(o=Object(d["a"])(["\n  query getDealHistory($dealId: ID!) {\n    dealHistory: deal(dealId: $dealId) {\n      id\n      title\n      files\n      import {\n        id\n      }\n      activityStream {\n        id\n        flow\n        customs {\n          id\n          label\n        }\n        users {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        companies {\n          id\n          name\n        }\n        contacts {\n          id\n          name\n        }\n        stages {\n          id\n          name\n        }\n        pipelines {\n          id\n          name\n        }\n      }\n      notes {\n        id\n        content\n        type\n        userTags {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdAt\n        comments {\n          id\n          comment\n          userTags {\n            id\n          }\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdAt\n        }\n      }\n      activities {\n        id\n        title\n        status\n        start\n        end\n        location\n        description\n        deal {\n          id\n          title\n        }\n        contacts {\n          id\n          name\n        }\n        companies {\n          id\n          name\n        }\n        type {\n          id\n          name\n          color\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        notes {\n          id\n          content\n          type\n          userTags {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdAt\n          comments {\n            id\n            comment\n            userTags {\n              id\n            }\n            createdBy {\n              id\n              user {\n                id\n                name\n                lastName\n              }\n            }\n            createdAt\n          }\n        }\n        completedDate\n        createdAt\n        isAllDay\n        guests\n      }\n    }\n  }\n"]))),f=Object(c["a"])(r||(r=Object(d["a"])(["\n  query readLostReasons($filters: Filter) {\n    lostReasons(filters: $filters) {\n      id\n      reason\n    }\n  }\n"]))),h=Object(c["a"])(l||(l=Object(d["a"])(["\n  query getDealsToActivity($filters: FilterDeals) {\n    deals(filters: $filters) {\n      count\n      list {\n        id\n        title\n        pipeline {\n          id\n          name\n        }\n        stage {\n          id\n          name\n        }\n      }\n    }\n  }\n"])))},7679:function(n,e,t){"use strict";t("c79c");var a=t("e4d3"),s=t("7560"),i=t("80d2"),o=t("afdd"),r=t("326d"),l=t("58df");e["a"]=Object(l["a"])(a["a"],s["a"]).extend({name:"v-edit-dialog",props:{cancelText:{default:"Cancel"},large:Boolean,eager:Boolean,persistent:Boolean,saveText:{default:"Save"},transition:{type:String,default:"slide-x-reverse-transition"}},data(){return{isActive:!1}},watch:{isActive(n){n?(this.$emit("open"),setTimeout(this.focus,50)):this.$emit("close")}},methods:{cancel(){this.isActive=!1,this.$emit("cancel")},focus(){const n=this.$refs.content.querySelector("input");n&&n.focus()},genButton(n,e){return this.$createElement(o["a"],{props:{text:!0,color:"primary",light:!0},on:{click:n}},e)},genActions(){return this.$createElement("div",{class:"v-small-dialog__actions"},[this.genButton(this.cancel,this.cancelText),this.genButton(()=>{this.save(this.returnValue),this.$emit("save")},this.saveText)])},genContent(){return this.$createElement("div",{staticClass:"v-small-dialog__content",on:{keydown:n=>{n.keyCode===i["z"].esc&&this.cancel(),n.keyCode===i["z"].enter&&(this.save(this.returnValue),this.$emit("save"))}},ref:"content"},[this.$slots.input])}},render(n){return n(r["a"],{staticClass:"v-small-dialog",class:this.themeClasses,props:{contentClass:"v-small-dialog__menu-content",transition:this.transition,origin:"top right",right:!0,value:this.isActive,closeOnClick:!this.persistent,closeOnContentClick:!1,eager:this.eager,light:this.light,dark:this.dark},on:{input:n=>this.isActive=n},scopedSlots:{activator:({on:e})=>n("div",{staticClass:"v-small-dialog__activator",on:e},[n("span",{staticClass:"v-small-dialog__activator__content"},this.$slots.default)])}},[this.genContent(),this.large?this.genActions():null])}})},c197:function(n,e,t){"use strict";t.r(e);var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"d-flex"},[t("v-card",{staticClass:"mr-2 add-lost-reason-box",attrs:{tile:"",width:"19em",height:"28em"}},[t("p",{staticClass:"title-lost-reason-settings text-center"},[n._v(" Configuraciones razones de pérdida para tratos ")]),t("div",{staticClass:"d-flex flex-column px-12 pt-6"},[t("v-text-field",{attrs:{maxlength:"25",counter:"",dense:"",outlined:"",label:"Agregar razón"},model:{value:n.newReason,callback:function(e){n.newReason=e},expression:"newReason"}}),t("v-btn",{attrs:{disabled:n.validateReason,loading:n.isLoadingCreate,color:"secondary"},on:{click:function(e){return n.createReason(n.newReason)}}},[n._v(" Agregar ")])],1)]),t("v-card",{attrs:{tile:"",width:"15.5em",height:"28em"}},[n.isLoadingGet?t("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}}):n._e(),n.isErrorGetReasons?t("BaseErrorComponent",{attrs:{info:n.infoError}}):n._e(),0!==n.lostReasons.length||n.isErrorGetReasons||n.isLoadingGet?n._e():t("p",{staticClass:"text-center px-10 pt-12"},[n._v(" Aún no hay razones de pérdida creadas ")]),n.lostReasons.length>0&&!n.isErrorGetReasons?t("div",{staticClass:"d-flex justify-center py-1"},[t("span",{staticClass:"title-lost-reasons"},[n._v("Razones creadas")])]):n._e(),n.lostReasons.length>0&&!n.isErrorGetReasons?t("v-divider"):n._e(),n.lostReasons.length>0&&!n.isErrorGetReasons?t("v-card",{staticClass:"scroll",attrs:{height:"90%",flat:""}},n._l(n.lostReasons,(function(e,a){return t("v-card",{key:a,staticClass:"d-flex justify-space-between ma-4 py-2"},[t("p",{staticClass:"mb-0 mx-2 reason-text"},[n._v(" "+n._s(e.reason)+" ")]),t("div",{staticClass:"d-flex align-center"},[t("v-btn",{staticClass:"mt-1 mr-2",attrs:{color:"grey",outlined:"","x-small":""},on:{click:function(t){return t.stopPropagation(),n.deleteReasonConfirmation(e.id)}}},[t("v-icon",{attrs:{small:""}},[n._v("mdi-delete")])],1),t("v-edit-dialog",{attrs:{"cancel-text":"Cancelar","save-text":"Guardar",large:""},on:{open:function(t){n.editReason=e.reason},cancel:function(e){n.editReason=""},save:function(t){n.updateReason({id:e.id,reason:n.editReason.trim()})}},scopedSlots:n._u([{key:"input",fn:function(){return[t("v-text-field",{attrs:{value:e.reason,maxlength:"25",label:"Editar","single-line":"",counter:""},model:{value:n.editReason,callback:function(e){n.editReason=e},expression:"editReason"}})]},proxy:!0}],null,!0)},[t("v-btn",{staticClass:"mr-2",attrs:{color:"secondary","x-small":""}},[t("v-icon",{attrs:{small:""}},[n._v(" mdi-pencil ")])],1)],1)],1)])})),1):n._e()],1),t("BaseModalDelete",{attrs:{modalHandler:n.modalDelete},on:{cancel:n.modalHandlerDelete,confirm:n.deleteReason}})],1)},s=[],i=(t("d3b7"),t("3ca3"),t("ddb0"),t("498a"),t("2569")),o=t("1e6d"),r=t("59c9"),l={mixins:[i["a"],o["a"]],components:{BaseErrorComponent:function(){return t.e("chunk-2d0abe3b").then(t.bind(null,"16cc"))}},data:function(){return{lostReasons:[],newReason:"",editReason:"",isLoadingCreate:!1}},computed:{validateReason:function(){return!(null!==this.newReason&&void 0!==this.newReason&&""!==this.newReason&&this.newReason.trim().length>=1)}},methods:{deleteReasonConfirmation:function(n){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{nameItem:"La razón seleccionada",text:"será eliminada"},infoDelete:{lostReasonId:n}})},deleteReason:function(n){var e=this,t=n.isOpen,a=n.isLoading,s=n.message,i=n.infoDelete;this.modalHandlerDelete({isOpen:t,isLoading:a,message:s,infoDelete:i}),this.$apollo.mutate({mutation:r["f"],variables:{lostReasonId:i.lostReasonId}}).then((function(){e.$apollo.queries.lostReasons.refetch(),e.modalHandlerDelete({isOpen:!1,isLoading:a,message:s,infoDelete:i}),e.outData("SUCCESS",{isOpen:!0,color:"success",text:"La razón fue eliminada"})})).catch((function(){var n="No se pudo eliminar la razón de pérdida intente de nuevo o contacte a soporte";e.outData("ERROR",{isOpen:!0,error:n})}))},updateReason:function(n){var e=this;if(n.reason.trim().length>0)this.$apollo.mutate({mutation:r["j"],variables:{input:n}}).then((function(){e.$apollo.queries.lostReasons.refetch(),e.outData("SUCCESS",{isOpen:!0,color:"success",text:"La razón fue actualizada"})})).catch((function(){var n="No se pudo actualizar la razón de pérdida, intente de nuevo o contacte a soporte";e.outData("ERROR",{isOpen:!0,error:n})}));else{var t="Agrega mínimo una letra o un número";this.outData("ERROR",{isOpen:!0,error:t})}},outData:function(n,e){"SUCCESS"===n&&this.$emit("success",e),"ERROR"===n&&this.$emit("error",e)},createReason:function(n){var e=this;this.isLoadingCreate=!0,this.$apollo.mutate({mutation:r["d"],variables:{input:{reason:n}}}).then((function(){e.$apollo.queries.lostReasons.refetch(),e.isLoadingCreate=!1,e.newReason=""})).catch((function(){e.isLoadingCreate=!1;var n="No se pudo crear la razón de pérdida, intente de nuevo o contacte a soporte";e.outData("ERROR",{isOpen:!0,error:n})}))}}},d=l,c=(t("283c"),t("0c7c")),u=t("6544"),m=t.n(u),p=t("8336"),g=t("b0af"),f=t("ce7e"),h=t("7679"),v=t("132d"),R=t("8e36"),D=t("8654"),b=Object(c["a"])(d,a,s,!1,null,"430b2324",null);e["default"]=b.exports;m()(b,{VBtn:p["a"],VCard:g["a"],VDivider:f["a"],VEditDialog:h["a"],VIcon:v["a"],VProgressLinear:R["a"],VTextField:D["a"]})},c79c:function(n,e,t){}}]);
//# sourceMappingURL=chunk-1cdf19d1.ccafde22.js.map