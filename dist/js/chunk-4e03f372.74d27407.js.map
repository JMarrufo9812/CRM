{"version":3,"sources":["webpack:///./src/mixins/dealsMixin.js","webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/vuetify/lib/components/VSkeletonLoader/VSkeletonLoader.js","webpack:///./src/graphql/mutations/dealsMutations.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./src/mixins/permissionGroupMixin.js","webpack:///./node_modules/core-js/modules/es.string.search.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./src/components/deals/SubHeader.vue?13eb","webpack:///src/components/deals/SubHeader.vue","webpack:///./src/components/deals/SubHeader.vue?a078","webpack:///./src/components/deals/SubHeader.vue"],"names":["dealsMixin","data","PERMISSIONS_DEALS","inputsForm","isLoadingDeals","loadingSearch","isLoadingUpdateDeal","modalDeal","isOpen","isLoading","infoError","icon","title","message","filters","search","orderBy","skip","take","sortBy","sortDesc","isDelete","listDeals","informationBarDeals","resultSearchDeals","totalDeals","searchDeal","searchFilters","dealsSelected","watch","value","Object","keys","length","this","getSearchDeals","$emit","computed","menuProps","methods","modalHandlerDeal","createDeal","contact","company","tags","customForms","expectedCloseDate","pipeline","pipelineId","stageId","owner","$apollo","mutate","mutation","CREATE_DEAL","variables","input","id","ownerId","then","updateData","$route","name","updateViewPipeline","params","setTimeout","typeItem","updateHistory","addDeal","catch","error","modalHandlerError","updateDeal","status","comments","lostReason","customForm","undefined","UPDATE_DEAL","modalHandlerLostDeal","query","GET_SEARCH_DEALS","fetchPolicy","deals","list","getDeals","GET_DEALS","importId","filterId","informationBar","map","deal","forEach","count","isErrorDeals","restoreDealsConfirmation","modalHandlerRestore","nameItem","text","infoRestore","restoreDeals","RESTORE_DEALS","update","snackbarHandler","color","finally","deleteDealConfirmation","type","modalHandlerDelete","infoDelete","deleteDeal","DELETE_DEAL","trashDealsConfirmation","trashDeals","TRASH_DEALS","goToProfile","$router","push","module","exports","is","x","y","$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","indexOf","arguments","extend","props","boilerplate","Boolean","loading","tile","transition","types","default","role","$attrs","themeClasses","elevationClasses","$scopedSlots","actions","article","avatar","button","card","chip","heading","image","paragraph","sentences","table","children","$createElement","staticClass","bone","split","generator","genStructure","Array","from","rootTypes","mapBones","genBones","genBone","on","afterEnter","resetStyles","beforeEnter","onBeforeEnter","beforeLeave","onBeforeLeave","leaveCancelled","bones","replace","el","_initialStyle","display","style","setProperty","h","attrs","$listeners","class","classes","measurableStyles","genSkeleton","gql","CHANGE_DEAL_STAGE","CHANGE_DEAL_PIPELINE","CREATE_LOST_REASON","DELETE_LOST_REASON","UPDATE_LOST_REASON","UPDATE_OWNER_DEALS","isRegExp","it","TypeError","permissionGroupMixin","membersGroup","canGroup","method","permission","permissionGroup","ownerCopyId","authorId","ability","can","subject","ALL","GROUP","apollo","GET_USER_LOGGED","userCurrent","fixRegExpWellKnownSymbolLogic","anObject","sameValue","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","O","searcher","call","RegExp","string","res","done","rx","S","previousLastIndex","lastIndex","result","index","wellKnownSymbol","MATCH","METHOD_NAME","error1","error2","$includes","addToUnscopables","render","_vm","_h","_c","_self","_v","_s","_e","isLoadingUpdatePipeline","updatePipeline","isLoadingUpdateStage","updateStage","modalError","staticRenderFns","mixins","components","Stages","ModalValueDeal","MenuCloseDate","MenuChangePipeline","required","UPDATE","PERMISSIONS_GROUP_DEAL","isCentralLoading","dealId","newPipelineId","newStageId","component","VCard","VCardText","VCol","VIcon","VRow","VSkeletonLoader"],"mappings":"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","file":"js/chunk-4e03f372.74d27407.js","sourcesContent":["import {\n  CREATE_DEAL,\n  DELETE_DEAL,\n  UPDATE_DEAL,\n  TRASH_DEALS,\n  RESTORE_DEALS,\n} from '@/graphql/mutations/dealsMutations';\nimport { GET_DEALS, GET_SEARCH_DEALS } from '@/graphql/querys/dealsQuery';\nimport { PERMISSIONS_DEALS } from '@/constants/permissions';\n\nexport const dealsMixin = {\n  data() {\n    return {\n      PERMISSIONS_DEALS,\n      inputsForm: [],\n      isLoadingDeals: false,\n      loadingSearch: false,\n      isLoadingUpdateDeal: false,\n      modalDeal: {\n        isOpen: false,\n        isLoading: false,\n      },\n      infoError: {\n        icon: 'mdi-account-search-outline',\n        title: '',\n        message: 'No se encontraron tratos',\n      },\n      filters: {\n        search: '',\n        orderBy: 'desc',\n        skip: 0,\n        take: 0,\n        sortBy: [],\n        sortDesc: [],\n        isDelete: false,\n      },\n      listDeals: [],\n      informationBarDeals: {},\n      resultSearchDeals: [],\n      totalDeals: 0,\n      searchDeal: '',\n      searchFilters: {\n        search: '',\n        take: 5,\n      },\n      dealsSelected: [],\n    };\n  },\n  watch: {\n    searchDeal(value) {\n      if (value) {\n        if (Object.keys(value).length >= 2) {\n          this.searchFilters.search = value;\n          this.searchFilters.take = 5;\n          this.getSearchDeals();\n        }\n        if (Object.keys(value).length === 0) {\n          // console.log('longitud de busqueda cero');\n          this.searchFilters.search = '';\n          this.searchFilters.take = 0;\n          this.getSearchDeals();\n        }\n      }\n    },\n    isLoadingDeals(value) {\n      this.$emit('isLoadingDeals', value);\n    },\n  },\n  computed: {\n    menuProps() {\n      return !this.searchDeal ? { value: false } : {};\n    },\n  },\n  methods: {\n    modalHandlerDeal({ isOpen, isLoading }) {\n      this.modalDeal = { isOpen, isLoading };\n    },\n    createDeal({\n      title,\n      contact,\n      company,\n      value,\n      tags,\n      customForms,\n      expectedCloseDate,\n      pipeline: { pipelineId, stageId },\n      owner,\n    }) {\n      this.modalHandlerDeal({\n        isOpen: true,\n        isLoading: true,\n      });\n      this.$apollo\n        .mutate({\n          mutation: CREATE_DEAL,\n          variables: {\n            input: {\n              title,\n              tags,\n              customForms,\n              expectedCloseDate,\n              contact: contact?.id ? { id: contact.id } : contact,\n              company: company?.id ? { id: company.id } : company,\n              value,\n              pipelineId,\n              stageId,\n              ownerId: owner.id,\n            },\n          },\n        })\n        .then(({ data: { createDeal } }) => {\n          this.updateData = true;\n          this.modalHandlerDeal({\n            isOpen: false,\n            isLoading: false,\n          });\n          if (this.$route.name === 'pipeline-id') {\n            this.updateViewPipeline(this.$route.params.id);\n          }\n          this.updateData = true;\n\n          setTimeout(() => {\n            this.updateData = false;\n          }, 10);\n\n          this.$emit('updateHistory');\n\n          if (this.typeItem === 'CONTACT' || this.typeItem === 'COMPANY') {\n            this.updateHistory();\n            this.addDeal(createDeal);\n          }\n        })\n        .catch(() => {\n          const error =\n            'No se pudo crear el trato intente de nuevo o contacte al soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    updateDeal({\n      id,\n      value,\n      expectedCloseDate,\n      company,\n      contact,\n      tags,\n      status,\n      comments,\n      lostReason,\n      owner,\n      title,\n      customForm,\n    }) {\n      this.isLoadingUpdateDeal = true;\n      const input = {};\n      input.id = id;\n      if (value || value === 0) {\n        input.value = value;\n      }\n      if (expectedCloseDate || expectedCloseDate !== undefined) {\n        input.expectedCloseDate = expectedCloseDate;\n      }\n      if (company) {\n        input.company = company;\n      }\n      if (contact) {\n        input.contact = contact;\n      }\n      if (tags) {\n        input.tags = tags;\n      }\n      if (owner) {\n        input.ownerId = owner.id;\n      }\n      if (title) {\n        input.title = title;\n      }\n      if (customForm) {\n        input.customForm = customForm;\n      }\n      if (status) {\n        input.status = status;\n        if (status === 'LOST') {\n          input.comments = comments;\n          input.lostReason = lostReason;\n        }\n      }\n\n      this.$apollo\n        .mutate({\n          // Query\n          mutation: UPDATE_DEAL,\n          // Parameters\n          variables: {\n            input,\n          },\n        })\n        .then(({ data: { updateDeal } }) => {\n          if (input.status === 'LOST') {\n            this.modalHandlerLostDeal({ isOpen: false, isLoading: false });\n          }\n          this.$emit('updateItem', updateDeal);\n          this.$emit('updateHistory');\n          // Close edit field\n          this.isLoadingUpdateDeal = false;\n\n          if (this.typeItem === 'CONTACT' || this.typeItem === 'COMPANY') {\n            this.updateHistory();\n            this.addDeal(updateDeal);\n          }\n        })\n        .catch(() => {\n          this.isLoadingUpdateDeal = false;\n          // Error\n          const error =\n            'No se pudo actualizar el trato, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    getSearchDeals() {\n      this.loadingSearch = true;\n      this.$apollo\n        .query({\n          query: GET_SEARCH_DEALS,\n          fetchPolicy: 'no-cache',\n          variables: {\n            filters: this.searchFilters,\n          },\n        })\n        .then(({ data: { deals } }) => {\n          this.resultSearchDeals = deals.list;\n          this.loadingSearch = false;\n        })\n        .catch(() => {\n          this.loadingSearch = false;\n        });\n    },\n    getDeals() {\n      this.isLoadingDeals = true;\n      this.$apollo\n        .query({\n          query: GET_DEALS,\n          fetchPolicy: 'no-cache',\n          variables: {\n            filters: this.filters,\n            importId: this.$route.query.filterId,\n          },\n        })\n        .then(({ data: { deals } }) => {\n          this.isLoadingDeals = false;\n          this.$emit('deals', deals.list);\n          this.$emit('informationBar', deals.informationBar);\n          this.listDeals = deals.list.map((deal) => {\n            if (deal.customForms) {\n              deal.customForms.forEach(({ id, value }) => {\n                // eslint-disable-next-line\n                deal[id] = value;\n              });\n            }\n            return deal;\n          });\n          this.totalDeals = deals.count;\n\n          this.isErrorDeals = false;\n          this.$emit('endUpdateData');\n        })\n        .catch(() => {\n          this.isErrorDeals = true;\n          this.isLoadingDeals = false;\n          this.listDeals = [];\n          this.totalDeals = 0;\n          this.$emit('endUpdateData');\n          this.infoError = {\n            icon: 'mdi-alert-outline',\n            title: 'Error',\n            message:\n              'No se ha podido cargar ningún trato, intente de nuevo o contacte a soporte',\n          };\n        });\n    },\n    restoreDealsConfirmation() {\n      this.modalHandlerRestore({\n        isOpen: true,\n        isLoading: false,\n        message: {\n          title: '¿Seguro que deseas restaurar?',\n          nameItem: 'Los tratos seleccionados',\n          text: 'serán restaurados',\n        },\n        infoRestore: {},\n      });\n    },\n    restoreDeals({ isOpen, isLoading, message, infoRestore }) {\n      this.modalHandlerRestore({\n        isOpen,\n        isLoading,\n        message,\n        infoRestore,\n      });\n      this.$apollo\n        .mutate({\n          mutation: RESTORE_DEALS,\n          variables: {\n            input: this.dealsSelected,\n          },\n          update: () => {\n            // indicamos que se deve de actualizar la vista de contactos\n            this.updateData = true;\n            this.snackbarHandler({\n              isOpen: true,\n              color: 'success',\n              text: 'Los tratos fueron restaurados correctamente',\n            });\n          },\n        })\n        .finally(() => {\n          this.modalHandlerRestore({\n            isOpen: false,\n            isLoading,\n            message,\n            infoRestore,\n          });\n          this.updateData = false;\n        })\n        .catch(() => {\n          const error =\n            'No se pudo restaurar el trato intente de nuevo o contacte al soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    deleteDealConfirmation(type, deals) {\n      this.modalHandlerDelete({\n        isOpen: true,\n        isLoading: false,\n        message: {\n          title: '¿Seguro que deseas mover a la papelera?',\n          nameItem: 'Los tratos seleccionados',\n          text: 'serán movidos a la papelera',\n        },\n        infoDelete: {\n          type,\n          deals,\n        },\n      });\n    },\n    deleteDeal({ isOpen, isLoading, message, infoDelete }) {\n      this.modalHandlerDelete({ isOpen, isLoading, message, infoDelete });\n      this.$apollo\n        .mutate({\n          mutation: DELETE_DEAL,\n          variables: {\n            input: infoDelete.deals,\n          },\n          update: () => {\n            // indicamos que se deve de actualizar la vista de contactos\n            this.updateData = true;\n            this.snackbarHandler({\n              isOpen: true,\n              color: 'success',\n              text: 'Los tratos fueron eliminados correctamente',\n            });\n          },\n        })\n        .finally(() => {\n          this.updateData = false;\n          this.modalHandlerDelete({\n            isOpen: false,\n            isLoading,\n            message,\n            infoDelete,\n          });\n        })\n        .catch(() => {\n          const error =\n            'No se pudo eliminar el trato intente de nuevo o contacte al soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    trashDealsConfirmation(type, deals) {\n      this.modalHandlerDelete({\n        isOpen: true,\n        isLoading: false,\n        message: {\n          nameItem: 'Los tratos seleccionados',\n          text: 'serán eliminados permanentemente',\n        },\n        infoDelete: {\n          type,\n          deals,\n        },\n      });\n    },\n    trashDeals({ isOpen, isLoading, message, infoDelete }) {\n      this.modalHandlerDelete({ isOpen, isLoading, message, infoDelete });\n      this.$apollo\n        .mutate({\n          mutation: TRASH_DEALS,\n          variables: {\n            input: infoDelete.deals,\n          },\n          update: () => {\n            // indicamos que se deve de actualizar la vista de contactos\n            this.updateData = true;\n            this.snackbarHandler({\n              isOpen: true,\n              color: 'success',\n              text: 'Los tratos fueron eliminados correctamente',\n            });\n          },\n        })\n        .finally(() => {\n          this.updateData = false;\n          this.modalHandlerDelete({\n            isOpen: false,\n            isLoading,\n            message,\n            infoDelete,\n          });\n        })\n        .catch(() => {\n          const error =\n            'No se pudo eliminar el trato intente de nuevo o contacte al soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    goToProfile(id) {\n      this.$router.push(`/deal/${id}`);\n    },\n  },\n};\n","// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","// Styles\nimport \"../../../src/components/VSkeletonLoader/VSkeletonLoader.sass\"; // Mixins\n\nimport Elevatable from '../../mixins/elevatable';\nimport Measurable from '../../mixins/measurable';\nimport Themeable from '../../mixins/themeable'; // Utilities\n\nimport mixins from '../../util/mixins';\nimport { getSlot } from '../../util/helpers';\n/* @vue/component */\n\nexport default mixins(Elevatable, Measurable, Themeable).extend({\n  name: 'VSkeletonLoader',\n  props: {\n    boilerplate: Boolean,\n    loading: Boolean,\n    tile: Boolean,\n    transition: String,\n    type: String,\n    types: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  computed: {\n    attrs() {\n      if (!this.isLoading) return this.$attrs;\n      return !this.boilerplate ? {\n        'aria-busy': true,\n        'aria-live': 'polite',\n        role: 'alert',\n        ...this.$attrs\n      } : {};\n    },\n\n    classes() {\n      return {\n        'v-skeleton-loader--boilerplate': this.boilerplate,\n        'v-skeleton-loader--is-loading': this.isLoading,\n        'v-skeleton-loader--tile': this.tile,\n        ...this.themeClasses,\n        ...this.elevationClasses\n      };\n    },\n\n    isLoading() {\n      return !('default' in this.$scopedSlots) || this.loading;\n    },\n\n    rootTypes() {\n      return {\n        actions: 'button@2',\n        article: 'heading, paragraph',\n        avatar: 'avatar',\n        button: 'button',\n        card: 'image, card-heading',\n        'card-avatar': 'image, list-item-avatar',\n        'card-heading': 'heading',\n        chip: 'chip',\n        'date-picker': 'list-item, card-heading, divider, date-picker-options, date-picker-days, actions',\n        'date-picker-options': 'text, avatar@2',\n        'date-picker-days': 'avatar@28',\n        heading: 'heading',\n        image: 'image',\n        'list-item': 'text',\n        'list-item-avatar': 'avatar, text',\n        'list-item-two-line': 'sentences',\n        'list-item-avatar-two-line': 'avatar, sentences',\n        'list-item-three-line': 'paragraph',\n        'list-item-avatar-three-line': 'avatar, paragraph',\n        paragraph: 'text@3',\n        sentences: 'text@2',\n        table: 'table-heading, table-thead, table-tbody, table-tfoot',\n        'table-heading': 'heading, text',\n        'table-thead': 'heading@6',\n        'table-tbody': 'table-row-divider@6',\n        'table-row-divider': 'table-row, divider',\n        'table-row': 'table-cell@6',\n        'table-cell': 'text',\n        'table-tfoot': 'text@2, avatar@2',\n        text: 'text',\n        ...this.types\n      };\n    }\n\n  },\n  methods: {\n    genBone(text, children) {\n      return this.$createElement('div', {\n        staticClass: `v-skeleton-loader__${text} v-skeleton-loader__bone`\n      }, children);\n    },\n\n    genBones(bone) {\n      // e.g. 'text@3'\n      const [type, length] = bone.split('@');\n\n      const generator = () => this.genStructure(type); // Generate a length array based upon\n      // value after @ in the bone string\n\n\n      return Array.from({\n        length\n      }).map(generator);\n    },\n\n    // Fix type when this is merged\n    // https://github.com/microsoft/TypeScript/pull/33050\n    genStructure(type) {\n      let children = [];\n      type = type || this.type || '';\n      const bone = this.rootTypes[type] || ''; // End of recursion, do nothing\n\n      /* eslint-disable-next-line no-empty, brace-style */\n\n      if (type === bone) {} // Array of values - e.g. 'heading, paragraph, text@2'\n      else if (type.indexOf(',') > -1) return this.mapBones(type); // Array of values - e.g. 'paragraph@4'\n        else if (type.indexOf('@') > -1) return this.genBones(type); // Array of values - e.g. 'card@2'\n          else if (bone.indexOf(',') > -1) children = this.mapBones(bone); // Array of values - e.g. 'list-item@2'\n            else if (bone.indexOf('@') > -1) children = this.genBones(bone); // Single value - e.g. 'card-heading'\n              else if (bone) children.push(this.genStructure(bone));\n\n      return [this.genBone(type, children)];\n    },\n\n    genSkeleton() {\n      const children = [];\n      if (!this.isLoading) children.push(getSlot(this));else children.push(this.genStructure());\n      /* istanbul ignore else */\n\n      if (!this.transition) return children;\n      /* istanbul ignore next */\n\n      return this.$createElement('transition', {\n        props: {\n          name: this.transition\n        },\n        // Only show transition when\n        // content has been loaded\n        on: {\n          afterEnter: this.resetStyles,\n          beforeEnter: this.onBeforeEnter,\n          beforeLeave: this.onBeforeLeave,\n          leaveCancelled: this.resetStyles\n        }\n      }, children);\n    },\n\n    mapBones(bones) {\n      // Remove spaces and return array of structures\n      return bones.replace(/\\s/g, '').split(',').map(this.genStructure);\n    },\n\n    onBeforeEnter(el) {\n      this.resetStyles(el);\n      if (!this.isLoading) return;\n      el._initialStyle = {\n        display: el.style.display,\n        transition: el.style.transition\n      };\n      el.style.setProperty('transition', 'none', 'important');\n    },\n\n    onBeforeLeave(el) {\n      el.style.setProperty('display', 'none', 'important');\n    },\n\n    resetStyles(el) {\n      if (!el._initialStyle) return;\n      el.style.display = el._initialStyle.display || '';\n      el.style.transition = el._initialStyle.transition;\n      delete el._initialStyle;\n    }\n\n  },\n\n  render(h) {\n    return h('div', {\n      staticClass: 'v-skeleton-loader',\n      attrs: this.attrs,\n      on: this.$listeners,\n      class: this.classes,\n      style: this.isLoading ? this.measurableStyles : undefined\n    }, [this.genSkeleton()]);\n  }\n\n});\n//# sourceMappingURL=VSkeletonLoader.js.map","import gql from 'graphql-tag';\n\nexport const CREATE_DEAL = gql`\n  mutation CreateDeal($input: CreateDeal!) {\n    createDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      rottenTime\n      owner {\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      company {\n        id\n        name\n      }\n      contact {\n        id\n        name\n      }\n      stage {\n        id\n        name\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n`;\n\nexport const UPDATE_DEAL = gql`\n  mutation UpdateDeal($input: UpdateDeal!) {\n    updateDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      contact {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n`;\n\nexport const DELETE_DEAL = gql`\n  mutation deletedDeals($input: [DeleteDealInput!]!) {\n    deletedDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\nexport const TRASH_DEALS = gql`\n  mutation trashDeals($input: [DeleteDealInput!]!) {\n    trashDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\nexport const RESTORE_DEALS = gql`\n  mutation restoreDeals($input: [DeleteDealInput!]!) {\n    restoreDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\n// se pide todo lo necesario para poder actualizar el deal entero y no se pierda ningun dato\nexport const CHANGE_DEAL_STAGE = gql`\n  mutation ChangeDealStage($input: ChangeStage!) {\n    changeDealStage(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      dateEntryIntoStage\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n        maxDays\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n`;\n\nexport const CHANGE_DEAL_PIPELINE = gql`\n  mutation changeDealPipeline($input: changePipelineInput!) {\n    changeDealPipeline(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n`;\n\nexport const CREATE_LOST_REASON = gql`\n  mutation CreateLostReason($input: lostReasonCreateInput!) {\n    createLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const DELETE_LOST_REASON = gql`\n  mutation DeleteLostReason($lostReasonId: ID!) {\n    deleteLostReason(lostReasonId: $lostReasonId) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const UPDATE_LOST_REASON = gql`\n  mutation UpdateLostReason($input: lostReasonUpdateInput!) {\n    updateLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const UPDATE_OWNER_DEALS = gql`\n  mutation assignDeals($dealListAssign: DealListAssign!) {\n    assignDeals(dealListAssign: $dealListAssign)\n  }\n`;\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","import { subject } from '@casl/ability';\nimport ability from '@/services/ability';\nimport { ALL, GROUP } from '@/constants/methods';\nimport { GET_USER_LOGGED } from '@/graphql/local-state/queries';\n\nexport const permissionGroupMixin = {\n  data() {\n    return {\n      membersGroup: [],\n    };\n  },\n  methods: {\n    canGroup(method, permission, permissionGroup, owner) {\n      const ownerCopyId = owner.authorId;\n      if (ownerCopyId) {\n        return (\n          ability.can(method, subject(permission, { authorId: ownerCopyId })) ||\n          (ability.can(ALL, permissionGroup) &&\n            ability.can(method, permission)) ||\n          (ability.can(GROUP, permissionGroup) &&\n            this.membersGroup.includes(ownerCopyId) &&\n            ability.can(method, permission))\n        );\n      }\n      return false;\n    },\n  },\n  apollo: {\n    membersGroup: {\n      query: GET_USER_LOGGED,\n      update({ userCurrent }) {\n        return userCurrent.membersGroup;\n      },\n    },\n  },\n};\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.es/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : regexp[SEARCH];\n      return searcher !== undefined ? searcher.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search\n    function (string) {\n      var res = maybeCallNative(nativeSearch, this, string);\n      if (res.done) return res.value;\n\n      var rx = anObject(this);\n      var S = String(string);\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"outlined\":\"\"}},[_c('v-card-text',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('ModalValueDeal',{attrs:{\"deal\":_vm.deal,\"isLoading\":_vm.isLoadingUpdateDeal},on:{\"outData\":_vm.updateDeal}}),(_vm.deal.contact)?_c('div',{staticClass:\"d-inline-block mx-3\"},[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-account\")]),_vm._v(\" \"+_vm._s(_vm.deal.contact ? _vm.deal.contact.name : '')+\" \")],1):_vm._e(),(_vm.deal.company)?_c('div',{staticClass:\"d-inline-block\"},[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-domain\")]),_vm._v(\" \"+_vm._s(_vm.deal.company ? _vm.deal.company.name : '')+\" \")],1):_vm._e()],1),_c('v-col',{staticClass:\"d-flex justify-end\",attrs:{\"cols\":\"6\"}},[_c('MenuChangePipeline',{attrs:{\"isLoading\":_vm.isLoadingUpdatePipeline,\"ownerId\":_vm.deal.owner ? _vm.deal.owner.id : '',\"deal\":_vm.deal},on:{\"outData\":_vm.updatePipeline}})],1),_c('v-col',{staticClass:\"pt-0\",attrs:{\"cols\":\"12\"}},[(!_vm.isLoading)?_c('Stages',{attrs:{\"isLoading\":_vm.isLoadingUpdateStage,\"ownerId\":_vm.deal.owner ? _vm.deal.owner.id : '',\"deal\":_vm.deal},on:{\"updateStage\":_vm.updateStage}}):_c('v-skeleton-loader',{staticClass:\"mx-auto\",attrs:{\"min-width\":\"150px\",\"type\":\"list-item\",\"tile\":\"\"}}),_c('div',{staticClass:\"d-flex justify-end mt-3\"},[_c('MenuCloseDate',{attrs:{\"isLoading\":_vm.isLoadingUpdateDeal,\"ownerId\":_vm.deal.owner ? _vm.deal.owner.id : '',\"dateClose\":_vm.deal.expectedCloseDate,\"dealId\":_vm.deal.id ? _vm.deal.id : '',\"deal\":_vm.deal},on:{\"outData\":_vm.updateDeal}})],1)],1),_c('BaseModalError',{attrs:{\"modalHandler\":_vm.modalError},on:{\"close\":_vm.modalHandlerError}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card outlined>\n    <v-card-text>\n      <v-row>\n        <v-col cols=\"6\">\n          <ModalValueDeal\n            :deal=\"deal\"\n            :isLoading=\"isLoadingUpdateDeal\"\n            @outData=\"updateDeal\"\n          />\n          <div class=\"d-inline-block mx-3\" v-if=\"deal.contact\">\n            <v-icon color=\"primary\">mdi-account</v-icon>\n            {{ deal.contact ? deal.contact.name : '' }}\n          </div>\n          <div class=\"d-inline-block\" v-if=\"deal.company\">\n            <v-icon color=\"primary\">mdi-domain</v-icon>\n            {{ deal.company ? deal.company.name : '' }}\n          </div>\n        </v-col>\n        <v-col class=\"d-flex justify-end\" cols=\"6\">\n          <MenuChangePipeline\n            :isLoading=\"isLoadingUpdatePipeline\"\n            :ownerId=\"deal.owner ? deal.owner.id : ''\"\n            :deal=\"deal\"\n            @outData=\"updatePipeline\"\n          />\n        </v-col>\n        <v-col cols=\"12\" class=\"pt-0\">\n          <Stages\n            v-if=\"!isLoading\"\n            :isLoading=\"isLoadingUpdateStage\"\n            :ownerId=\"deal.owner ? deal.owner.id : ''\"\n            :deal=\"deal\"\n            @updateStage=\"updateStage\"\n          />\n          <v-skeleton-loader\n            v-else\n            class=\"mx-auto\"\n            min-width=\"150px\"\n            type=\"list-item\"\n            tile\n          ></v-skeleton-loader>\n          <div class=\"d-flex justify-end mt-3\">\n            <MenuCloseDate\n              :isLoading=\"isLoadingUpdateDeal\"\n              :ownerId=\"deal.owner ? deal.owner.id : ''\"\n              :dateClose=\"deal.expectedCloseDate\"\n              :dealId=\"deal.id ? deal.id : ''\"\n              :deal=\"deal\"\n              @outData=\"updateDeal\"\n            />\n          </div>\n        </v-col>\n        <BaseModalError :modalHandler=\"modalError\" @close=\"modalHandlerError\" />\n      </v-row>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\n// ability\nimport { subject } from '@casl/ability';\nimport {\n  PERMISSIONS_DEALS,\n  PERMISSIONS_GROUP_DEAL,\n} from '@/constants/permissions';\nimport { UPDATE } from '@/constants/methods';\n// graphql\nimport {\n  CHANGE_DEAL_STAGE,\n  CHANGE_DEAL_PIPELINE,\n} from '@/graphql/mutations/dealsMutations';\n// mixins\nimport { modalsAlertsMixin } from '@/mixins/alerts/modalsAlertsMixin';\nimport { permissionGroupMixin } from '@/mixins/permissionGroupMixin';\nimport { dealsMixin } from '@/mixins/dealsMixin';\n\nexport default {\n  name: 'SubHeader',\n  mixins: [permissionGroupMixin, modalsAlertsMixin, dealsMixin],\n  components: {\n    Stages: () => import('@/components/deals/Stages.vue'),\n    ModalValueDeal: () => import('@/components/deals/ModalValueDeal.vue'),\n    MenuCloseDate: () => import('@/components/deals/MenuCloseDate.vue'),\n    MenuChangePipeline: () =>\n      import('@/components/deals/MenuChangePipeline.vue'),\n  },\n  props: {\n    deal: {\n      type: Object,\n      required: true,\n    },\n    isLoading: {\n      type: Boolean,\n    },\n  },\n  data() {\n    return {\n      UPDATE,\n      subject,\n      PERMISSIONS_DEALS,\n      PERMISSIONS_GROUP_DEAL,\n      isLoadingUpdatePipeline: false,\n      isLoadingUpdateStage: false,\n    };\n  },\n  computed: {\n    owner() {\n      if (this.deal.owner) {\n        return { authorId: this.deal.owner.id || '' };\n      }\n      return { authorId: '' };\n    },\n    isCentralLoading() {\n      if (this.isLoading || this.isLoadingUpdateStage) return true;\n      return false;\n    },\n  },\n  methods: {\n    updateStage({ id }) {\n      this.isLoadingUpdateStage = true;\n      this.$apollo\n        .mutate({\n          // Query\n          mutation: CHANGE_DEAL_STAGE,\n          // Parameters\n          variables: {\n            input: {\n              dealId: this.deal.id,\n              oldStageId: this.deal.stage.id,\n              newStageId: id,\n            },\n          },\n        })\n        .then(({ data: { changeDealStage } }) => {\n          console.log(changeDealStage.pipeline.stages);\n          this.$emit('updateItem', changeDealStage);\n          this.$emit('updateHistory');\n          this.isLoadingUpdateStage = false;\n        })\n        .catch(() => {\n          const error =\n            'No se pudo actualizar la etapa, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    updatePipeline({ stageId, pipelineId }) {\n      this.isLoadingUpdatePipeline = true;\n      const input = {\n        dealId: this.deal.id,\n        newPipelineId: pipelineId,\n        newStageId: stageId,\n      };\n      this.$apollo\n        .mutate({\n          mutation: CHANGE_DEAL_PIPELINE,\n          variables: {\n            input,\n          },\n        })\n        .then(({ data: { changeDealPipeline } }) => {\n          this.$emit('updateItem', changeDealPipeline);\n          this.$emit('updateHistory');\n          this.isLoadingUpdatePipeline = false;\n        })\n        .catch(() => {\n          this.isLoadingUpdatePipeline = false;\n          const error =\n            'No se pudo actualizar el embudo, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SubHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SubHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SubHeader.vue?vue&type=template&id=a50f0766&\"\nimport script from \"./SubHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./SubHeader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSkeletonLoader } from 'vuetify/lib/components/VSkeletonLoader';\ninstallComponents(component, {VCard,VCardText,VCol,VIcon,VRow,VSkeletonLoader})\n"],"sourceRoot":""}