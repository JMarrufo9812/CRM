(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f1ac730"],{"0134":function(t,e,a){"use strict";a("aca6")},aca6:function(t,e,a){},adf4:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{bottom:"","offset-y":"","max-width":"300","nudge-bottom":"10","close-on-content-click":!1,"close-on-click":!1,disabled:!((t.canEdit||t.canEditOthers)&&!t.deal.isDelete)},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("span",t._g(t._b({},"span",i,!1),n),[a("v-btn",{class:{normalCursor:!((t.canEdit||t.canEditOthers)&&!t.deal.isDelete)},attrs:{text:"",small:"",color:"primary"}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-flag-outline")]),t._v(" "+t._s(t.dateClose?t.dateFormat:"Fecha prevista de cierre")+" ")],1)],1)]}}]),model:{value:t.menuModal,callback:function(e){t.menuModal=e},expression:"menuModal"}},[a("v-card",[a("v-card-title",{staticClass:"py-1 font-weight-bold"},[t._v(" Fecha prevista de cierre ")]),a("v-card-text",[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-left":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({ref:"closeDate",attrs:{value:t.dateSelected,dense:"",readonly:"",outlined:"","hide-details":"auto","append-icon":"mdi-calendar"}},"v-text-field",i,!1),n))]}}]),model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[a("v-date-picker",{attrs:{max:t.maxDate,min:t.minDate},on:{input:function(e){t.menuDate=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),a("v-divider"),a("v-card-actions",[t.canEdit||t.canEditOthers?a("v-btn",{staticClass:"mr-auto",attrs:{disabled:!t.dateClose,icon:"",color:"error"},on:{click:t.removeCloseDate}},[a("v-icon",[t._v("mdi-trash-can")])],1):t._e(),a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",outlined:"",small:""},on:{click:t.cancel}},[t._v(" Cancelar ")]),t.canEdit||t.canEditOthers?a("v-btn",{attrs:{color:"secondary",disabled:t.validateSomeValue,small:"",loading:t.isLoading},on:{click:t.updateCloseDate}},[t._v(" Guardar ")]):t._e()],1)],1)],1)},i=[],o=a("c1df"),d=a.n(o),r=a("4b58"),c=a("9685"),s=a("ee2e"),l=a("891c"),u=a("ec60"),f={name:"MenuCloseDate",mixins:[u["a"]],props:{ownerId:{type:String,required:!0},dealId:{type:String,required:!0},dateClose:{type:String},isLoading:{type:Boolean},deal:{required:!0,type:Object,default:function(){}}},data:function(){return{subject:r["b"],UPDATE:l["r"],UPDATE_OTHERS:l["s"],PERMISSIONS_DEALS:s["f"],menuModal:!1,menuDate:!1,date:""}},watch:{dateClose:{handler:function(t){this.date=t||this.getToday()},immediate:!0},isLoading:function(t){t||(this.menuModal=!1)}},computed:{dateSelected:function(){return d()(this.date).format("LL")},owner:function(){return this.ownerId?{authorId:this.ownerId||""}:{authorId:""}},dateFormat:function(){return d()(this.dateClose,"YYYY-MM-DD").format("LL")},validateSomeValue:function(){return this.dateClose===this.date},canEdit:function(){return c["a"].can(l["r"],Object(r["b"])(s["f"],{authorId:this.ownerId||""}))},canEditOthers:function(){return this.canEdit?c["a"].can(l["s"],s["f"]):c["a"].can(l["s"],s["f"])&&!c["a"].can(l["s"],Object(r["b"])(s["f"],{authorId:this.ownerId||""}))}},methods:{getToday:function(){return d()().format("YYYY-MM-DD")},validationDate:function(t){if(!t)return!0;var e=d()(t);return d()(e).isValid()},cancel:function(){this.menuModal=!1},updateCloseDate:function(){(this.canEdit||this.canEditOthers)&&this.validationDate(this.date)&&this.$emit("outData",{id:this.dealId,expectedCloseDate:this.date})},removeCloseDate:function(){(this.canEdit||this.canEditOthers)&&this.$emit("outData",{id:this.dealId,expectedCloseDate:""})}}},m=f,h=(a("0134"),a("0c7c")),v=a("6544"),p=a.n(v),D=a("8336"),b=a("b0af"),C=a("99d9"),E=a("2e4b"),_=a("ce7e"),y=a("132d"),x=a("e449"),M=a("2fa4"),k=a("8654"),w=Object(h["a"])(m,n,i,!1,null,"dc47486a",null);e["default"]=w.exports;p()(w,{VBtn:D["a"],VCard:b["a"],VCardActions:C["a"],VCardText:C["c"],VCardTitle:C["d"],VDatePicker:E["a"],VDivider:_["a"],VIcon:y["a"],VMenu:x["a"],VSpacer:M["a"],VTextField:k["a"]})},ec60:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("c1df"),i=a.n(n),o={data:function(){return{maxDate:i()().add(5,"years").format("YYYY-MM-DD"),minDate:i()().add(-5,"years").format("YYYY-MM-DD")}}}}}]);
//# sourceMappingURL=chunk-8f1ac730.46fa1f15.js.map