(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02cdd4f6"],{"04d1":function(t,e,n){var i=n("342f"),r=i.match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},"4e827":function(t,e,n){"use strict";var i=n("23e7"),r=n("1c0b"),a=n("7b0b"),o=n("50c4"),s=n("d039"),d=n("addb"),l=n("a640"),c=n("04d1"),u=n("d998"),m=n("2d00"),p=n("512c"),f=[],v=f.sort,h=s((function(){f.sort(void 0)})),b=s((function(){f.sort(null)})),F=l("sort"),g=!s((function(){if(m)return m<70;if(!(c&&c>3)){if(u)return!0;if(p)return p<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)f.push({k:e+i,v:n})}for(f.sort((function(t,e){return e.v-t.v})),i=0;i<f.length;i++)e=f[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}})),C=h||!b||!F||!g,y=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:String(e)>String(n)?1:-1}};i({target:"Array",proto:!0,forced:C},{sort:function(t){void 0!==t&&r(t);var e=a(this);if(g)return void 0===t?v.call(e):v.call(e,t);var n,i,s=[],l=o(e.length);for(i=0;i<l;i++)i in e&&s.push(e[i]);s=d(s,y(t)),n=s.length,i=0;while(i<n)e[i]=s[i++];while(i<l)delete e[i++];return e}})},"512c":function(t,e,n){var i=n("342f"),r=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},"6f34":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("d3b7"),n("3ca3"),n("ddb0");var i=n("cd1c"),r={data:function(){return{isUpdateInputs:!1,modalCustomField:{isOpen:!1,isLoading:!1,isEdit:!1}}},components:{Fields:function(){return n.e("chunk-2d21400a").then(n.bind(null,"aea1"))},ModalCustomField:function(){return n.e("chunk-2fe60b47").then(n.bind(null,"2aaf"))}},methods:{modalHandlerCustomFields:function(t){var e=t.isOpen,n=t.isLoading,i=t.isEdit;this.modalCustomField={isOpen:e,isLoading:n,isEdit:i}},createCustomField:function(t,e){var n=this,r=e.type,a=e.label,o=e.items,s=e.isRequired;this.modalHandlerCustomFields({isOpen:!0,isLoading:!0,isEdit:!1}),this.$apollo.mutate({mutation:i["a"],variables:{forForm:t,input:{type:r,label:a,items:o,isRequired:s,isMultiple:!1}},update:function(t,e){var i=e.data.createCustomField;if(n.inputs&&!n.isImportModal&&n.inputs.push(i),n.inputs&&n.isImportModal){var r=i.id,a=i.type,o=i.label,s={label:o,key:r,isSelect:!1,isDefault:!1,type:a};n.inputs.push(s)}}}).then((function(){n.modalHandlerCustomFields({isOpen:!1,isLoading:!1,isEdit:!1}),n.isUpdateInputs=!0})).catch((function(){var t="No se pudo actualizar los campos, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:t})}))}}}},7371:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",{staticClass:"mt-1 mb-2 d-flex align-center justify-space-between primary",attrs:{tile:"",height:"4em"}},[n("span",{staticClass:"white--text pl-8 title-custom-fields"},[t._v(" Configuración de formularios ")]),n("v-menu",{attrs:{"offset-y":"",ransition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"mr-10",attrs:{small:"",color:"secondary",fab:"",depressed:""}},i),[n("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1)]}}])},[n("v-list",[n("v-list-item",{on:{click:function(e){return t.modalHandlerCustomFields({isOpen:!0,isLoading:!1,isEdit:!1})}}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-domain-plus")]),t._v(" Agregar campo ")],1)],1)],1)],1),n("div",{staticClass:"d-flex"},[n("v-card",{staticClass:"mr-1",attrs:{tile:"",width:"11.5em",outlined:""}},[n("div",{staticClass:"d-flex justify-center py-1 header-custom-fields-box"},[n("span",[t._v("Formularios")])]),n("v-divider"),n("v-list",{attrs:{flat:""}},[n("v-list-item-group",{attrs:{color:"secondary"}},[n("v-list-item",{attrs:{exact:"",to:"/settings/enterprise/custom-fields/contacts"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-account-tie")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Contactos")])],1)],1),n("v-list-item",{attrs:{exact:"",to:"/settings/enterprise/custom-fields/companies"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-domain")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Empresas")])],1)],1),n("v-list-item",{attrs:{exact:"",to:"/settings/enterprise/custom-fields/deals"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-handshake-outline")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Tratos")])],1)],1)],1)],1)],1),n("v-card",{attrs:{tile:"",width:"23em",outlined:"",height:"25em"}},[n("div",{staticClass:"d-flex justify-center py-1 header-custom-fields-box"},[n("span",[t._v("Formulario de "+t._s(t.nameSection))])]),n("v-divider"),n("v-progress-linear",{attrs:{active:t.isLoading,indeterminate:t.isLoading,height:"6",absolute:"",color:"primary"}}),t.isError?n("v-card",{attrs:{height:"800"}},[n("BaseErrorComponent",{attrs:{info:t.infoError}})],1):n("v-card",{staticClass:"scroll",attrs:{height:"90%",flat:""}},[n("draggable",{attrs:{animation:"200"},on:{change:t.changeOrderInput},model:{value:t.formSelected.inputs,callback:function(e){t.$set(t.formSelected,"inputs",e)},expression:"formSelected.inputs"}},t._l(t.formSelected.inputs,(function(e){return n("v-card",{key:e.order,staticClass:"py-2 my-4 mx-6 d-flex align-center justify-space-between",attrs:{disabled:t.isLoading,outlined:""}},[n("div",{staticClass:"d-inline-block text-truncate"},[n("v-icon",{staticClass:"curso-style ml-4 mr-2",attrs:{small:""}},[t._v(" mdi-menu ")]),n("span",{staticClass:"label-fields"},[t._v(t._s(e.label))]),n("b",{directives:[{name:"show",rawName:"v-show",value:e.isRequired,expression:"input.isRequired"}],staticClass:"red--text"},[t._v(" * ")])],1),n("div",{staticClass:"d-flex"},[e.isDefault?t._e():n("v-btn",{staticClass:"mr-1",attrs:{outlined:"","x-small":""},on:{click:function(n){return t.deleteInputConfirmation(e.id)}}},[n("v-icon",{attrs:{small:""}},[t._v(" mdi-delete ")])],1),e.isDefault?t._e():n("v-btn",{staticClass:"mr-2",attrs:{"x-small":"",color:"secondary"},on:{click:function(n){return t.editInput(e)}}},[n("v-icon",{attrs:{small:""}},[t._v(" mdi-pencil ")])],1)],1)])})),1)],1)],1)],1),n("ModalCustomField",{attrs:{forForm:t.formSelected.type,modalHandler:t.modalCustomField,editField:t.editField},on:{outData:t.createCustomField,outDataEdit:t.updateInput,close:t.modalHandlerCustomFields}}),n("BaseModalDelete",{attrs:{modalHandler:t.modalDelete},on:{cancel:t.modalHandlerDelete,confirm:t.deleteInput}}),n("BaseModalError",{attrs:{modalHandler:t.modalError},on:{close:t.modalHandlerError}}),n("v-snackbar",{attrs:{color:t.snackbar.color,timeout:5e3},scopedSlots:t._u([{key:"action",fn:function(){return[n("v-btn",{attrs:{text:""},on:{click:function(e){return t.snackbarHandler({isOpen:!1,color:"",text:""})}}},[t._v(" Cerrar ")])]},proxy:!0}]),model:{value:t.snackbar.isOpen,callback:function(e){t.$set(t.snackbar,"isOpen",e)},expression:"snackbar.isOpen"}},[t._v(" "+t._s(t.snackbar.text)+" ")])],1)},r=[],a=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("99af"),n("7db0"),n("b76a")),o=n.n(a),s=n("a2b6"),d=n("e50e"),l=n("cd1c"),c=n("6f34"),u=n("1e6d"),m=n("4420"),p={components:{BaseErrorComponent:function(){return n.e("chunk-2d0abe3b").then(n.bind(null,"16cc"))},ModalCustomField:function(){return n.e("chunk-2fe60b47").then(n.bind(null,"2aaf"))},draggable:o.a},mixins:[c["a"],u["a"],m["a"]],data:function(){return{isLoading:!1,isError:!1,infoError:{icon:"mdi-alert",title:"error",message:"No se ha podido cargar el formulario"},type:this.$route.params.section,formSelected:{type:"CONTACT"},editField:{}}},watch:{isUpdateInputs:function(t){t&&(this.getForm(this.formSelected.type),this.isUpdateInputs=!1)},$route:{handler:function(t){"contacts"===t.params.section&&(this.formSelected={type:"CONTACT"},this.getForm("CONTACT")),"companies"===t.params.section&&(this.formSelected={type:"COMPANY"},this.getForm("COMPANY")),"deals"===t.params.section&&(this.formSelected={type:"DEAL"},this.getForm("DEAL")),""!==t.params.section&&null!==t.params.section&&void 0!==t.params.section||this.$router.push({path:"/settings/enterprise/custom-fields/contacts"})},immediate:!0}},computed:{nameSection:function(){return"contacts"===this.$route.params.section?"Contactos":"companies"===this.$route.params.section?"Empresas":"deals"===this.$route.params.section?"Tratos":""}},methods:{getForm:function(t){var e=this;this.isLoading=!0,this.$apollo.query({query:d["a"],fetchPolicy:"no-cache",variables:{type:t}}).then((function(t){var n=t.data.getForm,i=n.forForm,r=n.customForm,a=n.defaultForm;e.formSelected=e.formatInputs(i,r,a),e.isLoading=!1})).catch((function(){e.isError=!0}))},editInput:function(t){this.editField=t,this.modalHandlerCustomFields({isOpen:!0,isLoading:!1,isEdit:!0})},deleteInputConfirmation:function(t){this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{nameItem:"El campo",text:"será eliminado"},infoDelete:{id:t}})},deleteInput:function(t){var e=this,n=t.isOpen,i=t.isLoading,r=t.message,a=t.infoDelete;this.modalHandlerDelete({isOpen:n,isLoading:i,message:r,infoDelete:a});var o=a.id;this.$apollo.mutate({mutation:l["b"],variables:{input:o}}).then((function(t){var n=t.data.deleteCustomField,o=n.forForm,s=n.customForm,d=n.defaultForm;e.modalHandlerDelete({isOpen:!1,isLoading:i,message:r,infoDelete:a});var l=e.formatInputs(o,s,d),c=l.inputs,u=c.map((function(t,e){var n=t.id,i=t.isDefault;return{id:n,order:e+1,isDefault:i}}));e.updateOrderForm(u),e.snackbarHandler({isOpen:!0,color:"success",text:"Se eliminó el campo correctamente"})})).catch((function(){var t="No se pudo eliminar el campo, intente de nuevo o contacte a soporte";e.modalHandlerError({isOpen:!0,error:t})}))},formatInputs:function(t,e,n){var i,r=n.inputs.map((function(t){return t.isDefault=!0,t})),a=null===(i=e.inputs)||void 0===i?void 0:i.map((function(t){return t.isDefault=!1,t})),o=a?r.concat(a):r,d=Object(s["a"])({listItems:o,orderBy:"ASC",nextElement:"order"});return{type:t,inputs:d}},changeOrderInput:function(t){var e=t.moved,n=e.newIndex,i=e.oldIndex,r=JSON.parse(JSON.stringify(this.formSelected.inputs)),a=r.find((function(t,e){return e===i})),o=r.find((function(t,e){return e===n}));r[i]=a,r[n]=o;var s=r.map((function(t,e){return t.order=e+1,{id:t.id,order:t.order,isDefault:t.isDefault}}));this.updateOrderForm(s)},updateOrderForm:function(t){var e=this;this.$apollo.mutate({mutation:l["d"],variables:{forForm:this.formSelected.type,inputs:t}}).then((function(t){var n=t.data.updateOrderInputs.forForm;e.getForm(n),e.snackbarHandler({isOpen:!0,color:"success",text:"Se actualizo el orden correctamente"})})).catch((function(){var t="No se pudo actualizar el orden, intente de nuevo o contacte a soporte";e.modalHandlerError({isOpen:!0,error:t})}))},updateInput:function(t,e){var n=this,i=e.id,r=e.type,a=e.label,o=e.items,s=e.isRequired;this.isLoading=!0,this.modalHandlerCustomFields({isOpen:!0,isLoading:!0,isEdit:!1}),this.$apollo.mutate({mutation:l["c"],variables:{input:{id:i,type:r,label:a,items:o,isRequired:s,isMultiple:!1}}}).then((function(){n.getForm(t),n.isLoading=!1,n.modalHandlerCustomFields({isOpen:!1,isLoading:!1,isEdit:!1}),n.snackbarHandler({isOpen:!0,color:"success",text:"El campo se actualizo correctamente"})})).catch((function(){var t="No se pudo actualizar el campo intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:t})}))}}},f=p,v=(n("f3ca"),n("0c7c")),h=n("6544"),b=n.n(h),F=n("8336"),g=n("b0af"),C=n("ce7e"),y=n("132d"),O=n("8860"),I=n("da13"),k=n("5d23"),x=n("1baa"),E=n("34c3"),L=n("e449"),S=n("8e36"),_=n("2db4"),D=Object(v["a"])(f,i,r,!1,null,"709888a4",null);e["default"]=D.exports;b()(D,{VBtn:F["a"],VCard:g["a"],VDivider:C["a"],VIcon:y["a"],VList:O["a"],VListItem:I["a"],VListItemContent:k["a"],VListItemGroup:x["a"],VListItemIcon:E["a"],VListItemTitle:k["c"],VMenu:L["a"],VProgressLinear:S["a"],VSnackbar:_["a"]})},a2b6:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("3835"),n("4e827"),n("ac1f"),n("1276");var i=function(t){var e=t.listItems,n=void 0===e?[]:e,i=t.orderBy,r=void 0===i?"ASC":i,a=t.nextElement,o=void 0===a?"none":a;return n.sort((function(t,e){var n="none"===o?t-e:t[o]-e[o],i="none"===o?e-t:e[o]-t[o];return"ASC"===r?n:i}))}},addb:function(t,e){var n=Math.floor,i=function(t,e){var o=t.length,s=n(o/2);return o<8?r(t,e):a(i(t.slice(0,s),e),i(t.slice(s),e),e)},r=function(t,e){var n,i,r=t.length,a=1;while(a<r){i=a,n=t[a];while(i&&e(t[i-1],n)>0)t[i]=t[--i];i!==a++&&(t[i]=n)}return t},a=function(t,e,n){var i=t.length,r=e.length,a=0,o=0,s=[];while(a<i||o<r)a<i&&o<r?s.push(n(t[a],e[o])<=0?t[a++]:e[o++]):s.push(a<i?t[a++]:e[o++]);return s};t.exports=i},c286:function(t,e,n){},cd1c:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return m}));var i,r,a,o,s=n("8785"),d=n("5184"),l=Object(d["a"])(i||(i=Object(s["a"])(["\n  mutation CreateCustomFields($forForm: typeForm!, $input: CreateCustomInput!) {\n    createCustomField(forForm: $forForm, input: $input) {\n      id\n      order\n      label\n      icon\n      type\n      items\n      isRequired\n      isMultiple\n    }\n  }\n"]))),c=Object(d["a"])(r||(r=Object(s["a"])(["\n  mutation UpdateOrderInputs($forForm: typeForm!, $inputs: [UpdateOrder!]!) {\n    updateOrderInputs(forForm: $forForm, inputs: $inputs) {\n      forForm\n      defaultForm {\n        id\n        inputs {\n          id\n          label\n          order\n        }\n      }\n      customForm {\n        id\n        inputs {\n          id\n          label\n          order\n        }\n      }\n    }\n  }\n"]))),u=Object(d["a"])(a||(a=Object(s["a"])(["\n  mutation UpdateCustomField($input: UpdateCustomInput!) {\n    updateCustomField(input: $input) {\n      id\n      type\n      icon\n      label\n      items\n      order\n      isRequired\n      isMultiple\n    }\n  }\n"]))),m=Object(d["a"])(o||(o=Object(s["a"])(["\n  mutation DeleteInput($input: ID!) {\n    deleteCustomField(input: $input) {\n      forForm\n      defaultForm {\n        id\n        inputs {\n          id\n          order\n        }\n      }\n      customForm {\n        id\n        inputs {\n          id\n          order\n          label\n          icon\n          type\n          items\n          isRequired\n          isMultiple\n        }\n      }\n    }\n  }\n"])))},d998:function(t,e,n){var i=n("342f");t.exports=/MSIE|Trident/.test(i)},e50e:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return d}));var i,r,a=n("8785"),o=n("5184"),s=Object(o["a"])(i||(i=Object(a["a"])(["\n  query GetForm($type: typeForm!) {\n    getForm: dynamicForms(forForm: $type) {\n      forForm\n      defaultForm {\n        inputs {\n          id\n          type\n          icon\n          label\n          items\n          order\n          keyInput\n          isRequired\n          isMultiple\n        }\n      }\n      customForm {\n        inputs {\n          id\n          type\n          icon\n          label\n          items\n          order\n          isRequired\n          isMultiple\n        }\n      }\n      headers\n    }\n  }\n"]))),d=Object(o["a"])(r||(r=Object(a["a"])(["\n  query getForm {\n    formContact: dynamicForms(forForm: CONTACT) {\n      defaultForm {\n        inputs {\n          id\n          label\n          keyInput\n        }\n      }\n      customForm {\n        inputs {\n          id\n          label\n        }\n      }\n    }\n    formCompany: dynamicForms(forForm: COMPANY) {\n      defaultForm {\n        inputs {\n          id\n          label\n          keyInput\n        }\n      }\n      customForm {\n        inputs {\n          id\n          label\n        }\n      }\n    }\n    formDeal: dynamicForms(forForm: DEAL) {\n      defaultForm {\n        inputs {\n          id\n          label\n          keyInput\n        }\n      }\n      customForm {\n        inputs {\n          id\n          label\n        }\n      }\n    }\n  }\n"])))},f3ca:function(t,e,n){"use strict";n("c286")}}]);
//# sourceMappingURL=chunk-02cdd4f6.0692c8d6.js.map