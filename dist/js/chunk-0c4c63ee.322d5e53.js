(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c4c63ee"],{"04d1":function(e,t,a){var n=a("342f"),i=n.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"0908":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{scrollable:"","max-width":"430px",persistent:""},model:{value:e.modal.status,callback:function(t){e.$set(e.modal,"status",t)},expression:"modal.status"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text"},[e._v(" "+e._s(e.config.title)+" "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"white"},on:{click:e.close}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-divider"),a("v-card-text",{staticClass:"py-2"},[a("div",{staticClass:"text-center"},[a("v-icon",{staticClass:"icon",attrs:{size:"50",color:"white"}},[e._v(" mdi-trash-can-outline ")]),a("h3",{staticClass:"subtitle"},[e._v(e._s(e.config.subtitle))]),a("h3",{staticClass:"description mb-0 font-weight-bold"},[e._v('"'+e._s(e.item.name)+'"')]),a("p",{staticClass:"description"},[e._v(" "+e._s(e.config.description)+" ")])],1)]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:e.close}},[e._v(" Cancelar ")]),a("v-spacer"),a("v-btn",{attrs:{color:"error",loading:e.isLoading},on:{click:e.remove}},[e._v(" Eliminar ")])],1)],1)],1)},i=[],r=a("1891"),l={name:"BaseModalDeleteItem",mixins:[r["b"],r["a"]],props:{isLoading:{type:Boolean,default:!1,required:!0},config:{type:Object,default:function(){return{title:"",subtitle:"",description:""}},required:!0},item:{type:Object,default:function(){},required:!0}},data:function(){return{modalId:"deleteTemplateEmail",modal:{}}},methods:{close:function(){this.changeModal({id:"deleteTemplateEmail",status:!1})},remove:function(){this.$emit("remove",this.item.id)}}},o=l,s=(a("35b5"),a("0c7c")),c=a("6544"),d=a.n(c),u=a("8336"),m=a("b0af"),p=a("99d9"),v=a("169a"),f=a("ce7e"),h=a("132d"),b=a("2fa4"),g=Object(s["a"])(o,n,i,!1,null,"5c16b76f",null);t["a"]=g.exports;d()(g,{VBtn:u["a"],VCard:m["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VDialog:v["a"],VDivider:f["a"],VIcon:h["a"],VSpacer:b["a"]})},2532:function(e,t,a){"use strict";var n=a("23e7"),i=a("5a34"),r=a("1d80"),l=a("ab13");n({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~String(r(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},"35b5":function(e,t,a){"use strict";a("e4ce")},"48f9":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s}));var n,i,r=a("8785"),l=a("5184"),o=Object(l["a"])(n||(n=Object(r["a"])(["\n  query readEmailTemplates {\n    emailTemplates {\n      id\n      name\n      shared\n      myTemplate\n    }\n  }\n"]))),s=Object(l["a"])(i||(i=Object(r["a"])(["\n  query readEmailTemplate($emailTemplateId: ID!) {\n    emailTemplate(emailTemplateId: $emailTemplateId) {\n      id\n      name\n      content {\n        subject\n        message\n      }\n      shared\n    }\n  }\n"])))},"4e827":function(e,t,a){"use strict";var n=a("23e7"),i=a("1c0b"),r=a("7b0b"),l=a("50c4"),o=a("d039"),s=a("addb"),c=a("a640"),d=a("04d1"),u=a("d998"),m=a("2d00"),p=a("512c"),v=[],f=v.sort,h=o((function(){v.sort(void 0)})),b=o((function(){v.sort(null)})),g=c("sort"),T=!o((function(){if(m)return m<70;if(!(d&&d>3)){if(u)return!0;if(p)return p<603;var e,t,a,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(n=0;n<47;n++)v.push({k:t+n,v:a})}for(v.sort((function(e,t){return t.v-e.v})),n=0;n<v.length;n++)t=v[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),_=h||!b||!g||!T,y=function(e){return function(t,a){return void 0===a?-1:void 0===t?1:void 0!==e?+e(t,a)||0:String(t)>String(a)?1:-1}};n({target:"Array",proto:!0,forced:_},{sort:function(e){void 0!==e&&i(e);var t=r(this);if(T)return void 0===e?f.call(t):f.call(t,e);var a,n,o=[],c=l(t.length);for(n=0;n<c;n++)n in t&&o.push(t[n]);o=s(o,y(e)),a=o.length,n=0;while(n<a)t[n]=o[n++];while(n<c)delete t[n++];return t}})},"512c":function(e,t,a){var n=a("342f"),i=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},"5a34":function(e,t,a){var n=a("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6c9b":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return d}));var n,i,r,l=a("8785"),o=a("5184"),s=Object(o["a"])(n||(n=Object(l["a"])(["\n  mutation createEmailTemplate($emailTemplateInput: emailTemplateCreateInput!) {\n    saveTemplateEmail(emailTemplateInput: $emailTemplateInput) {\n      id\n      name\n      shared\n      myTemplate\n    }\n  }\n"]))),c=Object(o["a"])(i||(i=Object(l["a"])(["\n  mutation updateEmailTemplate($emailTemplateInput: emailTemplateUpdateInput!) {\n    updateEmailTemplate(emailTemplateInput: $emailTemplateInput) {\n      id\n      name\n      shared\n      myTemplate\n    }\n  }\n"]))),d=Object(o["a"])(r||(r=Object(l["a"])(["\n  mutation deleteEmailTemplate($emailTemplateId: ID!) {\n    deleteEmailTemplate(emailTemplateId: $emailTemplateId) {\n      id\n    }\n  }\n"])))},ab13:function(e,t,a){var n=a("b622"),i=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[i]=!1,"/./"[e](t)}catch(n){}}return!1}},addb:function(e,t){var a=Math.floor,n=function(e,t){var l=e.length,o=a(l/2);return l<8?i(e,t):r(n(e.slice(0,o),t),n(e.slice(o),t),t)},i=function(e,t){var a,n,i=e.length,r=1;while(r<i){n=r,a=e[r];while(n&&t(e[n-1],a)>0)e[n]=e[--n];n!==r++&&(e[n]=a)}return e},r=function(e,t,a){var n=e.length,i=t.length,r=0,l=0,o=[];while(r<n||l<i)r<n&&l<i?o.push(a(e[r],t[l])<=0?e[r++]:t[l++]):o.push(r<n?e[r++]:t[l++]);return o};e.exports=n},b7a3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",{staticClass:"d-flex align-center justify-space-between primary",attrs:{cols:"12"}},[a("span",{staticClass:"white--text ml-4"},[e._v("Plantillas")]),a("v-btn",{attrs:{small:"",fab:"",color:"secondary"},on:{click:function(t){return e.changeModal({id:"createTemplateEmail",status:!0})}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{flat:"",tile:""}},[a("v-data-table",{attrs:{items:e.listTemplates,loading:e.$apollo.queries.emailTemplates.loading,page:e.page,"hide-default-footer":""},scopedSlots:e._u([{key:"body",fn:function(t){var n=t.items;return[n&&0!==n.length?a("draggable",{attrs:{tag:"tbody"},on:{change:e.changeOrder},model:{value:e.listTemplates,callback:function(t){e.listTemplates=t},expression:"listTemplates"}},e._l(n,(function(t){return a("tr",{key:t.id},[a("td",{attrs:{scope:"row"}},[e._v(" "+e._s(t.name)+" ")]),a("td",[t.shared?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-icon",e._g(e._b({},"v-icon",i,!1),n),[e._v(" mdi-account-group ")])]}}],null,!0)},[a("span",[e._v("Compártido")])]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-icon",e._g(e._b({},"v-icon",i,!1),n),[e._v(" mdi-email-lock ")])]}}],null,!0)},[a("span",[e._v("Solo yo")])])],1),a("td",{staticClass:"text-right"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[a("v-btn",e._g(e._b({staticClass:"mr-2",attrs:{icon:""},on:{click:function(a){return e.useTemplate(t)}}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""}},[e._v(" mdi-email-send ")])],1)]}}],null,!0)},[a("span",[e._v("Enviar correo")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[t.myTemplate?a("v-btn",e._g(e._b({staticClass:"mr-2",attrs:{icon:""},on:{click:function(a){return e.editItem(t)}}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""}},[e._v(" mdi-pencil ")])],1):e._e()]}}],null,!0)},[a("span",[e._v("Editar")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[t.myTemplate?a("v-btn",e._g(e._b({attrs:{icon:""},on:{click:function(a){return e.remove(t)}}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""}},[e._v(" mdi-delete ")])],1):e._e()]}}],null,!0)},[a("span",[e._v("Eliminar")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-btn",{attrs:{icon:""}},[a("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",i,!1),n),[e._v(" mdi-menu ")])],1)]}}],null,!0)},[a("span",[e._v("Mover")])])],1)])})),0):a("tr",[a("td",{staticClass:"text-center py-3",attrs:{scope:"row",colspan:"3"}},[e._v(" No hay plantillas disponibles ")])])]}},{key:"footer",fn:function(t){var n=t.props;return[n.pagination.pageCount>0?a("div",[a("v-divider"),a("div",{staticClass:"d-flex justify-center mt-4 pb-6"},[a("v-btn",{staticClass:"mr-6",attrs:{outlined:""},on:{click:function(t){return e.backPage()}}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-left")])],1),a("v-btn",{attrs:{outlined:""}},[e._v(" "+e._s(n.pagination.page)+" De "+e._s(n.pagination.pageCount)+" ")]),a("v-btn",{staticClass:"ml-6",attrs:{outlined:""},on:{click:function(t){return e.nextPage(n.pagination.pageCount)}}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-right")])],1)],1)],1):e._e()]}}])})],1)],1),a("BaseModalDeleteItem",{attrs:{dialog:e.isOpenDelete,config:e.configModalDelete,isLoading:e.isLoadingDelete,item:e.itemSelected},on:{"update:dialog":function(t){e.isOpenDelete=t},remove:e.removeTemplate}}),a("BaseModalError",{attrs:{modalHandler:e.modalError},on:{close:e.modalHandlerError}})],1)},i=[],r=a("5530"),l=a("2909"),o=(a("4de4"),a("caad"),a("2532"),a("99af"),a("4e827"),a("fb6a"),a("d81d"),a("b0c0"),a("c740"),a("a434"),a("b76a")),s=a.n(o),c=a("e815"),d=a("48f9"),u=a("6c9b"),m=a("0908"),p=a("1891"),v=a("1e6d"),f={name:"EmailTemplates",components:{BaseModalDeleteItem:m["a"],draggable:s.a},mixins:[p["b"],p["a"],v["a"]],data:function(){return{isLoading:!1,emailTemplatesOrder:[],isEdit:!1,editedItem:{},page:1,isLoadingDelete:!1,configModalDelete:{title:"Eliminar plantilla",subtitle:"Estas por eliminar una plantilla",description:"Se eliminara la plantilla de tu cuenta, ¿estás seguro?"},itemSelected:{},isOpenDelete:!1,emailTemplates:[],headers:[{text:"Nombre de plantilla",align:"start",sortable:!1,value:"name"},{align:"center",value:"shared",sortable:!1},{align:"end",value:"actions",sortable:!1}]}},computed:{listTemplates:{get:function(){var e,t=this,a=this.emailTemplates.filter((function(e){return t.emailTemplatesOrder.includes(e.id)})),n=this.emailTemplates.filter((function(e){return!t.emailTemplatesOrder.includes(e.id)}));return(e=a.slice(0).sort((function(e,a){return t.emailTemplatesOrder.indexOf(e.id)-t.emailTemplatesOrder.indexOf(a.id)}))).concat.apply(e,Object(l["a"])(n))},set:function(e){this.emailTemplatesOrder=e.map((function(e){return e.id}))}}},methods:{nextPage:function(e){e!==this.page&&(this.page+=1)},backPage:function(){1!==this.page&&(this.page-=1)},useTemplate:function(e){var t=JSON.parse(JSON.stringify(e));this.changeModal({id:"sendEmail",status:!0,isEdit:!0,item:t})},changeOrder:function(e){var t=e.moved.element,a=t.id,n=t.name,i=t.shared,r={id:a,name:n,shared:i,order:this.emailTemplatesOrder};this.updateOrderTemplate(r)},updateOrderTemplate:function(e){var t=this,a=e.id,n=e.name,i=e.shared,l=e.order;this.$apollo.mutate({mutation:u["c"],variables:{emailTemplateInput:{id:a,order:l}},update:function(e,t){var a=t.data.updateEmailTemplate,n=e.readQuery({query:d["a"]}),i=n.emailTemplates.findIndex((function(e){return e.id===a.id}));n.emailTemplates[i]=Object(r["a"])(Object(r["a"])({},a),{},{myTemplate:!0}),e.writeQuery({query:d["a"],data:n});var o=e.readQuery({query:c["k"]});o.userCurrent.emailTemplatesOrder=l,e.writeQuery({query:c["k"],data:o})},optimisticResponse:{__typename:"Mutation",updateEmailTemplate:{__typename:"EmailTemplate",id:a,shared:i,myTemplate:!0,name:n}}}).then((function(){t.isLoading=!1})).catch((function(){var e="No se pudo actualizar la plantilla, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e}),t.isLoading=!1}))},editItem:function(e){this.changeModal({id:"createTemplateEmail",status:!0,isEdit:!0,item:e})},closeModalRemove:function(){this.changeModal({id:"deleteTemplateEmail",status:!1})},remove:function(e){this.itemSelected=e,this.changeModal({id:"deleteTemplateEmail",status:!0})},removeTemplate:function(e){var t=this;this.isLoadingDelete=!0,this.$apollo.mutate({mutation:u["b"],variables:{emailTemplateId:e},update:function(e,t){var a=t.data.deleteEmailTemplate,n=e.readQuery({query:d["a"]}),i=n.emailTemplates.findIndex((function(e){return e.id===a.id}));n.emailTemplates.splice(i,1),e.writeQuery({query:d["a"],data:n})},optimisticResponse:{__typename:"Mutation",deleteEmailTemplate:{__typename:"EmailTemplate",id:e}}}).then((function(){t.closeModalRemove(),t.isLoadingDelete=!1})).catch((function(){var e="No se pudo eliminar la plantilla, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e}),t.closeModalRemove(),t.isLoadingDelete=!1}))}},apollo:{emailTemplates:{query:d["a"]},emailTemplatesOrder:{query:c["k"],update:function(e){var t=e.userCurrent;return t.emailTemplatesOrder}}}},h=f,b=(a("de07"),a("0c7c")),g=a("6544"),T=a.n(g),_=a("8336"),y=a("b0af"),E=a("62ad"),O=a("8fea"),k=a("ce7e"),x=a("132d"),C=a("0fd9"),I=a("3a2f"),w=Object(b["a"])(h,n,i,!1,null,"25d58134",null);t["default"]=w.exports;T()(w,{VBtn:_["a"],VCard:y["a"],VCol:E["a"],VDataTable:O["a"],VDivider:k["a"],VIcon:x["a"],VRow:C["a"],VTooltip:I["a"]})},caad:function(e,t,a){"use strict";var n=a("23e7"),i=a("4d64").includes,r=a("44d2");n({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d998:function(e,t,a){var n=a("342f");e.exports=/MSIE|Trident/.test(n)},ddf4:function(e,t,a){},de07:function(e,t,a){"use strict";a("ddf4")},e4ce:function(e,t,a){}}]);
//# sourceMappingURL=chunk-0c4c63ee.322d5e53.js.map