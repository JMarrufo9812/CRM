{"version":3,"sources":["webpack:///./src/components/fields/FieldSelectPipeline.vue?af97","webpack:///./src/components/fields/FieldSelectPipeline.vue?8f51","webpack:///src/components/fields/FieldSelectPipeline.vue","webpack:///./src/components/fields/FieldSelectPipeline.vue?cbff","webpack:///./src/components/fields/FieldSelectPipeline.vue?7d93"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","inputProps","field","isRequired","attrs","icon","isDense","pipelines","ref","name","rules","isRequiredObject","label","model","value","callback","$$v","pipelineSelected","expression","id","staticClass","_v","directives","rawName","_l","stage","index","key","done","on","$event","selectStage","scopedSlots","_u","fn","_g","_b","_s","_e","staticRenderFns","mixins","rulesMixin","props","resetHandler","type","Boolean","default","Object","required","data","stageSelected","stages","created","defaultValue","addDefaultValue","watch","resetValues","keys","length","listItems","orderBy","nextElement","methods","map","stageIndex","pipeline","apollo","query","fetchPolicy","component","VIcon","VSelect","VTooltip"],"mappings":"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","file":"js/chunk-18ed75f4.ee887128.js","sourcesContent":["export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldSelectPipeline.vue?vue&type=style&index=0&id=ef1614d0&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-select',{class:[\n      _vm.inputProps ? _vm.inputProps.class : '',\n      _vm.field.isRequired ? 'required' : '' ],attrs:{\"prepend-icon\":_vm.field.icon ? _vm.field.icon : 'mdi-view-column',\"dense\":_vm.inputProps ? _vm.inputProps.isDense : false,\"items\":_vm.pipelines,\"item-text\":function (ref) {\n        var name = ref.name;\n\n        return name;\n},\"item-value\":\"id\",\"return-object\":true,\"rules\":_vm.field.isRequired ? _vm.rules.isRequiredObject : [],\"outlined\":\"\",\"hide-details\":\"auto\",\"label\":_vm.field.label || 'Embudo'},model:{value:(_vm.pipelineSelected),callback:function ($$v) {_vm.pipelineSelected=$$v},expression:\"pipelineSelected\"}}),(_vm.pipelineSelected.id !== '')?_c('div',{staticClass:\"mt-5\"},[_c('span',[_c('v-icon',{staticClass:\"mr-4\"},[_vm._v(\"mdi-view-carousel-outline\")]),_vm._v(\" Etapa \"),_c('b',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.field.isRequired),expression:\"field.isRequired\"}],staticClass:\"red--text\"},[_vm._v(\" * \")])],1),_c('div',{staticClass:\"Pipeline py-3 pl-8\"},[_c('div',{staticClass:\"Pipeline__stages open\"},[_c('ul',_vm._l((_vm.stages),function(stage,index){return _c('li',{key:index,class:stage.done ? 'active Stage' : 'Stage',on:{\"click\":function($event){return _vm.selectStage(index, stage)}}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\n    var on = ref.on;\n    var attrs = ref.attrs;\nreturn [_c('div',_vm._g(_vm._b({staticClass:\"Stage__content\"},'div',attrs,false),on),[_c('div',{staticClass:\"Stage__name\"}),_c('span',{staticClass:\"Stage__separator \"})])]}}],null,true)},[_c('span',{staticClass:\"d-block font-weight-bold\"},[_vm._v(\" \"+_vm._s(stage.name)+\" \")])])],1)}),0)])])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-select\n      v-model=\"pipelineSelected\"\n      :prepend-icon=\"field.icon ? field.icon : 'mdi-view-column'\"\n      :dense=\"inputProps ? inputProps.isDense : false\"\n      :items=\"pipelines\"\n      :item-text=\"({ name }) => name\"\n      item-value=\"id\"\n      :return-object=\"true\"\n      :rules=\"field.isRequired ? rules.isRequiredObject : []\"\n      outlined\n      hide-details=\"auto\"\n      :class=\"[\n        inputProps ? inputProps.class : '',\n        field.isRequired ? 'required' : '',\n      ]\"\n      :label=\"field.label || 'Embudo'\"\n    ></v-select>\n    <div v-if=\"pipelineSelected.id !== ''\" class=\"mt-5\">\n      <span>\n        <v-icon class=\"mr-4\">mdi-view-carousel-outline</v-icon>\n        Etapa\n        <b v-show=\"field.isRequired\" class=\"red--text\">\n          *\n        </b>\n      </span>\n      <div class=\"Pipeline py-3 pl-8\">\n        <div class=\"Pipeline__stages open\">\n          <ul>\n            <li\n              v-for=\"(stage, index) in stages\"\n              :key=\"index\"\n              :class=\"stage.done ? 'active Stage' : 'Stage'\"\n              @click=\"selectStage(index, stage)\"\n            >\n              <v-tooltip bottom>\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <div class=\"Stage__content\" v-bind=\"attrs\" v-on=\"on\">\n                    <div class=\"Stage__name\"></div>\n                    <span class=\"Stage__separator \"></span>\n                  </div>\n                </template>\n                <span class=\"d-block font-weight-bold\">\n                  {{ stage.name }}\n                </span>\n              </v-tooltip>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { GET_PIPELINES } from '@/graphql/querys/pipelinesQuery';\nimport { rulesMixin } from '@/mixins/rulesMixin';\nimport { UTIL_ORDER } from '@/helpers/utils';\n\nexport default {\n  name: 'FieldSelect',\n  mixins: [rulesMixin],\n  props: {\n    resetHandler: {\n      type: Boolean,\n      default: false,\n    },\n    field: {\n      type: Object,\n      required: true,\n    },\n    inputProps: {\n      type: Object,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      // ¡¡ declarar vacios los props evita errores de reactividad !!\n      pipelineSelected: { id: '', name: '', stages: [] },\n      stageSelected: {},\n      stages: [],\n    };\n  },\n  created() {\n    if (this.field.defaultValue) this.addDefaultValue();\n  },\n  watch: {\n    resetHandler(value) {\n      if (!value) this.resetValues();\n      else if (this.field.defaultValue && value) {\n        this.addDefaultValue();\n      }\n    },\n    pipelineSelected(value) {\n      if (Object.keys(value).length !== 0) {\n        this.stages = UTIL_ORDER({\n          listItems: value.stages,\n          orderBy: 'ASC',\n          nextElement: 'order',\n        });\n        const [stage] = this.stages;\n        stage.done = true;\n        this.selectStage(0, stage);\n      }\n    },\n    // actualiza el valor del input\n    stageSelected(value) {\n      if (Object.keys(value).length !== 0) {\n        const { id: stageId } = value;\n\n        this.field.value = { stageId, pipelineId: this.pipelineSelected.id };\n      }\n    },\n  },\n  methods: {\n    selectStage(index, stageSelected) {\n      this.stages = this.stages.map((stage, stageIndex) => {\n        // si es menor que el index done es = true\n        stage.done = stageIndex <= index; // eslint-disable-line\n        return stage;\n      });\n      this.stageSelected = stageSelected;\n    },\n    addDefaultValue() {\n      if (this.field.defaultValue.pipeline) {\n        const { id, name, stages } = this.field.defaultValue.pipeline;\n        // ¡¡ evita error de reactividad cuando se crea un nuevo embudo !!\n        this.pipelineSelected = {\n          id,\n          name,\n          stages,\n        };\n      }\n      if (this.field.defaultValue.stage) {\n        const index = this.field.defaultValue.stage.order - 1;\n        const { stage } = this.field.defaultValue;\n        stage.done = true;\n        this.selectStage(index, stage);\n      }\n    },\n    resetValues() {\n      this.field.defaultValue = {};\n      this.field.value = {};\n      this.stageSelected = {};\n      this.pipelineSelected = {};\n      this.stages = [];\n    },\n  },\n  apollo: {\n    pipelines: {\n      query: GET_PIPELINES,\n      fetchPolicy: 'no-cache',\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.Pipeline {\n  position: relative;\n\n  .Pipeline__stages {\n    position: relative;\n    display: table;\n    height: 24px;\n    overflow: visible;\n    ul {\n      width: 100%;\n      display: table;\n      border-collapse: collapse;\n      table-layout: fixed;\n      height: 24px;\n      -ms-box-sizing: border-box;\n      -o-box-sizing: border-box;\n      box-sizing: border-box;\n      overflow: hidden;\n      list-style: none;\n    }\n  }\n\n  .Stage {\n    position: relative;\n    background: #e5e5e5;\n    display: table-cell;\n    text-align: left;\n    line-height: 24px;\n    vertical-align: middle;\n    color: #fff;\n    text-align: center;\n    cursor: pointer;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n\n    .Stage__content {\n      position: relative;\n    }\n\n    .Stage__name {\n      font: 400 13px/16px Source Sans Pro, sans-serif;\n      display: inline-block;\n      position: relative;\n      left: 4px;\n    }\n\n    .Stage__separator {\n      width: 5px;\n      height: 30px;\n      position: absolute;\n      top: -5px;\n      left: 0;\n      overflow: hidden;\n\n      &:after {\n        width: 23px;\n        height: 22px;\n        position: absolute;\n        right: -7px;\n        top: 5px;\n        border-top: 3px solid #fff;\n        border-right: 3px solid #fff;\n        transform: scaleX(0.3) rotate(45deg);\n        content: ' ';\n        cursor: pointer;\n        background: #e5e5e5;\n      }\n    }\n\n    &:first-child .Stage__separator {\n      display: none;\n    }\n\n    &.active {\n      background: #2e2e2f;\n\n      .Stage__separator {\n        &:after {\n          background: #2e2e2f;\n        }\n      }\n    }\n\n    &.active + .Stage .Stage__separator:after {\n      border-top: 3px solid #fff;\n      border-right: 3px solid #fff;\n      background: #2e2e2f;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldSelectPipeline.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldSelectPipeline.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FieldSelectPipeline.vue?vue&type=template&id=ef1614d0&scoped=true&\"\nimport script from \"./FieldSelectPipeline.vue?vue&type=script&lang=js&\"\nexport * from \"./FieldSelectPipeline.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FieldSelectPipeline.vue?vue&type=style&index=0&id=ef1614d0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ef1614d0\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VIcon,VSelect,VTooltip})\n"],"sourceRoot":""}