{"version":3,"sources":["webpack:///./node_modules/vuetify-loader/lib/runtime/installDirectives.js","webpack:///./src/components/deals/ModalDeals.vue?273c","webpack:///src/components/deals/ModalDeals.vue","webpack:///./src/components/deals/ModalDeals.vue?46cb","webpack:///./src/components/deals/ModalDeals.vue","webpack:///./src/mixins/customFieldsMixin.js","webpack:///./src/graphql/mutations/customFieldsMutations.js"],"names":["module","exports","component","directives","options","extendOptions","i","render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","modalHandler","callback","$$v","$set","expression","staticClass","_v","$can","CUSTOM_FIELDS_MANAGEMENT","PERMISSIONS_SETTINGS","scopedSlots","_u","key","fn","ref","on","_g","$event","modalHandlerCustomFields","isOpen","isLoading","isEdit","_e","close","name","rawName","modifiers","isValidate","_l","input","index","isScrolled","scrolled","outData","modalCustomField","createCustomField","modalAlert","modalHandlerAlert","staticRenderFns","props","required","type","Object","default","inputs","Array","mixins","customFieldsMixin","data","deal","watch","resetValues","methods","onScroll","pipeline","isEmptyPipeline","message","title","text","info","existCustomFields","cleanInputs","push","$refs","formDeal","validate","$emit","resetValidation","reset","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VDialog","VForm","VIcon","VList","VListItem","VMenu","VRow","Scroll","isUpdateInputs","components","Fields","ModalCustomField","forForm","label","items","isRequired","$apollo","mutate","mutation","CREATE_CUSTOM_FIELD","variables","isMultiple","update","store","isImportModal","id","typeInput","labelInput","newCustomInput","isSelect","isDefault","then","catch","error","modalHandlerError","gql","UPDATE_ORDER_INPUTS","UPDATE_INPUT","DELETE_INPUT"],"mappings":"mGAIAA,EAAOC,QAAU,SAA4BC,EAAWC,GACtD,IAAIC,EAAuC,oBAAtBF,EAAUD,QAC3BC,EAAUD,QAAQI,cAClBH,EAAUE,QAQd,IAAK,IAAIE,IANwB,oBAAtBJ,EAAUD,UACnBG,EAAQD,WAAaD,EAAUD,QAAQG,QAAQD,YAGjDC,EAAQD,WAAaC,EAAQD,YAAc,GAE7BA,EACZC,EAAQD,WAAWG,GAAKF,EAAQD,WAAWG,IAAMH,EAAWG,K,2CChBhE,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,MAAM,WAAa,GAAG,WAAa,IAAIC,MAAM,CAACC,MAAOR,EAAIS,aAAmB,OAAEC,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIS,aAAc,SAAUE,IAAME,WAAW,wBAAwB,CAACT,EAAG,SAAS,CAACA,EAAG,eAAe,CAACU,YAAY,6CAA6C,CAACV,EAAG,OAAO,CAACU,YAAY,oBAAoB,CAACd,EAAIe,GAAG,qBAAqBX,EAAG,MAAM,CAAEJ,EAAIgB,KAAKhB,EAAIiB,yBAA0BjB,EAAIkB,sBAAuBd,EAAG,SAAS,CAACe,YAAYnB,EAAIoB,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GAC7mB,IAAIC,EAAKD,EAAIC,GACb,MAAO,CAACpB,EAAG,SAASJ,EAAIyB,GAAG,CAACX,YAAY,mBAAmBR,MAAM,CAAC,MAAQ,KAAKkB,GAAI,CAACxB,EAAIe,GAAG,mBAAmB,MAAK,EAAM,aAAa,CAACX,EAAG,SAAS,CAACA,EAAG,cAAc,CAACoB,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAO1B,EAAI2B,yBAAyB,CACnNC,QAAQ,EACRC,WAAW,EACXC,QAAQ,OACJ,CAAC1B,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIe,GAAG,+BAA+Bf,EAAIe,GAAG,oBAAoB,GAAGX,EAAG,cAAc,CAACE,MAAM,CAAC,GAAK,6CAA6C,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIe,GAAG,gCAAgCf,EAAIe,GAAG,oBAAoB,IAAI,IAAI,GAAGf,EAAI+B,KAAK3B,EAAG,SAAS,CAACU,YAAY,cAAcU,GAAG,CAAC,MAAQxB,EAAIgC,QAAQ,CAAChC,EAAIe,GAAG,kBAAkB,KAAKX,EAAG,cAAc,CAACT,WAAW,CAAC,CAACsC,KAAK,SAASC,QAAQ,gBAAgB1B,MAAOR,EAAY,SAAEa,WAAW,WAAWsB,UAAU,CAAC,MAAO,KAAQrB,YAAY,QAAQ,CAACV,EAAG,SAAS,CAACmB,IAAI,WAAWhB,MAAM,CAACC,MAAOR,EAAc,WAAEU,SAAS,SAAUC,GAAMX,EAAIoC,WAAWzB,GAAKE,WAAW,eAAe,CAACT,EAAG,QAAQJ,EAAIqC,GAAIrC,EAAU,QAAE,SAASsC,EAAMC,GAAO,OAAOnC,EAAG,QAAQ,CAACiB,IAAIkB,EAAMjC,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQgC,EAAM,aAAetC,EAAIS,aAAamB,OAAO,WAAa5B,EAAIwC,YAAYhB,GAAG,CAAC,SAAWxB,EAAIyC,aAAa,MAAK,IAAI,IAAI,GAAGrC,EAAG,iBAAiB,CAACU,YAAY,0CAA0C,CAACV,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,MAAM,MAAQ,GAAG,SAAW,GAAG,MAAQ,WAAWkB,GAAG,CAAC,MAAQxB,EAAIgC,QAAQ,CAAChC,EAAIe,GAAG,gBAAgBX,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,MAAM,MAAQ,GAAG,OAAS,GAAG,MAAQ,YAAY,QAAUN,EAAIS,aAAaoB,WAAWL,GAAG,CAAC,MAAQxB,EAAI0C,UAAU,CAAC1C,EAAIe,GAAG,gBAAgB,IAAI,IAAI,GAAGX,EAAG,mBAAmB,CAACE,MAAM,CAAC,QAAU,OAAO,aAAeN,EAAI2C,kBAAkBnB,GAAG,CAAC,QAAUxB,EAAI4C,kBAAkB,MAAQ5C,EAAI2B,4BAA4BvB,EAAG,iBAAiB,CAACE,MAAM,CAAC,aAAeN,EAAI6C,WAAW,QAAS,GAAOrB,GAAG,CAAC,QAAUxB,EAAI8C,kBAAkB,MAAQ9C,EAAI8C,sBAAsB,IAClmDC,EAAkB,G,gHCoFtB,GACEd,KAAM,aACNe,MAAO,CACLvC,aAAc,CACZwC,UAAU,EACVC,KAAMC,OACNC,QAAS,WACP,MAAO,CAAf,0BAGIC,OAAQ,CACNJ,UAAU,EACVC,KAAMI,MACNF,QAAS,WACP,MAAO,MAIbG,OAAQ,CAACC,EAAX,aACEC,KAnBF,WAoBI,MAAO,CACLC,KAAM,GACNtB,WAAY,GACZI,YAAY,EACZtB,qBAAN,OACMD,yBAAN,SAGE0C,MAAO,CACLlD,aADJ,YACA,eACWmB,EAGH3B,KAAKuC,YAAa,EAFlBvC,KAAK2D,gBAMXC,QAAS,CACPpB,SADJ,SACA,GACMxC,KAAKuC,WAAahC,GAEpBsD,SAJJ,WAKM7D,KAAKuC,YAAa,GAEpBE,QAPJ,WAOA,WACA,8BAEA,uDAGM,GAAIqB,EAASvD,MAAO,CAA1B,MACA,EACA,mEACA,6BACQ,GAAKwD,EA0BH/D,KAAK6C,kBAAkB,CACrBlB,QAAQ,EACRC,WAAW,EACXoC,QAAS,CACPC,MAAO,uBACPC,KACd,iEAEYC,KAAM,SAlCY,CACpB,IAAV,oBACA,YAAY,OAAZ,cAEU,GAAIC,EAAmB,CACrB,IAAZ,IACA,oBAAc,OAAd,cACA,iBAAc,IAAd,iBACc,MAAd,CAAgB,GAAhB,EAAgB,MAAhB,MAEA,6CAEYhB,EAASiB,EACTjB,EAAOkB,KAAK,CAAxB,iCAGUlB,EACV,oBAAY,IAAZ,UAAY,YAAZ,iBACA,qBAAY,IAAZ,uBACY,EAAZ,aAEUpD,KAAKuE,MAAMC,SAASC,WAChBzE,KAAKmC,YACPnC,KAAK0E,MAAM,UAAW1E,KAAKyD,YAe/BzD,KAAK6C,kBAAkB,CACrBlB,QAAQ,EACRC,WAAW,EACXoC,QAAS,CACPC,MAAO,uBACPC,KACZ,iEAEUC,KAAM,MAIZpC,MAnEJ,WAoEM/B,KAAK0E,MAAM,QAAS,CAA1B,0BAEIf,YAtEJ,WAuEM3D,KAAKyD,KAAO,GACZzD,KAAKuE,MAAMC,SAASG,kBACpB3E,KAAKuE,MAAMC,SAASI,WCzM8e,I,sMCOpgBnF,EAAY,eACd,EACAK,EACAgD,GACA,EACA,KACA,KACA,MAIa,aAAArD,EAAiB,QAiBhC,IAAkBA,EAAW,CAACoF,OAAA,KAAKC,QAAA,KAAMC,aAAA,OAAaC,UAAA,OAAUC,WAAA,OAAWC,OAAA,KAAKC,UAAA,KAAQC,QAAA,KAAMC,QAAA,KAAMC,QAAA,KAAMC,YAAA,KAAUC,QAAA,KAAMC,OAAA,OAM1H,IAAkBhG,EAAW,CAACiG,OAAA,U,oHCtCjBnC,EAAoB,CAC/BC,KAD+B,WAE7B,MAAO,CACLmC,gBAAgB,EAChBjD,iBAAkB,CAChBf,QAAQ,EACRC,WAAW,EACXC,QAAQ,KAId+D,WAAY,CACVC,OAAQ,kBAAM,iDACdC,iBAAkB,kBAChB,kDAEJlC,QAAS,CACPlC,yBADO,YACiD,IAA7BC,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,UAAWC,EAAU,EAAVA,OAC5C7B,KAAK0C,iBAAmB,CAAEf,SAAQC,YAAWC,WAE/Cc,kBAJO,SAIWoD,EAJX,GAIwD,WAAlC9C,EAAkC,EAAlCA,KAAM+C,EAA4B,EAA5BA,MAAOC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WAC/ClG,KAAK0B,yBAAyB,CAC5BC,QAAQ,EACRC,WAAW,EACXC,QAAQ,IAEV7B,KAAKmG,QACFC,OAAO,CACNC,SAAUC,OACVC,UAAW,CACTR,UACA1D,MAAO,CACLY,OACA+C,QACAC,QACAC,aACAM,YAAY,IAGhBC,OAAQ,SAACC,EAAD,GAA4C,IAA1B/D,EAA0B,EAAlCa,KAAQb,kBAqBxB,GAHI,EAAKS,SAAW,EAAKuD,eACvB,EAAKvD,OAAOkB,KAAK3B,GAEf,EAAKS,QAAU,EAAKuD,cAAe,CACrC,IACEC,EAGEjE,EAHFiE,GACMC,EAEJlE,EAFFM,KACO6D,EACLnE,EADFqD,MAGIe,EAAiB,CACrBf,MAAOc,EACP1F,IAAKwF,EACLI,UAAU,EACVC,WAAW,EACXhE,KAAM4D,GAGR,EAAKzD,OAAOkB,KAAKyC,OAItBG,MAAK,WACJ,EAAKxF,yBAAyB,CAC5BC,QAAQ,EACRC,WAAW,EACXC,QAAQ,IAEV,EAAK8D,gBAAiB,KAEvBwB,OAAM,WACL,IAAMC,EACJ,0EACF,EAAKC,kBAAkB,CAAE1F,QAAQ,EAAMyF,iB,8MC3FpCd,EAAsBgB,eAAH,qSAenBC,EAAsBD,eAAH,mbAwBnBE,EAAeF,eAAH,4PAeZG,EAAeH,eAAH","file":"js/chunk-ce459dc8.6eaf52dc.js","sourcesContent":["// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function installDirectives (component, directives) {\n  var options = typeof component.exports === 'function'\n    ? component.exports.extendOptions\n    : component.options\n\n  if (typeof component.exports === 'function') {\n    options.directives = component.exports.options.directives\n  }\n\n  options.directives = options.directives || {}\n\n  for (var i in directives) {\n    options.directives[i] = options.directives[i] || directives[i]\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-dialog',{attrs:{\"width\":\"400\",\"scrollable\":\"\",\"persistent\":\"\"},model:{value:(_vm.modalHandler.isOpen),callback:function ($$v) {_vm.$set(_vm.modalHandler, \"isOpen\", $$v)},expression:\"modalHandler.isOpen\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"primary d-flex justify-space-between py-6\"},[_c('span',{staticClass:\"white--text ml-9\"},[_vm._v(\" Agregar trato \")]),_c('div',[(_vm.$can(_vm.CUSTOM_FIELDS_MANAGEMENT, _vm.PERMISSIONS_SETTINGS))?_c('v-menu',{scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-icon',_vm._g({staticClass:\"white--text mr-4\",attrs:{\"small\":\"\"}},on),[_vm._v(\" mdi-cog \")])]}}],null,false,1915171085)},[_c('v-list',[_c('v-list-item',{on:{\"click\":function($event){return _vm.modalHandlerCustomFields({\n                    isOpen: true,\n                    isLoading: false,\n                    isEdit: false,\n                  })}}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-text-box-plus-outline\")]),_vm._v(\" Agregar campo \")],1),_c('v-list-item',{attrs:{\"to\":\"/settings/enterprise/custom-fields/deals\"}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-clipboard-edit-outline\")]),_vm._v(\" Editar campos \")],1)],1)],1):_vm._e(),_c('v-icon',{staticClass:\"white--text\",on:{\"click\":_vm.close}},[_vm._v(\" mdi-close \")])],1)]),_c('v-card-text',{directives:[{name:\"scroll\",rawName:\"v-scroll.self\",value:(_vm.onScroll),expression:\"onScroll\",modifiers:{\"self\":true}}],staticClass:\"pt-6\"},[_c('v-form',{ref:\"formDeal\",model:{value:(_vm.isValidate),callback:function ($$v) {_vm.isValidate=$$v},expression:\"isValidate\"}},[_c('v-row',_vm._l((_vm.inputs),function(input,index){return _c('v-col',{key:index,attrs:{\"cols\":\"12\"}},[_c('Fields',{attrs:{\"field\":input,\"resetHandler\":_vm.modalHandler.isOpen,\"isScrolled\":_vm.isScrolled},on:{\"scrolled\":_vm.scrolled}})],1)}),1)],1)],1),_c('v-card-actions',{staticClass:\"d-flex justify-space-between mx-2 my-2\"},[_c('v-btn',{attrs:{\"width\":\"45%\",\"large\":\"\",\"outlined\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.close}},[_vm._v(\" Cancelar \")]),_c('v-btn',{attrs:{\"width\":\"45%\",\"large\":\"\",\"normal\":\"\",\"color\":\"secondary\",\"loading\":_vm.modalHandler.isLoading},on:{\"click\":_vm.outData}},[_vm._v(\" Agregar \")])],1)],1)],1),_c('ModalCustomField',{attrs:{\"forForm\":'DEAL',\"modalHandler\":_vm.modalCustomField},on:{\"outData\":_vm.createCustomField,\"close\":_vm.modalHandlerCustomFields}}),_c('BaseModalAlert',{attrs:{\"modalHandler\":_vm.modalAlert,\"cancel\":false},on:{\"confirm\":_vm.modalHandlerAlert,\"close\":_vm.modalHandlerAlert}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-dialog v-model=\"modalHandler.isOpen\" width=\"400\" scrollable persistent>\n      <v-card>\n        <v-card-title class=\"primary d-flex justify-space-between py-6\">\n          <span class=\"white--text ml-9\">\n            Agregar trato\n          </span>\n          <div>\n            <v-menu v-if=\"$can(CUSTOM_FIELDS_MANAGEMENT, PERMISSIONS_SETTINGS)\">\n              <template v-slot:activator=\"{ on }\">\n                <v-icon small class=\"white--text mr-4\" v-on=\"on\">\n                  mdi-cog\n                </v-icon>\n              </template>\n              <v-list>\n                <v-list-item\n                  @click=\"\n                    modalHandlerCustomFields({\n                      isOpen: true,\n                      isLoading: false,\n                      isEdit: false,\n                    })\n                  \"\n                >\n                  <v-icon left>mdi-text-box-plus-outline</v-icon>\n                  Agregar campo\n                </v-list-item>\n                <v-list-item to=\"/settings/enterprise/custom-fields/deals\">\n                  <v-icon left>mdi-clipboard-edit-outline</v-icon>\n                  Editar campos\n                </v-list-item>\n              </v-list>\n            </v-menu>\n            <v-icon @click=\"close\" class=\"white--text\">\n              mdi-close\n            </v-icon>\n          </div>\n        </v-card-title>\n        <v-card-text class=\"pt-6\" v-scroll.self=\"onScroll\">\n          <v-form ref=\"formDeal\" v-model=\"isValidate\">\n            <v-row>\n              <v-col cols=\"12\" v-for=\"(input, index) in inputs\" :key=\"index\">\n                <Fields\n                  :field=\"input\"\n                  :resetHandler=\"modalHandler.isOpen\"\n                  :isScrolled=\"isScrolled\"\n                  @scrolled=\"scrolled\"\n                />\n              </v-col>\n            </v-row>\n          </v-form>\n        </v-card-text>\n        <v-card-actions class=\"d-flex justify-space-between mx-2 my-2\">\n          <v-btn width=\"45%\" large outlined color=\"primary\" @click=\"close\">\n            Cancelar\n          </v-btn>\n          <v-btn\n            width=\"45%\"\n            large\n            normal\n            color=\"secondary\"\n            @click=\"outData\"\n            :loading=\"modalHandler.isLoading\"\n          >\n            Agregar\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <ModalCustomField\n      :forForm=\"'DEAL'\"\n      :modalHandler=\"modalCustomField\"\n      @outData=\"createCustomField\"\n      @close=\"modalHandlerCustomFields\"\n    />\n    <BaseModalAlert\n      :modalHandler=\"modalAlert\"\n      :cancel=\"false\"\n      @confirm=\"modalHandlerAlert\"\n      @close=\"modalHandlerAlert\"\n    ></BaseModalAlert>\n  </v-row>\n</template>\n\n<script>\nimport { customFieldsMixin } from '@/mixins/customFieldsMixin';\nimport { modalsAlertsMixin } from '@/mixins/alerts/modalsAlertsMixin';\nimport { CUSTOM_FIELDS_MANAGEMENT } from '@/constants/methods';\nimport { PERMISSIONS_SETTINGS } from '@/constants/permissions';\n\nexport default {\n  name: 'ModalDeals',\n  props: {\n    modalHandler: {\n      required: true,\n      type: Object,\n      default: () => {\n        return { isOpen: false, isLoading: false };\n      },\n    },\n    inputs: {\n      required: true,\n      type: Array,\n      default: () => {\n        return {};\n      },\n    },\n  },\n  mixins: [customFieldsMixin, modalsAlertsMixin],\n  data() {\n    return {\n      deal: {},\n      isValidate: '',\n      isScrolled: false,\n      PERMISSIONS_SETTINGS,\n      CUSTOM_FIELDS_MANAGEMENT,\n    };\n  },\n  watch: {\n    modalHandler({ isOpen }) {\n      if (!isOpen) {\n        this.resetValues();\n      } else {\n        this.isScrolled = false;\n      }\n    },\n  },\n  methods: {\n    scrolled(value) {\n      this.isScrolled = value;\n    },\n    onScroll() {\n      this.isScrolled = true;\n    },\n    outData() {\n      let inputs = [...this.inputs];\n      // find pipeline\n      const pipeline = inputs.find((input) => input.keyInput === 'pipeline');\n\n      // validate if exist pipeline value\n      if (pipeline.value) {\n        const isEmptyPipeline =\n          Object.keys(pipeline.value)?.length === 0 &&\n          pipeline.value.constructor === Object;\n        if (!isEmptyPipeline) {\n          const existCustomFields = this.inputs.some(\n            (input) => !input.keyInput,\n          );\n          if (existCustomFields) {\n            const customForms = inputs\n              .filter((input) => !input.keyInput)\n              .map(({ id, value }) => {\n                return { id, value };\n              });\n            const cleanInputs = inputs.filter((input) => input.keyInput);\n            // eslint-disable-next-line\n            inputs = cleanInputs;\n            inputs.push({ keyInput: 'customForms', value: customForms });\n          }\n          // arma un nuevo Arreglo con el keyInput y el value\n          inputs\n            .filter(({ value }) => value !== undefined && value !== '')\n            .forEach(({ keyInput, value }) => {\n              this.deal[keyInput] = value;\n            });\n          this.$refs.formDeal.validate();\n          if (this.isValidate) {\n            this.$emit('outData', this.deal);\n          }\n        } else {\n          this.modalHandlerAlert({\n            isOpen: true,\n            isLoading: false,\n            message: {\n              title: 'Selecciona un embudo',\n              text:\n                'Es necesario que agregues el embudo al que agregaras el trato',\n            },\n            info: {},\n          });\n        }\n      } else {\n        this.modalHandlerAlert({\n          isOpen: true,\n          isLoading: false,\n          message: {\n            title: 'Selecciona un embudo',\n            text:\n              'Es necesario que agregues el embudo al que agregaras el trato',\n          },\n          info: {},\n        });\n      }\n    },\n    close() {\n      this.$emit('close', { isOpen: false, isLoading: false });\n    },\n    resetValues() {\n      this.deal = {};\n      this.$refs.formDeal.resetValidation();\n      this.$refs.formDeal.reset();\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalDeals.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalDeals.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalDeals.vue?vue&type=template&id=d2e6e3ec&\"\nimport script from \"./ModalDeals.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalDeals.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VDialog,VForm,VIcon,VList,VListItem,VMenu,VRow})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Scroll from 'vuetify/lib/directives/scroll'\ninstallDirectives(component, {Scroll})\n","import { CREATE_CUSTOM_FIELD } from '@/graphql/mutations/customFieldsMutations';\n// import { GET_FORM } from '@/graphql/querys/formsQuery';\n\nexport const customFieldsMixin = {\n  data() {\n    return {\n      isUpdateInputs: false,\n      modalCustomField: {\n        isOpen: false,\n        isLoading: false,\n        isEdit: false,\n      },\n    };\n  },\n  components: {\n    Fields: () => import('@/components/fields/Fields.vue'),\n    ModalCustomField: () =>\n      import('@/components/customFields/ModalCustomField.vue'),\n  },\n  methods: {\n    modalHandlerCustomFields({ isOpen, isLoading, isEdit }) {\n      this.modalCustomField = { isOpen, isLoading, isEdit };\n    },\n    createCustomField(forForm, { type, label, items, isRequired }) {\n      this.modalHandlerCustomFields({\n        isOpen: true,\n        isLoading: true,\n        isEdit: false,\n      });\n      this.$apollo\n        .mutate({\n          mutation: CREATE_CUSTOM_FIELD,\n          variables: {\n            forForm,\n            input: {\n              type,\n              label,\n              items,\n              isRequired,\n              isMultiple: false,\n            },\n          },\n          update: (store, { data: { createCustomField } }) => {\n            // const data = store.readQuery({\n            //   query: GET_FORM,\n            //   variables: {\n            //     type: forForm,\n            //   },\n            // });\n            // if (!data.getForm.customForm.inputs)\n            //   data.getForm.customForm.inputs = [];\n            // data.getForm.customForm.inputs.push(createCustomField);\n            // store.writeQuery({\n            //   query: GET_FORM,\n            //   variables: {\n            //     type: forForm,\n            //   },\n            //   data,\n            // });\n            // update array inputs modals\n            if (this.inputs && !this.isImportModal) {\n              this.inputs.push(createCustomField);\n            }\n            if (this.inputs && this.isImportModal) {\n              const {\n                id,\n                type: typeInput,\n                label: labelInput,\n              } = createCustomField;\n\n              const newCustomInput = {\n                label: labelInput,\n                key: id,\n                isSelect: false,\n                isDefault: false,\n                type: typeInput,\n              };\n\n              this.inputs.push(newCustomInput);\n            }\n          },\n        })\n        .then(() => {\n          this.modalHandlerCustomFields({\n            isOpen: false,\n            isLoading: false,\n            isEdit: false,\n          });\n          this.isUpdateInputs = true;\n        })\n        .catch(() => {\n          const error =\n            'No se pudo actualizar los campos, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n  },\n};\n","import gql from 'graphql-tag';\n\nexport const CREATE_CUSTOM_FIELD = gql`\n  mutation CreateCustomFields($forForm: typeForm!, $input: CreateCustomInput!) {\n    createCustomField(forForm: $forForm, input: $input) {\n      id\n      order\n      label\n      icon\n      type\n      items\n      isRequired\n      isMultiple\n    }\n  }\n`;\n\nexport const UPDATE_ORDER_INPUTS = gql`\n  mutation UpdateOrderInputs($forForm: typeForm!, $inputs: [UpdateOrder!]!) {\n    updateOrderInputs(forForm: $forForm, inputs: $inputs) {\n      forForm\n      defaultForm {\n        id\n        inputs {\n          id\n          label\n          order\n        }\n      }\n      customForm {\n        id\n        inputs {\n          id\n          label\n          order\n        }\n      }\n    }\n  }\n`;\n\nexport const UPDATE_INPUT = gql`\n  mutation UpdateCustomField($input: UpdateCustomInput!) {\n    updateCustomField(input: $input) {\n      id\n      type\n      icon\n      label\n      items\n      order\n      isRequired\n      isMultiple\n    }\n  }\n`;\n\nexport const DELETE_INPUT = gql`\n  mutation DeleteInput($input: ID!) {\n    deleteCustomField(input: $input) {\n      forForm\n      defaultForm {\n        id\n        inputs {\n          id\n          order\n        }\n      }\n      customForm {\n        id\n        inputs {\n          id\n          order\n          label\n          icon\n          type\n          items\n          isRequired\n          isMultiple\n        }\n      }\n    }\n  }\n`;\n"],"sourceRoot":""}