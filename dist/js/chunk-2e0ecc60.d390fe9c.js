(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e0ecc60"],{4420:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={data:function(){return{snackbar:{isOpen:!1,color:"",text:""}}},methods:{snackbarHandler:function(e){var t=e.isOpen,n=e.color,a=e.text;this.snackbar={isOpen:t,color:n,text:a}}}}},"499d":function(e,t,n){"use strict";n("6b31")},"6b31":function(e,t,n){},"857a":function(e,t,n){var a=n("1d80"),s=/"/g;e.exports=function(e,t,n,i){var r=String(a(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),o+">"+r+"</"+t+">"}},8907:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a,s,i,r,o=n("8785"),l=n("5184"),u=Object(l["a"])(a||(a=Object(o["a"])(["\n  mutation UploadFile($input: TypeFileInput!) {\n    uploadFile(upFile: $input) {\n      id\n      name\n      fileExtension\n      url {\n        link\n        key\n      }\n      description\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n      size\n    }\n  }\n"]))),c=Object(l["a"])(s||(s=Object(o["a"])(["\n  mutation uploadProfilePhoto($input: FileInput!) {\n    uploadProfilePhoto(upFile: $input) {\n      link\n    }\n  }\n"]))),d=Object(l["a"])(i||(i=Object(o["a"])(["\n  mutation DeleteFile($input: DeleteFile!) {\n    deleteFile(deleteFile: $input)\n  }\n"]))),m=Object(l["a"])(r||(r=Object(o["a"])(["\n  mutation UpdateDescriptionFile($input: descriptionInput!) {\n    updateDescriptionFile(descriptionInput: $input) {\n      id\n      name\n      url {\n        key\n        link\n      }\n      description\n      size\n      createdBy {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      createdAt\n    }\n  }\n"])))},9911:function(e,t,n){"use strict";var a=n("23e7"),s=n("857a"),i=n("af03");a({target:"String",proto:!0,forced:i("link")},{link:function(e){return s(this,"a","href",e)}})},af03:function(e,t,n){var a=n("d039");e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},f647:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return g}));var a,s,i,r,o,l,u=n("8785"),c=n("5184"),d=Object(c["a"])(a||(a=Object(u["a"])(["\n  mutation changeUserStatus($input: userEnterpriseUpdateInput!) {\n    pauseAccount(userEnterpriseInput: $input) {\n      id\n      isActive\n      user {\n        id\n      }\n    }\n  }\n"]))),m=Object(c["a"])(s||(s=Object(u["a"])(["\n  mutation createUser($input: userCreateInput!) {\n    createUser(userInput: $input) {\n      id\n      isActive\n      user {\n        id\n        name\n        lastName\n        email\n        phones\n      }\n      role {\n        id\n        name\n        type\n      }\n      group {\n        id\n        name\n      }\n    }\n  }\n"]))),p=Object(c["a"])(i||(i=Object(u["a"])(["\n  mutation deleteUserEnterprise($input: userEnterpriseDeleteInput!) {\n    deleteUserEnterprise(userEnterpriseInput: $input) {\n      id\n      user {\n        id\n        name\n        lastName\n        email\n        phones\n      }\n      role {\n        id\n        name\n        type\n      }\n      group {\n        id\n        name\n      }\n    }\n  }\n"]))),f=Object(c["a"])(r||(r=Object(u["a"])(["\n  mutation updateUserEnterprise($input: userEnterpriseUpdateInput!) {\n    updateUserEnterprise(userEnterpriseInput: $input) {\n      id\n      isActive\n      user {\n        id\n        name\n        lastName\n        email\n        phones\n        config {\n          profileUrl\n        }\n      }\n      role {\n        id\n        name\n        type\n      }\n      group {\n        id\n        name\n      }\n    }\n  }\n"]))),h=Object(c["a"])(o||(o=Object(u["a"])(["\n  mutation UpdateUserPassword($input: userUpdatePasswordInput!) {\n    updateUserPassword(userInput: $input) {\n      status\n      message\n    }\n  }\n"]))),g=Object(c["a"])(l||(l=Object(u["a"])(["\n  mutation updateUser($userInput: userUpdateInput!) {\n    updateUser(userInput: $userInput) {\n      id\n      email\n      name\n      lastName\n    }\n  }\n"])))},f7db:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{outlined:"",width:"35em"}},[n("v-progress-linear",{attrs:{active:e.isLoadingImage,indeterminate:e.isLoadingImage,height:"6",absolute:"",color:"primary"}}),n("v-card-text",[n("v-form",{ref:"profileForm",model:{value:e.isValidate,callback:function(t){e.isValidate=t},expression:"isValidate"}},[n("v-row",{staticClass:"justify-center"},[n("v-col",{attrs:{cols:"12",align:"center"}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[n("v-avatar",{attrs:{size:"80",color:"secondary"}},[null===e.userCurrent.profileUrl||e.$apollo.queries.userCurrent.loading||e.errorImage?n("span",{staticClass:"white--text"},[e._v(" "+e._s(e.user.name.charAt(0).toUpperCase())+" "+e._s(e.user.lastName.charAt(0).toUpperCase())+" ")]):n("v-img",{attrs:{src:e.userCurrent.profileUrl,"item.user.config.profileUrl":""},on:{error:e.catchErrorImage}}),n("ModalProfileImage",{attrs:{field:"img",langExt:e.languageExtencion,width:300,height:300,noRotate:!1,url:"https://httpbin.org/post"},on:{"src-file-set":e.getImageSources,"crop-success":e.upload,"crop-upload-success":e.uploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.showUploadImage,callback:function(t){e.showUploadImage=t},expression:"showUploadImage"}}),n("v-btn",{staticClass:"hide-input",attrs:{"x-small":"",icon:""},on:{click:function(t){e.showUploadImage=!0}}},[n("v-icon",[e._v("mdi-pencil")])],1)],1)],1)],1)],1),e.imageError.error?n("p",{staticClass:"red--text text-center"},[e._v(" "+e._s(e.imageError.message)+" ")]):e._e()],1),n("v-col",{staticClass:"py-0",attrs:{cols:"12",align:"center"}},[n("v-list-item",[n("v-list-item-content",{staticClass:"pb-0"},[n("v-list-item-title",{staticClass:"user-name-settings"},[e._v(" "+e._s(e.user.name)+" "+e._s(e.user.lastName)+" "),n("v-btn",{attrs:{"x-small":"",icon:""},on:{click:e.handlerEditName}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1)],1)],1)],1),e.isEditName?n("v-text-field",{staticClass:"inputs-user-settings mb-2",attrs:{outlined:"",dense:"","hide-details":"auto",rules:e.rules.general.concat(e.rules.text)},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}):e._e(),e.isEditName?n("v-text-field",{staticClass:"inputs-user-settings",attrs:{value:e.userCurrent.user.lastName,outlined:"",dense:"","hide-details":"auto",rules:e.rules.general.concat(e.rules.text)},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}}):e._e()],1),n("v-col",{staticClass:"py-0 d-flex align-center flex-column",attrs:{cols:"12",align:"center"}},[n("v-list-item",[n("v-list-item-content",{staticClass:"pt-0"},[n("v-list-item-title",{staticClass:"email-settings"},[e._v(" "+e._s(e.user.email)+" "),n("v-btn",{attrs:{"x-small":"",icon:""},on:{click:e.handlerEditEmail}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1)],1)],1)],1),e.isEditEmail?n("v-text-field",{staticClass:"inputs-user-settings",attrs:{readonly:!e.isLockEmail,value:e.userCurrent.user.email,"append-icon":e.isLockEmail?"mdi-lock-open-variant":"mdi-lock",outlined:"",dense:"","hide-details":"auto",rules:e.rules.email},on:{"click:append":function(t){e.isLockEmail=!e.isLockEmail}},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}):e._e()],1),n("div",{staticClass:"d-flex align-center flex-column pt-4"},[n("v-text-field",{staticClass:"mb-8 inputs-user-preferences",attrs:{disabled:"",value:e.zoneTime,outlined:"",dense:"","hide-details":"auto",tile:""}}),n("v-select",{staticClass:"mb-8 inputs-user-preferences",attrs:{disabled:"",dense:"",outlined:"","hide-details":"auto",items:e.listLanguages,value:"Español",tile:""}}),n("v-select",{staticClass:"inputs-user-preferences",attrs:{disabled:"",dense:"",outlined:"","hide-details":"auto",items:e.listMoney,value:"MXN"}})],1)],1)],1),n("BaseModalError",{attrs:{modalHandler:e.modalError},on:{close:e.modalHandlerError}}),n("v-snackbar",{attrs:{color:e.snackbar.color,timeout:5e3},scopedSlots:e._u([{key:"action",fn:function(){return[n("v-btn",{attrs:{text:""},on:{click:function(t){return e.snackbarHandler({isOpen:!1,color:"",text:""})}}},[e._v(" Cerrar ")])]},proxy:!0}]),model:{value:e.snackbar.isOpen,callback:function(t){e.$set(e.snackbar,"isOpen",t)},expression:"snackbar.isOpen"}},[e._v(" "+e._s(e.snackbar.text)+" ")])],1),n("v-card-actions",{staticClass:"py-8"},[n("v-row",{staticClass:"justify-center"},[n("v-col",{staticClass:"d-flex justify-space-around",attrs:{sm:"8",md:"6",lg:"4"}},[n("v-btn",{staticClass:"mr-2",attrs:{disabled:!e.hasChanges,outlined:"",loading:e.isLoadingReset,tile:"",large:""},on:{click:e.reset}},[e._v(" Cancelar ")]),n("v-btn",{attrs:{disabled:!e.hasChanges,color:"secondary",tile:"",large:"",loading:e.isLoading},on:{click:e.updateUser}},[e._v(" Guardar ")])],1)],1)],1)],1)},s=[],i=n("1da1"),r=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("9911"),n("e815")),o=n("8907"),l=n("f647"),u=n("1903"),c=n("f82a"),d=n("1e6d"),m=n("4420"),p={name:"ProfileAndPreferences",mixins:[c["a"],d["a"],m["a"]],components:{ModalProfileImage:function(){return Promise.all([n.e("chunk-cac290de"),n.e("chunk-83557070")]).then(n.bind(null,"bb2e"))}},data:function(){return{isValidate:!0,isEditName:!1,isEditEmail:!1,isLockEmail:!1,user:{name:"",lastName:"",email:""},listMoney:["MXN"],listLanguages:["Español"],isLoading:!1,isLoadingReset:!1,isLoadingImage:!1,errorImage:!1,imageError:{error:!1,message:""},imgData:{},showUploadImage:!1,params:{},headers:{},languageExtencion:{hint:"Selecciona o arrastra una imagen",loading:"Subiendo...",noSupported:"Tu navegador no es soportado, por favor usa IE10+ u otros navegadores más recientes",success:"Subido exitosamente",fail:"Sucedió un error",preview:"Vista previa",btn:{off:"Cancelar",close:"Cerrar",back:"Atrás",save:"Guardar"},error:{onlyImg:"Únicamente imágenes",outOfSize:"La imagen excede el tamaño máximo:",lowestPx:"La imagen es demasiado pequeña. Se espera por lo menos:"}}}},watch:{isEditName:function(e){e||(this.user.lastName!==this.userCurrent.lastName&&(this.user.lastName=this.userCurrent.user.lastName),this.user.name!==this.userCurrent.user.name&&(this.user.name=this.userCurrent.user.name))},isEditEmail:function(e){e||this.user.email!==this.userCurrent.email&&(this.user.email=this.userCurrent.user.email)},"userCurrent.user.name":{handler:function(e){this.user.name=e}},"userCurrent.user.lastName":{handler:function(e){this.user.lastName=e}},"userCurrent.user.email":{handler:function(e){this.user.email=e}}},computed:{zoneTime:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},hasChanges:function(){return this.userCurrent.user.name!==this.user.name||this.userCurrent.user.lastName!==this.user.lastName||this.userCurrent.user.email!==this.user.email}},methods:{catchErrorImage:function(e){e&&(this.errorImage=!0)},sendPhoto:function(e){var t=this;if(e){this.isLoadingImage=!0;var n=e.name,a=e.size;this.$apollo.mutate({client:"files",mutation:o["d"],variables:{input:{name:n,size:a,file:e}}}).then((function(e){var n=e.data.uploadProfilePhoto;t.$apollo.mutate({mutation:u["k"],variables:{userCurrent:{profileUrl:n.link}}}),t.imgData={},t.isLoadingImage=!1,t.snackbarHandler({isOpen:!0,color:"success",text:"La imagen de perfil se cambió con éxito"})})).catch((function(){t.isLoadingImage=!1;var e="No se pudo actualizar la imagen de perfil, intente de nuevo o contacte al soporte";t.modalHandlerError({isOpen:!0,error:e})}))}},updateUser:function(){var e=this;if(this.$refs.profileForm.validate(),this.isValidate){this.isLoading=!0;var t=this.user,n=t.name,a=t.lastName,s=t.email;this.$apollo.mutate({mutation:l["d"],variables:{userInput:{name:n,lastName:a,email:s}}}).then((function(){e.snackbarHandler({isOpen:!0,color:"success",text:"Se actualizó correctamente"}),e.isLoading=!1,e.isEmailEdit=!1})).catch((function(){var t="No se pudo actualizar el perfil, intente de nuevo o contacte a soporte";e.modalHandlerError({isOpen:!0,error:t}),e.isLoading=!1,e.isEmailEdit=!1}))}},handlerEditName:function(){this.isEditName=!this.isEditName},handlerEditEmail:function(){this.isEditEmail=!this.isEditEmail,this.isLockEmail=!1},reset:function(){this.isLoadingReset=!0,this.user.name=this.userCurrent.user.name,this.user.lastName=this.userCurrent.user.lastName,this.user.email=this.userCurrent.user.email,this.isLoadingReset=!1,this.isEditName=!1,this.isLockEmail=!1},getImageSources:function(e){this.imgData=e},dataUrlToFile:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch(e);case 2:return s=a.sent,a.next=5,s.blob();case 5:return i=a.sent,a.abrupt("return",new File([i],t,{type:n.imgData.type}));case 7:case"end":return a.stop()}}),a)})))()},upload:function(e){var t=this;this.dataUrlToFile(e,this.imgData.name).then((function(e){t.sendPhoto(e)}))},uploadSuccess:function(){this.showUploadImage=!1},cropUploadFail:function(){this.imageError={error:!0,message:"Ha ocurrido un error, intente de nuevo o contacte a soporte"},this.isLoadingImage=!1,this.showUploadImage=!1}},apollo:{userCurrent:{query:r["k"]}}},f=p,h=(n("499d"),n("0c7c")),g=n("6544"),v=n.n(g),b=n("8212"),E=n("8336"),C=n("b0af"),k=n("99d9"),x=n("62ad"),I=n("4bd4"),N=n("132d"),U=n("adda"),O=n("da13"),L=n("5d23"),w=n("8e36"),$=n("0fd9"),y=n("b974"),j=n("2db4"),_=n("8654"),V=Object(h["a"])(f,a,s,!1,null,"d81deed8",null);t["default"]=V.exports;v()(V,{VAvatar:b["a"],VBtn:E["a"],VCard:C["a"],VCardActions:k["a"],VCardText:k["c"],VCol:x["a"],VForm:I["a"],VIcon:N["a"],VImg:U["a"],VListItem:O["a"],VListItemContent:L["a"],VListItemTitle:L["c"],VProgressLinear:w["a"],VRow:$["a"],VSelect:y["a"],VSnackbar:j["a"],VTextField:_["a"]})}}]);
//# sourceMappingURL=chunk-2e0ecc60.d390fe9c.js.map