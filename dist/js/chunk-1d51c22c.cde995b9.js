(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d51c22c","chunk-7859f8ee","chunk-7859f8ee"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"2b5d":function(e,t,n){"use strict";n("2bfd");var s=n("b974"),i=n("c6a6"),a=n("80d2");t["a"]=i["a"].extend({name:"v-combobox",props:{delimiters:{type:Array,default:()=>[]},returnObject:{type:Boolean,default:!0}},data:()=>({editingIndex:-1}),computed:{computedCounterValue(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot(){return s["a"].options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed(){return!0},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)},searchIsDirty(){return null!=this.internalSearch}},methods:{onInternalSearchChanged(e){if(e&&this.multiple&&this.delimiters.length){const t=this.delimiters.find(t=>e.endsWith(t));null!=t&&(this.internalSearch=e.slice(0,e.length-t.length),this.updateTags())}this.updateMenuDimensions()},genInput(){const e=i["a"].options.methods.genInput.call(this);return delete e.data.attrs.name,e.data.on.paste=this.onPaste,e},genChipSelection(e,t){const n=s["a"].options.methods.genChipSelection.call(this,e,t);return this.multiple&&(n.componentOptions.listeners={...n.componentOptions.listeners,dblclick:()=>{this.editingIndex=t,this.internalSearch=this.getText(e),this.selectedIndex=-1}}),n},onChipInput(e){s["a"].options.methods.onChipInput.call(this,e),this.editingIndex=-1},onEnterDown(e){e.preventDefault(),this.getMenuIndex()>-1||this.$nextTick(this.updateSelf)},onFilteredItemsChanged(e,t){this.autoSelectFirst&&i["a"].options.methods.onFilteredItemsChanged.call(this,e,t)},onKeyDown(e){const t=e.keyCode;!e.ctrlKey&&[a["z"].home,a["z"].end].includes(t)||s["a"].options.methods.onKeyDown.call(this,e),this.multiple&&t===a["z"].left&&0===this.$refs.input.selectionStart?this.updateSelf():t===a["z"].enter&&this.onEnterDown(e),this.changeSelectedIndex(t)},onTabDown(e){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return e.preventDefault(),e.stopPropagation(),this.updateTags();i["a"].options.methods.onTabDown.call(this,e)},selectItem(e){this.editingIndex>-1?this.updateEditing():(i["a"].options.methods.selectItem.call(this,e),this.internalSearch&&this.multiple&&this.getText(e).toLocaleLowerCase().includes(this.internalSearch.toLocaleLowerCase())&&(this.internalSearch=null))},setSelectedItems(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue(e){s["a"].options.methods.setValue.call(this,null!=e?e:this.internalSearch)},updateEditing(){const e=this.internalValue.slice(),t=this.selectedItems.findIndex(e=>this.getText(e)===this.internalSearch);if(t>-1){const n="object"===typeof e[t]?Object.assign({},e[t]):e[t];e.splice(t,1),e.push(n)}else e[this.editingIndex]=this.internalSearch;this.setValue(e),this.editingIndex=-1,this.internalSearch=null},updateCombobox(){if(!this.searchIsDirty)return;this.internalSearch!==this.getText(this.internalValue)&&this.setValue();const e=Boolean(this.$scopedSlots.selection)||this.hasChips;e&&(this.internalSearch=null)},updateSelf(){this.multiple?this.updateTags():this.updateCombobox()},updateTags(){const e=this.getMenuIndex();if(e<0&&!this.searchIsDirty||!this.internalSearch)return;if(this.editingIndex>-1)return this.updateEditing();const t=this.selectedItems.findIndex(e=>this.internalSearch===this.getText(e)),n=t>-1&&"object"===typeof this.selectedItems[t]?Object.assign({},this.selectedItems[t]):this.internalSearch;if(t>-1){const e=this.internalValue.slice();e.splice(t,1),this.setValue(e)}if(e>-1)return this.internalSearch=null;this.selectItem(n),this.internalSearch=null},onPaste(e){var t;if(!this.multiple||this.searchIsDirty)return;const n=null==(t=e.clipboardData)?void 0:t.getData("text/vnd.vuetify.autocomplete.item+plain");n&&-1===this.findExistingIndex(n)&&(e.preventDefault(),s["a"].options.methods.selectItem.call(this,n))},clearableCallback(){this.editingIndex=-1,i["a"].options.methods.clearableCallback.call(this)}}})},"2bfd":function(e,t,n){},"584e":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-combobox",{attrs:{readonly:e.readOnly,items:e.searchContacts.list,"menu-props":e.menuProps,"search-input":e.search,disabled:!!e.field.defaultValue,rules:e.field.isRequired?e.rules.isRequired:[],hint:e.field.isRequired?"* Este campo es obligatorio":"","item-value":"id","item-text":"name",maxlength:"50",label:"Contacto","hide-details":"auto","prepend-icon":"mdi-account-tie",outlined:"",clearable:"","full-width":"","hide-selected":"","persistent-hint":"","hide-no-data":e.$apollo.queries.searchContacts.loading},on:{change:e.changeOnTextField,"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[n("v-list-item",{staticClass:"mt-2"},[n("v-list-item-content",[n("v-list-item-title",[e._v(" presiona el botón "),n("kbd",[e._v("entrar")]),e._v(" para crear a "),n("strong",[e._v(e._s(e.search))])])],1)],1)]},proxy:!0},{key:"item",fn:function(t){var s=t.index,i=t.item;return[n("span",{key:s},[e._v(" "+e._s(i.name)+" "),i.companies.length>0?n("span",[e._v(" ( "),n("v-icon",{staticClass:"mr-1",attrs:{"x-small":""}},[e._v(" mdi-domain ")]),e._v(" "+e._s(i.companies[0].name)+" "),n("v-menu",{attrs:{"allow-overflow":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,a=t.attrs;return[n("v-tooltip",{attrs:{top:"",color:"white"},scopedSlots:e._u([{key:"activator",fn:function(t){var l=t.on;return[n("v-chip",e._g(e._b({directives:[{name:"show",rawName:"v-show",value:i.companies.length>1,expression:"item.companies.length > 1"}],staticClass:"ml-1 pa-1",attrs:{outlined:"","x-small":""}},"v-chip",a,!1),Object.assign({},l,s)),[e._v(" + "+e._s(i.companies.length)+" ")])]}}],null,!0)},[n("span",{staticClass:"black--text"},[e._v(" Este contacto cuenta con más de una empresa has click para ver ")])])]}}],null,!0)},[n("v-list",e._l(i.companies,(function(t,s){return n("v-list-item",{key:s,attrs:{dense:""}},[n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-domain")]),n("v-list-item-title",[e._v(e._s(t.name))])],1)})),1)],1),e._v(" ) ")],1):e._e()])]}},{key:"selection",fn:function(t){var s=t.attrs,i=t.item,a=t.selected;return[n("span",e._b({attrs:{"input-value":a}},"span",s,!1),[e._v(" "+e._s(i.name?i.name:i)+" ")])]}},e.isNewContact?{key:"append",fn:function(){return[n("v-chip",{attrs:{"x-small":"",color:"success"}},[e._v(" Nuevo ")])]},proxy:!0}:null],null,!0),model:{value:e.contact,callback:function(t){e.contact=t},expression:"contact"}})},i=[],a=n("5530"),l=(n("ac1f"),n("841c"),n("f82a")),c=n("7029"),r={name:"FieldSelectContact",mixins:[l["a"]],props:{field:{type:Object,required:!0},resetHandler:{type:Boolean,default:!1},isScrolled:{type:Boolean,default:!1}},data:function(){return{search:"",contact:"",searchContacts:{},isNewContact:!1}},created:function(){this.field.defaultValue&&this.addDefaultValue()},watch:{resetHandler:function(e){e?this.field.defaultValue&&this.addDefaultValue():this.resetValues()},contact:function(e){e?(this.isNewContact=void 0===e.id,this.field.value=e.id?e:{name:e}):e||(this.isNewContact=!1)}},computed:{hasSearch:function(){return null!==this.search&&void 0!==this.search&&""!==this.search&&this.search.length>2},menuProps:function(){return this.isScrolled||!this.search?{value:!1}:{}},readOnly:function(){return null!==this.contact&&void 0!==this.contact&&""!==this.contact}},methods:{changeOnTextField:function(){this.$emit("scrolled",!1)},addDefaultValue:function(){this.contact=Object(a["a"])({},this.field.defaultValue)},clearValue:function(){this.contact="",this.isNewContact=!0},resetValues:function(){delete this.field.defaultValue,delete this.field.value,this.isNewContact=!1,this.contact=""}},apollo:{searchContacts:{query:c["g"],fetchPolicy:"no-cache",variables:function(){return{filters:{search:this.search,skip:0,take:10}}},skip:function(){return!this.hasSearch}}}},o=r,h=n("0c7c"),d=n("6544"),u=n.n(d),m=n("cc20"),p=n("2b5d"),f=n("132d"),I=n("8860"),g=n("da13"),v=n("5d23"),S=n("e449"),y=n("3a2f"),b=Object(h["a"])(o,s,i,!1,null,null,null);t["default"]=b.exports;u()(b,{VChip:m["a"],VCombobox:p["a"],VIcon:f["a"],VList:I["a"],VListItem:g["a"],VListItemContent:v["a"],VListItemTitle:v["c"],VMenu:S["a"],VTooltip:y["a"]})},7029:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return I})),n.d(t,"d",(function(){return g})),n.d(t,"f",(function(){return v}));var s,i,a,l,c,r,o,h=n("8785"),d=n("5184"),u=Object(d["a"])(s||(s=Object(h["a"])(["\n  query getContacts($filters: FilterContacts, $importId: ID) {\n    contacts(filters: $filters, importId: $importId) {\n      count\n      informationBar {\n        totalCount\n        contactsWithOpenDeals\n        contactsWithWonDeals\n      }\n      list {\n        id\n        name\n        email\n        phones\n        isClient\n        socialMedias\n        birthday\n        createdAt\n        updatedAt\n        customForms\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        contactCounts {\n          openDeals\n          closedDeals\n          lostDeals\n          wonDeals\n          emailMessages\n          totalActivities\n          doneActivities\n          undoneActivities\n          files\n          notes\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        tags {\n          id\n          name\n          color\n          order\n        }\n        companies {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),m=Object(d["a"])(i||(i=Object(h["a"])(["\n  query getContacts($filters: FilterContacts, $importId: ID) {\n    searchContacts: contacts(filters: $filters, importId: $importId) {\n      list {\n        id\n        name\n        companies {\n          id\n          name\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n"]))),p=Object(d["a"])(a||(a=Object(h["a"])(["\n  query GetContact($contactId: ID!) {\n    contact(contactId: $contactId) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      customForms\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      enterprise {\n        id\n        name\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n      createdAt\n      isDelete\n    }\n  }\n"]))),f=Object(d["a"])(l||(l=Object(h["a"])(["\n  query GetContactHistory($contactId: ID!) {\n    contactHistory: contact(contactId: $contactId) {\n      id\n      name\n      email\n      files\n      import {\n        id\n      }\n      activityEmailStream {\n        id\n        flow\n        users {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n      }\n      activityStream {\n        id\n        flow\n        users {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        companies {\n          id\n          name\n        }\n        deals {\n          id\n          title\n        }\n        customs {\n          id\n          label\n        }\n      }\n      notes {\n        id\n        content\n        type\n        createdAt\n        userTags {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        comments {\n          id\n          comment\n          createdAt\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          userTags {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n        }\n      }\n      activities {\n        id\n        title\n        status\n        start\n        end\n        location\n        description\n        deal {\n          id\n          title\n        }\n        contacts {\n          id\n          name\n        }\n        companies {\n          id\n          name\n        }\n        type {\n          id\n          name\n          color\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        notes {\n          id\n          content\n          type\n          userTags {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdAt\n          comments {\n            id\n            comment\n            userTags {\n              id\n            }\n            createdBy {\n              id\n              user {\n                id\n                name\n                lastName\n              }\n            }\n            createdAt\n          }\n        }\n        completedDate\n        createdAt\n        isAllDay\n        guests\n      }\n    }\n  }\n"]))),I=Object(d["a"])(c||(c=Object(h["a"])(["\n  query getContactsToEmail($filters: FilterContacts) {\n    contacts(filters: $filters) {\n      list {\n        id\n        name\n        email\n        birthday\n        companies {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),g=Object(d["a"])(r||(r=Object(h["a"])(["\n  query getContactsToInvites($filters: FilterContacts) {\n    contacts(filters: $filters) {\n      list {\n        id\n        name\n        email\n      }\n    }\n  }\n"]))),v=Object(d["a"])(o||(o=Object(h["a"])(["\n  query DuplicateContacts {\n    duplicateContacts {\n      list {\n        id\n        name\n        email\n        phones\n        companies {\n          id\n          name\n        }\n        contactCounts {\n          openDeals\n          totalActivities\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdAt\n      }\n    }\n  }\n"])))},"841c":function(e,t,n){"use strict";var s=n("d784"),i=n("825a"),a=n("1d80"),l=n("129f"),c=n("14c3");s("search",(function(e,t,n){return[function(t){var n=a(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,n):new RegExp(t)[e](String(n))},function(e){var s=n(t,this,e);if(s.done)return s.value;var a=i(this),r=String(e),o=a.lastIndex;l(o,0)||(a.lastIndex=0);var h=c(a,r);return l(a.lastIndex,o)||(a.lastIndex=o),null===h?-1:h.index}]}))},c6a6:function(e,t,n){"use strict";n("2bfd");var s=n("b974"),i=n("8654"),a=n("d9f7"),l=n("80d2");const c={...s["b"],offsetY:!0,offsetOverflow:!0,transition:!1};t["a"]=s["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,n)=>n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:s["a"].options.props.menuProps.type,default:()=>c},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(e=>this.getValue(e))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(e=>!this.hasItem(e)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(e=>{const t=Object(l["s"])(e,this.itemText),n=null!=t?String(t):"";return this.filter(e,String(this.internalSearch),n)})},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch!==e&&(this.lazySearch=e,this.$emit("update:search-input",e))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=s["a"].options.computed.$_menuProps.call(this);return e.contentClass=("v-autocomplete__content "+(e.contentClass||"")).trim(),{...c,...e}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue)))},listData(){const e=s["a"].options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=null)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(e,t){e!==t&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===l["z"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===l["z"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==l["z"].backspace&&e!==l["z"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const e=this.selectedIndex,t=this.selectedItems[e];if(!this.isInteractive||this.getDisabled(t))return;const n=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==n)return void(this.selectedIndex=n);const s=this.selectedItems.length,i=e!==s-1?e:e-1,a=this.selectedItems[i];a?this.selectItem(t):this.setValue(this.multiple?[]:null),this.selectedIndex=i},clearableCallback(){this.internalSearch=null,s["a"].options.methods.clearableCallback.call(this)},genInput(){const e=i["a"].options.methods.genInput.call(this);return e.data=Object(a["a"])(e.data,{attrs:{"aria-activedescendant":Object(l["q"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(l["q"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=s["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?s["a"].options.methods.genSelections.call(this):[]},onClick(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,n=t.value;t.value&&this.activateMenu(),this.internalSearch=n,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;!e.ctrlKey&&[l["z"].home,l["z"].end].includes(t)||s["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){s["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){s["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){s["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){var t,n;if(-1===this.selectedIndex)return;const s=this.selectedItems[this.selectedIndex],i=this.getText(s);null==(t=e.clipboardData)||t.setData("text/plain",i),null==(n=e.clipboardData)||n.setData("text/vnd.vuetify.autocomplete.item+plain",i),e.preventDefault()}}})}}]);
//# sourceMappingURL=chunk-1d51c22c.cde995b9.js.map