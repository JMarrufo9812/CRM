{"version":3,"sources":["webpack:///./src/components/emails/EmailEditorImage.vue?3e03","webpack:///src/components/emails/EmailEditorImage.vue","webpack:///./src/components/emails/EmailEditorImage.vue?f9d1","webpack:///./src/components/emails/EmailEditorImage.vue?89fd","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./src/components/emails/EmailEditorImage.vue?4eed"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","isOpen","expression","staticClass","_v","on","close","ref","dropzoneOptions","startProcessingFiles","updateFiles","getError","modalError","modalHandlerError","isLoading","isDisabled","files","length","saveImages","staticRenderFns","name","components","vueDropzone","props","type","Boolean","default","isBase64","itemId","String","typeItem","mixins","modalsAlertsMixin","data","url","maxFilesize","uploadMultiple","acceptedFiles","maxFiles","addRemoveLinks","dictDefaultMessage","dictCancelUpload","dictFileTooBig","dictRemoveFile","methods","$emit","forEach","file","size","location","idSource","reader","readAsDataURL","onload","image","src","event","target","result","height","width","toString","alt","error","accepted","console","log","$refs","myVueDropzone","removeAllFiles","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VDialog","VDivider","VForm","VIcon","VSpacer","requireObjectCoercible","quot","module","exports","string","tag","attribute","S","p1","replace","$","createHTML","forcedStringHTMLMethod","proto","forced","link","fails","METHOD_NAME","test","toLowerCase","split"],"mappings":"kJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,MAAM,CAAC,WAAa,GAAG,YAAY,QAAQ,WAAa,IAAIC,MAAM,CAACC,MAAOR,EAAU,OAAES,SAAS,SAAUC,GAAMV,EAAIW,OAAOD,GAAKE,WAAW,WAAW,CAACR,EAAG,SAAS,CAACA,EAAG,eAAe,CAACS,YAAY,uBAAuB,CAACb,EAAIc,GAAG,2BAA2BV,EAAG,YAAYA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,MAAQ,SAASS,GAAG,CAAC,MAAQf,EAAIgB,QAAQ,CAACZ,EAAG,SAAS,CAACJ,EAAIc,GAAG,gBAAgB,IAAI,GAAGV,EAAG,aAAaA,EAAG,cAAc,CAACS,YAAY,QAAQ,CAACT,EAAG,SAAS,CAACa,IAAI,QAAQ,CAACb,EAAG,eAAe,CAACa,IAAI,gBAAgBX,MAAM,CAAC,GAAK,WAAW,mBAAkB,EAAK,QAAUN,EAAIkB,iBAAiBH,GAAG,CAAC,wBAAwBf,EAAImB,qBAAqB,6BAA6BnB,EAAIoB,YAAY,kBAAkBpB,EAAIqB,WAAW,CAACjB,EAAG,SAAS,CAACA,EAAG,cAAc,CAACS,YAAY,yBAAyB,CAACT,EAAG,MAAM,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIc,GAAG,oBAAoBd,EAAIc,GAAG,iCAAiC,MAAM,IAAI,IAAI,GAAGV,EAAG,iBAAiB,CAACE,MAAM,CAAC,aAAeN,EAAIsB,YAAYP,GAAG,CAAC,MAAQf,EAAIuB,sBAAsB,GAAGnB,EAAG,aAAaA,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,SAAW,IAAIS,GAAG,CAAC,MAAQf,EAAIgB,QAAQ,CAAChB,EAAIc,GAAG,gBAAgBV,EAAG,YAAYA,EAAG,QAAQ,CAACE,MAAM,CAAC,QAAUN,EAAIwB,UAAU,SAAWxB,EAAIyB,YAAmC,IAArBzB,EAAI0B,MAAMC,OAAa,MAAQ,aAAaZ,GAAG,CAAC,MAAQf,EAAI4B,aAAa,CAAC5B,EAAIc,GAAG,wBAAwB,IAAI,IAAI,IAC36Ce,EAAkB,G,iGC0DtB,G,UAAA,CACEC,KAAM,mBACNC,WAAY,CACVC,YAAJ,KAEEC,MAAO,CACLtB,OAAQ,CACNuB,KAAMC,QACNC,SAAS,GAEXC,SAAU,CACRH,KAAMC,QACNC,SAAS,GAEXE,OAAQ,CACNJ,KAAMK,OACNH,QAAS,IAEXI,SAAU,CACRN,KAAMK,OACNH,QAAS,KAGbK,OAAQ,CAACC,EAAX,MACEC,KAxBF,WAyBI,MAAO,CACLzB,gBAAiB,CACf0B,IAAK,2BACLC,YAAa,EACbC,gBAAgB,EAChBC,cAAe,UACfC,SAAU,EACVC,gBAAgB,EAChBC,mBAAoB,oDACpBC,iBAAkB,WAClBC,eACR,0EACQC,eAAgB,YAElB7B,WAAW,EACXC,YAAY,EACZC,MAAO,KAGX4B,QAAS,CACPnC,qBADJ,WAEMlB,KAAKwB,YAAa,GAEpBL,YAJJ,SAIA,GACMnB,KAAKwB,YAAa,EAClBxB,KAAKyB,MAAQA,EACbzB,KAAKsD,MAAM,QAAS7B,IAEtBE,WATJ,WASA,WACU3B,KAAKyB,MAAMC,OAAS,IACtB1B,KAAKuB,WAAY,EACbvB,KAAKoC,SACPpC,KAAKyB,MAAM8B,SAAQ,SAA7B,GACY,IAAZ,SAEA,GACcC,KAAd,EAEcC,KAAd,EACcC,SAAU,EAAxB,SACcC,SAAU,EAAxB,QAGY,EAAZ,QACA,QACc,OAAd,QACc,SAAd,OACc,UAAd,CACgB,MAAhB,KAGA,kBAAc,IAAd,wBACA,iBACc,EAAd,cACgB,IAAhB,EACgB,IAAhB,IAEc,EAAd,aACc,EAAd,WAEA,kBACc,IAAd,EACA,oEACc,EAAd,mBAAgB,QAAhB,EAAgB,MAAhB,WAIU3D,KAAKyB,MAAM8B,SAAQ,SAA7B,GACY,IAAZ,iBACYK,EAAOC,cAAcL,GAErBI,EAAOE,OAAS,SAA5B,GACc,IAAd,EACA,EACA,YACcC,EAAMC,IAAMC,EAAMC,OAAOC,OACzBJ,EAAMD,OAAS,WACbM,EAASL,EAAMK,OACfC,EAAQN,EAAMM,MAEd,EAAhB,cACkBL,IAAKJ,EAAOO,OAAOG,WACnBC,IAAKf,EAAK3B,KACVuC,OAAlB,EACkBC,MAAlB,SAKUrE,KAAKuB,WAAY,EACjBvB,KAAKe,WAIXK,SA3EJ,YA2EA,iBACA,KAIQoD,EAHGC,EAIX,+EAHgB,4CAKVC,QAAQC,IAAI,QAASH,IAEvBzD,MArFJ,WAsFMf,KAAKsD,MAAM,SACXtD,KAAKyB,MAAQ,GACbzB,KAAK4E,MAAMC,cAAcC,qBC/L+e,I,6ICQ1gBC,EAAY,eACd,EACAjF,EACA8B,GACA,EACA,KACA,WACA,MAIa,aAAAmD,EAAiB,QAchC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,QAAA,KAAMC,aAAA,OAAaC,UAAA,OAAUC,WAAA,OAAWC,UAAA,KAAQC,WAAA,KAASC,QAAA,KAAMC,QAAA,KAAMC,UAAA,Q,8CCjCxG,IAAIC,EAAyB,EAAQ,QAEjCC,EAAO,KAIXC,EAAOC,QAAU,SAAUC,EAAQC,EAAKC,EAAWzF,GACjD,IAAI0F,EAAI3D,OAAOoD,EAAuBI,IAClCI,EAAK,IAAMH,EAEf,MADkB,KAAdC,IAAkBE,GAAM,IAAMF,EAAY,KAAO1D,OAAO/B,GAAO4F,QAAQR,EAAM,UAAY,KACtFO,EAAK,IAAMD,EAAI,KAAOF,EAAM,M,kCCTrC,IAAIK,EAAI,EAAQ,QACZC,EAAa,EAAQ,QACrBC,EAAyB,EAAQ,QAIrCF,EAAE,CAAElC,OAAQ,SAAUqC,OAAO,EAAMC,OAAQF,EAAuB,SAAW,CAC3EG,KAAM,SAAc9D,GAClB,OAAO0D,EAAWrG,KAAM,IAAK,OAAQ2C,O,qBCTzC,IAAI+D,EAAQ,EAAQ,QAIpBd,EAAOC,QAAU,SAAUc,GACzB,OAAOD,GAAM,WACX,IAAIE,EAAO,GAAGD,GAAa,KAC3B,OAAOC,IAASA,EAAKC,eAAiBD,EAAKE,MAAM,KAAKpF,OAAS,O,kCCPnE","file":"js/chunk-253b7a6f.28bf2177.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"scrollable\":\"\",\"max-width\":\"430px\",\"persistent\":\"\"},model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"primary white--text\"},[_vm._v(\" Selecciona una imagen \"),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"white\"},on:{\"click\":_vm.close}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-divider'),_c('v-card-text',{staticClass:\"py-2\"},[_c('v-form',{ref:\"form\"},[_c('vue-dropzone',{ref:\"myVueDropzone\",attrs:{\"id\":\"dropzone\",\"include-styling\":true,\"options\":_vm.dropzoneOptions},on:{\"vdropzone-files-added\":_vm.startProcessingFiles,\"vdropzone-success-multiple\":_vm.updateFiles,\"vdropzone-error\":_vm.getError}},[_c('v-card',[_c('v-card-text',{staticClass:\"d-flex justify-center\"},[_c('div',[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"mdi-image-plus\")]),_vm._v(\" Arrastra o sube una imagen \")],1)])],1)],1)],1),_c('BaseModalError',{attrs:{\"modalHandler\":_vm.modalError},on:{\"close\":_vm.modalHandlerError}})],1),_c('v-divider'),_c('v-card-actions',[_c('v-btn',{attrs:{\"color\":\"primary\",\"outlined\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\" Cancelar \")]),_c('v-spacer'),_c('v-btn',{attrs:{\"loading\":_vm.isLoading,\"disabled\":_vm.isDisabled || _vm.files.length === 0,\"color\":\"secondary\"},on:{\"click\":_vm.saveImages}},[_vm._v(\" Insertar imagen \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"isOpen\" scrollable max-width=\"430px\" persistent>\n    <v-card>\n      <v-card-title class=\"primary white--text\">\n        Selecciona una imagen\n        <v-spacer />\n        <v-btn icon color=\"white\" @click=\"close\">\n          <v-icon>mdi-close</v-icon>\n        </v-btn>\n      </v-card-title>\n      <v-divider></v-divider>\n      <v-card-text class=\"py-2\">\n        <v-form ref=\"form\">\n          <vue-dropzone\n            ref=\"myVueDropzone\"\n            id=\"dropzone\"\n            :include-styling=\"true\"\n            :options=\"dropzoneOptions\"\n            @vdropzone-files-added=\"startProcessingFiles\"\n            @vdropzone-success-multiple=\"updateFiles\"\n            @vdropzone-error=\"getError\"\n          >\n            <v-card>\n              <v-card-text class=\"d-flex justify-center\">\n                <div>\n                  <v-icon large>mdi-image-plus</v-icon>\n                  Arrastra o sube una imagen\n                </div>\n              </v-card-text>\n            </v-card>\n          </vue-dropzone>\n        </v-form>\n        <BaseModalError :modalHandler=\"modalError\" @close=\"modalHandlerError\" />\n      </v-card-text>\n      <v-divider></v-divider>\n      <v-card-actions>\n        <v-btn color=\"primary\" outlined @click=\"close\">\n          Cancelar\n        </v-btn>\n        <v-spacer></v-spacer>\n        <v-btn\n          :loading=\"isLoading\"\n          :disabled=\"isDisabled || files.length === 0\"\n          color=\"secondary\"\n          @click=\"saveImages\"\n        >\n          Insertar imagen\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport vueDropzone from 'vue2-dropzone';\nimport { UPLOAD_IMAGE_NOTE } from '@/graphql/mutations/notesMutations';\nimport { modalsAlertsMixin } from '@/mixins/alerts/modalsAlertsMixin';\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css';\n\nexport default {\n  name: 'EmailEditorImage',\n  components: {\n    vueDropzone,\n  },\n  props: {\n    isOpen: {\n      type: Boolean,\n      default: false,\n    },\n    isBase64: {\n      type: Boolean,\n      default: false,\n    },\n    itemId: {\n      type: String,\n      default: '',\n    },\n    typeItem: {\n      type: String,\n      default: '',\n    },\n  },\n  mixins: [modalsAlertsMixin],\n  data() {\n    return {\n      dropzoneOptions: {\n        url: 'https://httpbin.org/post',\n        maxFilesize: 5,\n        uploadMultiple: true,\n        acceptedFiles: 'image/*',\n        maxFiles: 5,\n        addRemoveLinks: true,\n        dictDefaultMessage: 'Haz clic aquí o arrastra una imagen para añadirla',\n        dictCancelUpload: 'Cancelar',\n        dictFileTooBig:\n          'El archivo es demasiado grande ({{filesize}}MB). Máx:{{maxFilesize}}MB.',\n        dictRemoveFile: 'Eliminar',\n      },\n      isLoading: false,\n      isDisabled: false,\n      files: [],\n    };\n  },\n  methods: {\n    startProcessingFiles() {\n      this.isDisabled = true;\n    },\n    updateFiles(files) {\n      this.isDisabled = false;\n      this.files = files;\n      this.$emit('files', files);\n    },\n    saveImages() {\n      if (this.files.length > 0) {\n        this.isLoading = true;\n        if (this.isBase64) {\n          this.files.forEach((file) => {\n            const { size } = file;\n            // const cleanName = name.replace(/ /g, '');\n            const input = {\n              file,\n              // name: cleanName,\n              size,\n              location: this.typeItem,\n              idSource: this.itemId,\n            };\n\n            this.$apollo\n              .mutate({\n                client: 'files',\n                mutation: UPLOAD_IMAGE_NOTE,\n                variables: {\n                  input,\n                },\n              })\n              .then(({ data: { uploadNoteFile } }) => {\n                const { key, link } = uploadNoteFile;\n                this.$emit('save', {\n                  src: link,\n                  alt: key,\n                });\n                this.isLoading = false;\n                this.close();\n              })\n              .catch(() => {\n                const error =\n                  'No se pudo subir la imagen, intente de nuevo o contacte a soporte';\n                this.modalHandlerError({ isOpen: true, error });\n              });\n          });\n        } else {\n          this.files.forEach((file) => {\n            const reader = new FileReader();\n            reader.readAsDataURL(file);\n\n            reader.onload = (event) => {\n              let height;\n              let width;\n              const image = new Image();\n              image.src = event.target.result;\n              image.onload = () => {\n                height = image.height;\n                width = image.width;\n\n                this.$emit('save', {\n                  src: reader.result.toString(),\n                  alt: file.name,\n                  height,\n                  width,\n                });\n              };\n            };\n          });\n          this.isLoading = false;\n          this.close();\n        }\n      }\n    },\n    getError({ accepted }) {\n      let error = '';\n      if (!accepted) {\n        error = 'El archivo que seleccionaste no es valido';\n      } else {\n        error =\n          'Ocurrio un error al subir el archivo intentelo de nuevo o contacte a soporte';\n      }\n      console.log('ERROR', error);\n    },\n    close() {\n      this.$emit('close');\n      this.files = [];\n      this.$refs.myVueDropzone.removeAllFiles();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '{ .vue-dropzone  } from ../../../../scss/components/email.editor.image';\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailEditorImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailEditorImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmailEditorImage.vue?vue&type=template&id=b72393d6&scoped=true&\"\nimport script from \"./EmailEditorImage.vue?vue&type=script&lang=js&\"\nexport * from \"./EmailEditorImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmailEditorImage.vue?vue&type=style&index=0&id=b72393d6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b72393d6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VDivider,VForm,VIcon,VSpacer})\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// `CreateHTML` abstract operation\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.es/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailEditorImage.vue?vue&type=style&index=0&id=b72393d6&lang=scss&scoped=true&\""],"sourceRoot":""}