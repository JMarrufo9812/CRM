(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c09a22e6"],{"3c73":function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-dialog",{attrs:{width:"400",persistent:""},model:{value:t.modalHandler.isOpen,callback:function(n){t.$set(t.modalHandler,"isOpen",n)},expression:"modalHandler.isOpen"}},[i("v-card",[i("v-card-title",{staticClass:"primary white--text pl-10"},[i("v-icon",{staticClass:"pr-4",attrs:{color:"white"}},[t._v("mdi-calendar-clock-outline")]),t._v(" "+t._s(t.activity.title)+" "),i("v-spacer"),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)],1),t.isLoading?i("v-card-text",{staticClass:"text-center"},[i("v-sheet",{staticClass:"pa-12",attrs:{color:"white"}},[i("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1):t._e(),t.isExistActivity&&!t.isLoading?i("v-card-text",{staticClass:"pt-10"},[i("v-list-item",{attrs:{dense:""}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-calendar")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.formatTime(t.activity.start,t.activity.end))+" ")])],1)],1),i("v-list-item",{attrs:{dense:""}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-account")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.activity.owner?t.activity.owner.user.name:"")+" "+t._s(t.activity.owner?t.activity.owner.user.lastName:"")+" ")])],1)],1),t.activity.description?i("v-list-item",{attrs:{dense:""}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-card-text-outline")])],1),i("v-list-item-content",{domProps:{innerHTML:t._s(t.activity.description)}})],1):t._e(),i("v-list-item",{attrs:{dense:""}},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"PENDING"!==t.activity.status?"success":"error"}},[t._v(" "+t._s("PENDING"!==t.activity.status?"mdi-check-circle":"mdi-checkbox-blank-circle-outline")+" ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s("PENDING"!==t.activity.status?"Completado":"Pendiente")+" ")])],1)],1)],1):t.isLoading?t._e():i("v-card-text",[i("p",{staticClass:"pa-12 text-center"},[i("v-icon",{attrs:{large:""}},[t._v("mdi-calendar-remove")]),t._v(" Esta actividad ya no existe ")],1)]),t.isExistActivity&&!t.isLoading?i("v-card-actions",{staticClass:"pt-12"},["PENDING"!==t.activity.status?i("v-btn",{attrs:{color:"error",loading:t.isLoadingIncomplete},on:{click:function(n){return t.saveEventIncomplete(t.activity.id)}}},[t._v(" Deshacer ")]):t._e(),"PENDING"===t.activity.status?i("v-btn",{attrs:{color:"secondary"},on:{click:function(n){return t.openModalActivityReschedule()}}},[t._v(" Reagendar ")]):t._e(),i("v-spacer"),"PENDING"===t.activity.status?i("v-btn",{attrs:{color:"success",loading:t.isLoadingComplete},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.changeStatus.apply(null,arguments)}}},[t._v(" Completar ")]):t._e(),i("ModalEffectiveHistory",{attrs:{isOpen:t.isOpenModal,isLoading:t.isLoadingComplete,reset:!t.isLoadingComplete},on:{save:t.saveComplete,cancel:t.cancelComplete}})],1):t._e()],1)],1)},a=[],c=(i("d3b7"),i("3ca3"),i("ddb0"),i("ac1f"),i("1276"),i("99af"),i("c1df")),s=i.n(c),o=i("ffd2"),r=i("949a"),d=i("1891"),l={components:{ModalEffectiveHistory:function(){return i.e("chunk-2dc90223").then(i.bind(null,"6dab"))}},mixins:[d["b"],d["a"]],props:{modalHandler:{required:!0,type:Object,default:function(){return{isOpen:!1,isLoading:!1,info:{}}}}},data:function(){return{activity:{},isExistActivity:!1,isLoading:!0,isOpenModal:!1,isLoadingComplete:!1,isLoadingIncomplete:!1}},watch:{modalHandler:function(t){var n=this,i=t.isOpen,e=t.info;i?(this.isLoading=!0,this.$apollo.query({query:o["d"],variables:{activityId:e}}).then((function(t){var i=t.data.activity;n.isExistActivity=!0,n.activity=i,n.isLoading=!1})).catch((function(){n.isLoading=!1,n.isExistActivity=!1}))):this.resetValues()}},methods:{close:function(){this.$emit("close",{isOpen:!1,isLoading:!1,info:{}})},formatTime:function(t,n){if(t){var i=s()(t.split(" ")[0]),e=s()(t.split(" ")[1],["h:mm:ss"]),a=s()(n.split(" ")[1],["h:mm:ss"]);return"".concat(i.format("LL")," â‹… ").concat(e.format("h:mma")," - ").concat(a.format("h:mma"))}return""},editEvent:function(t){var n=this.activity;n.isReschedule=t,this.changeModal({id:"createActivity",status:!0,isEdit:!0,item:n})},openModalActivityReschedule:function(){this.editEvent(!0)},openModalEffective:function(){this.changeModal({id:"modalEffective",status:!0})},resetValues:function(){this.activity={},this.isLoading=!0},changeStatus:function(){var t="PENDING"!==this.activity.status;t?this.saveEventIncomplete(this.activity.id):this.isOpenModal=!0},saveCompleteMutation:function(t){var n=this,i=t.id,e=t.status,a=t.comments;this.$apollo.mutate({mutation:r["h"],variables:{activityInput:{id:i,status:e,comments:a}}}).then((function(t){var i=t.data.updateActivity;n.isLoadingComplete=!1,n.isLoadingIncomplete=!1,n.isOpenModal=!1,n.activity=i})).catch((function(){n.isLoadingComplete=!1,n.isLoadingIncomplete=!1,n.isOpenModal=!1;var t="No se pudo actualizar el estado de la actividad, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:t})}))},saveEventIncomplete:function(t){this.isLoadingIncomplete=!0,this.saveCompleteMutation({id:t,status:"PENDING"})},cancelComplete:function(){this.isOpenModal=!1},saveComplete:function(t){var n=t.status,i=t.comments;this.isLoadingComplete=!0;var e=this.activity.id;n?this.saveCompleteMutation({id:e,status:"EFFECTIVE"}):this.saveCompleteMutation({id:e,status:"INEFFECTIVE",comments:i})}}},u=l,v=i("0c7c"),p=i("6544"),m=i.n(p),y=i("8336"),f=i("b0af"),I=i("99d9"),h=i("169a"),b=i("132d"),g=i("da13"),O=i("5d23"),C=i("34c3"),A=i("490a"),T=i("8dd9"),j=i("2fa4"),E=Object(v["a"])(u,e,a,!1,null,null,null);n["default"]=E.exports;m()(E,{VBtn:y["a"],VCard:f["a"],VCardActions:I["a"],VCardText:I["c"],VCardTitle:I["d"],VDialog:h["a"],VIcon:b["a"],VListItem:g["a"],VListItemContent:O["a"],VListItemIcon:C["a"],VListItemTitle:O["c"],VProgressCircular:A["a"],VSheet:T["a"],VSpacer:j["a"]})},"949a":function(t,n,i){"use strict";i.d(n,"g",(function(){return m})),i.d(n,"f",(function(){return y})),i.d(n,"e",(function(){return f})),i.d(n,"b",(function(){return I})),i.d(n,"i",(function(){return h})),i.d(n,"d",(function(){return b})),i.d(n,"a",(function(){return g})),i.d(n,"h",(function(){return O})),i.d(n,"c",(function(){return C}));var e,a,c,s,o,r,d,l,u,v=i("8785"),p=i("5184"),m=Object(p["a"])(e||(e=Object(v["a"])(["\n  mutation syncronizeGoogleCalendar($codeToken: String!) {\n    syncronizeGoogleCalendar(codeToken: $codeToken) {\n      success\n      email\n    }\n  }\n"]))),y=Object(p["a"])(a||(a=Object(v["a"])(["\n  mutation setCalendar($calendarId: String!) {\n    setPrimaryCalendar(calendarId: $calendarId) {\n      success\n      calendarSummary\n    }\n  }\n"]))),f=Object(p["a"])(c||(c=Object(v["a"])(["\n  mutation desynchronizeGoogleCalendar {\n    desynchronizeGoogleCalendar\n  }\n"]))),I=Object(p["a"])(s||(s=Object(v["a"])(["\n  mutation createActivityType($activityTypeInput: activityTypeCreateInput!) {\n    createActivityType(activityTypeInput: $activityTypeInput) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),h=Object(p["a"])(o||(o=Object(v["a"])(["\n  mutation updateActivityType($activityTypeInput: activityTypeUpdateInput!) {\n    updateActivityType(activityTypeInput: $activityTypeInput) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),b=Object(p["a"])(r||(r=Object(v["a"])(["\n  mutation deleteActivityType($activityTypeId: ID!) {\n    deleteActivityType(activityTypeId: $activityTypeId) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),g=Object(p["a"])(d||(d=Object(v["a"])(["\n  mutation createActivity($activityInput: activityCreateInput!) {\n    createActivity(activityInput: $activityInput) {\n      id\n      title\n      status\n      start\n      end\n      location\n      description\n      createdAt\n      isAllDay\n      deal {\n        id\n        title\n      }\n      contacts {\n        id\n        name\n      }\n      companies {\n        id\n        name\n      }\n      type {\n        id\n        name\n        color\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      guests\n    }\n  }\n"]))),O=Object(p["a"])(l||(l=Object(v["a"])(["\n  mutation updateActivity($activityInput: activityUpdateInput!) {\n    updateActivity(activityInput: $activityInput) {\n      id\n      title\n      status\n      start\n      end\n      location\n      description\n      createdAt\n      isAllDay\n      deal {\n        id\n        title\n      }\n      contacts {\n        id\n        name\n      }\n      companies {\n        id\n        name\n      }\n      type {\n        id\n        name\n        color\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      guests\n    }\n  }\n"]))),C=Object(p["a"])(u||(u=Object(v["a"])(["\n  mutation deleteActivities($activities: [deleteActivityInput!]!) {\n    deleteActivities(activities: $activities) {\n      id\n    }\n  }\n"])))},ffd2:function(t,n,i){"use strict";i.d(n,"e",(function(){return v})),i.d(n,"f",(function(){return p})),i.d(n,"c",(function(){return m})),i.d(n,"d",(function(){return y})),i.d(n,"b",(function(){return f})),i.d(n,"a",(function(){return I}));var e,a,c,s,o,r,d,l=i("8785"),u=i("5184"),v=Object(u["a"])(e||(e=Object(l["a"])(["\n  query getCalendarUri {\n    getCalendarUri\n  }\n"]))),p=Object(u["a"])(a||(a=Object(l["a"])(["\n  query listCalendar {\n    listCalendar {\n      id\n      kind\n      etag\n      summary\n      description\n      timeZone\n      colorId\n      backgroundColor\n      foregroundColor\n      accessRole\n      selected\n      primary\n    }\n  }\n"]))),m=Object(u["a"])(c||(c=Object(l["a"])(["\n  query readActivityTypes {\n    activityTypes {\n      id\n      name\n      color\n      order\n      activitiesCount\n    }\n  }\n"]))),y=Object(u["a"])(s||(s=Object(l["a"])(["\n  query GetActivity($activityId: ID!) {\n    activity(activityId: $activityId) {\n      id\n      title\n      start\n      end\n      status\n      location\n      description\n      guests\n      createdAt\n      isAllDay\n      companies {\n        id\n        name\n      }\n      contacts {\n        id\n        name\n      }\n      deal {\n        id\n        title\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      type {\n        id\n        color\n        name\n        order\n      }\n    }\n  }\n"]))),f=(Object(u["a"])(o||(o=Object(l["a"])(["\n  query readActivityType($activityTypeId: ID!) {\n    activityType(activityTypeId: activityTypeId) {\n      id\n      name\n      color\n      order\n    }\n  }\n"]))),Object(u["a"])(r||(r=Object(l["a"])(["\n  query readActivities($filters: FilterActivities) {\n    activities(filters: $filters) {\n      count\n      list {\n        id\n        title\n        status\n        start\n        end\n        location\n        description\n        createdAt\n        isAllDay\n        deal {\n          id\n          title\n        }\n        contacts {\n          id\n          name\n        }\n        companies {\n          id\n          name\n        }\n        type {\n          id\n          name\n          color\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        guests\n      }\n    }\n  }\n"])))),I=Object(u["a"])(d||(d=Object(l["a"])(["\n  query readFreeBusy($activityInput: activityFreeBusyInput!) {\n    activitiesFreeBusy(activityInput: $activityInput)\n  }\n"])))}}]);
//# sourceMappingURL=chunk-c09a22e6.2e19b39c.js.map