{"version":3,"sources":["webpack:///./src/components/VuetifyMoney.vue?091b","webpack:///src/components/VuetifyMoney.vue","webpack:///./src/components/VuetifyMoney.vue?76cb","webpack:///./src/components/VuetifyMoney.vue","webpack:///./src/mixins/vuetifyMoneyMixin.js","webpack:///./src/components/deals/ModalValueDeal.vue?abbe","webpack:///./src/components/deals/ModalValueDeal.vue?8f39","webpack:///src/components/deals/ModalValueDeal.vue","webpack:///./src/components/deals/ModalValueDeal.vue?81ee","webpack:///./src/components/deals/ModalValueDeal.vue?e93e"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","label","placeholder","readonly","disabled","outlined","dense","hideDetails","error","rules","clearable","backgroundColor","options","prefix","suffix","prependIcon","on","keyPress","model","value","callback","$$v","cmpValue","expression","staticRenderFns","props","type","String","Number","default","undefined","Boolean","Array","valueWhenIsEmpty","Object","locale","length","precision","data","computed","get","set","$emit","machineFormat","newValue","methods","humanFormat","number","isNaN","toLocaleString","maximumFractionDigits","minimumFractionDigits","cleanNumber","padStart","parseInt","keyCode","$event","preventDefault","targetLength","i","arrayValue","isInteger","flag","result","component","VTextField","vuetifyMoneyMixin","components","VuetifyMoney","inputMoneyOptions","canEdit","canEditOthers","deal","isDelete","scopedSlots","_u","key","fn","ref","staticClass","_v","_g","_b","class","normalCursor","_s","toFixed","menu","_n","outData","_e","isLoading","validateSameValue","name","required","mixins","subject","UPDATE","UPDATE_OTHERS","PERMISSIONS_DEALS","watch","ability","id","VBtn","VCard","VCardActions","VCardText","VCardTitle","VDivider","VIcon","VMenu","VSpacer"],"mappings":"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","file":"js/chunk-2ceff495.1043e562.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-text-field',{attrs:{\"label\":_vm.label,\"placeholder\":_vm.placeholder,\"readonly\":_vm.readonly,\"disabled\":_vm.disabled,\"outlined\":_vm.outlined,\"dense\":_vm.dense,\"hide-details\":_vm.hideDetails,\"error\":_vm.error,\"rules\":_vm.rules,\"clearable\":_vm.clearable,\"backgroundColor\":_vm.backgroundColor,\"prefix\":_vm.options.prefix,\"suffix\":_vm.options.suffix,\"prepend-icon\":_vm.prependIcon},on:{\"keypress\":_vm.keyPress},model:{value:(_vm.cmpValue),callback:function ($$v) {_vm.cmpValue=$$v},expression:\"cmpValue\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-text-field\n      v-model=\"cmpValue\"\n      v-bind:label=\"label\"\n      v-bind:placeholder=\"placeholder\"\n      v-bind:readonly=\"readonly\"\n      v-bind:disabled=\"disabled\"\n      v-bind:outlined=\"outlined\"\n      v-bind:dense=\"dense\"\n      v-bind:hide-details=\"hideDetails\"\n      v-bind:error=\"error\"\n      v-bind:rules=\"rules\"\n      v-bind:clearable=\"clearable\"\n      v-bind:backgroundColor=\"backgroundColor\"\n      v-bind:prefix=\"options.prefix\"\n      v-bind:suffix=\"options.suffix\"\n      v-bind:prepend-icon=\"prependIcon\"\n      v-on:keypress=\"keyPress\"\n    ></v-text-field>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nexport default {\n  model: { prop: 'value', event: 'input' },\n  props: {\n    value: {\n      // type: String,\n      type: [String, Number],\n      default: '0',\n    },\n    label: {\n      type: String,\n      default: '',\n    },\n    placeholder: {\n      type: String,\n      default: undefined,\n    },\n    prependIcon: {\n      type: String,\n      default: undefined,\n    },\n    readonly: {\n      type: Boolean,\n      default: false,\n    },\n    dense: {\n      type: Boolean,\n      default: false,\n    },\n    error: {\n      type: Boolean,\n      default: false,\n    },\n    hideDetails: {\n      type: [Boolean, String],\n      default: false,\n    },\n    rules: {\n      type: [Array, String],\n      default: () => [],\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    outlined: {\n      type: Boolean,\n      default: false,\n    },\n    clearable: {\n      type: Boolean,\n      default: false,\n    },\n    backgroundColor: {\n      type: String,\n      default: 'white',\n    },\n    valueWhenIsEmpty: {\n      type: String,\n      default: '', // \"0\" or \"\" or null\n    },\n    options: {\n      type: Object,\n      default: function() {\n        return {\n          locale: 'pt-BR',\n          prefix: '',\n          suffix: '',\n          length: 11,\n          precision: 2,\n        };\n      },\n    },\n  },\n  data: () => ({}),\n  /*\n   v-model=\"cmpValue\": Dessa forma, ao digitar, o valor Ã© atualizado automaticamente no componente pai.\n   O valor digitado entra pelo newValue do Set e Ã© emitido para o componente pai.\n   the-vue-mask nao funciona corretamente ao incluir valores existentes no componente pai.\n  */\n  computed: {\n    cmpValue: {\n      get: function() {\n        return this.value !== null && this.value !== ''\n          ? this.humanFormat(this.value.toString())\n          : this.valueWhenIsEmpty;\n      },\n      set: function(newValue) {\n        this.$emit('input', this.machineFormat(newValue));\n      },\n    },\n  },\n  methods: {\n    humanFormat: function(number) {\n      if (isNaN(number)) {\n        number = '';\n      } else {\n        // number = Number(number).toLocaleString(this.options.locale, {maximumFractionDigits: 2, minimumFractionDigits: 2, style: 'currency', currency: 'BRL'});\n        number = Number(number).toLocaleString(this.options.locale, {\n          maximumFractionDigits: this.options.precision,\n          minimumFractionDigits: this.options.precision,\n        });\n      }\n      return number;\n    },\n    machineFormat(number) {\n      if (number) {\n        number = this.cleanNumber(number);\n        // Ajustar quantidade de zeros Ã  esquerda\n        number = number.padStart(parseInt(this.options.precision) + 1, '0');\n        // Incluir ponto na casa correta, conforme a precisÃ£o configurada\n        number =\n          number.substring(\n            0,\n            number.length - parseInt(this.options.precision),\n          ) +\n          '.' +\n          number.substring(\n            number.length - parseInt(this.options.precision),\n            number.length,\n          );\n        if (isNaN(number)) {\n          number = this.valueWhenIsEmpty;\n        }\n      } else {\n        number = this.valueWhenIsEmpty;\n      }\n      if (this.options.precision === 0) {\n        number = this.cleanNumber(number);\n      }\n      return number;\n    },\n    keyPress($event) {\n      let keyCode = $event.keyCode ? $event.keyCode : $event.which;\n      if (keyCode < 48 || keyCode > 57) {\n        // 46 is dot\n        $event.preventDefault();\n      }\n      if (this.targetLength()) {\n        $event.preventDefault();\n      }\n    },\n    // Retira todos os caracteres nÃ£o numÃ©ricos e zeros Ã  esquerda\n    cleanNumber: function(value) {\n      let result = '';\n      if (value) {\n        let flag = false;\n        let arrayValue = value.toString().split('');\n        for (var i = 0; i < arrayValue.length; i++) {\n          if (this.isInteger(arrayValue[i])) {\n            if (!flag) {\n              // Retirar zeros Ã  esquerda\n              if (arrayValue[i] !== '0') {\n                result = result + arrayValue[i];\n                flag = true;\n              }\n            } else {\n              result = result + arrayValue[i];\n            }\n          }\n        }\n      }\n      return result;\n    },\n    isInteger(value) {\n      let result = false;\n      if (Number.isInteger(parseInt(value))) {\n        result = true;\n      }\n      return result;\n    },\n    targetLength() {\n      if (\n        Number(this.cleanNumber(this.value).length) >=\n        Number(this.options.length)\n      ) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./VuetifyMoney.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./VuetifyMoney.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VuetifyMoney.vue?vue&type=template&id=204a441a&\"\nimport script from \"./VuetifyMoney.vue?vue&type=script&lang=js&\"\nexport * from \"./VuetifyMoney.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VTextField})\n","import VuetifyMoney from '@/components/VuetifyMoney.vue';\n\nexport const vuetifyMoneyMixin = {\n  components: { VuetifyMoney },\n  data() {\n    return {\n      inputMoneyOptions: {\n        locale: 'en-US',\n        prefix: '$',\n        suffix: 'MXN',\n        length: 9,\n        precision: 2,\n      },\n    };\n  },\n};\n","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalValueDeal.vue?vue&type=style&index=0&id=17306c14&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-menu',{attrs:{\"close-on-content-click\":false,\"nudge-width\":250,\"offset-x\":\"\",\"disabled\":!((_vm.canEdit || _vm.canEditOthers) && !_vm.deal.isDelete)},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-icon',{staticClass:\"mb-1\",attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-cash-multiple\")]),_c('span',_vm._g(_vm._b({staticClass:\"font-weight-bold\",class:{\n        normalCursor: !((_vm.canEdit || _vm.canEditOthers) && !_vm.deal.isDelete),\n      }},'span',attrs,false),on),[_vm._v(\" \"+_vm._s(_vm.deal.value ? _vm.deal.value.toFixed(2) : 0)+\" MXN \")])]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"py-1 font-weight-bold\"},[_vm._v(\" Cambiar valor \")]),_c('v-card-text',{staticClass:\"pb-4\"},[_c('VuetifyMoney',{attrs:{\"dense\":true,\"hide-details\":true,\"outlined\":true,\"options\":_vm.inputMoneyOptions},model:{value:(_vm.value),callback:function ($$v) {_vm.value=_vm._n($$v)},expression:\"value\"}})],1),_c('v-divider'),_c('v-card-actions',[(_vm.canEdit || _vm.canEditOthers)?_c('v-btn',{staticClass:\"mr-auto\",attrs:{\"icon\":\"\",\"disabled\":!_vm.deal.value,\"color\":\"error\"},on:{\"click\":function($event){return _vm.outData('delete')}}},[_c('v-icon',[_vm._v(\"mdi-delete\")])],1):_vm._e(),_c('v-spacer'),_c('v-btn',{staticClass:\"mr-3\",attrs:{\"outlined\":\"\",\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){_vm.menu = false}}},[_vm._v(\" Cancelar \")]),(_vm.canEdit || _vm.canEditOthers)?_c('v-btn',{attrs:{\"color\":\"secondary\",\"small\":\"\",\"loading\":_vm.isLoading,\"disabled\":_vm.validateSameValue},on:{\"click\":function($event){return _vm.outData('add')}}},[_vm._v(\" Guardar \")]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-menu\n    v-model=\"menu\"\n    :close-on-content-click=\"false\"\n    :nudge-width=\"250\"\n    offset-x\n    :disabled=\"!((canEdit || canEditOthers) && !deal.isDelete)\"\n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-icon class=\"mb-1\" color=\"primary\">mdi-cash-multiple</v-icon>\n      <span\n        class=\"font-weight-bold\"\n        :class=\"{\n          normalCursor: !((canEdit || canEditOthers) && !deal.isDelete),\n        }\"\n        v-bind=\"attrs\"\n        v-on=\"on\"\n      >\n        {{ deal.value ? deal.value.toFixed(2) : 0 }} MXN\n      </span>\n    </template>\n\n    <v-card>\n      <v-card-title class=\"py-1 font-weight-bold\">\n        Cambiar valor\n      </v-card-title>\n      <v-card-text class=\"pb-4\">\n        <VuetifyMoney\n          v-model.number=\"value\"\n          :dense=\"true\"\n          :hide-details=\"true\"\n          :outlined=\"true\"\n          :options=\"inputMoneyOptions\"\n        />\n      </v-card-text>\n      <v-divider></v-divider>\n      <v-card-actions>\n        <v-btn\n          v-if=\"canEdit || canEditOthers\"\n          icon\n          :disabled=\"!deal.value\"\n          color=\"error\"\n          class=\"mr-auto\"\n          @click=\"outData('delete')\"\n        >\n          <v-icon>mdi-delete</v-icon>\n        </v-btn>\n        <v-spacer></v-spacer>\n        <v-btn\n          outlined\n          color=\"primary\"\n          small\n          @click=\"menu = false\"\n          class=\"mr-3\"\n        >\n          Cancelar\n        </v-btn>\n        <v-btn\n          v-if=\"canEdit || canEditOthers\"\n          color=\"secondary\"\n          small\n          :loading=\"isLoading\"\n          @click=\"outData('add')\"\n          :disabled=\"validateSameValue\"\n        >\n          Guardar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-menu>\n</template>\n\n<script>\nimport { subject } from '@casl/ability';\nimport ability from '@/services/ability';\nimport { UPDATE, UPDATE_OTHERS } from '@/constants/methods';\nimport { PERMISSIONS_DEALS } from '@/constants/permissions';\nimport { vuetifyMoneyMixin } from '@/mixins/vuetifyMoneyMixin';\n\nexport default {\n  name: 'ModalValueDeal',\n  props: {\n    isLoading: {\n      required: true,\n      type: Boolean,\n      default: false,\n    },\n    deal: {\n      required: true,\n      type: Object,\n      default: () => {},\n    },\n  },\n  mixins: [vuetifyMoneyMixin],\n  data() {\n    return {\n      subject,\n      UPDATE,\n      UPDATE_OTHERS,\n      PERMISSIONS_DEALS,\n      menu: false,\n      value: 0,\n    };\n  },\n  watch: {\n    menu(value) {\n      if (value) this.value = this.deal.value;\n    },\n    isLoading(value) {\n      if (!value) {\n        this.menu = false;\n      }\n    },\n  },\n  computed: {\n    validateSameValue() {\n      if (\n        this.deal.value === this.value ||\n        this.value <= 0 ||\n        this.value === null ||\n        this.value === undefined\n      )\n        return true;\n\n      return false;\n    },\n    canEdit() {\n      return ability.can(\n        UPDATE,\n        subject(PERMISSIONS_DEALS, { authorId: this?.deal?.owner?.id || '' }),\n      );\n    },\n    canEditOthers() {\n      if (!this.canEdit) {\n        return (\n          ability.can(UPDATE_OTHERS, PERMISSIONS_DEALS) &&\n          !ability.can(\n            UPDATE_OTHERS,\n            subject(PERMISSIONS_DEALS, {\n              authorId: this?.deal?.owner?.id || '',\n            }),\n          )\n        );\n      }\n      return ability.can(UPDATE_OTHERS, PERMISSIONS_DEALS);\n    },\n  },\n  methods: {\n    outData(type) {\n      if (ability.can(UPDATE, PERMISSIONS_DEALS)) {\n        if (type === 'delete') {\n          this.$emit('outData', { id: this.deal.id, value: 0 });\n        }\n        if (type === 'add') {\n          this.$emit('outData', {\n            id: this.deal.id,\n            value: this.value,\n          });\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.normalCursor:hover {\n  cursor: default;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalValueDeal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalValueDeal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalValueDeal.vue?vue&type=template&id=17306c14&scoped=true&\"\nimport script from \"./ModalValueDeal.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalValueDeal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModalValueDeal.vue?vue&type=style&index=0&id=17306c14&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17306c14\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDivider,VIcon,VMenu,VSpacer})\n"],"sourceRoot":""}