(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d46dc76"],{"07ac":function(e,n,t){var i=t("23e7"),s=t("6f53").values;i({target:"Object",stat:!0},{values:function(e){return s(e)}})},"17d1":function(e,n,t){},"1f09":function(e,n,t){},3129:function(e,n,t){"use strict";t("1f09");var i=t("c995"),s=t("24b2"),a=t("7560"),o=t("58df"),r=t("80d2");n["a"]=Object(o["a"])(i["a"],s["a"],a["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:()=>({})}},computed:{attrs(){return this.isLoading?this.boilerplate?{}:{"aria-busy":!0,"aria-live":"polite",role:"alert",...this.$attrs}:this.$attrs},classes(){return{"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile,...this.themeClasses,...this.elevationClasses}},isLoading(){return!("default"in this.$scopedSlots)||this.loading},rootTypes(){return{actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text",...this.types}}},methods:{genBone(e,n){return this.$createElement("div",{staticClass:`v-skeleton-loader__${e} v-skeleton-loader__bone`},n)},genBones(e){const[n,t]=e.split("@"),i=()=>this.genStructure(n);return Array.from({length:t}).map(i)},genStructure(e){let n=[];e=e||this.type||"";const t=this.rootTypes[e]||"";if(e===t);else{if(e.indexOf(",")>-1)return this.mapBones(e);if(e.indexOf("@")>-1)return this.genBones(e);t.indexOf(",")>-1?n=this.mapBones(t):t.indexOf("@")>-1?n=this.genBones(t):t&&n.push(this.genStructure(t))}return[this.genBone(e,n)]},genSkeleton(){const e=[];return this.isLoading?e.push(this.genStructure()):e.push(Object(r["t"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},e):e},mapBones(e){return e.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter(e){this.resetStyles(e),this.isLoading&&(e._initialStyle={display:e.style.display,transition:e.style.transition},e.style.setProperty("transition","none","important"))},onBeforeLeave(e){e.style.setProperty("display","none","important")},resetStyles(e){e._initialStyle&&(e.style.display=e._initialStyle.display||"",e.style.transition=e._initialStyle.transition,delete e._initialStyle)}},render(e){return e("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},4420:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var i={data:function(){return{snackbar:{isOpen:!1,color:"",text:""}}},methods:{snackbarHandler:function(e){var n=e.isOpen,t=e.color,i=e.text;this.snackbar={isOpen:n,color:t,text:i}}}}},"6f53":function(e,n,t){var i=t("83ab"),s=t("df75"),a=t("fc6a"),o=t("d1e7").f,r=function(e){return function(n){var t,r=a(n),l=s(r),d=l.length,c=0,u=[];while(d>c)t=l[c++],i&&!o.call(r,t)||u.push(e?[t,r[t]]:r[t]);return u}};e.exports={entries:r(!0),values:r(!1)}},7679:function(e,n,t){"use strict";t("c79c");var i=t("e4d3"),s=t("7560"),a=t("80d2"),o=t("afdd"),r=t("326d"),l=t("58df");n["a"]=Object(l["a"])(i["a"],s["a"]).extend({name:"v-edit-dialog",props:{cancelText:{default:"Cancel"},large:Boolean,eager:Boolean,persistent:Boolean,saveText:{default:"Save"},transition:{type:String,default:"slide-x-reverse-transition"}},data(){return{isActive:!1}},watch:{isActive(e){e?(this.$emit("open"),setTimeout(this.focus,50)):this.$emit("close")}},methods:{cancel(){this.isActive=!1,this.$emit("cancel")},focus(){const e=this.$refs.content.querySelector("input");e&&e.focus()},genButton(e,n){return this.$createElement(o["a"],{props:{text:!0,color:"primary",light:!0},on:{click:e}},n)},genActions(){return this.$createElement("div",{class:"v-small-dialog__actions"},[this.genButton(this.cancel,this.cancelText),this.genButton(()=>{this.save(this.returnValue),this.$emit("save")},this.saveText)])},genContent(){return this.$createElement("div",{staticClass:"v-small-dialog__content",on:{keydown:e=>{e.keyCode===a["z"].esc&&this.cancel(),e.keyCode===a["z"].enter&&(this.save(this.returnValue),this.$emit("save"))}},ref:"content"},[this.$slots.input])}},render(e){return e(r["a"],{staticClass:"v-small-dialog",class:this.themeClasses,props:{contentClass:"v-small-dialog__menu-content",transition:this.transition,origin:"top right",right:!0,value:this.isActive,closeOnClick:!this.persistent,closeOnContentClick:!1,eager:this.eager,light:this.light,dark:this.dark},on:{input:e=>this.isActive=e},scopedSlots:{activator:({on:n})=>e("div",{staticClass:"v-small-dialog__activator",on:n},[e("span",{staticClass:"v-small-dialog__activator__content"},this.$slots.default)])}},[this.genContent(),this.large?this.genActions():null])}})},bca6:function(e,n,t){"use strict";t("17d1")},c79c:function(e,n,t){},ed81:function(e,n,t){"use strict";t.r(n);var i,s,a,o,r,l,d,c,u,p,m=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-container",{staticStyle:{height:"100%"},attrs:{fluid:""}},[t("v-row",[t("v-col",{staticClass:"primary",attrs:{cols:"12"}},[t("p",{staticClass:"ml-6 my-4 white--text"},[e._v(" Gestión de usuarios ")])]),t("v-col",{staticClass:"pa-0 mb-1 d-flex align-center white",attrs:{cols:"12"}},[t("v-tabs",{attrs:{"mobile-break-point":"400",color:"primary","fixed-tabs":"","icons-and-text":""}},[t("v-tabs-slider"),t("v-tab",{on:{click:function(n){e.isUserManagement=!0}}},[e._v(" Gestión de usuarios y grupos "),t("v-icon",{attrs:{right:!this.$vuetify.breakpoint.xs}},[e._v(" mdi-account-multiple-plus ")])],1),t("v-tab",{on:{click:function(n){e.isUserManagement=!1}}},[e._v(" Roles "),t("v-icon",{attrs:{right:!this.$vuetify.breakpoint.xs}},[e._v(" mdi-account-key ")])],1)],1),t("v-menu",{attrs:{bottom:"",ransition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[t("v-btn",e._g({staticClass:"mt-1",staticStyle:{"margin-right":"6rem"},attrs:{small:"",color:"secondary",fab:"",depressed:""}},i),[t("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")])],1)]}}])},[t("v-list",[t("v-list-item",{on:{click:function(n){return e.modalHandlerUser({isOpen:!0,isLoading:!1})}}},[t("v-icon",{attrs:{left:""}},[e._v("mdi-account-plus")]),e._v(" Nuevo usuario ")],1),t("v-list-item",{on:{click:function(n){return e.modalHandlerGroup({isOpen:!0,isLoading:!1,isEdit:!1})}}},[t("v-icon",{attrs:{left:""}},[e._v("mdi-account-group")]),e._v(" Nuevo grupo ")],1),t("v-list-item",{on:{click:function(n){return e.modalHandlerRol({isOpen:!0,isLoading:!1})}}},[t("v-icon",{attrs:{left:""}},[e._v("mdi-account-tie")]),e._v(" Nuevo Rol ")],1)],1)],1)],1),t("v-col",{staticClass:"pr-1",attrs:{cols:"2"}},[t("Menu",{scopedSlots:e._u([{key:"title",fn:function(){return[t("p",{staticClass:"ma-0"},[e._v(" "+e._s(e.isUserManagement?"Usuarios y Grupos":"Roles")+" ")])]},proxy:!0},{key:"content",fn:function(){return[e.isLoadingViewNavigation?t("v-skeleton-loader",{attrs:{type:"list-item@3"}}):t("v-list",{attrs:{dense:"",nav:"",tile:""}},[t("v-list-item-group",{directives:[{name:"show",rawName:"v-show",value:e.isUserManagement,expression:"isUserManagement"}],attrs:{color:"secondary",mandatory:""},model:{value:e.listItemSelected.group,callback:function(n){e.$set(e.listItemSelected,"group",n)},expression:"listItemSelected.group"}},[t("v-list-item",{attrs:{link:""}},[t("v-list-item-content",[t("v-list-item-title",{attrs:{align:"left"},on:{click:e.selectAllUsers}},[t("v-icon",{staticClass:"mr-4 mb-2"},[e._v(" mdi-account ")]),e._v(" Todos lo usuarios ")],1)],1)],1),t("v-list-group",{attrs:{value:!1,"prepend-icon":"mdi-account-group"},scopedSlots:e._u([{key:"activator",fn:function(){return[t("v-list-item-content",[t("v-list-item-title",[e._v("Grupos")])],1)]},proxy:!0}])},e._l(e.getMyGroups,(function(n){return t("v-list-item",{key:n.id,attrs:{link:"",color:"secondary"},on:{click:function(t){return e.selectSection(n)}}},[t("v-list-item-title",{attrs:{align:"left"}},[t("v-icon",{staticClass:"mr-4 mb-2"},[e._v("mdi-account-group")]),e._v(" "+e._s(n.name)+" ")],1),t("v-edit-dialog",{attrs:{"cancel-text":"cancelar","save-text":"Guardar",large:"","return-value":n.name},on:{save:function(t){return e.updateGroup({id:n.id,name:n.name})},"update:returnValue":function(t){return e.$set(n,"name",t)},"update:return-value":function(t){return e.$set(n,"name",t)}},scopedSlots:e._u([{key:"input",fn:function(){return[t("v-text-field",{attrs:{label:"Editar","single-line":"",counter:""},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"group.name"}})]},proxy:!0}],null,!0)},[n.isDefault?e._e():t("v-btn",{attrs:{small:"",icon:"",right:""}},[t("v-icon",{attrs:{color:"secondary"}},[e._v(" mdi-pencil ")])],1)],1),n.isDefault?e._e():t("v-btn",{attrs:{small:"",icon:"",right:""},on:{click:function(t){return t.stopPropagation(),e.deleteItemConfirmation("Group",n)}}},[t("v-icon",{attrs:{color:"secondary"}},[e._v(" mdi-delete ")])],1)],1)})),1),t("BaseErrorComponent",{directives:[{name:"show",rawName:"v-show",value:e.isGroupsError,expression:"isGroupsError"}],attrs:{info:e.infoGroupsError}})],1),t("v-list-item-group",{directives:[{name:"show",rawName:"v-show",value:!e.isUserManagement,expression:"!isUserManagement"}],attrs:{mandatory:"",color:"secondary"},model:{value:e.listItemSelected.role,callback:function(n){e.$set(e.listItemSelected,"role",n)},expression:"listItemSelected.role"}},[e._l(e.getMyRoles,(function(n){return t("v-list-item",{key:n.id,attrs:{link:""},on:{click:function(t){return e.selectSection(n)}}},[t("v-icon",{staticClass:"mb-1 mr-2"},[e._v("mdi-account-tie")]),t("v-list-item-title",[e._v(" "+e._s(n.name)+" ")]),t("v-edit-dialog",{attrs:{"cancel-text":"cancelar","save-text":"Guardar",large:"","return-value":n.name},on:{save:function(t){return e.updateRole({id:n.id,name:n.name})},"update:returnValue":function(t){return e.$set(n,"name",t)},"update:return-value":function(t){return e.$set(n,"name",t)}},scopedSlots:e._u([{key:"input",fn:function(){return[t("v-text-field",{attrs:{label:"Editar","single-line":"",counter:""},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"role.name"}})]},proxy:!0}],null,!0)},[t("v-btn",{attrs:{small:"",icon:"",right:""}},[t("v-icon",{attrs:{color:"secondary"}},[e._v(" mdi-pencil ")])],1)],1),e.getMyRoles.length>1?t("v-btn",{attrs:{small:"",icon:"",right:""},on:{click:function(t){return t.stopPropagation(),e.deleteItemConfirmation("Role",n)}}},[t("v-icon",{attrs:{color:"secondary"}},[e._v(" mdi-delete ")])],1):e._e()],1)})),t("BaseErrorComponent",{directives:[{name:"show",rawName:"v-show",value:e.isErrorRoles,expression:"isErrorRoles"}],attrs:{info:e.infoRolesError}})],2)],1)]},proxy:!0}])})],1),t("v-col",{staticClass:"pr-1",attrs:{cols:e.isSectionSelected?"7":"10"}},[e.isLoadingViewTable?t("v-skeleton-loader",{attrs:{type:"table"}}):t("UsersDataTable",{attrs:{groupsLength:e.groupsLength,rolesLength:e.rolesLength,headers:e.isSectionSelected?e.sectionHeaders:e.allUsersHeaders,data:e.sectionSelected,error:e.infoUsersError,navigation:e.isUserManagement?e.getMyGroups:e.getMyRoles},on:{openProfile:e.showProfile,userActions:e.userActions,add:function(n){return e.modalHandlerSelectUser({isOpen:!0,isLoading:!1,info:e.sectionSelected})}}})],1),t("v-col",{directives:[{name:"show",rawName:"v-show",value:!!e.isSectionSelected,expression:"isSectionSelected ? true : false"}],attrs:{cols:"3"}},[t("Menu",{attrs:{isPermissionsMenu:!0},scopedSlots:e._u([{key:"title",fn:function(){return[t("p",{staticClass:"ma-0"},[e._v("Permisos de "+e._s(e.sectionSelected.name))]),e.isLoadingUpdatePermissions?t("v-progress-linear",{attrs:{indeterminate:e.isLoadingUpdatePermissions}}):e._e()]},proxy:!0},{key:"content",fn:function(){return[t("ListPermissions",{directives:[{name:"show",rawName:"v-show",value:!e.isUserManagement,expression:"!isUserManagement"}],attrs:{permissions:e.sectionSelected.permissions,loading:e.isLoadingUpdatePermissions},on:{emitPermissions:e.updatePermissions}}),t("ListGroupPermissions",{directives:[{name:"show",rawName:"v-show",value:e.isUserManagement,expression:"isUserManagement"}],attrs:{permissions:e.sectionSelected.permissions,loading:e.isLoadingUpdatePermissions},on:{emitPermissions:e.updatePermissions}})]},proxy:!0}])})],1)],1),t("ProfileUser",{attrs:{roles:e.listRoles,groups:e.getMyGroups,profile:e.profile},on:{updateUser:e.updateUser,close:e.profileHandler}}),t("BaseModalError",{attrs:{modalHandler:e.modalError},on:{close:e.modalHandlerError}}),t("BaseModalDelete",{attrs:{modalHandler:e.modalDelete},on:{cancel:e.modalHandlerDelete,confirm:e.deleteItem}}),t("BaseModalAlert",{attrs:{modalHandler:e.modalAlert},on:{confirm:e.alertConfirmation,close:e.modalHandlerAlert}}),t("ModalUser",{attrs:{roles:e.listRoles,modalHandler:e.modalUser},on:{close:e.modalHandlerUser,newUser:e.createUser}}),t("ModalRol",{attrs:{modalHandler:e.modalRol},on:{close:e.modalHandlerRol,newRole:e.createRole}}),t("ModalGroup",{attrs:{group:e.sectionSelected,modalHandler:e.modalGroup,loadingPermissions:e.isLoadingGroupPermissions,permissions:e.listGroupPermissions},on:{newGroup:e.createGroup,close:e.modalHandlerGroup}}),t("ModalChangeUserOfGroup",{attrs:{groups:e.getMyGroups,modalHandler:e.modalChangeUserOfGroup},on:{outData:e.updateUser,close:e.modalHandlerChangeUserOfGroup}}),t("ModalChangeUserOfRole",{attrs:{roles:e.listRoles,modalHandler:e.modalChangeUserOfRole},on:{outData:e.updateUser,close:e.modalHandlerChangeUserOfRole}}),t("ModalDeleteUserEnterprise",{attrs:{modalHandler:e.modalDeleteUserEnterprise},on:{close:e.modalHandlerDeleteUserEnterprise,outData:e.deleteUserEnterprise}}),t("ModalSelectUser",{attrs:{modalHandler:e.modalSelectUser},on:{close:e.modalHandlerSelectUser,outData:e.updateUser}}),t("v-snackbar",{attrs:{color:e.snackbar.color,timeout:5e3},scopedSlots:e._u([{key:"action",fn:function(){return[t("v-btn",{attrs:{text:""},on:{click:function(n){return e.snackbarHandler({isOpen:!1,color:"",text:""})}}},[e._v(" Cerrar ")])]},proxy:!0}]),model:{value:e.snackbar.isOpen,callback:function(n){e.$set(e.snackbar,"isOpen",n)},expression:"snackbar.isOpen"}},[e._v(" "+e._s(e.snackbar.text)+" ")])],1)},h=[],g=(t("d3b7"),t("3ca3"),t("ddb0"),t("b0c0"),t("7db0"),t("d81d"),t("8785")),f=t("5184"),v=Object(f["a"])(i||(i=Object(g["a"])(["\n  mutation createRole($input: roleCreateInput!) {\n    createRole(roleInput: $input) {\n      id\n      name\n      type\n      enterprise {\n        id\n      }\n      permissions {\n        id\n        name\n        typePermission\n        methods\n      }\n      users {\n        id\n        isActive\n        user {\n          id\n          name\n          lastName\n          email\n        }\n      }\n    }\n  }\n"]))),b=Object(f["a"])(s||(s=Object(g["a"])(["\n  mutation deleteRole($input: roleDeleteInput!) {\n    deleteRole(roleInput: $input) {\n      id\n    }\n  }\n"]))),O=Object(f["a"])(a||(a=Object(g["a"])(["\n  mutation updateRole($input: roleUpdateInput!) {\n    updateRole(roleInput: $input) {\n      id\n      name\n      type\n      enterprise {\n        id\n      }\n      permissions {\n        id\n        name\n        typePermission\n        methods\n      }\n      users {\n        id\n        isActive\n        user {\n          id\n          name\n          lastName\n          email\n          phones\n        }\n        role {\n          id\n          name\n        }\n        group {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),y=Object(f["a"])(o||(o=Object(g["a"])(["\n  mutation createGroup($input: groupCreateInput!) {\n    createGroup(groupInput: $input) {\n      id\n      name\n      isDefault\n      members {\n        id\n        isActive\n        user {\n          id\n          name\n          lastName\n          email\n          phones\n        }\n        role {\n          id\n          name\n          type\n        }\n        group {\n          id\n          name\n        }\n      }\n      permissions {\n        id\n        name\n        typePermission\n        methods\n      }\n    }\n  }\n"]))),U=Object(f["a"])(r||(r=Object(g["a"])(["\n  mutation deleteGroup($groupId: ID!) {\n    deleteGroup(groupId: $groupId) {\n      id\n    }\n  }\n"]))),L=Object(f["a"])(l||(l=Object(g["a"])(["\n  mutation updateGroup($input: groupUpdateInput!) {\n    updateGroup(groupInput: $input) {\n      id\n      name\n      isDefault\n      members {\n        id\n        isActive\n        user {\n          id\n          name\n          lastName\n          email\n          phones\n        }\n        role {\n          id\n          name\n          type\n        }\n        group {\n          id\n          name\n        }\n      }\n      permissions {\n        id\n        name\n        typePermission\n        methods\n      }\n    }\n  }\n"]))),S=t("7592"),k=Object(f["a"])(d||(d=Object(g["a"])(["\n  query GetRoles {\n    getMyRoles: roles(filters: { orderBy: asc }) {\n      id\n      name\n      type\n      users {\n        id\n        isActive\n        user {\n          id\n          name\n          lastName\n          email\n          phones\n          config {\n            profileUrl\n          }\n        }\n        role {\n          id\n          name\n          type\n        }\n        group {\n          id\n          name\n        }\n      }\n      permissions {\n        id\n        name\n        typePermission\n        methods\n      }\n    }\n  }\n"]))),E=Object(f["a"])(c||(c=Object(g["a"])(["\n  query GetRoles {\n    listRoles: roles(filters: { orderBy: asc }) {\n      id\n      name\n    }\n  }\n"]))),G=Object(f["a"])(u||(u=Object(g["a"])(["\n  query GetGroups {\n    getMyGroups: groups(filters: { orderBy: desc }) {\n      id\n      name\n      isDefault\n      members {\n        id\n        isActive\n        user {\n          id\n          name\n          lastName\n          email\n          phones\n          config {\n            profileUrl\n          }\n        }\n        role {\n          id\n          name\n          type\n        }\n        group {\n          id\n          name\n        }\n      }\n      permissions {\n        id\n        name\n        typePermission\n        methods\n      }\n    }\n  }\n"]))),H=(t("07ac"),t("f647")),x={components:{UsersDataTable:function(){return Promise.all([t.e("chunk-47120d2e"),t.e("chunk-67a28b72")]).then(t.bind(null,"a8b9"))},ModalUser:function(){return t.e("chunk-2d217eda").then(t.bind(null,"c98f"))},ProfileUser:function(){return t.e("chunk-b6420c34").then(t.bind(null,"e203"))}},data:function(){return{modalDeleteUserEnterprise:{isOpen:!1,isLoading:!1,info:{}},allUsersHeaders:[{value:"icon",sortable:!1,width:50,align:"right"},{text:"Nombre",value:"userName",sortable:!1,align:"left",width:150},{text:"Rol",value:"role.name",sortable:!1,align:"center"},{text:"Grupo",value:"group",sortable:!1,align:"center"},{text:"Estatus",value:"userStatus",sortable:!1,align:"center"},{value:"actions",sortable:!1,align:"center"}],modalUser:{isOpen:!1,isLoading:!1},profile:{isOpen:!1,isLoading:!1,info:{}}}},methods:{createUser:function(e){var n=this,t=e.jobTitle,i=e.user,s=e.role;this.modalHandlerUser({isOpen:!0,isLoading:!0}),this.$apollo.mutate({mutation:H["b"],variables:{input:{jobTitle:t,user:i,role:s}}}).then((function(){n.$apollo.queries.getMyUsers.refetch(),n.modalHandlerUser({isOpen:!1,isLoading:!1})})).catch((function(){var e="No se pudo agregar el usuario, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e}),n.modalHandlerUser({isOpen:!0,isLoading:!1})}))},selectAllUsers:function(){this.isSectionSelected=!1,this.listItemSelected.group=0,this.sectionSelected={type:"ALL_USERS",users:this.getMyUsers,permissions:[]}},updateUser:function(e){var n=this,t=e.id,i=e.role,s=e.group;this.modalSelectUser.isOpen&&this.modalHandlerSelectUser({isOpen:!0,isLoading:!0,info:this.modalSelectUser.info}),this.modalChangeUserOfGroup.isOpen&&this.modalHandlerChangeUserOfGroup({isOpen:!0,isLoading:!0,info:{}}),this.modalChangeUserOfRole.isOpen&&this.modalHandlerChangeUserOfRole({isOpen:!0,isLoading:!0,info:{}});var a={id:t};s.id&&(a.groupId=s.id),i.id&&(a.roleId=i.id),this.$apollo.mutate({mutation:H["e"],variables:{input:a}}).then((function(e){var t=e.data.updateUserEnterprise;n.$apollo.queries.getMyUsers.refetch(),n.profile.isOpen&&n.showProfile(t),s.id&&(n.$apollo.queries.getMyGroups.refetch(),(n.modalChangeUserOfGroup.isOpen||n.profile.isOpen)&&n.modalHandlerChangeUserOfGroup({isOpen:!1,isLoading:!1,info:{}})),i.id&&(n.$apollo.queries.getMyRoles.refetch(),(n.modalChangeUserOfRole.isOpen||n.profile.isOpen)&&n.modalHandlerChangeUserOfRole({isOpen:!1,isLoading:!1,info:{}})),n.modalSelectUser.isOpen&&n.modalHandlerSelectUser({isOpen:!1,isLoading:!1,info:{}}),n.snackbarHandler({isOpen:!0,color:"success",text:"Rol actualizado correctamente"})})).catch((function(){var e="No se pudo actualizar el usuario, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e})}))},userActions:function(e,n){var t=this,i=n.id,s=n.isActive;switch(e){case"deleteUserWhitEnterprise":this.$apollo.query({query:S["f"],fetchPolicy:"no-cache",variables:{userEnterpriseId:i}}).then((function(e){var n=e.data.userEnterpriseTotal,s=Object.values(n),a=s.some((function(e){return e>=1})),o={fromUser:i,existData:a};a&&(delete n["__typename"],o.countList=JSON.parse(JSON.stringify(n))),t.modalHandlerDeleteUserEnterprise({isOpen:!0,isLoading:!1,info:o})})).catch((function(){var e="No se pudo eliminar el usuario, intente de nuevo o contacte a soporte";t.modalHandlerError({isOpen:!0,error:e})}));break;case"showProfile":this.showProfile(n);break;case"changeStatus":this.modalHandlerAlert({isOpen:!0,isLoading:!1,message:{title:"¿Estas seguro de ".concat("ACTIVE"===s?"Desactivar":"Activar"," este usuario?"),text:"ACTIVE"===s?"Al desactivar este usuario no podrá iniciar sesión en su cuenta, ser modificado ó realizar ninguna acción dentro de la plataforma":"Al activarlo obtendrá acceso a su cuenta y a toda su información"},info:{type:e,userEnterprise:n}});break;case"changeUserOfGroup":this.modalHandlerChangeUserOfGroup({isOpen:!0,isLoading:!1,info:n});break;case"changeUserOfRole":this.modalHandlerChangeUserOfRole({isOpen:!0,isLoading:!1,info:n});break;default:this.modalHandlerError({isOpen:!0,error:"No se ha encontrado la acción a realizar"})}},deleteUserEnterprise:function(e){var n=this,t=e.isOpen,i=e.isLoading,s=e.info;this.modalHandlerDeleteUserEnterprise({isOpen:t,isLoading:i,info:s});var a={fromUser:s.fromUser};s.existData&&(a.toUser=s.toUser),this.$apollo.mutate({mutation:H["c"],variables:{input:a}}).then((function(){n.$apollo.queries.getMyUsers.refetch(),n.modalHandlerDeleteUserEnterprise({isOpen:!1,isLoading:!1,info:{}}),n.snackbarHandler({isOpen:!0,color:"success",text:"Se eliminó el usuario correctamente"})})).catch((function(){var e="No se pudo eliminar el usuario, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e}),n.modalHandlerDeleteUserEnterprise({isOpen:!0,isLoading:!1,info:{}})}))},modalHandlerUser:function(e){var n=e.isOpen,t=e.isLoading;this.modalUser={isOpen:n,isLoading:t}},modalHandlerDeleteUserEnterprise:function(e){var n=e.isOpen,t=e.isLoading,i=e.info;this.modalDeleteUserEnterprise={isOpen:n,isLoading:t,info:i}},profileHandler:function(e){var n=e.isOpen,t=e.isLoading,i=e.info;this.profile={isOpen:n,isLoading:t,info:i}},showProfile:function(e){var n=e.id,t=e.isActive,i=e.plan,s=e.role,a=e.group,o=e.user;this.profileHandler({isOpen:!0,isLoading:!1,info:{id:n,isActive:t,plan:i,role:s,group:a,user:o}})},changeUserStatus:function(e){var n=this,t=e.id,i=e.isActive;this.$apollo.mutate({mutation:H["a"],variables:{input:{id:t}}}).then((function(){n.snackbarHandler({isOpen:!0,color:"success",text:"Usuario ".concat("ACTIVE"===i?"Desactivado":"Activado")}),n.modalHandlerAlert({isOpen:!1,isLoading:!1,message:{title:"",text:""},info:{}})})).catch((function(){var e="No se pudo cambiar el estado del usuario, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e})}))}}},R=Object(f["a"])(p||(p=Object(g["a"])(["\n  query readDefaultPermissionsGroup {\n    groupPermissions: defaultPermissions(filters: { typePermission: GROUP }) {\n      id\n      name\n      typePermission\n      methods\n    }\n  }\n"]))),$={components:{ModalGroup:function(){return t.e("chunk-745322de").then(t.bind(null,"0d2b8"))},ListGroupPermissions:function(){return t.e("chunk-cbc14cf0").then(t.bind(null,"11f7"))}},data:function(){return{groupsLength:0,isLoadingGroupPermissions:!1,listGroupPermissions:[],isGroupsError:!1,infoGroupsError:{icon:"",title:"",message:""},modalGroup:{isOpen:!1,isLoading:!1}}},watch:{modalGroup:function(e){var n=e.isOpen;n?this.getDefaultPermissionsGroup():this.listGroupPermissions=[]}},methods:{modalHandlerGroup:function(e){var n=e.isOpen,t=e.isLoading;this.modalGroup={isOpen:n,isLoading:t}},createGroup:function(e){var n=this,t=e.name,i=e.permissions;this.modalGroup.isLoading=!0,this.$apollo.mutate({mutation:y,variables:{input:{name:t,permissions:i}}}).then((function(){n.$apollo.queries.getMyGroups.refetch(),n.modalHandlerGroup({isOpen:!1,isLoading:!1}),n.snackbarHandler({isOpen:!0,color:"success",text:"Grupo creado"})})).catch((function(){var e="No se pudo crear el grupo, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e}),n.modalHandlerGroup({isOpen:!0,isLoading:!1})}))},updateGroup:function(e){var n=this,t=e.id,i=e.name,s=e.permissions;s&&(this.isLoadingUpdatePermissions=!0),this.$apollo.mutate({mutation:L,variables:{input:{id:t,name:i,permissions:s}}}).then((function(){n.$apollo.queries.getMyGroups.refetch(),s&&(n.isLoadingUpdatePermissions=!1),n.snackbarHandler({isOpen:!0,color:"success",text:"Grupo actualizado correctamente"})})).catch((function(){var e="No se pudo actualizar el grupo, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e})}))},getDefaultPermissionsGroup:function(){var e=this;this.isLoadingGroupPermissions=!0,this.$apollo.query({fetchPolicy:"no-cache",query:R}).then((function(n){var t=n.data.groupPermissions;e.listGroupPermissions=t,e.isLoadingGroupPermissions=!1}))}}},w={components:{ModalRol:function(){return t.e("chunk-2d0e4528").then(t.bind(null,"9072"))}},data:function(){return{rolesLength:0,isErrorRoles:!1,infoRolesError:{icon:"",title:"",message:""},modalRol:{isOpen:!1,isLoading:!1}}},methods:{modalHandlerRol:function(e){var n=e.isOpen,t=e.isEdit,i=e.isLoading;this.modalRol={isOpen:n,isEdit:t,isLoading:i}},createRole:function(e){var n=this,t=e.name;this.modalHandlerRol({isOpen:!0,isLoading:!0}),this.$apollo.mutate({mutation:v,variables:{input:{name:t}}}).then((function(){n.$apollo.queries.getMyRoles.refetch(),n.$apollo.queries.listRoles.refetch(),n.modalHandlerRol({isOpen:!1,isLoading:!1}),n.snackbarHandler({isOpen:!0,color:"success",text:"Rol creado"})})).catch((function(){var e="No se pudo crear el rol, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e}),n.modalHandlerRol({isOpen:!0,isLoading:!1})}))},updateRole:function(e){var n=this,t=e.id,i=e.name,s=e.permissions;s&&(this.isLoadingUpdatePermissions=!0),this.$apollo.mutate({mutation:O,variables:{input:{id:t,name:i,permissions:s}}}).then((function(){n.$apollo.queries.getMyRoles.refetch(),s&&(n.isLoadingUpdatePermissions=!1),n.snackbarHandler({isOpen:!0,color:"success",text:"Se actualizó el rol correctamente"})})).catch((function(){var e="No se pudo actualizar el rol, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e})}))}}},_=t("1e6d"),C=t("4420"),P={components:{ListPermissions:function(){return t.e("chunk-07340ede").then(t.bind(null,"cc0f"))},Menu:function(){return t.e("chunk-2d20eda4").then(t.bind(null,"b0aa"))},BaseErrorComponent:function(){return t.e("chunk-2d0abe3b").then(t.bind(null,"16cc"))},ModalChangeUserOfGroup:function(){return t.e("chunk-2d0cbae4").then(t.bind(null,"4b66"))},ModalChangeUserOfRole:function(){return t.e("chunk-2d0f0405").then(t.bind(null,"9c27"))},ModalDeleteUserEnterprise:function(){return t.e("chunk-2d0dd015").then(t.bind(null,"8018"))},ModalSelectUser:function(){return t.e("chunk-2d0b9804").then(t.bind(null,"32e4"))}},mixins:[x,$,w,_["a"],C["a"]],data:function(){return{isLoadingViewTable:!0,isLoadingViewNavigation:!0,isLoadingUpdatePermissions:!1,getMyUsers:[],isUserManagement:!0,isSectionSelected:!1,showRoleIcons:[],listItemSelected:{role:0,group:0},sectionSelected:{id:"",name:"",type:"",users:[],permissions:[]},sectionHeaders:[{value:"icon",sortable:!1,width:50,align:"right"},{text:"Nombre",value:"userName",sortable:!1,align:"left",width:150},{text:"Estatus",value:"userStatus",sortable:!1,align:"center"},{value:"actions",sortable:!1,align:"center"}],infoUsersError:{icon:"",title:"",message:""},modalChangeUserOfGroup:{isOpen:!1,isLoading:!1,info:{}},modalChangeUserOfRole:{isOpen:!1,isLoading:!1,info:{}},modalSelectUser:{isOpen:!1,isLoading:!1,info:{}}}},watch:{isUserManagement:function(e){this.isLoadingViewTable=!0,this.isLoadingViewNavigation=!0,e&&(this.listItemSelected.group=0,this.sectionSelected={type:"ALL_USERS",users:this.getMyUsers,permissions:[]},this.isSectionSelected=!1)},getMyRoles:function(e){var n=this.listItemSelected.role;this.sectionSelected={id:e[n].id,name:e[n].name,type:"ROLE",users:e[n].users,permissions:e[n].permissions},0===e[n].users.length&&(this.infoUsersError={icon:"mdi-account-multiple-remove",title:"",message:"No hay usuarios todavía"}),this.rolesLength=e.length,this.isSectionSelected=!0,this.isLoadingViewTable=!1,this.isLoadingViewNavigation=!1},getMyUsers:function(e){this.isSectionSelected||(this.sectionSelected={type:"ALL_USERS",users:this.getMyUsers,permissions:[]}),e&&(this.isLoadingViewTable=!1)},getMyGroups:function(e){var n=this;if(e){if(this.isSectionSelected&&"GROUP"===this.sectionSelected.type){var t=e.some((function(e){var t=e.id;return n.sectionSelected.id===t}));if(t){var i=e.find((function(e){var t=e.id;return n.sectionSelected.id===t}));this.selectSection(i)}}this.groupsLength=e.length,this.isLoadingViewNavigation=!1}}},computed:{skipRolesList:function(){return!!(this.modalUser.isOpen&&this.profile.isOpen&&this.modalChangeUserOfRole.isOpen)}},methods:{modalHandlerChangeUserOfGroup:function(e){var n=e.isOpen,t=e.isLoading,i=e.info;this.modalChangeUserOfGroup={isOpen:n,isLoading:t,info:i}},modalHandlerChangeUserOfRole:function(e){var n=e.isOpen,t=e.isLoading,i=e.info;this.modalChangeUserOfRole={isOpen:n,isLoading:t,info:i}},modalHandlerSelectUser:function(e){var n=e.isOpen,t=e.isLoading,i=e.info;this.modalSelectUser={isOpen:n,isLoading:t,info:i}},alertConfirmation:function(e){var n=e.message,t=e.info;"changeStatus"===t.type&&(this.modalHandlerAlert({isOpen:!0,isLoading:!0,message:n,info:t}),this.changeUserStatus(t.userEnterprise))},deleteItemConfirmation:function(e,n){var t=n.id,i=n.name,s="Group"===e?"será eliminado de forma permanente, si existen usuarios dentro del grupo seran movidos al grupo predeterminado":"será eliminado de forma permanente";this.modalHandlerDelete({isOpen:!0,isLoading:!1,message:{nameItem:i,text:s},infoDelete:{type:e,id:t,name:i}})},deleteItem:function(e){var n=this,t=e.isOpen,i=e.isLoading,s=e.message,a=e.infoDelete;switch(this.modalHandlerDelete({isOpen:t,isLoading:i,message:s,infoDelete:a}),a.type){case"Role":this.$apollo.mutate({mutation:b,variables:{input:{roleId:a.id}}}).then((function(){n.$apollo.queries.getMyRoles.refetch(),n.modalHandlerDelete({isOpen:!1,isLoading:!1,message:{},infoDelete:{}}),n.snackbarHandler({isOpen:!0,color:"success",text:"Rol eliminado correctamente"})})).catch((function(){var e="No se pudo eliminar el rol, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e})}));break;case"Group":this.$apollo.mutate({mutation:U,variables:{groupId:a.id}}).then((function(){n.$apollo.queries.getMyGroups.refetch(),n.selectAllUsers(),n.modalHandlerDelete({isOpen:!1,isLoading:!1,message:{},infoDelete:{}}),n.snackbarHandler({isOpen:!0,color:"success",text:"Grupo eliminado correctamente"})})).catch((function(){var e="No se pudo eliminar el grupo, intente de nuevo o contacte a soporte";n.modalHandlerError({isOpen:!0,error:e})}));break;default:this.modalHandlerError({isOpen:!0,error:"No se recibió ninguna acción"})}},updatePermissions:function(e,n){var t=this.sectionSelected.id,i=n.map((function(e){var n=e.id,t=e.methods;return{id:n,methods:t}})),s={id:t,permissions:i};"GROUP"===e&&this.updateGroup(s),"ROLE"===e&&this.updateRole(s)},selectSection:function(e){var n=e.id,t=e.name,i=e.users,s=e.members,a=e.permissions;this.isSectionSelected=!0,i&&s||(this.infoUsersError={icon:"mdi-account-multiple-remove",title:"",message:"No hay usuarios todavía"}),this.sectionSelected={id:n,type:s?"GROUP":"ROLE",name:t,users:i||s,permissions:a}}},apollo:{getMyUsers:{query:S["b"],fetchPolicy:"no-cache",skip:function(){return!this.isUserManagement},error:function(){this.isLoadingViewTable=!1,this.infoUsersError={icon:"mdi-alert-outline",title:"Error",message:"No se ha podido cargar ningún usuario, intente de nuevo o contacte con soporte"}}},getMyGroups:{query:G,fetchPolicy:"no-cache",skip:function(){return!this.isUserManagement},error:function(){this.isGroupsError=!0,this.infoGroupsError={icon:"mdi-alert-outline",title:"Error",message:"No se ha podido cargar los roles, contacte con soporte"},this.isLoadingViewNavigation=!1}},getMyRoles:{query:k,fetchPolicy:"no-cache",skip:function(){return this.isUserManagement},error:function(){this.isErrorRoles=!0,this.infoRolesError={icon:"mdi-alert-outline",title:"Error",message:"No se ha podido cargar ningún rol, intente de nuevo contacte con soporte"},this.isLoadingViewTable=!1,this.isLoadingViewNavigation=!1}},listRoles:{query:E,fetchPolicy:"no-cache",skip:function(){return this.skipRolesList}}}},M=P,I=(t("bca6"),t("0c7c")),N=t("6544"),D=t.n(N),A=t("8336"),V=t("62ad"),j=t("a523"),B=t("7679"),T=t("132d"),q=t("8860"),z=t("56b0"),J=t("da13"),F=t("5d23"),W=t("1baa"),K=t("e449"),Q=t("8e36"),X=t("0fd9"),Y=t("3129"),Z=t("2db4"),ee=t("71a3"),ne=t("fe57"),te=t("9a96"),ie=t("8654"),se=Object(I["a"])(M,m,h,!1,null,"53b5e972",null);n["default"]=se.exports;D()(se,{VBtn:A["a"],VCol:V["a"],VContainer:j["a"],VEditDialog:B["a"],VIcon:T["a"],VList:q["a"],VListGroup:z["a"],VListItem:J["a"],VListItemContent:F["a"],VListItemGroup:W["a"],VListItemTitle:F["c"],VMenu:K["a"],VProgressLinear:Q["a"],VRow:X["a"],VSkeletonLoader:Y["a"],VSnackbar:Z["a"],VTab:ee["a"],VTabs:ne["a"],VTabsSlider:te["a"],VTextField:ie["a"]})},f647:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return p})),t.d(n,"c",(function(){return m})),t.d(n,"e",(function(){return h})),t.d(n,"f",(function(){return g})),t.d(n,"d",(function(){return f}));var i,s,a,o,r,l,d=t("8785"),c=t("5184"),u=Object(c["a"])(i||(i=Object(d["a"])(["\n  mutation changeUserStatus($input: userEnterpriseUpdateInput!) {\n    pauseAccount(userEnterpriseInput: $input) {\n      id\n      isActive\n      user {\n        id\n      }\n    }\n  }\n"]))),p=Object(c["a"])(s||(s=Object(d["a"])(["\n  mutation createUser($input: userCreateInput!) {\n    createUser(userInput: $input) {\n      id\n      isActive\n      user {\n        id\n        name\n        lastName\n        email\n        phones\n      }\n      role {\n        id\n        name\n        type\n      }\n      group {\n        id\n        name\n      }\n    }\n  }\n"]))),m=Object(c["a"])(a||(a=Object(d["a"])(["\n  mutation deleteUserEnterprise($input: userEnterpriseDeleteInput!) {\n    deleteUserEnterprise(userEnterpriseInput: $input) {\n      id\n      user {\n        id\n        name\n        lastName\n        email\n        phones\n      }\n      role {\n        id\n        name\n        type\n      }\n      group {\n        id\n        name\n      }\n    }\n  }\n"]))),h=Object(c["a"])(o||(o=Object(d["a"])(["\n  mutation updateUserEnterprise($input: userEnterpriseUpdateInput!) {\n    updateUserEnterprise(userEnterpriseInput: $input) {\n      id\n      isActive\n      user {\n        id\n        name\n        lastName\n        email\n        phones\n        config {\n          profileUrl\n        }\n      }\n      role {\n        id\n        name\n        type\n      }\n      group {\n        id\n        name\n      }\n    }\n  }\n"]))),g=Object(c["a"])(r||(r=Object(d["a"])(["\n  mutation UpdateUserPassword($input: userUpdatePasswordInput!) {\n    updateUserPassword(userInput: $input) {\n      status\n      message\n    }\n  }\n"]))),f=Object(c["a"])(l||(l=Object(d["a"])(["\n  mutation updateUser($userInput: userUpdateInput!) {\n    updateUser(userInput: $userInput) {\n      id\n      email\n      name\n      lastName\n    }\n  }\n"])))}}]);
//# sourceMappingURL=chunk-1d46dc76.61a7863b.js.map