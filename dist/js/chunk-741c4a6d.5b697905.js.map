{"version":3,"sources":["webpack:///./src/mixins/dealsMixin.js","webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./src/graphql/mutations/companiesMutations.js","webpack:///./src/graphql/mutations/dealsMutations.js","webpack:///./node_modules/core-js/modules/es.string.search.js","webpack:///./src/components/profile/DealCompany.vue?e78f","webpack:///./src/components/profile/DealCompany.vue?6809","webpack:///src/components/profile/DealCompany.vue","webpack:///./src/components/profile/DealCompany.vue?f43f","webpack:///./src/components/profile/DealCompany.vue?542f"],"names":["dealsMixin","data","PERMISSIONS_DEALS","inputsForm","isLoadingDeals","loadingSearch","isLoadingUpdateDeal","modalDeal","isOpen","isLoading","infoError","icon","title","message","filters","search","orderBy","skip","take","sortBy","sortDesc","isDelete","listDeals","informationBarDeals","resultSearchDeals","totalDeals","searchDeal","searchFilters","dealsSelected","watch","value","Object","keys","length","this","getSearchDeals","$emit","computed","menuProps","methods","modalHandlerDeal","createDeal","contact","company","tags","customForms","expectedCloseDate","pipeline","pipelineId","stageId","owner","$apollo","mutate","mutation","CREATE_DEAL","variables","input","id","ownerId","then","updateData","$route","name","updateViewPipeline","params","setTimeout","typeItem","updateHistory","addDeal","catch","error","modalHandlerError","updateDeal","status","comments","lostReason","customForm","undefined","UPDATE_DEAL","modalHandlerLostDeal","query","GET_SEARCH_DEALS","fetchPolicy","deals","list","getDeals","GET_DEALS","importId","filterId","informationBar","map","deal","forEach","count","isErrorDeals","restoreDealsConfirmation","modalHandlerRestore","nameItem","text","infoRestore","restoreDeals","RESTORE_DEALS","update","snackbarHandler","color","finally","deleteDealConfirmation","type","modalHandlerDelete","infoDelete","deleteDeal","DELETE_DEAL","trashDealsConfirmation","trashDeals","TRASH_DEALS","goToProfile","$router","push","module","exports","is","x","y","CREATE_COMPANY","gql","DELETE_COMPANIES","TRASH_COMPANIES","RESTORE_COMPANIES","UPDATE_COMPANY","FUSE_COMPANIES","UPDATE_OWNER_COMPANIES","CHANGE_DEAL_STAGE","CHANGE_DEAL_PIPELINE","CREATE_LOST_REASON","DELETE_LOST_REASON","UPDATE_LOST_REASON","UPDATE_OWNER_DEALS","fixRegExpWellKnownSymbolLogic","anObject","requireObjectCoercible","sameValue","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","O","searcher","call","RegExp","String","string","res","done","rx","S","previousLastIndex","lastIndex","result","index","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","canEditDeal","canEditDealOthers","item","_e","scopedSlots","_u","key","fn","ref","onMenu","on","directives","rawName","expression","onTooltip","_g","$event","isShowAddCompany","assign","_s","companySelected","model","callback","$$v","class","isDense","updateCompany","deleteCompany","staticStyle","cancel","disabledAddButton","addCompany","goCompany","isLoadingRemove","_b","stopPropagation","disconnectCompany","canEditCompany","canEditCompanyOthers","isEdit","isValidateFormName","rules","general","companyName","isLoadingChangeName","cancelEdit","updateName","modalError","staticRenderFns","components","FieldSelectCompanySimple","mixins","rulesMixin","props","required","itemId","default","UPDATE","UPDATE_OTHERS","PERMISSIONS_COMPANIES","searchCompanies","companyNew","userCurrent","created","ability","$refs","formCompany","reset","isValidate","validate","apollo","component","VBtn","VCard","VCardText","VCardTitle","VDivider","VForm","VIcon","VListItem","VListItemAction","VListItemContent","VList","VListItemTitle","VMenu","VProgressCircular","VSpacer","VTextField","VTooltip"],"mappings":"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","file":"js/chunk-741c4a6d.5b697905.js","sourcesContent":["import {\n  CREATE_DEAL,\n  DELETE_DEAL,\n  UPDATE_DEAL,\n  TRASH_DEALS,\n  RESTORE_DEALS,\n} from '@/graphql/mutations/dealsMutations';\nimport { GET_DEALS, GET_SEARCH_DEALS } from '@/graphql/querys/dealsQuery';\nimport { PERMISSIONS_DEALS } from '@/constants/permissions';\n\nexport const dealsMixin = {\n  data() {\n    return {\n      PERMISSIONS_DEALS,\n      inputsForm: [],\n      isLoadingDeals: false,\n      loadingSearch: false,\n      isLoadingUpdateDeal: false,\n      modalDeal: {\n        isOpen: false,\n        isLoading: false,\n      },\n      infoError: {\n        icon: 'mdi-account-search-outline',\n        title: '',\n        message: 'No se encontraron tratos',\n      },\n      filters: {\n        search: '',\n        orderBy: 'desc',\n        skip: 0,\n        take: 0,\n        sortBy: [],\n        sortDesc: [],\n        isDelete: false,\n      },\n      listDeals: [],\n      informationBarDeals: {},\n      resultSearchDeals: [],\n      totalDeals: 0,\n      searchDeal: '',\n      searchFilters: {\n        search: '',\n        take: 5,\n      },\n      dealsSelected: [],\n    };\n  },\n  watch: {\n    searchDeal(value) {\n      if (value) {\n        if (Object.keys(value).length >= 2) {\n          this.searchFilters.search = value;\n          this.searchFilters.take = 5;\n          this.getSearchDeals();\n        }\n        if (Object.keys(value).length === 0) {\n          // console.log('longitud de busqueda cero');\n          this.searchFilters.search = '';\n          this.searchFilters.take = 0;\n          this.getSearchDeals();\n        }\n      }\n    },\n    isLoadingDeals(value) {\n      this.$emit('isLoadingDeals', value);\n    },\n  },\n  computed: {\n    menuProps() {\n      return !this.searchDeal ? { value: false } : {};\n    },\n  },\n  methods: {\n    modalHandlerDeal({ isOpen, isLoading }) {\n      this.modalDeal = { isOpen, isLoading };\n    },\n    createDeal({\n      title,\n      contact,\n      company,\n      value,\n      tags,\n      customForms,\n      expectedCloseDate,\n      pipeline: { pipelineId, stageId },\n      owner,\n    }) {\n      this.modalHandlerDeal({\n        isOpen: true,\n        isLoading: true,\n      });\n      this.$apollo\n        .mutate({\n          mutation: CREATE_DEAL,\n          variables: {\n            input: {\n              title,\n              tags,\n              customForms,\n              expectedCloseDate,\n              contact: contact?.id ? { id: contact.id } : contact,\n              company: company?.id ? { id: company.id } : company,\n              value,\n              pipelineId,\n              stageId,\n              ownerId: owner.id,\n            },\n          },\n        })\n        .then(({ data: { createDeal } }) => {\n          this.updateData = true;\n          this.modalHandlerDeal({\n            isOpen: false,\n            isLoading: false,\n          });\n          if (this.$route.name === 'pipeline-id') {\n            this.updateViewPipeline(this.$route.params.id);\n          }\n          this.updateData = true;\n\n          setTimeout(() => {\n            this.updateData = false;\n          }, 10);\n\n          this.$emit('updateHistory');\n\n          if (this.typeItem === 'CONTACT' || this.typeItem === 'COMPANY') {\n            this.updateHistory();\n            this.addDeal(createDeal);\n          }\n        })\n        .catch(() => {\n          const error =\n            'No se pudo crear el trato intente de nuevo o contacte al soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    updateDeal({\n      id,\n      value,\n      expectedCloseDate,\n      company,\n      contact,\n      tags,\n      status,\n      comments,\n      lostReason,\n      owner,\n      title,\n      customForm,\n    }) {\n      this.isLoadingUpdateDeal = true;\n      const input = {};\n      input.id = id;\n      if (value || value === 0) {\n        input.value = value;\n      }\n      if (expectedCloseDate || expectedCloseDate !== undefined) {\n        input.expectedCloseDate = expectedCloseDate;\n      }\n      if (company) {\n        input.company = company;\n      }\n      if (contact) {\n        input.contact = contact;\n      }\n      if (tags) {\n        input.tags = tags;\n      }\n      if (owner) {\n        input.ownerId = owner.id;\n      }\n      if (title) {\n        input.title = title;\n      }\n      if (customForm) {\n        input.customForm = customForm;\n      }\n      if (status) {\n        input.status = status;\n        if (status === 'LOST') {\n          input.comments = comments;\n          input.lostReason = lostReason;\n        }\n      }\n\n      this.$apollo\n        .mutate({\n          // Query\n          mutation: UPDATE_DEAL,\n          // Parameters\n          variables: {\n            input,\n          },\n        })\n        .then(({ data: { updateDeal } }) => {\n          if (input.status === 'LOST') {\n            this.modalHandlerLostDeal({ isOpen: false, isLoading: false });\n          }\n          this.$emit('updateItem', updateDeal);\n          this.$emit('updateHistory');\n          // Close edit field\n          this.isLoadingUpdateDeal = false;\n\n          if (this.typeItem === 'CONTACT' || this.typeItem === 'COMPANY') {\n            this.updateHistory();\n            this.addDeal(updateDeal);\n          }\n        })\n        .catch(() => {\n          this.isLoadingUpdateDeal = false;\n          // Error\n          const error =\n            'No se pudo actualizar el trato, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    getSearchDeals() {\n      this.loadingSearch = true;\n      this.$apollo\n        .query({\n          query: GET_SEARCH_DEALS,\n          fetchPolicy: 'no-cache',\n          variables: {\n            filters: this.searchFilters,\n          },\n        })\n        .then(({ data: { deals } }) => {\n          this.resultSearchDeals = deals.list;\n          this.loadingSearch = false;\n        })\n        .catch(() => {\n          this.loadingSearch = false;\n        });\n    },\n    getDeals() {\n      this.isLoadingDeals = true;\n      this.$apollo\n        .query({\n          query: GET_DEALS,\n          fetchPolicy: 'no-cache',\n          variables: {\n            filters: this.filters,\n            importId: this.$route.query.filterId,\n          },\n        })\n        .then(({ data: { deals } }) => {\n          this.isLoadingDeals = false;\n          this.$emit('deals', deals.list);\n          this.$emit('informationBar', deals.informationBar);\n          this.listDeals = deals.list.map((deal) => {\n            if (deal.customForms) {\n              deal.customForms.forEach(({ id, value }) => {\n                // eslint-disable-next-line\n                deal[id] = value;\n              });\n            }\n            return deal;\n          });\n          this.totalDeals = deals.count;\n\n          this.isErrorDeals = false;\n          this.$emit('endUpdateData');\n        })\n        .catch(() => {\n          this.isErrorDeals = true;\n          this.isLoadingDeals = false;\n          this.listDeals = [];\n          this.totalDeals = 0;\n          this.$emit('endUpdateData');\n          this.infoError = {\n            icon: 'mdi-alert-outline',\n            title: 'Error',\n            message:\n              'No se ha podido cargar ningún trato, intente de nuevo o contacte a soporte',\n          };\n        });\n    },\n    restoreDealsConfirmation() {\n      this.modalHandlerRestore({\n        isOpen: true,\n        isLoading: false,\n        message: {\n          title: '¿Seguro que deseas restaurar?',\n          nameItem: 'Los tratos seleccionados',\n          text: 'serán restaurados',\n        },\n        infoRestore: {},\n      });\n    },\n    restoreDeals({ isOpen, isLoading, message, infoRestore }) {\n      this.modalHandlerRestore({\n        isOpen,\n        isLoading,\n        message,\n        infoRestore,\n      });\n      this.$apollo\n        .mutate({\n          mutation: RESTORE_DEALS,\n          variables: {\n            input: this.dealsSelected,\n          },\n          update: () => {\n            // indicamos que se deve de actualizar la vista de contactos\n            this.updateData = true;\n            this.snackbarHandler({\n              isOpen: true,\n              color: 'success',\n              text: 'Los tratos fueron restaurados correctamente',\n            });\n          },\n        })\n        .finally(() => {\n          this.modalHandlerRestore({\n            isOpen: false,\n            isLoading,\n            message,\n            infoRestore,\n          });\n          this.updateData = false;\n        })\n        .catch(() => {\n          const error =\n            'No se pudo restaurar el trato intente de nuevo o contacte al soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    deleteDealConfirmation(type, deals) {\n      this.modalHandlerDelete({\n        isOpen: true,\n        isLoading: false,\n        message: {\n          title: '¿Seguro que deseas mover a la papelera?',\n          nameItem: 'Los tratos seleccionados',\n          text: 'serán movidos a la papelera',\n        },\n        infoDelete: {\n          type,\n          deals,\n        },\n      });\n    },\n    deleteDeal({ isOpen, isLoading, message, infoDelete }) {\n      this.modalHandlerDelete({ isOpen, isLoading, message, infoDelete });\n      this.$apollo\n        .mutate({\n          mutation: DELETE_DEAL,\n          variables: {\n            input: infoDelete.deals,\n          },\n          update: () => {\n            // indicamos que se deve de actualizar la vista de contactos\n            this.updateData = true;\n            this.snackbarHandler({\n              isOpen: true,\n              color: 'success',\n              text: 'Los tratos fueron eliminados correctamente',\n            });\n          },\n        })\n        .finally(() => {\n          this.updateData = false;\n          this.modalHandlerDelete({\n            isOpen: false,\n            isLoading,\n            message,\n            infoDelete,\n          });\n        })\n        .catch(() => {\n          const error =\n            'No se pudo eliminar el trato intente de nuevo o contacte al soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    trashDealsConfirmation(type, deals) {\n      this.modalHandlerDelete({\n        isOpen: true,\n        isLoading: false,\n        message: {\n          nameItem: 'Los tratos seleccionados',\n          text: 'serán eliminados permanentemente',\n        },\n        infoDelete: {\n          type,\n          deals,\n        },\n      });\n    },\n    trashDeals({ isOpen, isLoading, message, infoDelete }) {\n      this.modalHandlerDelete({ isOpen, isLoading, message, infoDelete });\n      this.$apollo\n        .mutate({\n          mutation: TRASH_DEALS,\n          variables: {\n            input: infoDelete.deals,\n          },\n          update: () => {\n            // indicamos que se deve de actualizar la vista de contactos\n            this.updateData = true;\n            this.snackbarHandler({\n              isOpen: true,\n              color: 'success',\n              text: 'Los tratos fueron eliminados correctamente',\n            });\n          },\n        })\n        .finally(() => {\n          this.updateData = false;\n          this.modalHandlerDelete({\n            isOpen: false,\n            isLoading,\n            message,\n            infoDelete,\n          });\n        })\n        .catch(() => {\n          const error =\n            'No se pudo eliminar el trato intente de nuevo o contacte al soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n    goToProfile(id) {\n      this.$router.push(`/deal/${id}`);\n    },\n  },\n};\n","// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","import gql from 'graphql-tag';\n\nexport const CREATE_COMPANY = gql`\n  mutation createCompany($input: companyCreateInput!) {\n    createCompany(companyInput: $input) {\n      id\n      name\n      address\n      website\n      phones\n      socialMedias\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      contacts {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const DELETE_COMPANIES = gql`\n  mutation deletedCompanies($input: [DeleteCompanyInput!]!) {\n    deletedCompanies(companies: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const TRASH_COMPANIES = gql`\n  mutation trashCompanies($input: [DeleteCompanyInput!]!) {\n    trashCompanies(companies: $input) {\n      id\n    }\n  }\n`;\n\nexport const RESTORE_COMPANIES = gql`\n  mutation restoreCompanies($input: [DeleteCompanyInput!]!) {\n    restoreCompanies(companies: $input) {\n      id\n    }\n  }\n`;\n\nexport const UPDATE_COMPANY = gql`\n  mutation updateCompany($companyInput: companyUpdateInput!) {\n    updateCompany(companyInput: $companyInput) {\n      id\n      name\n      address\n      website\n      phones\n      customForms\n      socialMedias\n      tags {\n        id\n        name\n        color\n        order\n      }\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      contacts {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const FUSE_COMPANIES = gql`\n  mutation FuseCompanies($input: CompaniesToFuse!) {\n    fuseCompanies(fuse: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const UPDATE_OWNER_COMPANIES = gql`\n  mutation assignCompanies($companyListAssign: CompanyListAssign!) {\n    assignCompanies(companyListAssign: $companyListAssign)\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const CREATE_DEAL = gql`\n  mutation CreateDeal($input: CreateDeal!) {\n    createDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      rottenTime\n      owner {\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      company {\n        id\n        name\n      }\n      contact {\n        id\n        name\n      }\n      stage {\n        id\n        name\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n`;\n\nexport const UPDATE_DEAL = gql`\n  mutation UpdateDeal($input: UpdateDeal!) {\n    updateDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      contact {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n`;\n\nexport const DELETE_DEAL = gql`\n  mutation deletedDeals($input: [DeleteDealInput!]!) {\n    deletedDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\nexport const TRASH_DEALS = gql`\n  mutation trashDeals($input: [DeleteDealInput!]!) {\n    trashDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\nexport const RESTORE_DEALS = gql`\n  mutation restoreDeals($input: [DeleteDealInput!]!) {\n    restoreDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\n// se pide todo lo necesario para poder actualizar el deal entero y no se pierda ningun dato\nexport const CHANGE_DEAL_STAGE = gql`\n  mutation ChangeDealStage($input: ChangeStage!) {\n    changeDealStage(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      dateEntryIntoStage\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n        maxDays\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n`;\n\nexport const CHANGE_DEAL_PIPELINE = gql`\n  mutation changeDealPipeline($input: changePipelineInput!) {\n    changeDealPipeline(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n`;\n\nexport const CREATE_LOST_REASON = gql`\n  mutation CreateLostReason($input: lostReasonCreateInput!) {\n    createLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const DELETE_LOST_REASON = gql`\n  mutation DeleteLostReason($lostReasonId: ID!) {\n    deleteLostReason(lostReasonId: $lostReasonId) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const UPDATE_LOST_REASON = gql`\n  mutation UpdateLostReason($input: lostReasonUpdateInput!) {\n    updateLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const UPDATE_OWNER_DEALS = gql`\n  mutation assignDeals($dealListAssign: DealListAssign!) {\n    assignDeals(dealListAssign: $dealListAssign)\n  }\n`;\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.es/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : regexp[SEARCH];\n      return searcher !== undefined ? searcher.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search\n    function (string) {\n      var res = maybeCallNative(nativeSearch, this, string);\n      if (res.done) return res.value;\n\n      var rx = anObject(this);\n      var S = String(string);\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DealCompany.vue?vue&type=style&index=0&id=3e9a0da0&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-divider'),_c('v-card-title',{staticClass:\"company-name py-1\"},[_c('v-icon',{staticClass:\"mr-4\",attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-domain\")]),_vm._v(\" Empresa \"),_c('v-spacer'),((_vm.canEditDeal || _vm.canEditDealOthers) && !_vm.item.isDelete)?_c('v-menu',{attrs:{\"close-on-content-click\":false,\"left\":\"\",\"nudge-right\":\"30\",\"nudge-bottom\":\"-20\",\"absolute\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar onMenu = ref.on;\nreturn [_c('v-tooltip',{directives:[{name:\"show\",rawName:\"v-show\",value:((_vm.canEditDeal || _vm.canEditDealOthers) && !_vm.item.isDelete),expression:\"(canEditDeal || canEditDealOthers) && !item.isDelete\"}],attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar onTooltip = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"icon\":\"\",\"loading\":_vm.isLoadingUpdateDeal},on:{\"click\":function($event){_vm.isShowAddCompany = !_vm.isShowAddCompany}}},Object.assign({}, onMenu, onTooltip)),[_c('v-icon',{attrs:{\"color\":\"secondary\"}},[_vm._v(\" \"+_vm._s(_vm.companySelected ? 'mdi-compare-horizontal' : 'mdi-plus')+\" \")])],1)]}}],null,true)},[_c('span',[_vm._v(_vm._s(_vm.companySelected ? 'Reemplazar' : 'Agregar'))])])]}}],null,false,171882926),model:{value:(_vm.isShowAddCompany),callback:function ($$v) {_vm.isShowAddCompany=$$v},expression:\"isShowAddCompany\"}},[_c('v-card',{staticClass:\"pa-4\",attrs:{\"width\":\"18em\"}},[_c('v-form',{ref:\"formCompany\"},[_c('FieldSelectCompanySimple',{attrs:{\"inputProps\":{ class: 'no-icon full-width', isDense: true },\"resetHandler\":_vm.isShowAddCompany},on:{\"outData\":_vm.updateCompany,\"deleteData\":_vm.deleteCompany}})],1),_c('div',{staticClass:\"d-flex justify-center pt-2 ml-2\"},[_c('v-btn',{staticClass:\"mr-2\",staticStyle:{\"width\":\"45%\"},attrs:{\"color\":\"primary\",\"outlined\":\"\",\"small\":\"\",\"disabled\":_vm.isLoadingUpdateDeal},on:{\"click\":_vm.cancel}},[_vm._v(\" Cancelar \")]),((_vm.canEditDeal || _vm.canEditDealOthers) && !_vm.item.isDelete)?_c('v-btn',{staticStyle:{\"width\":\"45%\"},attrs:{\"color\":\"secondary\",\"loading\":_vm.isLoadingUpdateDeal,\"small\":\"\",\"disabled\":_vm.disabledAddButton},on:{\"click\":_vm.addCompany}},[_vm._v(\" Guardar \")]):_vm._e()],1)],1)],1):_vm._e()],1),_c('v-divider'),_c('v-card-text',{staticClass:\"pa-0\"},[(\n          !_vm.companySelected ||\n            _vm.companySelected === null ||\n            _vm.companySelected === undefined\n        )?_c('div',{staticClass:\"pa-2 text-center\"},[_c('span',[_vm._v(\" No tiene empresa \")])]):_c('v-list-item',{staticClass:\"Company\",attrs:{\"outlined\":\"\"}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"Company__title\"},[[_c('div',{staticClass:\"Company__box\",on:{\"click\":function($event){return _vm.goCompany(_vm.companySelected.id)}}},[_c('v-icon',[_vm._v(\"mdi-office-building\")]),_c('span',{staticClass:\"Company__box_name\"},[_vm._v(\" \"+_vm._s(_vm.companySelected.name)+\" \"),(_vm.companySelected.isDelete)?_c('b',{staticClass:\"font-weight-bold\",staticStyle:{\"color\":\"red\"}},[_vm._v(\" (Eliminado) \")]):_vm._e()])],1)]],2)],1),(_vm.isLoadingRemove)?_c('v-list-item-action',[_c('v-progress-circular',{attrs:{\"size\":20,\"color\":\"secondary\",\"indeterminate\":\"\"}})],1):_vm._e(),(\n            !_vm.isLoadingRemove &&\n              (_vm.canEditDeal || _vm.canEditDealOthers) &&\n              !_vm.item.isDelete\n          )?_c('v-list-item-action',{staticClass:\"Company__edit mt-4\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\n          var on = ref.on;\n          var attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"mr-1 mt-2\",attrs:{\"x-small\":\"\",\"outlined\":\"\",\"color\":\"grey\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.disconnectCompany(_vm.companySelected.id)}}},'v-btn',attrs,false),on),[_c('v-icon',{attrs:{\"small\":\"\",\"color\":\"grey\"}},[_vm._v(\"mdi-connection\")])],1)]}}],null,false,2206051549)},[_c('span',[_vm._v(\"Desvincular\")])]),((_vm.canEditCompany || _vm.canEditCompanyOthers) && !_vm.item.isDelete)?_c('v-menu',{attrs:{\"close-on-content-click\":false,\"left\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\n          var onMenu = ref.on;\nreturn [_c('v-tooltip',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n                  (_vm.canEditCompany || _vm.canEditCompanyOthers) && !_vm.item.isDelete\n                ),expression:\"\\n                  (canEditCompany || canEditCompanyOthers) && !item.isDelete\\n                \"}],attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\n                var onTooltip = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"mt-2\",attrs:{\"x-small\":\"\",\"color\":\"secondary\"},on:{\"click\":function($event){_vm.isEdit = true}}},Object.assign({}, onMenu, onTooltip)),[_c('v-icon',{attrs:{\"small\":\"\",\"color\":\"white\"}},[_vm._v(\"mdi-pencil\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Cambiar nombre\")])])]}}],null,false,605361110),model:{value:(_vm.isEdit),callback:function ($$v) {_vm.isEdit=$$v},expression:\"isEdit\"}},[_c('v-card',{staticClass:\"pa-4\",attrs:{\"width\":\"18em\"}},[_c('v-form',{ref:\"formCompany\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.isValidateFormName),callback:function ($$v) {_vm.isValidateFormName=$$v},expression:\"isValidateFormName\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.rules.general,\"label\":\"Nombre\",\"hide-details\":\"auto\",\"maxlength\":\"50\",\"dense\":\"\",\"outlined\":\"\"},model:{value:(_vm.companyName),callback:function ($$v) {_vm.companyName=$$v},expression:\"companyName\"}}),_c('div',{staticClass:\"d-flex justify-center mt-1\"},[_c('v-btn',{staticClass:\"mr-2\",staticStyle:{\"width\":\"48%\"},attrs:{\"small\":\"\",\"color\":\"primary\",\"outlined\":\"\",\"disables\":_vm.isLoadingChangeName,\"tile\":\"\"},on:{\"click\":_vm.cancelEdit}},[_vm._v(\" Cancelar \")]),(\n                      (_vm.canEditCompany || _vm.canEditCompanyOthers) &&\n                        !_vm.item.isDelete\n                    )?_c('v-btn',{staticStyle:{\"width\":\"48%\"},attrs:{\"tile\":\"\",\"loading\":_vm.isLoadingChangeName,\"small\":\"\",\"color\":\"secondary\"},on:{\"click\":function($event){return _vm.updateName({\n                        id: _vm.companySelected.id,\n                        name: _vm.companyName,\n                      })}}},[_vm._v(\" Guardar \")]):_vm._e()],1)],1)],1)],1):_vm._e()],1):_vm._e()],1)],1)],1),_c('BaseModalError',{attrs:{\"modalHandler\":_vm.modalError},on:{\"close\":_vm.modalHandlerError}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-card flat>\n      <v-divider />\n      <v-card-title class=\"company-name py-1\">\n        <v-icon color=\"primary\" class=\"mr-4\">mdi-domain</v-icon>\n        Empresa\n        <v-spacer></v-spacer>\n        <v-menu\n          v-model=\"isShowAddCompany\"\n          :close-on-content-click=\"false\"\n          left\n          nudge-right=\"30\"\n          nudge-bottom=\"-20\"\n          absolute\n          v-if=\"(canEditDeal || canEditDealOthers) && !item.isDelete\"\n        >\n          <template v-slot:activator=\"{ on: onMenu }\">\n            <v-tooltip\n              top\n              v-show=\"(canEditDeal || canEditDealOthers) && !item.isDelete\"\n            >\n              <template v-slot:activator=\"{ on: onTooltip }\">\n                <v-btn\n                  v-on=\"{ ...onMenu, ...onTooltip }\"\n                  icon\n                  @click=\"isShowAddCompany = !isShowAddCompany\"\n                  :loading=\"isLoadingUpdateDeal\"\n                >\n                  <v-icon color=\"secondary\">\n                    {{\n                      companySelected ? 'mdi-compare-horizontal' : 'mdi-plus'\n                    }}\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>{{ companySelected ? 'Reemplazar' : 'Agregar' }}</span>\n            </v-tooltip>\n          </template>\n          <v-card class=\"pa-4\" width=\"18em\">\n            <v-form ref=\"formCompany\">\n              <FieldSelectCompanySimple\n                :inputProps=\"{ class: 'no-icon full-width', isDense: true }\"\n                :resetHandler=\"isShowAddCompany\"\n                @outData=\"updateCompany\"\n                @deleteData=\"deleteCompany\"\n              />\n            </v-form>\n            <div class=\"d-flex justify-center pt-2 ml-2\">\n              <v-btn\n                style=\"width:45%\"\n                color=\"primary\"\n                outlined\n                small\n                class=\"mr-2\"\n                @click=\"cancel\"\n                :disabled=\"isLoadingUpdateDeal\"\n              >\n                Cancelar\n              </v-btn>\n              <v-btn\n                style=\"width:45%\"\n                v-if=\"(canEditDeal || canEditDealOthers) && !item.isDelete\"\n                color=\"secondary\"\n                :loading=\"isLoadingUpdateDeal\"\n                small\n                :disabled=\"disabledAddButton\"\n                @click=\"addCompany\"\n              >\n                Guardar\n              </v-btn>\n            </div>\n          </v-card>\n        </v-menu>\n      </v-card-title>\n      <v-divider></v-divider>\n      <v-card-text class=\"pa-0\">\n        <div\n          v-if=\"\n            !companySelected ||\n              companySelected === null ||\n              companySelected === undefined\n          \"\n          class=\"pa-2 text-center\"\n        >\n          <span>\n            No tiene empresa\n          </span>\n        </div>\n        <v-list-item v-else class=\"Company\" outlined>\n          <v-list-item-content>\n            <v-list-item-title class=\"Company__title\">\n              <template>\n                <div\n                  class=\"Company__box\"\n                  @click=\"goCompany(companySelected.id)\"\n                >\n                  <v-icon>mdi-office-building</v-icon>\n                  <span class=\"Company__box_name\">\n                    {{ companySelected.name }}\n                    <b\n                      class=\"font-weight-bold\"\n                      style=\"color: red;\"\n                      v-if=\"companySelected.isDelete\"\n                    >\n                      (Eliminado)\n                    </b>\n                  </span>\n                </div>\n              </template>\n            </v-list-item-title>\n          </v-list-item-content>\n          <v-list-item-action v-if=\"isLoadingRemove\">\n            <v-progress-circular\n              :size=\"20\"\n              color=\"secondary\"\n              indeterminate\n            ></v-progress-circular>\n          </v-list-item-action>\n          <v-list-item-action\n            v-if=\"\n              !isLoadingRemove &&\n                (canEditDeal || canEditDealOthers) &&\n                !item.isDelete\n            \"\n            class=\"Company__edit mt-4\"\n          >\n            <v-tooltip bottom>\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn\n                  x-small\n                  outlined\n                  @click.stop=\"disconnectCompany(companySelected.id)\"\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                  class=\"mr-1 mt-2\"\n                  color=\"grey\"\n                >\n                  <v-icon small color=\"grey\">mdi-connection</v-icon>\n                </v-btn>\n              </template>\n              <span>Desvincular</span>\n            </v-tooltip>\n            <v-menu\n              v-if=\"(canEditCompany || canEditCompanyOthers) && !item.isDelete\"\n              v-model=\"isEdit\"\n              :close-on-content-click=\"false\"\n              left\n            >\n              <template v-slot:activator=\"{ on: onMenu }\">\n                <v-tooltip\n                  bottom\n                  v-show=\"\n                    (canEditCompany || canEditCompanyOthers) && !item.isDelete\n                  \"\n                >\n                  <template v-slot:activator=\"{ on: onTooltip }\">\n                    <v-btn\n                      x-small\n                      color=\"secondary\"\n                      v-on=\"{ ...onMenu, ...onTooltip }\"\n                      @click=\"isEdit = true\"\n                      class=\"mt-2\"\n                    >\n                      <v-icon small color=\"white\">mdi-pencil</v-icon>\n                    </v-btn>\n                  </template>\n                  <span>Cambiar nombre</span>\n                </v-tooltip>\n              </template>\n              <v-card class=\"pa-4\" width=\"18em\">\n                <v-form\n                  ref=\"formCompany\"\n                  v-model=\"isValidateFormName\"\n                  lazy-validation\n                >\n                  <v-text-field\n                    v-model=\"companyName\"\n                    :rules=\"rules.general\"\n                    label=\"Nombre\"\n                    hide-details=\"auto\"\n                    maxlength=\"50\"\n                    dense\n                    outlined\n                  ></v-text-field>\n\n                  <div class=\"d-flex justify-center mt-1\">\n                    <v-btn\n                      style=\"width:48%\"\n                      class=\"mr-2\"\n                      small\n                      color=\"primary\"\n                      outlined\n                      :disables=\"isLoadingChangeName\"\n                      @click=\"cancelEdit\"\n                      tile\n                    >\n                      Cancelar\n                    </v-btn>\n                    <v-btn\n                      tile\n                      style=\"width:48%\"\n                      v-if=\"\n                        (canEditCompany || canEditCompanyOthers) &&\n                          !item.isDelete\n                      \"\n                      :loading=\"isLoadingChangeName\"\n                      small\n                      color=\"secondary\"\n                      @click=\"\n                        updateName({\n                          id: companySelected.id,\n                          name: companyName,\n                        })\n                      \"\n                    >\n                      Guardar\n                    </v-btn>\n                  </div>\n                </v-form>\n              </v-card>\n            </v-menu>\n          </v-list-item-action>\n        </v-list-item>\n      </v-card-text>\n    </v-card>\n    <BaseModalError :modalHandler=\"modalError\" @close=\"modalHandlerError\" />\n  </div>\n</template>\n\n<script>\nimport { subject } from '@casl/ability';\nimport ability from '@/services/ability';\nimport {\n  PERMISSIONS_DEALS,\n  PERMISSIONS_COMPANIES,\n} from '@/constants/permissions';\n// Mutations\nimport { UPDATE_COMPANY } from '@/graphql/mutations/companiesMutations';\n// Mixins\nimport { rulesMixin } from '@/mixins/rulesMixin';\n// Constants\nimport { GET_USER_LOGGED } from '@/graphql/local-state/queries';\nimport { UPDATE, UPDATE_OTHERS } from '@/constants/methods';\nimport { modalsAlertsMixin } from '@/mixins/alerts/modalsAlertsMixin';\nimport { dealsMixin } from '@/mixins/dealsMixin';\n\nexport default {\n  name: 'DealCompany',\n  components: {\n    FieldSelectCompanySimple: () =>\n      import('@/components/fields/FieldSelectCompanySimple.vue'),\n  },\n  mixins: [rulesMixin, modalsAlertsMixin, dealsMixin],\n  props: {\n    item: {\n      type: Object,\n      required: true,\n    },\n    itemId: {\n      type: String,\n      default: '',\n      required: true,\n    },\n    typeItem: {\n      type: String,\n      required: true,\n      default: 'DEAL',\n    },\n    ownerId: {\n      type: String,\n      default: '',\n    },\n    companySelected: {\n      type: Object,\n      default: () => {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      UPDATE,\n      UPDATE_OTHERS,\n      PERMISSIONS_DEALS,\n      PERMISSIONS_COMPANIES,\n      isEdit: false,\n      searchCompanies: {},\n      companyName: '',\n      isLoading: false,\n      isLoadingRemove: false,\n      isShowAddCompany: false,\n      isValidateFormName: true,\n      isLoadingChangeName: false,\n      companyNew: {\n        id: '',\n        name: '',\n      },\n      userCurrent: {},\n    };\n  },\n  // Reassign company name to other variable to show\n  created() {\n    this.companyName = this.companySelected?.name || '';\n  },\n  computed: {\n    canEditDeal() {\n      if (this.typeItem === 'DEAL') {\n        return ability.can(\n          UPDATE,\n          subject(PERMISSIONS_DEALS, { authorId: this.ownerId || '' }),\n        );\n      }\n      return false;\n    },\n    canEditDealOthers() {\n      if (!this.canEditDeal) {\n        return (\n          ability.can(UPDATE_OTHERS, PERMISSIONS_DEALS) &&\n          !ability.can(\n            UPDATE_OTHERS,\n            subject(PERMISSIONS_DEALS, {\n              authorId: this.ownerId || '',\n            }),\n          )\n        );\n      }\n      return ability.can(UPDATE_OTHERS, PERMISSIONS_DEALS);\n    },\n    canEditCompany() {\n      if (this.typeItem === 'DEAL') {\n        return ability.can(\n          UPDATE,\n          subject(PERMISSIONS_COMPANIES, {\n            authorId: this.companySelected?.owner?.id || '',\n          }),\n        );\n      }\n      return false;\n    },\n    canEditCompanyOthers() {\n      if (!this.canEditCompany) {\n        return (\n          ability.can(UPDATE_OTHERS, PERMISSIONS_COMPANIES) &&\n          !ability.can(\n            UPDATE_OTHERS,\n            subject(PERMISSIONS_COMPANIES, {\n              authorId: this.companySelected?.owner?.id || '',\n            }),\n          )\n        );\n      }\n      return ability.can(UPDATE_OTHERS, PERMISSIONS_COMPANIES);\n    },\n    disabledAddButton() {\n      if (this.companyNew.id || this.companyNew.name) return false;\n      return true;\n    },\n  },\n  watch: {\n    // Reassign company name to other variable to show and update\n    companySelected() {\n      this.companyName = this.companySelected?.name || '';\n    },\n    isLoadingUpdateDeal(value) {\n      if (!value) {\n        this.company = '';\n        if (this.isShowAddCompany) {\n          this.$refs.formCompany.reset();\n        }\n        this.isShowAddCompany = false;\n        this.isLoadingRemove = false;\n        this.companyNew = {\n          id: '',\n          name: '',\n        };\n      }\n    },\n  },\n  methods: {\n    updateCompany(index, value) {\n      this.companyNew = value;\n    },\n    deleteCompany() {\n      this.companyNew = {\n        id: '',\n        name: '',\n      };\n    },\n    // Reedirect to contact profile by id\n    goCompany(id) {\n      this.$router.push({ name: 'company', params: { id } }, () => {});\n    },\n    // Cancel add company and reset\n    cancel() {\n      // Reset company new\n      this.company = '';\n      this.companyNew = {\n        id: '',\n        name: '',\n      };\n      // Hide add company\n      this.isShowAddCompany = false;\n      // Reset validate\n      this.isValidate = false;\n    },\n    // Mutation to add company\n    addCompany() {\n      if (this.canEditDeal || this.canEditDealOthers) {\n        // Is empty?\n        if (Object.keys(this.companyNew).length !== 0) {\n          // Active loading\n          this.isLoading = true;\n          // Mutation to update company's deal\n          this.updateDeal({ id: this.itemId, company: this.companyNew });\n        }\n      }\n    },\n    disconnectCompany() {\n      if (this.canEditDeal || this.canEditDealOthers) {\n        this.isLoadingRemove = true;\n        this.updateDeal({ id: this.itemId, company: { id: '' } });\n      }\n    },\n    // Update name's contact\n    updateName({ id, name }) {\n      if (this.canEditCompany) {\n        // Validate input name\n        this.$refs.formCompany.validate();\n        // Is valid?\n        if (this.isValidateFormName) {\n          // Active loading\n          this.isLoadingChangeName = true;\n          // Mutation to update name's contact\n          this.$apollo\n            .mutate({\n              // Query\n              mutation: UPDATE_COMPANY,\n              // Parameters\n              variables: {\n                companyInput: {\n                  id,\n                  name,\n                },\n              },\n            })\n            .then(({ data: { updateCompany } }) => {\n              this.$emit('updateDealCompany', updateCompany);\n              // Desactive loading\n              this.isLoadingChangeName = false;\n              // Close specific field by id\n              this.isEdit = false;\n              // Reset validation\n              this.isValidateFormName = false;\n            })\n            .catch(() => {\n              // Desactive loading\n              this.isLoadingChangeName = false;\n              // Reset validation\n              this.isValidateFormName = false;\n              const error =\n                'No se pudo actualizar el nombre de la empresa, intente de nuevo o contacte a soporte';\n              this.modalHandlerError({ isOpen: true, error });\n            });\n        }\n      }\n    },\n    text(value) {\n      return `${value.name}`;\n    },\n    cancelEdit() {\n      // Reset value to the before\n      this.companyName = this.companySelected.name;\n      this.isEdit = false;\n    },\n  },\n  apollo: {\n    userCurrent: {\n      query: GET_USER_LOGGED,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '{ .v-autocomplete .Company .company-name } from ../../../../scss/components/deal.company';\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DealCompany.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DealCompany.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DealCompany.vue?vue&type=template&id=3e9a0da0&scoped=true&\"\nimport script from \"./DealCompany.vue?vue&type=script&lang=js&\"\nexport * from \"./DealCompany.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DealCompany.vue?vue&type=style&index=0&id=3e9a0da0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e9a0da0\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VDivider,VForm,VIcon,VListItem,VListItemAction,VListItemContent,VListItemTitle,VMenu,VProgressCircular,VSpacer,VTextField,VTooltip})\n"],"sourceRoot":""}