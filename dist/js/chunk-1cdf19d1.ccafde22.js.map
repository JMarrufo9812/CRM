{"version":3,"sources":["webpack:///./src/mixins/lostReasonMixin.js","webpack:///./src/components/settingsEnterprise/LostReasonsSettings.vue?3785","webpack:///./src/graphql/mutations/dealsMutations.js","webpack:///./src/graphql/querys/dealsQuery.js","webpack:///./node_modules/vuetify/lib/components/VDataTable/VEditDialog.js","webpack:///./src/components/settingsEnterprise/LostReasonsSettings.vue?f97d","webpack:///src/components/settingsEnterprise/LostReasonsSettings.vue","webpack:///./src/components/settingsEnterprise/LostReasonsSettings.vue?9543","webpack:///./src/components/settingsEnterprise/LostReasonsSettings.vue?4492"],"names":["lostReasonMixin","data","isLoadingGet","isErrorGetReasons","infoError","icon","title","message","watch","lostReasons","this","apollo","query","GET_LOST_REASONS","fetchPolicy","variables","filters","orderBy","error","CREATE_DEAL","gql","UPDATE_DEAL","DELETE_DEAL","TRASH_DEALS","RESTORE_DEALS","CHANGE_DEAL_STAGE","CHANGE_DEAL_PIPELINE","CREATE_LOST_REASON","DELETE_LOST_REASON","UPDATE_LOST_REASON","UPDATE_OWNER_DEALS","GET_DEALS","GET_SEARCH_DEALS","GET_DEAL","GET_DEAL_HISTORY","GET_DEALS_TO_ACTIVITY","extend","name","props","cancelText","default","large","Boolean","eager","persistent","saveText","transition","type","String","isActive","val","$emit","setTimeout","focus","methods","input","$refs","content","querySelector","fn","text","$createElement","color","light","on","click","class","genButton","cancel","save","returnValue","staticClass","keydown","e","keyCode","esc","enter","ref","$slots","h","themeClasses","contentClass","origin","right","value","closeOnClick","closeOnContentClick","dark","scopedSlots","activator","genContent","genActions","render","_vm","_h","_c","_self","attrs","_v","model","callback","$$v","newReason","expression","validateReason","isLoadingCreate","$event","createReason","_e","length","_l","reason","i","key","_s","stopPropagation","deleteReasonConfirmation","id","editReason","updateReason","trim","_u","proxy","modalDelete","modalHandlerDelete","deleteReason","staticRenderFns","mixins","components","BaseErrorComponent","computed","isOpen","isLoading","infoDelete","lostReasonId","$apollo","outData","info","component","VBtn","VCard","VDivider","VEditDialog","VIcon","VProgressLinear","VTextField"],"mappings":"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","file":"js/chunk-1cdf19d1.ccafde22.js","sourcesContent":["import { GET_LOST_REASONS } from '@/graphql/querys/dealsQuery';\n\nexport const lostReasonMixin = {\n  data() {\n    return {\n      isLoadingGet: true,\n      isErrorGetReasons: false,\n      infoError: {\n        icon: '',\n        title: '',\n        message: '',\n      },\n    };\n  },\n  watch: {\n    lostReasons(data) {\n      if (data) this.isLoadingGet = false;\n    },\n  },\n  apollo: {\n    lostReasons: {\n      query: GET_LOST_REASONS,\n      fetchPolicy: 'no-cache',\n      variables: {\n        filters: {\n          orderBy: 'desc',\n        },\n      },\n      error() {\n        this.isErrorGetReasons = true;\n        this.infoError = {\n          icon: 'mdi-alert-outline',\n          title: 'Error',\n          message:\n            'No se ha podido cargar las razones de p√©rdida, contacte con soporte',\n        };\n      },\n    },\n  },\n};\n","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./LostReasonsSettings.vue?vue&type=style&index=0&id=430b2324&lang=scss&scoped=true&\"","import gql from 'graphql-tag';\n\nexport const CREATE_DEAL = gql`\n  mutation CreateDeal($input: CreateDeal!) {\n    createDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      rottenTime\n      owner {\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      company {\n        id\n        name\n      }\n      contact {\n        id\n        name\n      }\n      stage {\n        id\n        name\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n`;\n\nexport const UPDATE_DEAL = gql`\n  mutation UpdateDeal($input: UpdateDeal!) {\n    updateDeal(dealInput: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      contact {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n    }\n  }\n`;\n\nexport const DELETE_DEAL = gql`\n  mutation deletedDeals($input: [DeleteDealInput!]!) {\n    deletedDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\nexport const TRASH_DEALS = gql`\n  mutation trashDeals($input: [DeleteDealInput!]!) {\n    trashDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\nexport const RESTORE_DEALS = gql`\n  mutation restoreDeals($input: [DeleteDealInput!]!) {\n    restoreDeals(deals: $input) {\n      id\n    }\n  }\n`;\n\n// se pide todo lo necesario para poder actualizar el deal entero y no se pierda ningun dato\nexport const CHANGE_DEAL_STAGE = gql`\n  mutation ChangeDealStage($input: ChangeStage!) {\n    changeDealStage(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      dateEntryIntoStage\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n        maxDays\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n`;\n\nexport const CHANGE_DEAL_PIPELINE = gql`\n  mutation changeDealPipeline($input: changePipelineInput!) {\n    changeDealPipeline(input: $input) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n      }\n      contact {\n        id\n        name\n        isDelete\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n`;\n\nexport const CREATE_LOST_REASON = gql`\n  mutation CreateLostReason($input: lostReasonCreateInput!) {\n    createLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const DELETE_LOST_REASON = gql`\n  mutation DeleteLostReason($lostReasonId: ID!) {\n    deleteLostReason(lostReasonId: $lostReasonId) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const UPDATE_LOST_REASON = gql`\n  mutation UpdateLostReason($input: lostReasonUpdateInput!) {\n    updateLostReason(lostReasonInput: $input) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const UPDATE_OWNER_DEALS = gql`\n  mutation assignDeals($dealListAssign: DealListAssign!) {\n    assignDeals(dealListAssign: $dealListAssign)\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const GET_DEALS = gql`\n  query GetDeals($filters: FilterDeals, $importId: ID) {\n    deals(filters: $filters, importId: $importId) {\n      count\n      informationBar {\n        openDeals\n        wonDealsSum\n        predictionSales\n        predictionIncome\n      }\n      list {\n        id\n        title\n        value\n        status\n        expectedCloseDate\n        dateStatus\n        activity\n        files\n        customForms\n        rottenTime\n        changeTime\n        createdAt\n        updatedAt\n        wonTime\n        lostTime\n        customForms\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        dealCounts {\n          files\n          notes\n          emailMessages\n          activities {\n            total\n            done\n            undone\n          }\n        }\n        lostDeal {\n          id\n          lostReason {\n            id\n            reason\n          }\n        }\n        exchangeCurrency {\n          id\n          name\n          code\n          icon\n        }\n        company {\n          id\n          name\n        }\n        contact {\n          id\n          name\n        }\n        owner {\n          id\n          user {\n            name\n            lastName\n          }\n        }\n        stage {\n          id\n          name\n          order\n        }\n        pipeline {\n          id\n          name\n          stages {\n            id\n            name\n            order\n          }\n        }\n        tags {\n          id\n          name\n          color\n          order\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_SEARCH_DEALS = gql`\n  query GetDeals($filters: FilterDeals) {\n    deals(filters: $filters) {\n      count\n      list {\n        id\n        title\n        stage {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        contact {\n          id\n          name\n        }\n        pipeline {\n          id\n          name\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_DEAL = gql`\n  query getDeal($dealId: ID!) {\n    deal(dealId: $dealId) {\n      id\n      title\n      value\n      status\n      expectedCloseDate\n      dateStatus\n      activity\n      files\n      customForms\n      rottenTime\n      lostDeal {\n        id\n        lostReason {\n          id\n          reason\n        }\n      }\n      exchangeCurrency {\n        id\n        name\n        code\n        icon\n      }\n      company {\n        id\n        name\n        isDelete\n        owner {\n          id\n        }\n      }\n      contact {\n        id\n        name\n        email\n        isDelete\n        owner {\n          id\n        }\n      }\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n          config {\n            profileUrl\n          }\n        }\n      }\n      stage {\n        id\n        name\n        order\n      }\n      pipeline {\n        id\n        name\n        stages {\n          id\n          name\n          order\n          daysInStage\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      isDelete\n    }\n  }\n`;\n\nexport const GET_DEAL_HISTORY = gql`\n  query getDealHistory($dealId: ID!) {\n    dealHistory: deal(dealId: $dealId) {\n      id\n      title\n      files\n      import {\n        id\n      }\n      activityStream {\n        id\n        flow\n        customs {\n          id\n          label\n        }\n        users {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        companies {\n          id\n          name\n        }\n        contacts {\n          id\n          name\n        }\n        stages {\n          id\n          name\n        }\n        pipelines {\n          id\n          name\n        }\n      }\n      notes {\n        id\n        content\n        type\n        userTags {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdBy {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        createdAt\n        comments {\n          id\n          comment\n          userTags {\n            id\n          }\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdAt\n        }\n      }\n      activities {\n        id\n        title\n        status\n        start\n        end\n        location\n        description\n        deal {\n          id\n          title\n        }\n        contacts {\n          id\n          name\n        }\n        companies {\n          id\n          name\n        }\n        type {\n          id\n          name\n          color\n        }\n        owner {\n          id\n          user {\n            id\n            name\n            lastName\n          }\n        }\n        notes {\n          id\n          content\n          type\n          userTags {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdBy {\n            id\n            user {\n              id\n              name\n              lastName\n            }\n          }\n          createdAt\n          comments {\n            id\n            comment\n            userTags {\n              id\n            }\n            createdBy {\n              id\n              user {\n                id\n                name\n                lastName\n              }\n            }\n            createdAt\n          }\n        }\n        completedDate\n        createdAt\n        isAllDay\n        guests\n      }\n    }\n  }\n`;\n\nexport const GET_LOST_REASONS = gql`\n  query readLostReasons($filters: Filter) {\n    lostReasons(filters: $filters) {\n      id\n      reason\n    }\n  }\n`;\n\nexport const GET_DEALS_TO_ACTIVITY = gql`\n  query getDealsToActivity($filters: FilterDeals) {\n    deals(filters: $filters) {\n      count\n      list {\n        id\n        title\n        pipeline {\n          id\n          name\n        }\n        stage {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n","// Styles\nimport \"../../../src/components/VDataTable/VEditDialog.sass\"; // Mixins\n\nimport Returnable from '../../mixins/returnable';\nimport Themeable from '../../mixins/themeable'; // Utils\n\nimport { keyCodes } from '../../util/helpers'; // Component\n\nimport VBtn from '../VBtn';\nimport VMenu from '../VMenu';\nimport mixins from '../../util/mixins';\n/* @vue/component */\n\nexport default mixins(Returnable, Themeable).extend({\n  name: 'v-edit-dialog',\n  props: {\n    cancelText: {\n      default: 'Cancel'\n    },\n    large: Boolean,\n    eager: Boolean,\n    persistent: Boolean,\n    saveText: {\n      default: 'Save'\n    },\n    transition: {\n      type: String,\n      default: 'slide-x-reverse-transition'\n    }\n  },\n\n  data() {\n    return {\n      isActive: false\n    };\n  },\n\n  watch: {\n    isActive(val) {\n      if (val) {\n        this.$emit('open');\n        setTimeout(this.focus, 50); // Give DOM time to paint\n      } else {\n        this.$emit('close');\n      }\n    }\n\n  },\n  methods: {\n    cancel() {\n      this.isActive = false;\n      this.$emit('cancel');\n    },\n\n    focus() {\n      const input = this.$refs.content.querySelector('input');\n      input && input.focus();\n    },\n\n    genButton(fn, text) {\n      return this.$createElement(VBtn, {\n        props: {\n          text: true,\n          color: 'primary',\n          light: true\n        },\n        on: {\n          click: fn\n        }\n      }, text);\n    },\n\n    genActions() {\n      return this.$createElement('div', {\n        class: 'v-small-dialog__actions'\n      }, [this.genButton(this.cancel, this.cancelText), this.genButton(() => {\n        this.save(this.returnValue);\n        this.$emit('save');\n      }, this.saveText)]);\n    },\n\n    genContent() {\n      return this.$createElement('div', {\n        staticClass: 'v-small-dialog__content',\n        on: {\n          keydown: e => {\n            e.keyCode === keyCodes.esc && this.cancel();\n\n            if (e.keyCode === keyCodes.enter) {\n              this.save(this.returnValue);\n              this.$emit('save');\n            }\n          }\n        },\n        ref: 'content'\n      }, [this.$slots.input]);\n    }\n\n  },\n\n  render(h) {\n    return h(VMenu, {\n      staticClass: 'v-small-dialog',\n      class: this.themeClasses,\n      props: {\n        contentClass: 'v-small-dialog__menu-content',\n        transition: this.transition,\n        origin: 'top right',\n        right: true,\n        value: this.isActive,\n        closeOnClick: !this.persistent,\n        closeOnContentClick: false,\n        eager: this.eager,\n        light: this.light,\n        dark: this.dark\n      },\n      on: {\n        input: val => this.isActive = val\n      },\n      scopedSlots: {\n        activator: ({\n          on\n        }) => {\n          return h('div', {\n            staticClass: 'v-small-dialog__activator',\n            on\n          }, [h('span', {\n            staticClass: 'v-small-dialog__activator__content'\n          }, this.$slots.default)]);\n        }\n      }\n    }, [this.genContent(), this.large ? this.genActions() : null]);\n  }\n\n});\n//# sourceMappingURL=VEditDialog.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex\"},[_c('v-card',{staticClass:\"mr-2 add-lost-reason-box\",attrs:{\"tile\":\"\",\"width\":\"19em\",\"height\":\"28em\"}},[_c('p',{staticClass:\"title-lost-reason-settings text-center\"},[_vm._v(\" Configuraciones razones de p√©rdida para tratos \")]),_c('div',{staticClass:\"d-flex flex-column px-12 pt-6\"},[_c('v-text-field',{attrs:{\"maxlength\":\"25\",\"counter\":\"\",\"dense\":\"\",\"outlined\":\"\",\"label\":\"Agregar raz√≥n\"},model:{value:(_vm.newReason),callback:function ($$v) {_vm.newReason=$$v},expression:\"newReason\"}}),_c('v-btn',{attrs:{\"disabled\":_vm.validateReason,\"loading\":_vm.isLoadingCreate,\"color\":\"secondary\"},on:{\"click\":function($event){return _vm.createReason(_vm.newReason)}}},[_vm._v(\" Agregar \")])],1)]),_c('v-card',{attrs:{\"tile\":\"\",\"width\":\"15.5em\",\"height\":\"28em\"}},[(_vm.isLoadingGet)?_c('v-progress-linear',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}}):_vm._e(),(_vm.isErrorGetReasons)?_c('BaseErrorComponent',{attrs:{\"info\":_vm.infoError}}):_vm._e(),(_vm.lostReasons.length === 0 && !_vm.isErrorGetReasons && !_vm.isLoadingGet)?_c('p',{staticClass:\"text-center px-10 pt-12\"},[_vm._v(\" A√∫n no hay razones de p√©rdida creadas \")]):_vm._e(),(_vm.lostReasons.length > 0 && !_vm.isErrorGetReasons)?_c('div',{staticClass:\"d-flex justify-center py-1\"},[_c('span',{staticClass:\"title-lost-reasons\"},[_vm._v(\"Razones creadas\")])]):_vm._e(),(_vm.lostReasons.length > 0 && !_vm.isErrorGetReasons)?_c('v-divider'):_vm._e(),(_vm.lostReasons.length > 0 && !_vm.isErrorGetReasons)?_c('v-card',{staticClass:\"scroll\",attrs:{\"height\":\"90%\",\"flat\":\"\"}},_vm._l((_vm.lostReasons),function(reason,i){return _c('v-card',{key:i,staticClass:\"d-flex justify-space-between ma-4 py-2\"},[_c('p',{staticClass:\"mb-0 mx-2 reason-text\"},[_vm._v(\" \"+_vm._s(reason.reason)+\" \")]),_c('div',{staticClass:\"d-flex align-center\"},[_c('v-btn',{staticClass:\"mt-1 mr-2\",attrs:{\"color\":\"grey\",\"outlined\":\"\",\"x-small\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteReasonConfirmation(reason.id)}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-delete\")])],1),_c('v-edit-dialog',{attrs:{\"cancel-text\":\"Cancelar\",\"save-text\":\"Guardar\",\"large\":\"\"},on:{\"open\":function($event){_vm.editReason = reason.reason},\"cancel\":function($event){_vm.editReason = ''},\"save\":function($event){_vm.updateReason({\n                id: reason.id,\n                reason: _vm.editReason.trim(),\n              })}},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('v-text-field',{attrs:{\"value\":reason.reason,\"maxlength\":\"25\",\"label\":\"Editar\",\"single-line\":\"\",\"counter\":\"\"},model:{value:(_vm.editReason),callback:function ($$v) {_vm.editReason=$$v},expression:\"editReason\"}})]},proxy:true}],null,true)},[_c('v-btn',{staticClass:\"mr-2\",attrs:{\"color\":\"secondary\",\"x-small\":\"\"}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\" mdi-pencil \")])],1)],1)],1)])}),1):_vm._e()],1),_c('BaseModalDelete',{attrs:{\"modalHandler\":_vm.modalDelete},on:{\"cancel\":_vm.modalHandlerDelete,\"confirm\":_vm.deleteReason}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"d-flex\">\n    <v-card tile class=\"mr-2 add-lost-reason-box\" width=\"19em\" height=\"28em\">\n      <p class=\"title-lost-reason-settings text-center\">\n        Configuraciones razones de p√©rdida para tratos\n      </p>\n      <div class=\"d-flex flex-column px-12 pt-6\">\n        <v-text-field\n          v-model=\"newReason\"\n          maxlength=\"25\"\n          counter\n          dense\n          outlined\n          label=\"Agregar raz√≥n\"\n        ></v-text-field>\n        <v-btn\n          :disabled=\"validateReason\"\n          :loading=\"isLoadingCreate\"\n          @click=\"createReason(newReason)\"\n          color=\"secondary\"\n        >\n          Agregar\n        </v-btn>\n      </div>\n    </v-card>\n    <v-card tile width=\"15.5em\" height=\"28em\">\n      <v-progress-linear\n        v-if=\"isLoadingGet\"\n        indeterminate\n        color=\"primary\"\n      ></v-progress-linear>\n      <BaseErrorComponent v-if=\"isErrorGetReasons\" :info=\"infoError\" />\n      <p\n        v-if=\"lostReasons.length === 0 && !isErrorGetReasons && !isLoadingGet\"\n        class=\"text-center px-10 pt-12\"\n      >\n        A√∫n no hay razones de p√©rdida creadas\n      </p>\n      <div\n        class=\"d-flex justify-center py-1\"\n        v-if=\"lostReasons.length > 0 && !isErrorGetReasons\"\n      >\n        <span class=\"title-lost-reasons\">Razones creadas</span>\n      </div>\n      <v-divider\n        v-if=\"lostReasons.length > 0 && !isErrorGetReasons\"\n      ></v-divider>\n      <v-card\n        v-if=\"lostReasons.length > 0 && !isErrorGetReasons\"\n        class=\"scroll\"\n        height=\"90%\"\n        flat\n      >\n        <v-card\n          class=\"d-flex justify-space-between ma-4 py-2\"\n          v-for=\"(reason, i) in lostReasons\"\n          :key=\"i\"\n        >\n          <p class=\"mb-0 mx-2 reason-text\">\n            {{ reason.reason }}\n          </p>\n          <div class=\"d-flex align-center\">\n            <v-btn\n              class=\"mt-1 mr-2\"\n              color=\"grey\"\n              outlined\n              @click.stop=\"deleteReasonConfirmation(reason.id)\"\n              x-small\n            >\n              <v-icon small>mdi-delete</v-icon>\n            </v-btn>\n            <v-edit-dialog\n              cancel-text=\"Cancelar\"\n              save-text=\"Guardar\"\n              large\n              @open=\"editReason = reason.reason\"\n              @cancel=\"editReason = ''\"\n              @save=\"\n                updateReason({\n                  id: reason.id,\n                  reason: editReason.trim(),\n                })\n              \"\n            >\n              <v-btn class=\"mr-2\" color=\"secondary\" x-small>\n                <v-icon small>\n                  mdi-pencil\n                </v-icon>\n              </v-btn>\n              <template v-slot:input>\n                <v-text-field\n                  v-model=\"editReason\"\n                  :value=\"reason.reason\"\n                  maxlength=\"25\"\n                  label=\"Editar\"\n                  single-line\n                  counter\n                ></v-text-field>\n              </template>\n            </v-edit-dialog>\n          </div>\n        </v-card>\n      </v-card>\n    </v-card>\n    <BaseModalDelete\n      :modalHandler=\"modalDelete\"\n      @cancel=\"modalHandlerDelete\"\n      @confirm=\"deleteReason\"\n    />\n  </div>\n</template>\n\n<script>\nimport { lostReasonMixin } from '@/mixins/lostReasonMixin';\nimport { modalsAlertsMixin } from '@/mixins/alerts/modalsAlertsMixin';\nimport {\n  DELETE_LOST_REASON,\n  UPDATE_LOST_REASON,\n  CREATE_LOST_REASON,\n} from '@/graphql/mutations/dealsMutations';\n\nexport default {\n  mixins: [lostReasonMixin, modalsAlertsMixin],\n  components: {\n    BaseErrorComponent: () => import('@/components/ui/BaseErrorComponent.vue'),\n  },\n  data() {\n    return {\n      lostReasons: [],\n      newReason: '',\n      editReason: '',\n      isLoadingCreate: false,\n    };\n  },\n  computed: {\n    validateReason() {\n      if (\n        this.newReason !== null &&\n        this.newReason !== undefined &&\n        this.newReason !== '' &&\n        this.newReason.trim().length >= 1\n      ) {\n        return false;\n      }\n      return true;\n    },\n  },\n  methods: {\n    deleteReasonConfirmation(lostReasonId) {\n      this.modalHandlerDelete({\n        isOpen: true,\n        isLoading: false,\n        message: { nameItem: 'La raz√≥n seleccionada', text: 'ser√° eliminada' },\n        infoDelete: {\n          lostReasonId,\n        },\n      });\n    },\n    deleteReason({ isOpen, isLoading, message, infoDelete }) {\n      this.modalHandlerDelete({\n        isOpen,\n        isLoading,\n        message,\n        infoDelete,\n      });\n      this.$apollo\n        .mutate({\n          mutation: DELETE_LOST_REASON,\n          variables: {\n            lostReasonId: infoDelete.lostReasonId,\n          },\n        })\n        .then(() => {\n          this.$apollo.queries.lostReasons.refetch();\n          this.modalHandlerDelete({\n            isOpen: false,\n            isLoading,\n            message,\n            infoDelete,\n          });\n          this.outData('SUCCESS', {\n            isOpen: true,\n            color: 'success',\n            text: 'La raz√≥n fue eliminada',\n          });\n        })\n        .catch(() => {\n          const error =\n            'No se pudo eliminar la raz√≥n de p√©rdida intente de nuevo o contacte a soporte';\n          this.outData('ERROR', {\n            isOpen: true,\n            error,\n          });\n        });\n    },\n    updateReason(reason) {\n      if (reason.reason.trim().length > 0) {\n        this.$apollo\n          .mutate({\n            mutation: UPDATE_LOST_REASON,\n            variables: {\n              input: reason,\n            },\n          })\n          .then(() => {\n            this.$apollo.queries.lostReasons.refetch();\n            this.outData('SUCCESS', {\n              isOpen: true,\n              color: 'success',\n              text: 'La raz√≥n fue actualizada',\n            });\n          })\n          .catch(() => {\n            const error =\n              'No se pudo actualizar la raz√≥n de p√©rdida, intente de nuevo o contacte a soporte';\n            this.outData('ERROR', {\n              isOpen: true,\n              error,\n            });\n          });\n      } else {\n        const error = 'Agrega m√≠nimo una letra o un n√∫mero';\n        this.outData('ERROR', {\n          isOpen: true,\n          error,\n        });\n      }\n    },\n    outData(type, info) {\n      if (type === 'SUCCESS') this.$emit('success', info);\n      if (type === 'ERROR') this.$emit('error', info);\n    },\n    createReason(reason) {\n      this.isLoadingCreate = true;\n      this.$apollo\n        .mutate({\n          mutation: CREATE_LOST_REASON,\n          variables: {\n            input: { reason },\n          },\n        })\n        .then(() => {\n          this.$apollo.queries.lostReasons.refetch();\n          this.isLoadingCreate = false;\n          this.newReason = '';\n        })\n        .catch(() => {\n          this.isLoadingCreate = false;\n          const error =\n            'No se pudo crear la raz√≥n de p√©rdida, intente de nuevo o contacte a soporte';\n          this.outData('ERROR', {\n            isOpen: true,\n            error,\n          });\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '{ .title-lost-reason-settings, .title-lost-reasons, .reason-text, .add-lost-reason-box .field .scroll .v-skeleton-loader__image .item .icon-btn } from ../../../../scss/components/lost.reasons.settings';\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./LostReasonsSettings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./LostReasonsSettings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LostReasonsSettings.vue?vue&type=template&id=430b2324&scoped=true&\"\nimport script from \"./LostReasonsSettings.vue?vue&type=script&lang=js&\"\nexport * from \"./LostReasonsSettings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LostReasonsSettings.vue?vue&type=style&index=0&id=430b2324&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"430b2324\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VEditDialog } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VDivider,VEditDialog,VIcon,VProgressLinear,VTextField})\n"],"sourceRoot":""}