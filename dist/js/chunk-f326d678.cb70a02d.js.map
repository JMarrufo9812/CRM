{"version":3,"sources":["webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./src/graphql/mutations/companiesMutations.js","webpack:///./src/graphql/mutations/contactsMutations.js","webpack:///./src/mixins/contactsMixin.js","webpack:///./src/components/profile/ListCompanies.vue?091f","webpack:///src/components/profile/ListCompanies.vue","webpack:///./src/components/profile/ListCompanies.vue?57a7","webpack:///./src/components/profile/ListCompanies.vue?f850","webpack:///./node_modules/core-js/modules/es.string.search.js","webpack:///./src/components/profile/ListCompanies.vue?ea8a"],"names":["module","exports","Object","is","x","y","CREATE_COMPANY","gql","DELETE_COMPANIES","TRASH_COMPANIES","RESTORE_COMPANIES","UPDATE_COMPANY","FUSE_COMPANIES","UPDATE_OWNER_COMPANIES","CREATE_CONTACT","UPDATE_CONTACT","DELETE_CONTACTS","TRASH_CONTACTS","RESTORE_CONTACTS","FUSE_CONTACTS","UPDATE_OWNER_CONTACTS","contactsMixin","data","isLoadingUpdateContact","methods","updateContact","id","name","email","birthday","phones","isClient","socialMedias","customForm","company","owner","tags","deal","this","contactInput","$apollo","mutate","mutation","variables","then","$emit","catch","error","modalHandlerError","isOpen","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","scopedSlots","_u","key","fn","ref","on","_g","directives","rawName","value","canEditContact","canEditContactOthers","item","isDelete","expression","$event","isShowAddCompany","model","callback","$$v","class","isDense","updateCompany","deleteCompany","staticStyle","cancel","_e","isLoading","disabledAddButton","addCompany","companiesSelected","length","_l","index","goCompany","_s","_b","isLoadingRemove","stopPropagation","disconnectCompany","onMenu","onTooltip","canEditCompany","canEditCompanyOthers","edit","assign","$set","refInFor","isValidateFormName","rules","general","cancelEdit","isLoadingChangeName","updateName","idx","modalError","staticRenderFns","components","FieldSelectCompanySimple","mixins","rulesMixin","props","type","required","itemId","String","default","typeItem","ownerId","Array","UPDATE","UPDATE_OTHERS","PERMISSIONS_CONTACTS","PERMISSIONS_COMPANIES","search","companies","listCompanies","isNewCompany","companyNew","companyRules","userCurrent","created","formatListCompanies","watch","handler","list","deep","$refs","formCompany","reset","computed","ability","menuProps","map","$router","push","formatCompanies","keys","updateCompanies","splice","getIndexField","findIndex","text","valueBefore","apollo","query","component","VBtn","VCard","VCardText","VCardTitle","VDivider","VForm","VIcon","VListItem","VListItemAction","VListItemContent","VList","VListItemTitle","VMenu","VSpacer","VTextField","VTooltip","fixRegExpWellKnownSymbolLogic","anObject","requireObjectCoercible","sameValue","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","O","searcher","undefined","call","RegExp","string","res","done","rx","S","previousLastIndex","lastIndex","result"],"mappings":"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","file":"js/chunk-f326d678.cb70a02d.js","sourcesContent":["// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","import gql from 'graphql-tag';\n\nexport const CREATE_COMPANY = gql`\n  mutation createCompany($input: companyCreateInput!) {\n    createCompany(companyInput: $input) {\n      id\n      name\n      address\n      website\n      phones\n      socialMedias\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      contacts {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const DELETE_COMPANIES = gql`\n  mutation deletedCompanies($input: [DeleteCompanyInput!]!) {\n    deletedCompanies(companies: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const TRASH_COMPANIES = gql`\n  mutation trashCompanies($input: [DeleteCompanyInput!]!) {\n    trashCompanies(companies: $input) {\n      id\n    }\n  }\n`;\n\nexport const RESTORE_COMPANIES = gql`\n  mutation restoreCompanies($input: [DeleteCompanyInput!]!) {\n    restoreCompanies(companies: $input) {\n      id\n    }\n  }\n`;\n\nexport const UPDATE_COMPANY = gql`\n  mutation updateCompany($companyInput: companyUpdateInput!) {\n    updateCompany(companyInput: $companyInput) {\n      id\n      name\n      address\n      website\n      phones\n      customForms\n      socialMedias\n      tags {\n        id\n        name\n        color\n        order\n      }\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      contacts {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const FUSE_COMPANIES = gql`\n  mutation FuseCompanies($input: CompaniesToFuse!) {\n    fuseCompanies(fuse: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const UPDATE_OWNER_COMPANIES = gql`\n  mutation assignCompanies($companyListAssign: CompanyListAssign!) {\n    assignCompanies(companyListAssign: $companyListAssign)\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const CREATE_CONTACT = gql`\n  mutation CreateContact($input: contactCreateInput!) {\n    createContact(contactInput: $input) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      owner {\n        id\n        user {\n          id\n          name\n          lastName\n        }\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n      }\n      isClient\n    }\n  }\n`;\n\nexport const UPDATE_CONTACT = gql`\n  mutation updateContact($contactInput: contactUpdateInput) {\n    updateContact(contactInput: $contactInput) {\n      id\n      name\n      email\n      phones\n      isClient\n      socialMedias\n      birthday\n      customForms\n      owner {\n        id\n        user {\n          id\n          name\n        }\n      }\n      enterprise {\n        id\n        name\n      }\n      tags {\n        id\n        name\n        color\n        order\n      }\n      companies {\n        id\n        name\n        owner {\n          id\n        }\n      }\n      deals {\n        id\n        title\n        value\n        status\n        contact {\n          id\n          name\n        }\n        company {\n          id\n          name\n        }\n        stage {\n          id\n        }\n        pipeline {\n          id\n          stages {\n            id\n          }\n        }\n        owner {\n          id\n        }\n      }\n      createdAt\n    }\n  }\n`;\n\nexport const DELETE_CONTACTS = gql`\n  mutation deletedContacts($input: [DeleteContactInput!]!) {\n    deletedContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const TRASH_CONTACTS = gql`\n  mutation trashContacts($input: [DeleteContactInput!]!) {\n    trashContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const RESTORE_CONTACTS = gql`\n  mutation restoreContacts($input: [DeleteContactInput!]!) {\n    restoreContacts(contacts: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const FUSE_CONTACTS = gql`\n  mutation FuseContacts($input: ContactsToFuse!) {\n    fuseContacts(fuse: $input) {\n      id\n      name\n    }\n  }\n`;\n\nexport const UPDATE_OWNER_CONTACTS = gql`\n  mutation assignContacts($contactListAssign: ContactListAssign!) {\n    assignContacts(contactListAssign: $contactListAssign)\n  }\n`;\n","import { UPDATE_CONTACT } from '@/graphql/mutations/contactsMutations';\n// import { GET_CONTACT } from '@/graphql/querys/contactsQuery';\n\nexport const contactsMixin = {\n  data() {\n    return {\n      isLoadingUpdateContact: false,\n    };\n  },\n  methods: {\n    updateContact({\n      id,\n      name,\n      email,\n      birthday,\n      phones,\n      isClient,\n      socialMedias,\n      customForm,\n      company,\n      owner,\n      tags,\n      deal,\n    }) {\n      this.isLoadingUpdateContact = true;\n      const contactInput = {};\n      contactInput.id = id;\n      if (name) {\n        contactInput.name = name;\n      }\n      if (email) {\n        contactInput.email = email;\n      }\n      if (birthday) {\n        contactInput.birthday = birthday;\n      }\n      if (phones) {\n        contactInput.phones = phones;\n      }\n      if (isClient === true || isClient === false) {\n        contactInput.isClient = isClient;\n      }\n      if (socialMedias) {\n        contactInput.socialMedias = socialMedias;\n      }\n      if (customForm) {\n        contactInput.customForm = customForm;\n      }\n      if (company) {\n        contactInput.company = company;\n      }\n      if (owner) {\n        contactInput.owner = owner;\n      }\n      if (tags) {\n        contactInput.tags = tags;\n      }\n      if (deal) {\n        contactInput.deal = deal;\n      }\n      this.$apollo\n        .mutate({\n          // Query\n          mutation: UPDATE_CONTACT,\n          // Parameters\n          variables: {\n            contactInput,\n          },\n        })\n        .then(({ data: { updateContact } }) => {\n          this.$emit('updateItem', updateContact);\n          this.$emit('updateHistory');\n          // Close edit field\n          this.isLoadingUpdateContact = false;\n        })\n        .catch(() => {\n          this.isLoadingUpdateContact = false;\n          // this.isLoading = false;\n          // Error\n          const error =\n            'No se pudo actualizar el contacto, intente de nuevo o contacte a soporte';\n          this.modalHandlerError({ isOpen: true, error });\n        });\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"tile\":\"\",\"flat\":\"\"}},[_c('v-divider'),_c('v-card-title',{staticClass:\"companies-title py-1\"},[_c('v-icon',{staticClass:\"mr-4\"},[_vm._v(\"mdi-domain\")]),_vm._v(\" Empresas \"),_c('v-spacer'),_c('v-menu',{staticClass:\"mt-2\",attrs:{\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({directives:[{name:\"show\",rawName:\"v-show\",value:((_vm.canEditContact || _vm.canEditContactOthers) && !_vm.item.isDelete),expression:\"(canEditContact || canEditContactOthers) && !item.isDelete\"}],attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.isShowAddCompany = !_vm.isShowAddCompany}}},on),[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)]}}]),model:{value:(_vm.isShowAddCompany),callback:function ($$v) {_vm.isShowAddCompany=$$v},expression:\"isShowAddCompany\"}},[_c('v-card',{staticClass:\"pa-4\",attrs:{\"width\":\"18em\"}},[_c('v-form',{ref:\"formCompany\"},[_c('FieldSelectCompanySimple',{attrs:{\"inputProps\":{ class: 'no-icon full-width', isDense: true },\"resetHandler\":_vm.isShowAddCompany},on:{\"outData\":_vm.updateCompany,\"deleteData\":_vm.deleteCompany}})],1),_c('div',{staticClass:\"d-flex justify-center pt-2 ml-2\"},[_c('v-btn',{staticClass:\"mr-2\",staticStyle:{\"width\":\"45%\"},attrs:{\"outlined\":\"\",\"color\":\"primary\",\"small\":\"\"},on:{\"click\":_vm.cancel}},[_vm._v(\" Cancelar \")]),((_vm.canEditContact || _vm.canEditContactOthers) && !_vm.item.isDelete)?_c('v-btn',{staticStyle:{\"width\":\"45%\"},attrs:{\"color\":\"secondary\",\"small\":\"\",\"loading\":_vm.isLoading,\"disabled\":_vm.disabledAddButton},on:{\"click\":_vm.addCompany}},[_vm._v(\" Guardar \")]):_vm._e()],1)],1)],1)],1),_c('v-divider'),_c('v-card-text',{staticClass:\"pa-0\"},[_c('v-card',{staticClass:\"companies-container\",attrs:{\"flat\":\"\",\"max-height\":\"20em\"}},[(_vm.companiesSelected.length === 0)?_c('div',{staticClass:\"pa-10\"},[_c('span',[_vm._v(\" No tiene empresas \")])]):_vm._l((_vm.listCompanies),function(company,index){return [_c('v-list-item',{key:company.id,staticClass:\"Company\",attrs:{\"outlined\":\"\"}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"Company__title\"},[[_c('div',{staticClass:\"Company__box\",on:{\"click\":function($event){return _vm.goCompany(company.id)}}},[_c('v-icon',{staticClass:\"pb-1\"},[_vm._v(\"mdi-domain\")]),_c('span',{staticClass:\"Company__box_name\"},[_vm._v(\" \"+_vm._s(company.name)+\" \")])],1)]],2)],1),_c('v-list-item-action',{staticClass:\"Company__edit mt-4\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canEditContact || _vm.canEditContactOthers),expression:\"canEditContact || canEditContactOthers\"}],staticClass:\"mr-2\",attrs:{\"x-small\":\"\",\"loading\":_vm.isLoadingRemove,\"color\":\"grey\",\"outlined\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.disconnectCompany(company.id)}}},'v-btn',attrs,false),on),[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-connection\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Desvincular\")])]),_c('v-menu',{attrs:{\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar onMenu = ref.on;\nreturn [_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar onTooltip = ref.on;\nreturn [_c('v-btn',_vm._g({directives:[{name:\"show\",rawName:\"v-show\",value:(\n                        (_vm.canEditContact || _vm.canEditContactOthers) &&\n                          (_vm.canEditCompany(company.owner) ||\n                            _vm.canEditCompanyOthers(company.owner))\n                      ),expression:\"\\n                        (canEditContact || canEditContactOthers) &&\\n                          (canEditCompany(company.owner) ||\\n                            canEditCompanyOthers(company.owner))\\n                      \"}],attrs:{\"color\":\"secondary\",\"x-small\":\"\"},on:{\"click\":function($event){$event.stopPropagation();company.edit = true}}},Object.assign({}, onMenu, onTooltip)),[_c('v-icon',{attrs:{\"small\":\"\",\"color\":\"white\"}},[_vm._v(\"mdi-pencil\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Cambiar nombre\")])])]}}],null,true),model:{value:(company.edit),callback:function ($$v) {_vm.$set(company, \"edit\", $$v)},expression:\"company.edit\"}},[_c('v-card',{staticClass:\"pa-4\",attrs:{\"width\":\"18em\"}},[_c('v-form',{ref:(\"form-\" + index),refInFor:true,attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.isValidateFormName),callback:function ($$v) {_vm.isValidateFormName=$$v},expression:\"isValidateFormName\"}},[_c('v-text-field',{attrs:{\"label\":\"Nombre\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"auto\",\"maxlength\":\"50\",\"rules\":_vm.rules.general},model:{value:(company.name),callback:function ($$v) {_vm.$set(company, \"name\", $$v)},expression:\"company.name\"}}),_c('div',{staticClass:\"d-flex justify-center mt-1\"},[_c('v-btn',{staticClass:\"mr-2\",staticStyle:{\"width\":\"45%\"},attrs:{\"x-small\":\"\",\"color\":\"primary\",\"outlined\":\"\"},on:{\"click\":function($event){return _vm.cancelEdit(company.id)}}},[_vm._v(\" Cancelar \")]),(\n                        (_vm.canEditContact || _vm.canEditContactOthers) &&\n                          (_vm.canEditCompany(company.owner) ||\n                            _vm.canEditCompanyOthers(company.owner))\n                      )?_c('v-btn',{staticStyle:{\"width\":\"45%\"},attrs:{\"x-small\":\"\",\"color\":\"secondary\",\"loading\":_vm.isLoadingChangeName},on:{\"click\":function($event){return _vm.updateName({\n                          id: company.id,\n                          name: company.name,\n                          idx: index,\n                        })}}},[_vm._v(\" Guardar \")]):_vm._e()],1)],1)],1)],1)],1)],1)]})],2),_c('BaseModalError',{attrs:{\"modalHandler\":_vm.modalError},on:{\"close\":_vm.modalHandlerError}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card tile flat>\n    <v-divider />\n    <v-card-title class=\"companies-title py-1\">\n      <v-icon class=\"mr-4\">mdi-domain</v-icon>\n      Empresas\n      <v-spacer></v-spacer>\n      <v-menu\n        v-model=\"isShowAddCompany\"\n        class=\"mt-2\"\n        :close-on-content-click=\"false\"\n      >\n        <template v-slot:activator=\"{ on }\">\n          <v-btn\n            v-show=\"(canEditContact || canEditContactOthers) && !item.isDelete\"\n            icon\n            v-on=\"on\"\n            @click=\"isShowAddCompany = !isShowAddCompany\"\n          >\n            <v-icon>mdi-plus</v-icon>\n          </v-btn>\n        </template>\n        <v-card class=\"pa-4\" width=\"18em\">\n          <v-form ref=\"formCompany\">\n            <FieldSelectCompanySimple\n              :inputProps=\"{ class: 'no-icon full-width', isDense: true }\"\n              :resetHandler=\"isShowAddCompany\"\n              @outData=\"updateCompany\"\n              @deleteData=\"deleteCompany\"\n            />\n          </v-form>\n          <div class=\"d-flex justify-center pt-2 ml-2\">\n            <v-btn\n              style=\"width:45%\"\n              class=\"mr-2\"\n              outlined\n              color=\"primary\"\n              small\n              @click=\"cancel\"\n            >\n              Cancelar\n            </v-btn>\n            <v-btn\n              style=\"width:45%\"\n              v-if=\"(canEditContact || canEditContactOthers) && !item.isDelete\"\n              color=\"secondary\"\n              small\n              @click=\"addCompany\"\n              :loading=\"isLoading\"\n              :disabled=\"disabledAddButton\"\n            >\n              Guardar\n            </v-btn>\n          </div>\n        </v-card>\n      </v-menu>\n    </v-card-title>\n    <v-divider></v-divider>\n    <v-card-text class=\"pa-0\">\n      <v-card flat max-height=\"20em\" class=\"companies-container\">\n        <div v-if=\"companiesSelected.length === 0\" class=\"pa-10\">\n          <span>\n            No tiene empresas\n          </span>\n        </div>\n        <template v-else v-for=\"(company, index) in listCompanies\">\n          <v-list-item class=\"Company\" :key=\"company.id\" outlined>\n            <v-list-item-content>\n              <v-list-item-title class=\"Company__title\">\n                <template>\n                  <div class=\"Company__box\" @click=\"goCompany(company.id)\">\n                    <v-icon class=\"pb-1\">mdi-domain</v-icon>\n                    <span class=\"Company__box_name\">\n                      {{ company.name }}\n                    </span>\n                  </div>\n                </template>\n              </v-list-item-title>\n            </v-list-item-content>\n            <v-list-item-action class=\"Company__edit mt-4\">\n              <v-tooltip bottom>\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn\n                    v-show=\"canEditContact || canEditContactOthers\"\n                    x-small\n                    class=\"mr-2\"\n                    @click.stop=\"disconnectCompany(company.id)\"\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                    :loading=\"isLoadingRemove\"\n                    color=\"grey\"\n                    outlined\n                  >\n                    <v-icon small>mdi-connection</v-icon>\n                  </v-btn>\n                </template>\n                <span>Desvincular</span>\n              </v-tooltip>\n\n              <v-menu v-model=\"company.edit\" :close-on-content-click=\"false\">\n                <template v-slot:activator=\"{ on: onMenu }\">\n                  <v-tooltip bottom>\n                    <template v-slot:activator=\"{ on: onTooltip }\">\n                      <v-btn\n                        v-show=\"\n                          (canEditContact || canEditContactOthers) &&\n                            (canEditCompany(company.owner) ||\n                              canEditCompanyOthers(company.owner))\n                        \"\n                        color=\"secondary\"\n                        x-small\n                        @click.stop=\"company.edit = true\"\n                        v-on=\"{ ...onMenu, ...onTooltip }\"\n                      >\n                        <v-icon small color=\"white\">mdi-pencil</v-icon>\n                      </v-btn>\n                    </template>\n                    <span>Cambiar nombre</span>\n                  </v-tooltip>\n                </template>\n                <v-card class=\"pa-4\" width=\"18em\">\n                  <v-form\n                    :ref=\"`form-${index}`\"\n                    v-model=\"isValidateFormName\"\n                    lazy-validation\n                  >\n                    <v-text-field\n                      v-model=\"company.name\"\n                      label=\"Nombre\"\n                      dense\n                      outlined\n                      hide-details=\"auto\"\n                      maxlength=\"50\"\n                      :rules=\"rules.general\"\n                    ></v-text-field>\n\n                    <div class=\"d-flex justify-center mt-1\">\n                      <v-btn\n                        style=\"width:45%\"\n                        class=\"mr-2\"\n                        x-small\n                        color=\"primary\"\n                        outlined\n                        @click=\"cancelEdit(company.id)\"\n                      >\n                        Cancelar\n                      </v-btn>\n                      <v-btn\n                        style=\"width:45%\"\n                        v-if=\"\n                          (canEditContact || canEditContactOthers) &&\n                            (canEditCompany(company.owner) ||\n                              canEditCompanyOthers(company.owner))\n                        \"\n                        x-small\n                        color=\"secondary\"\n                        :loading=\"isLoadingChangeName\"\n                        @click=\"\n                          updateName({\n                            id: company.id,\n                            name: company.name,\n                            idx: index,\n                          })\n                        \"\n                      >\n                        Guardar\n                      </v-btn>\n                    </div>\n                  </v-form>\n                </v-card>\n              </v-menu>\n            </v-list-item-action>\n          </v-list-item>\n        </template>\n      </v-card>\n      <BaseModalError :modalHandler=\"modalError\" @close=\"modalHandlerError\" />\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { subject } from '@casl/ability';\nimport ability from '@/services/ability';\nimport { UPDATE, UPDATE_OTHERS } from '@/constants/methods';\nimport {\n  PERMISSIONS_CONTACTS,\n  PERMISSIONS_COMPANIES,\n} from '@/constants/permissions';\n// Mutations\nimport { UPDATE_COMPANY } from '@/graphql/mutations/companiesMutations';\n// Mixins\nimport { rulesMixin } from '@/mixins/rulesMixin';\nimport { contactsMixin } from '@/mixins/contactsMixin';\nimport { modalsAlertsMixin } from '@/mixins/alerts/modalsAlertsMixin';\n// Constants\nimport { GET_USER_LOGGED } from '@/graphql/local-state/queries';\n\nexport default {\n  name: 'ListCompanies',\n  components: {\n    FieldSelectCompanySimple: () =>\n      import('@/components/fields/FieldSelectCompanySimple.vue'),\n  },\n  mixins: [rulesMixin, contactsMixin, modalsAlertsMixin],\n  props: {\n    item: {\n      type: Object,\n      required: true,\n    },\n    itemId: {\n      type: String,\n      default: '',\n      required: true,\n    },\n    typeItem: {\n      type: String,\n      required: true,\n      default: 'CONTACT',\n    },\n    ownerId: {\n      type: String,\n      default: '',\n    },\n    companiesSelected: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      UPDATE,\n      UPDATE_OTHERS,\n      PERMISSIONS_CONTACTS,\n      PERMISSIONS_COMPANIES,\n      search: '',\n      company: '',\n      companies: {},\n      isLoading: false,\n      listCompanies: [],\n      isNewCompany: false,\n      isLoadingRemove: false,\n      isShowAddCompany: false,\n      isValidateFormName: true,\n      isLoadingChangeName: false,\n      companyNew: {\n        id: '',\n        name: '',\n      },\n      companyRules: [(v) => !!v || 'Debes seleccionar o crear una empresa'],\n      userCurrent: {},\n    };\n  },\n  created() {\n    // Update list companies\n    this.listCompanies = this.formatListCompanies(this.companiesSelected);\n  },\n  watch: {\n    // Update list companies\n    companiesSelected: {\n      handler(list) {\n        this.listCompanies = this.formatListCompanies(list);\n      },\n      deep: true,\n    },\n    // Control new company and assign value\n    company(value) {\n      if (value && value.id) {\n        this.isNewCompany = false;\n        this.companyNew = { id: value.id, name: '' };\n      } else if (value) {\n        this.isNewCompany = true;\n        this.companyNew = { id: '', name: value };\n      } else {\n        this.companyNew = { id: '', name: '' };\n      }\n    },\n    isLoadingUpdateContact(value) {\n      if (!value) {\n        this.isLoading = false;\n        // Reset variables\n        this.company = '';\n        if (this.isShowAddCompany) {\n          this.$refs.formCompany.reset();\n        }\n        this.isShowAddCompany = false;\n        this.isLoadingRemove = false;\n        this.companyNew = {\n          id: '',\n          name: '',\n        };\n      }\n    },\n  },\n  computed: {\n    canEditContact() {\n      if (this.typeItem === 'CONTACT') {\n        return ability.can(\n          UPDATE,\n          subject(PERMISSIONS_CONTACTS, { authorId: this.ownerId || '' }),\n        );\n      }\n      return false;\n    },\n    canEditContactOthers() {\n      if (this.typeItem === 'CONTACT') {\n        if (!this.canEditContact) {\n          return (\n            ability.can(UPDATE_OTHERS, PERMISSIONS_CONTACTS) &&\n            !ability.can(\n              UPDATE_OTHERS,\n              subject(PERMISSIONS_CONTACTS, {\n                authorId: this.ownerId || '',\n              }),\n            )\n          );\n        }\n        return ability.can(\n          UPDATE_OTHERS,\n          subject(PERMISSIONS_CONTACTS, { authorId: this.ownerId || '' }),\n        );\n      }\n      return false;\n    },\n\n    // Hide the submenu when search is empty\n    menuProps() {\n      return !this.search ? { value: false } : {};\n    },\n    disabledAddButton() {\n      if (this.companyNew.id || this.companyNew.name) return false;\n      return true;\n    },\n  },\n  methods: {\n    canEditCompany(owner) {\n      return ability.can(\n        UPDATE,\n        subject(PERMISSIONS_COMPANIES, { authorId: owner.id || '' }),\n      );\n    },\n    canEditCompanyOthers(owner) {\n      if (!this.canEditCompany(owner)) {\n        return (\n          ability.can(UPDATE_OTHERS, PERMISSIONS_COMPANIES) &&\n          !ability.can(\n            UPDATE_OTHERS,\n            subject(PERMISSIONS_COMPANIES, {\n              authorId: owner.id || '',\n            }),\n          )\n        );\n      }\n      return ability.can(\n        UPDATE,\n        subject(PERMISSIONS_COMPANIES, { authorId: owner.id || '' }),\n      );\n    },\n    updateCompany(index, value) {\n      this.companyNew = value;\n    },\n    deleteCompany() {\n      this.companyNew = {\n        id: '',\n        name: '',\n      };\n    },\n    // Format list companies\n    formatListCompanies(list) {\n      return list.map((company) => {\n        return {\n          id: company.id,\n          name: company.name,\n          edit: false,\n          owner: company.owner,\n        };\n      });\n    },\n    // Reedirect to company by ID\n    goCompany(id) {\n      if (this.$router.name !== 'company') {\n        this.$router.push({ name: 'company', params: { id } }, () => {});\n      }\n    },\n    // Cancel add company and reset\n    cancel() {\n      // Reset company new\n      this.company = '';\n      this.companyNew = {\n        id: '',\n        name: '',\n      };\n      // Hide add company\n      this.isShowAddCompany = false;\n    },\n    // Format companies to send in Mutation\n    formatCompanies(companies) {\n      return companies.map((company) => {\n        return { id: company.id };\n      });\n    },\n    // Mutation to add company\n    addCompany() {\n      if (this.canEditContact) {\n        // Is empty?\n        if (Object.keys(this.companyNew).length !== 0) {\n          // Active loading\n          this.isLoading = true;\n          // const updateCompanies = this.formatCompanies(this.companiesSelected);\n          // Update the list before with the new element\n          // updateCompanies.push(result);\n          this.updateContact({ id: this.itemId, company: this.companyNew });\n        }\n      }\n    },\n    // Remove relation contact of the company by id\n    disconnectCompany(id) {\n      if (this.canEditContact) {\n        this.isLoadingRemove = true;\n        // Assign list contact and remove the reactive\n        const listCompanies = JSON.parse(\n          JSON.stringify(this.companiesSelected),\n        );\n        // Format list contacts to save\n        const updateCompanies = this.formatCompanies(listCompanies);\n        // Get index to remove\n        const index = updateCompanies.findIndex((item) => item.id === id);\n        // Remove contact of the list\n        updateCompanies.splice(index, 1);\n        this.updateContact({\n          id: this.itemId,\n          company: { disconnect: { id } },\n        });\n      }\n    },\n    // Update name's contact\n    updateName({ id, name, idx }) {\n      if (this.canEditCompany || this.canEditCompanyOthers) {\n        // Validate array of forms with input name\n        this.$refs[`form-${idx}`][0].validate();\n        // Is valid?\n        if (this.isValidateFormName) {\n          // Active loading\n          this.isLoadingChangeName = true;\n          // Mutation to update name's contact\n          this.$apollo\n            .mutate({\n              // Query\n              mutation: UPDATE_COMPANY,\n              // Parameters\n              variables: {\n                companyInput: {\n                  id,\n                  name,\n                },\n              },\n            })\n            .then(({ data: { updateCompany } }) => {\n              this.$emit('updateContactCompany', updateCompany, idx);\n              // Desactive loading\n              this.isLoadingChangeName = false;\n              // Close specific field by id\n              // Reset validation\n              this.isValidateFormName = false;\n            })\n            .catch(() => {\n              // Desactive loading\n              this.isLoadingChangeName = false;\n              // Reset validation\n              this.isValidateFormName = false;\n              const error =\n                'No se pudo cambiar el nombre de la empresa, intente de nuevo o contacte a soporte';\n              this.modalHandlerError({ isOpen: true, error });\n            });\n        }\n      }\n    },\n    // Get index of list contact by id\n    getIndexField(id) {\n      return this.listCompanies.findIndex((company) => company.id === id);\n    },\n    // Name to search in combobox\n    text(value) {\n      return `${value.name}`;\n    },\n    // Cancel edit\n    cancelEdit(id) {\n      // Search index into list contacts\n      const index = this.getIndexField(id);\n      // Close edit\n      this.listCompanies[index].edit = false;\n      // Find the value before\n      const valueBefore = this.companiesSelected.find(\n        (companyBefore) => companyBefore.id === id,\n      ).name;\n      // Reset value to the before\n      this.listCompanies[index].name = valueBefore;\n    },\n  },\n  apollo: {\n    userCurrent: {\n      query: GET_USER_LOGGED,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '{ .Company .companies-title .companies-container } from ../../../../scss/components/list.companies';\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCompanies.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCompanies.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListCompanies.vue?vue&type=template&id=09ac20d6&scoped=true&\"\nimport script from \"./ListCompanies.vue?vue&type=script&lang=js&\"\nexport * from \"./ListCompanies.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListCompanies.vue?vue&type=style&index=0&id=09ac20d6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09ac20d6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VDivider,VForm,VIcon,VListItem,VListItemAction,VListItemContent,VListItemTitle,VMenu,VSpacer,VTextField,VTooltip})\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.es/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : regexp[SEARCH];\n      return searcher !== undefined ? searcher.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search\n    function (string) {\n      var res = maybeCallNative(nativeSearch, this, string);\n      if (res.done) return res.value;\n\n      var rx = anObject(this);\n      var S = String(string);\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCompanies.vue?vue&type=style&index=0&id=09ac20d6&lang=scss&scoped=true&\""],"sourceRoot":""}